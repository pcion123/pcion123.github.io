<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Pcion&#39;s Blog</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://pcion123.github.io/"/>
  <updated>2025-11-29T15:26:54.373Z</updated>
  <id>https://pcion123.github.io/</id>
  
  <author>
    <name>Jason Lai</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Docker Compose ç·¨å¯«æŒ‡å—</title>
    <link href="https://pcion123.github.io/2025/11/29/docker-compose-intro/"/>
    <id>https://pcion123.github.io/2025/11/29/docker-compose-intro/</id>
    <published>2025-11-29T15:18:34.000Z</published>
    <updated>2025-11-29T15:26:54.373Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Docker-Compose-ç·¨å¯«æŒ‡å—"><a href="#Docker-Compose-ç·¨å¯«æŒ‡å—" class="headerlink" title="Docker Compose ç·¨å¯«æŒ‡å—"></a>Docker Compose ç·¨å¯«æŒ‡å—</h1><h2 id="ä»€éº¼æ˜¯-Docker-Composeï¼Ÿ"><a href="#ä»€éº¼æ˜¯-Docker-Composeï¼Ÿ" class="headerlink" title="ä»€éº¼æ˜¯ Docker Composeï¼Ÿ"></a>ä»€éº¼æ˜¯ Docker Composeï¼Ÿ</h2><p>Docker Compose æ˜¯ä¸€å€‹ç”¨æ–¼å®šç¾©å’Œç®¡ç†å¤šå®¹å™¨ Docker æ‡‰ç”¨ç¨‹å¼çš„å·¥å…·ã€‚é€é YAML æª”æ¡ˆä¾†é…ç½®æ‡‰ç”¨ç¨‹å¼çš„æœå‹™ã€ç¶²è·¯å’Œè³‡æ–™å·ï¼Œè®“æ‚¨å¯ä»¥ç”¨å–®ä¸€å‘½ä»¤ä¾†å»ºç«‹å’Œå•Ÿå‹•æ‰€æœ‰ç›¸é—œçš„æœå‹™ã€‚</p><h3 id="Docker-Compose-çš„å„ªå‹¢"><a href="#Docker-Compose-çš„å„ªå‹¢" class="headerlink" title="Docker Compose çš„å„ªå‹¢"></a>Docker Compose çš„å„ªå‹¢</h3><ul><li><strong>ç°¡åŒ–å¤šå®¹å™¨ç®¡ç†</strong>ï¼šç”¨ä¸€å€‹æª”æ¡ˆå®šç¾©æ•´å€‹æ‡‰ç”¨ç¨‹å¼æ¶æ§‹</li><li><strong>ç’°å¢ƒä¸€è‡´æ€§</strong>ï¼šç¢ºä¿é–‹ç™¼ã€æ¸¬è©¦ã€ç”Ÿç”¢ç’°å¢ƒçš„ä¸€è‡´æ€§</li><li><strong>å¿«é€Ÿéƒ¨ç½²</strong>ï¼šä¸€éµå•Ÿå‹•æ•´å€‹æ‡‰ç”¨ç¨‹å¼å †ç–Š</li><li><strong>æœå‹™ç·¨æ’</strong>ï¼šè¼•é¬†ç®¡ç†æœå‹™é–“çš„ä¾è³´é—œä¿‚</li><li><strong>å¯é‡ç¾æ€§</strong>ï¼šç‰ˆæœ¬æ§åˆ¶å‹å¥½ï¼Œä¾¿æ–¼åœ˜éšŠå”ä½œ</li></ul><h3 id="ä½¿ç”¨å ´æ™¯"><a href="#ä½¿ç”¨å ´æ™¯" class="headerlink" title="ä½¿ç”¨å ´æ™¯"></a>ä½¿ç”¨å ´æ™¯</h3><ul><li><strong>å¾®æœå‹™æ¶æ§‹</strong>ï¼šç®¡ç†å¤šå€‹ç›¸äº’ä¾è³´çš„æœå‹™</li><li><strong>é–‹ç™¼ç’°å¢ƒ</strong>ï¼šå¿«é€Ÿæ­å»ºå®Œæ•´çš„é–‹ç™¼ç’°å¢ƒ</li><li><strong>æ¸¬è©¦ç’°å¢ƒ</strong>ï¼šå‰µå»ºéš”é›¢çš„æ¸¬è©¦ç’°å¢ƒ</li><li><strong>CI&#x2F;CD æµç¨‹</strong>ï¼šè‡ªå‹•åŒ–éƒ¨ç½²å’Œæ¸¬è©¦</li></ul><span id="more"></span><hr><h2 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h2><h3 id="æ ¸å¿ƒçµ„ä»¶"><a href="#æ ¸å¿ƒçµ„ä»¶" class="headerlink" title="æ ¸å¿ƒçµ„ä»¶"></a>æ ¸å¿ƒçµ„ä»¶</h3><ul><li><strong>Servicesï¼ˆæœå‹™ï¼‰</strong>ï¼šå®šç¾©å®¹å™¨çš„é…ç½®ï¼ŒåŒ…æ‹¬æ˜ åƒæª”ã€ç«¯å£ã€ç’°å¢ƒè®Šæ•¸ç­‰</li><li><strong>Networksï¼ˆç¶²è·¯ï¼‰</strong>ï¼šç®¡ç†å®¹å™¨é–“çš„ç¶²è·¯é€šè¨Š</li><li><strong>Volumesï¼ˆè³‡æ–™å·ï¼‰</strong>ï¼šè™•ç†è³‡æ–™æŒä¹…åŒ–å’Œå…±äº«</li></ul><h3 id="æª”æ¡ˆçµæ§‹"><a href="#æª”æ¡ˆçµæ§‹" class="headerlink" title="æª”æ¡ˆçµæ§‹"></a>æª”æ¡ˆçµæ§‹</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3.8&#x27;</span>      <span class="comment"># Compose æª”æ¡ˆç‰ˆæœ¬</span></span><br><span class="line"><span class="attr">services:</span>           <span class="comment"># æœå‹™å®šç¾©</span></span><br><span class="line">  <span class="attr">service1:</span></span><br><span class="line">    <span class="comment"># æœå‹™é…ç½®</span></span><br><span class="line"><span class="attr">networks:</span>           <span class="comment"># ç¶²è·¯å®šç¾©ï¼ˆå¯é¸ï¼‰</span></span><br><span class="line">  <span class="comment"># ç¶²è·¯é…ç½®</span></span><br><span class="line"><span class="attr">volumes:</span>            <span class="comment"># è³‡æ–™å·å®šç¾©ï¼ˆå¯é¸ï¼‰</span></span><br><span class="line">  <span class="comment"># è³‡æ–™å·é…ç½®</span></span><br></pre></td></tr></table></figure><hr><h2 id="å®Œæ•´ç¯„ä¾‹ï¼šSpring-Boot-æ‡‰ç”¨ç¨‹å¼"><a href="#å®Œæ•´ç¯„ä¾‹ï¼šSpring-Boot-æ‡‰ç”¨ç¨‹å¼" class="headerlink" title="å®Œæ•´ç¯„ä¾‹ï¼šSpring Boot æ‡‰ç”¨ç¨‹å¼"></a>å®Œæ•´ç¯„ä¾‹ï¼šSpring Boot æ‡‰ç”¨ç¨‹å¼</h2><p>ä»¥ä¸‹æ˜¯ä¸€å€‹ Spring Boot æ‡‰ç”¨ç¨‹å¼çš„ Docker Compose é…ç½®ç¯„ä¾‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3.8&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">dockertest:</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">.</span></span><br><span class="line">      <span class="attr">dockerfile:</span> <span class="string">Dockerfile</span></span><br><span class="line">      <span class="attr">args:</span></span><br><span class="line">        <span class="attr">MAVEN_PROFILE:</span> <span class="string">dev</span></span><br><span class="line">        <span class="attr">SPRING_PROFILE:</span> <span class="string">dev</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">dockertest:latest</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">dockertest-dev</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;80:8080&quot;</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">SPRING_PROFILES_ACTIVE=dev</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">JAVA_OPTS=-Xmx512m</span> <span class="string">-Xms256m</span> <span class="string">-Dspring.profiles.active=dev</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="comment"># ä½¿ç”¨ named volume é¿å…æ¬Šé™å•é¡Œ</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">dev-logs:/app/logs</span></span><br><span class="line">    <span class="attr">healthcheck:</span></span><br><span class="line">      <span class="attr">test:</span> [<span class="string">&quot;CMD&quot;</span>, <span class="string">&quot;curl&quot;</span>, <span class="string">&quot;-f&quot;</span>, <span class="string">&quot;http://localhost:8080/actuator/health&quot;</span>]</span><br><span class="line">      <span class="attr">interval:</span> <span class="string">30s</span></span><br><span class="line">      <span class="attr">timeout:</span> <span class="string">10s</span></span><br><span class="line">      <span class="attr">retries:</span> <span class="number">3</span></span><br><span class="line">      <span class="attr">start_period:</span> <span class="string">60s</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">unless-stopped</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">app-network</span></span><br><span class="line"></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">  <span class="attr">app-network:</span></span><br><span class="line">    <span class="attr">driver:</span> <span class="string">bridge</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Named volume for development logs</span></span><br><span class="line"><span class="attr">volumes:</span></span><br><span class="line">  <span class="attr">dev-logs:</span></span><br><span class="line">    <span class="attr">driver:</span> <span class="string">local</span></span><br></pre></td></tr></table></figure><h3 id="é…ç½®è©³è§£"><a href="#é…ç½®è©³è§£" class="headerlink" title="é…ç½®è©³è§£"></a>é…ç½®è©³è§£</h3><h4 id="1-ç‰ˆæœ¬è²æ˜"><a href="#1-ç‰ˆæœ¬è²æ˜" class="headerlink" title="1. ç‰ˆæœ¬è²æ˜"></a>1. ç‰ˆæœ¬è²æ˜</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3.8&#x27;</span></span><br></pre></td></tr></table></figure><ul><li><strong>ç›®çš„</strong>ï¼šæŒ‡å®š Docker Compose æª”æ¡ˆæ ¼å¼ç‰ˆæœ¬</li><li><strong>å»ºè­°</strong>ï¼šä½¿ç”¨ 3.8 æˆ–æ›´æ–°ç‰ˆæœ¬ä»¥æ”¯æ´æœ€æ–°åŠŸèƒ½</li></ul><h4 id="2-æœå‹™æ§‹å»ºé…ç½®"><a href="#2-æœå‹™æ§‹å»ºé…ç½®" class="headerlink" title="2. æœå‹™æ§‹å»ºé…ç½®"></a>2. æœå‹™æ§‹å»ºé…ç½®</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">build:</span></span><br><span class="line">  <span class="attr">context:</span> <span class="string">.</span></span><br><span class="line">  <span class="attr">dockerfile:</span> <span class="string">Dockerfile</span></span><br><span class="line">  <span class="attr">args:</span></span><br><span class="line">    <span class="attr">MAVEN_PROFILE:</span> <span class="string">dev</span></span><br><span class="line">    <span class="attr">SPRING_PROFILE:</span> <span class="string">dev</span></span><br></pre></td></tr></table></figure><ul><li><strong>context</strong>ï¼šå»ºæ§‹ä¸Šä¸‹æ–‡è·¯å¾‘</li><li><strong>dockerfile</strong>ï¼šæŒ‡å®š Dockerfile æª”æ¡ˆ</li><li><strong>args</strong>ï¼šå‚³éå»ºæ§‹åƒæ•¸</li></ul><h4 id="3-ç«¯å£æ˜ å°„"><a href="#3-ç«¯å£æ˜ å°„" class="headerlink" title="3. ç«¯å£æ˜ å°„"></a>3. ç«¯å£æ˜ å°„</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">ports:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;80:8080&quot;</span></span><br></pre></td></tr></table></figure><ul><li><strong>æ ¼å¼</strong>ï¼š<code>&quot;ä¸»æ©Ÿç«¯å£:å®¹å™¨ç«¯å£&quot;</code></li><li><strong>ç”¨é€”</strong>ï¼šè®“å¤–éƒ¨å¯ä»¥å­˜å–å®¹å™¨å…§çš„æœå‹™</li></ul><h4 id="4-ç’°å¢ƒè®Šæ•¸"><a href="#4-ç’°å¢ƒè®Šæ•¸" class="headerlink" title="4. ç’°å¢ƒè®Šæ•¸"></a>4. ç’°å¢ƒè®Šæ•¸</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">environment:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">SPRING_PROFILES_ACTIVE=dev</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">JAVA_OPTS=-Xmx512m</span> <span class="string">-Xms256m</span></span><br></pre></td></tr></table></figure><ul><li><strong>æ ¼å¼ä¸€</strong>ï¼šåˆ—è¡¨æ ¼å¼ <code>- KEY=VALUE</code></li><li><strong>æ ¼å¼äºŒ</strong>ï¼šå­—å…¸æ ¼å¼ <code>KEY: VALUE</code></li></ul><h4 id="5-è³‡æ–™å·æ›è¼‰"><a href="#5-è³‡æ–™å·æ›è¼‰" class="headerlink" title="5. è³‡æ–™å·æ›è¼‰"></a>5. è³‡æ–™å·æ›è¼‰</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">volumes:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">dev-logs:/app/logs</span>                    <span class="comment"># Named volume</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">./config:/app/config:ro</span>               <span class="comment"># Bind mount (å”¯è®€)</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">/var/run/docker.sock:/var/run/docker.sock</span>  <span class="comment"># Socket æ›è¼‰</span></span><br></pre></td></tr></table></figure><h4 id="6-å¥åº·æª¢æŸ¥"><a href="#6-å¥åº·æª¢æŸ¥" class="headerlink" title="6. å¥åº·æª¢æŸ¥"></a>6. å¥åº·æª¢æŸ¥</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">healthcheck:</span></span><br><span class="line">  <span class="attr">test:</span> [<span class="string">&quot;CMD&quot;</span>, <span class="string">&quot;curl&quot;</span>, <span class="string">&quot;-f&quot;</span>, <span class="string">&quot;http://localhost:8080/actuator/health&quot;</span>]</span><br><span class="line">  <span class="attr">interval:</span> <span class="string">30s</span></span><br><span class="line">  <span class="attr">timeout:</span> <span class="string">10s</span></span><br><span class="line">  <span class="attr">retries:</span> <span class="number">3</span></span><br><span class="line">  <span class="attr">start_period:</span> <span class="string">60s</span></span><br></pre></td></tr></table></figure><h4 id="7-é‡å•Ÿç­–ç•¥"><a href="#7-é‡å•Ÿç­–ç•¥" class="headerlink" title="7. é‡å•Ÿç­–ç•¥"></a>7. é‡å•Ÿç­–ç•¥</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">restart:</span> <span class="string">unless-stopped</span></span><br></pre></td></tr></table></figure><ul><li><strong>no</strong>ï¼šä¸è‡ªå‹•é‡å•Ÿï¼ˆé è¨­ï¼‰</li><li><strong>always</strong>ï¼šç¸½æ˜¯é‡å•Ÿ</li><li><strong>on-failure</strong>ï¼šå¤±æ•—æ™‚é‡å•Ÿ</li><li><strong>unless-stopped</strong>ï¼šé™¤éæ‰‹å‹•åœæ­¢ï¼Œå¦å‰‡ç¸½æ˜¯é‡å•Ÿ</li></ul><h4 id="8-ç¶²è·¯é…ç½®"><a href="#8-ç¶²è·¯é…ç½®" class="headerlink" title="8. ç¶²è·¯é…ç½®"></a>8. ç¶²è·¯é…ç½®</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">networks:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">app-network</span></span><br></pre></td></tr></table></figure><ul><li><strong>åŠŸèƒ½</strong>ï¼šå°‡æœå‹™åŠ å…¥æŒ‡å®šç¶²è·¯</li><li><strong>ç”¨é€”</strong>ï¼šå¯¦ç¾æœå‹™é–“çš„ç¶²è·¯éš”é›¢å’Œé€šè¨Šç®¡ç†</li></ul><hr><h2 id="å¸¸ç”¨é…ç½®é¸é …"><a href="#å¸¸ç”¨é…ç½®é¸é …" class="headerlink" title="å¸¸ç”¨é…ç½®é¸é …"></a>å¸¸ç”¨é…ç½®é¸é …</h2><h3 id="æœå‹™é…ç½®"><a href="#æœå‹™é…ç½®" class="headerlink" title="æœå‹™é…ç½®"></a>æœå‹™é…ç½®</h3><table><thead><tr><th>é¸é …</th><th>åŠŸèƒ½</th><th>ç¯„ä¾‹</th></tr></thead><tbody><tr><td><code>image</code></td><td>æŒ‡å®šæ˜ åƒæª”</td><td><code>image: nginx:latest</code></td></tr><tr><td><code>build</code></td><td>å»ºæ§‹é…ç½®</td><td><code>build: .</code></td></tr><tr><td><code>ports</code></td><td>ç«¯å£æ˜ å°„</td><td><code>ports: [&quot;80:8080&quot;]</code></td></tr><tr><td><code>environment</code></td><td>ç’°å¢ƒè®Šæ•¸</td><td><code>environment: NODE_ENV=production</code></td></tr><tr><td><code>volumes</code></td><td>è³‡æ–™å·æ›è¼‰</td><td><code>volumes: [&quot;./data:/app/data&quot;]</code></td></tr><tr><td><code>networks</code></td><td>ç¶²è·¯é…ç½®</td><td><code>networks: [&quot;app-net&quot;]</code></td></tr><tr><td><code>depends_on</code></td><td>æœå‹™ä¾è³´</td><td><code>depends_on: [&quot;db&quot;]</code></td></tr><tr><td><code>restart</code></td><td>é‡å•Ÿç­–ç•¥</td><td><code>restart: always</code></td></tr><tr><td><code>command</code></td><td>è¦†å¯«å‘½ä»¤</td><td><code>command: nginx -g &#39;daemon off;&#39;</code></td></tr><tr><td><code>entrypoint</code></td><td>è¦†å¯«å…¥å£é»</td><td><code>entrypoint: /app/start.sh</code></td></tr></tbody></table><h3 id="ç¶²è·¯é¡å‹"><a href="#ç¶²è·¯é¡å‹" class="headerlink" title="ç¶²è·¯é¡å‹"></a>ç¶²è·¯é¡å‹</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">networks:</span></span><br><span class="line">  <span class="attr">frontend:</span></span><br><span class="line">    <span class="attr">driver:</span> <span class="string">bridge</span></span><br><span class="line">  <span class="attr">backend:</span></span><br><span class="line">    <span class="attr">driver:</span> <span class="string">bridge</span></span><br><span class="line">    <span class="attr">internal:</span> <span class="literal">true</span>  <span class="comment"># å…§éƒ¨ç¶²è·¯ï¼Œç„¡æ³•å­˜å–å¤–éƒ¨</span></span><br><span class="line">  <span class="attr">overlay-net:</span></span><br><span class="line">    <span class="attr">driver:</span> <span class="string">overlay</span>  <span class="comment"># ç”¨æ–¼ Swarm æ¨¡å¼</span></span><br></pre></td></tr></table></figure><h3 id="è³‡æ–™å·é¡å‹"><a href="#è³‡æ–™å·é¡å‹" class="headerlink" title="è³‡æ–™å·é¡å‹"></a>è³‡æ–™å·é¡å‹</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">volumes:</span></span><br><span class="line">  <span class="comment"># Named volume</span></span><br><span class="line">  <span class="attr">mysql-data:</span></span><br><span class="line">    <span class="attr">driver:</span> <span class="string">local</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># NFS volume</span></span><br><span class="line">  <span class="attr">nfs-data:</span></span><br><span class="line">    <span class="attr">driver:</span> <span class="string">local</span></span><br><span class="line">    <span class="attr">driver_opts:</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">nfs</span></span><br><span class="line">      <span class="attr">o:</span> <span class="string">addr=192.168.1.100,rw</span></span><br><span class="line">      <span class="attr">device:</span> <span class="string">&quot;:/path/to/dir&quot;</span></span><br></pre></td></tr></table></figure><hr><h2 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h2><h3 id="åŸºæœ¬æ“ä½œ"><a href="#åŸºæœ¬æ“ä½œ" class="headerlink" title="åŸºæœ¬æ“ä½œ"></a>åŸºæœ¬æ“ä½œ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å•Ÿå‹•æœå‹™ï¼ˆèƒŒæ™¯åŸ·è¡Œï¼‰</span></span><br><span class="line">docker-compose up -d</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹æœå‹™ç‹€æ…‹</span></span><br><span class="line">docker-compose ps</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹æœå‹™æ—¥èªŒ</span></span><br><span class="line">docker-compose logs</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ç‰¹å®šæœå‹™æ—¥èªŒ</span></span><br><span class="line">docker-compose logs dockertest</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœæ­¢æœå‹™</span></span><br><span class="line">docker-compose stop</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœæ­¢ä¸¦åˆªé™¤å®¹å™¨</span></span><br><span class="line">docker-compose down</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœæ­¢ä¸¦åˆªé™¤å®¹å™¨ã€ç¶²è·¯ã€è³‡æ–™å·</span></span><br><span class="line">docker-compose down -v</span><br></pre></td></tr></table></figure><h3 id="å»ºæ§‹å’Œæ›´æ–°"><a href="#å»ºæ§‹å’Œæ›´æ–°" class="headerlink" title="å»ºæ§‹å’Œæ›´æ–°"></a>å»ºæ§‹å’Œæ›´æ–°</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å»ºæ§‹æ˜ åƒæª”</span></span><br><span class="line">docker-compose build</span><br><span class="line"></span><br><span class="line"><span class="comment"># å»ºæ§‹ç‰¹å®šæœå‹™</span></span><br><span class="line">docker-compose build dockertest</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¼·åˆ¶é‡æ–°å»ºæ§‹</span></span><br><span class="line">docker-compose build --no-cache</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‹‰å–æœ€æ–°æ˜ åƒæª”</span></span><br><span class="line">docker-compose pull</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡å•Ÿæœå‹™</span></span><br><span class="line">docker-compose restart dockertest</span><br></pre></td></tr></table></figure><h3 id="æ“´å±•å’Œç®¡ç†"><a href="#æ“´å±•å’Œç®¡ç†" class="headerlink" title="æ“´å±•å’Œç®¡ç†"></a>æ“´å±•å’Œç®¡ç†</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ“´å±•æœå‹™å¯¦ä¾‹</span></span><br><span class="line">docker-compose up -d --scale web=3</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŸ·è¡Œä¸€æ¬¡æ€§å‘½ä»¤</span></span><br><span class="line">docker-compose <span class="built_in">exec</span> dockertest bash</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨æ–°å®¹å™¨ä¸­åŸ·è¡Œå‘½ä»¤</span></span><br><span class="line">docker-compose run dockertest python manage.py migrate</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹é…ç½®</span></span><br><span class="line">docker-compose config</span><br><span class="line"></span><br><span class="line"><span class="comment"># é©—è­‰é…ç½®æª”æ¡ˆ</span></span><br><span class="line">docker-compose config --quiet</span><br></pre></td></tr></table></figure><hr><h2 id="ç’°å¢ƒç®¡ç†"><a href="#ç’°å¢ƒç®¡ç†" class="headerlink" title="ç’°å¢ƒç®¡ç†"></a>ç’°å¢ƒç®¡ç†</h2><h3 id="å¤šç’°å¢ƒé…ç½®"><a href="#å¤šç’°å¢ƒé…ç½®" class="headerlink" title="å¤šç’°å¢ƒé…ç½®"></a>å¤šç’°å¢ƒé…ç½®</h3><p><strong>åŸºç¤é…ç½®ï¼šdocker-compose.yml</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3.8&#x27;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">app:</span></span><br><span class="line">    <span class="attr">build:</span> <span class="string">.</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">NODE_ENV=$&#123;NODE_ENV:-development&#125;</span></span><br></pre></td></tr></table></figure><p><strong>é–‹ç™¼ç’°å¢ƒï¼šdocker-compose.override.yml</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3.8&#x27;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">app:</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">.:/app</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;3000:3000&quot;</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">DEBUG=true</span></span><br></pre></td></tr></table></figure><p><strong>ç”Ÿç”¢ç’°å¢ƒï¼šdocker-compose.prod.yml</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3.8&#x27;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">app:</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">NODE_ENV=production</span></span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨ç‰¹å®šé…ç½®æª”æ¡ˆ"><a href="#ä½¿ç”¨ç‰¹å®šé…ç½®æª”æ¡ˆ" class="headerlink" title="ä½¿ç”¨ç‰¹å®šé…ç½®æª”æ¡ˆ"></a>ä½¿ç”¨ç‰¹å®šé…ç½®æª”æ¡ˆ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨ç”Ÿç”¢ç’°å¢ƒé…ç½®</span></span><br><span class="line">docker-compose -f docker-compose.yml -f docker-compose.prod.yml up -d</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨é–‹ç™¼ç’°å¢ƒé…ç½®ï¼ˆå•Ÿå‹•æœå‹™ï¼‰</span></span><br><span class="line">docker compose -f docker-compose.dev.yml up -d</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨é–‹ç™¼ç’°å¢ƒé…ç½®ï¼ˆåœæ­¢ä¸¦æ¸…ç†ï¼‰</span></span><br><span class="line">docker compose -f docker-compose.dev.yml down -v</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨ç’°å¢ƒè®Šæ•¸æª”æ¡ˆ</span></span><br><span class="line">docker-compose --env-file .env.prod up -d</span><br></pre></td></tr></table></figure><p><strong>å‘½ä»¤èªªæ˜ï¼š</strong></p><ul><li><code>-f</code>ï¼šæŒ‡å®šä½¿ç”¨çš„ Docker Compose æª”æ¡ˆ</li><li><code>up -d</code>ï¼šèƒŒæ™¯å•Ÿå‹•æœå‹™</li><li><code>down -v</code>ï¼šåœæ­¢æœå‹™ä¸¦åˆªé™¤ç›¸é—œçš„è³‡æ–™å·</li><li>å¯ä»¥åŒæ™‚æŒ‡å®šå¤šå€‹é…ç½®æª”æ¡ˆï¼Œå¾Œé¢çš„æœƒè¦†è“‹å‰é¢çš„è¨­å®š</li></ul><h3 id="ç’°å¢ƒè®Šæ•¸æª”æ¡ˆ-env"><a href="#ç’°å¢ƒè®Šæ•¸æª”æ¡ˆ-env" class="headerlink" title="ç’°å¢ƒè®Šæ•¸æª”æ¡ˆ (.env)"></a>ç’°å¢ƒè®Šæ•¸æª”æ¡ˆ (.env)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># .env</span></span><br><span class="line">COMPOSE_PROJECT_NAME=myapp</span><br><span class="line">POSTGRES_PASSWORD=secretpassword</span><br><span class="line">APP_VERSION=1.0.0</span><br></pre></td></tr></table></figure><hr><h2 id="æœ€ä½³å¯¦è¸"><a href="#æœ€ä½³å¯¦è¸" class="headerlink" title="æœ€ä½³å¯¦è¸"></a>æœ€ä½³å¯¦è¸</h2><h3 id="1-æª”æ¡ˆçµ„ç¹”"><a href="#1-æª”æ¡ˆçµ„ç¹”" class="headerlink" title="1. æª”æ¡ˆçµ„ç¹”"></a>1. æª”æ¡ˆçµ„ç¹”</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">project/</span><br><span class="line">â”œâ”€â”€ docker-compose.yml          # åŸºç¤é…ç½®</span><br><span class="line">â”œâ”€â”€ docker-compose.override.yml # é–‹ç™¼ç’°å¢ƒè¦†è“‹</span><br><span class="line">â”œâ”€â”€ docker-compose.prod.yml     # ç”Ÿç”¢ç’°å¢ƒé…ç½®</span><br><span class="line">â”œâ”€â”€ docker-compose.test.yml     # æ¸¬è©¦ç’°å¢ƒé…ç½®</span><br><span class="line">â”œâ”€â”€ .env                        # ç’°å¢ƒè®Šæ•¸</span><br><span class="line">â”œâ”€â”€ .env.example               # ç’°å¢ƒè®Šæ•¸ç¯„ä¾‹</span><br><span class="line">â””â”€â”€ dockerfiles/               # è‡ªå®šç¾© Dockerfile</span><br><span class="line">    â”œâ”€â”€ app.Dockerfile</span><br><span class="line">    â””â”€â”€ nginx.Dockerfile</span><br></pre></td></tr></table></figure><h3 id="2-å®‰å…¨æ€§è€ƒé‡"><a href="#2-å®‰å…¨æ€§è€ƒé‡" class="headerlink" title="2. å®‰å…¨æ€§è€ƒé‡"></a>2. å®‰å…¨æ€§è€ƒé‡</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨é root ä½¿ç”¨è€…</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">app:</span></span><br><span class="line">    <span class="attr">user:</span> <span class="string">&quot;1001:1001&quot;</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># é™åˆ¶å®¹å™¨æ¬Šé™</span></span><br><span class="line">    <span class="attr">cap_drop:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ALL</span></span><br><span class="line">    <span class="attr">cap_add:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">NET_BIND_SERVICE</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨ secrets ç®¡ç†æ•æ„Ÿè³‡æ–™</span></span><br><span class="line"><span class="attr">secrets:</span></span><br><span class="line">  <span class="attr">db_password:</span></span><br><span class="line">    <span class="attr">file:</span> <span class="string">./secrets/db_password.txt</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">app:</span></span><br><span class="line">    <span class="attr">secrets:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">db_password</span></span><br></pre></td></tr></table></figure><h3 id="3-è³‡æºé™åˆ¶"><a href="#3-è³‡æºé™åˆ¶" class="headerlink" title="3. è³‡æºé™åˆ¶"></a>3. è³‡æºé™åˆ¶</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">app:</span></span><br><span class="line">    <span class="attr">deploy:</span></span><br><span class="line">      <span class="attr">resources:</span></span><br><span class="line">        <span class="attr">limits:</span></span><br><span class="line">          <span class="attr">memory:</span> <span class="string">512M</span></span><br><span class="line">          <span class="attr">cpus:</span> <span class="string">&#x27;0.5&#x27;</span></span><br><span class="line">        <span class="attr">reservations:</span></span><br><span class="line">          <span class="attr">memory:</span> <span class="string">256M</span></span><br><span class="line">          <span class="attr">cpus:</span> <span class="string">&#x27;0.25&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="4-å¥åº·æª¢æŸ¥"><a href="#4-å¥åº·æª¢æŸ¥" class="headerlink" title="4. å¥åº·æª¢æŸ¥"></a>4. å¥åº·æª¢æŸ¥</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">web:</span></span><br><span class="line">    <span class="attr">healthcheck:</span></span><br><span class="line">      <span class="attr">test:</span> [<span class="string">&quot;CMD&quot;</span>, <span class="string">&quot;curl&quot;</span>, <span class="string">&quot;-f&quot;</span>, <span class="string">&quot;http://localhost:8080/health&quot;</span>]</span><br><span class="line">      <span class="attr">interval:</span> <span class="string">1m30s</span></span><br><span class="line">      <span class="attr">timeout:</span> <span class="string">10s</span></span><br><span class="line">      <span class="attr">retries:</span> <span class="number">3</span></span><br><span class="line">      <span class="attr">start_period:</span> <span class="string">40s</span></span><br></pre></td></tr></table></figure><hr><h2 id="æ•…éšœæ’é™¤"><a href="#æ•…éšœæ’é™¤" class="headerlink" title="æ•…éšœæ’é™¤"></a>æ•…éšœæ’é™¤</h2><h3 id="å¸¸è¦‹å•é¡Œ"><a href="#å¸¸è¦‹å•é¡Œ" class="headerlink" title="å¸¸è¦‹å•é¡Œ"></a>å¸¸è¦‹å•é¡Œ</h3><p><strong>Q1: æœå‹™ç„¡æ³•å•Ÿå‹•ï¼Ÿ</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æª¢æŸ¥é…ç½®èªæ³•</span></span><br><span class="line">docker-compose config</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹è©³ç´°éŒ¯èª¤ä¿¡æ¯</span></span><br><span class="line">docker-compose up --no-deps service-name</span><br><span class="line"></span><br><span class="line"><span class="comment"># æª¢æŸ¥æœå‹™æ—¥èªŒ</span></span><br><span class="line">docker-compose logs service-name</span><br></pre></td></tr></table></figure><p><strong>Q2: ç«¯å£è¡çªï¼Ÿ</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹ç«¯å£ä½¿ç”¨æƒ…æ³</span></span><br><span class="line">netstat -tulpn | grep :8080</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹ç«¯å£æ˜ å°„</span></span><br><span class="line">ports:</span><br><span class="line">  - <span class="string">&quot;8081:8080&quot;</span>  <span class="comment"># æ”¹ç”¨å…¶ä»–ä¸»æ©Ÿç«¯å£</span></span><br></pre></td></tr></table></figure><p><strong>Q3: è³‡æ–™éºå¤±ï¼Ÿ</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨ named volumes ç¢ºä¿è³‡æ–™æŒä¹…åŒ–</span></span><br><span class="line"><span class="attr">volumes:</span></span><br><span class="line">  <span class="attr">postgres-data:</span></span><br><span class="line">    <span class="attr">driver:</span> <span class="string">local</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">db:</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">postgres-data:/var/lib/postgresql/data</span></span><br></pre></td></tr></table></figure><h3 id="é™¤éŒ¯æŠ€å·§"><a href="#é™¤éŒ¯æŠ€å·§" class="headerlink" title="é™¤éŒ¯æŠ€å·§"></a>é™¤éŒ¯æŠ€å·§</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é€²å…¥å®¹å™¨é€²è¡Œé™¤éŒ¯</span></span><br><span class="line">docker-compose <span class="built_in">exec</span> service-name bash</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹å®¹å™¨å…§ç¨‹åº</span></span><br><span class="line">docker-compose <span class="built_in">exec</span> service-name ps aux</span><br><span class="line"></span><br><span class="line"><span class="comment"># æª¢æŸ¥ç¶²è·¯é€£æ¥</span></span><br><span class="line">docker-compose <span class="built_in">exec</span> service-name ping other-service</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ç’°å¢ƒè®Šæ•¸</span></span><br><span class="line">docker-compose <span class="built_in">exec</span> service-name <span class="built_in">env</span></span><br></pre></td></tr></table></figure><hr><h2 id="é€²éšé…ç½®"><a href="#é€²éšé…ç½®" class="headerlink" title="é€²éšé…ç½®"></a>é€²éšé…ç½®</h2><h3 id="æ—¥èªŒç®¡ç†"><a href="#æ—¥èªŒç®¡ç†" class="headerlink" title="æ—¥èªŒç®¡ç†"></a>æ—¥èªŒç®¡ç†</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3.8&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">dockertest:</span></span><br><span class="line">    <span class="attr">build:</span> <span class="string">.</span></span><br><span class="line">    <span class="attr">logging:</span></span><br><span class="line">      <span class="attr">driver:</span> <span class="string">&quot;json-file&quot;</span></span><br><span class="line">      <span class="attr">options:</span></span><br><span class="line">        <span class="attr">max-size:</span> <span class="string">&quot;10m&quot;</span></span><br><span class="line">        <span class="attr">max-file:</span> <span class="string">&quot;3&quot;</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./logs:/app/logs</span></span><br></pre></td></tr></table></figure><h3 id="è³‡æºé™åˆ¶"><a href="#è³‡æºé™åˆ¶" class="headerlink" title="è³‡æºé™åˆ¶"></a>è³‡æºé™åˆ¶</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3.8&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">dockertest:</span></span><br><span class="line">    <span class="attr">build:</span> <span class="string">.</span></span><br><span class="line">    <span class="attr">deploy:</span></span><br><span class="line">      <span class="attr">resources:</span></span><br><span class="line">        <span class="attr">limits:</span></span><br><span class="line">          <span class="attr">memory:</span> <span class="string">512M</span></span><br><span class="line">          <span class="attr">cpus:</span> <span class="string">&#x27;0.5&#x27;</span></span><br><span class="line">        <span class="attr">reservations:</span></span><br><span class="line">          <span class="attr">memory:</span> <span class="string">256M</span></span><br><span class="line">          <span class="attr">cpus:</span> <span class="string">&#x27;0.25&#x27;</span></span><br></pre></td></tr></table></figure><blockquote><p><strong>æç¤º</strong><br>å»ºè­°åœ¨é–‹ç™¼ç’°å¢ƒä½¿ç”¨ <code>docker-compose.override.yml</code> ä¾†è¦†è“‹ç”Ÿç”¢ç’°å¢ƒé…ç½®</p></blockquote><blockquote><p><strong>é‡è¦æç¤º</strong><br>åœ¨ç”Ÿç”¢ç’°å¢ƒä¸­ï¼Œè«‹å‹™å¿…è¨­å®šé©ç•¶çš„è³‡æºé™åˆ¶ã€å¥åº·æª¢æŸ¥å’Œé‡å•Ÿç­–ç•¥</p></blockquote><blockquote><p><strong>å®‰å…¨æé†’</strong><br>é¿å…åœ¨ Docker Compose æª”æ¡ˆä¸­ç¡¬ç·¨ç¢¼æ•æ„Ÿè³‡æ–™ï¼Œä½¿ç”¨ç’°å¢ƒè®Šæ•¸æˆ– Docker Secrets</p></blockquote><p><strong>ğŸ“º å¯¦æˆ°æ•™å­¸å½±ç‰‡ï¼š<a href="https://youtu.be/F-RE_raMMlA">ç·¨å¯«docker-composeå¿«é€Ÿéƒ¨å±¬ç’°å¢ƒ</a></strong></p><div style="position: relative; width: 100%; max-width: 800px; margin: 20px auto; box-shadow: 0 4px 8px rgba(0,0,0,0.1); border-radius: 8px; overflow: hidden;">  <div style="position: relative; padding-bottom: 56.25%; height: 0;">    <iframe src="https://www.youtube.com/embed/F-RE_raMMlA?rel=0&modestbranding=1&showinfo=0"             style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none;"             allowfullscreen>    </iframe>  </div></div>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Docker-Compose-ç·¨å¯«æŒ‡å—&quot;&gt;&lt;a href=&quot;#Docker-Compose-ç·¨å¯«æŒ‡å—&quot; class=&quot;headerlink&quot; title=&quot;Docker Compose ç·¨å¯«æŒ‡å—&quot;&gt;&lt;/a&gt;Docker Compose ç·¨å¯«æŒ‡å—&lt;/h1&gt;&lt;h2 id=&quot;ä»€éº¼æ˜¯-Docker-Composeï¼Ÿ&quot;&gt;&lt;a href=&quot;#ä»€éº¼æ˜¯-Docker-Composeï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;ä»€éº¼æ˜¯ Docker Composeï¼Ÿ&quot;&gt;&lt;/a&gt;ä»€éº¼æ˜¯ Docker Composeï¼Ÿ&lt;/h2&gt;&lt;p&gt;Docker Compose æ˜¯ä¸€å€‹ç”¨æ–¼å®šç¾©å’Œç®¡ç†å¤šå®¹å™¨ Docker æ‡‰ç”¨ç¨‹å¼çš„å·¥å…·ã€‚é€é YAML æª”æ¡ˆä¾†é…ç½®æ‡‰ç”¨ç¨‹å¼çš„æœå‹™ã€ç¶²è·¯å’Œè³‡æ–™å·ï¼Œè®“æ‚¨å¯ä»¥ç”¨å–®ä¸€å‘½ä»¤ä¾†å»ºç«‹å’Œå•Ÿå‹•æ‰€æœ‰ç›¸é—œçš„æœå‹™ã€‚&lt;/p&gt;
&lt;h3 id=&quot;Docker-Compose-çš„å„ªå‹¢&quot;&gt;&lt;a href=&quot;#Docker-Compose-çš„å„ªå‹¢&quot; class=&quot;headerlink&quot; title=&quot;Docker Compose çš„å„ªå‹¢&quot;&gt;&lt;/a&gt;Docker Compose çš„å„ªå‹¢&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç°¡åŒ–å¤šå®¹å™¨ç®¡ç†&lt;/strong&gt;ï¼šç”¨ä¸€å€‹æª”æ¡ˆå®šç¾©æ•´å€‹æ‡‰ç”¨ç¨‹å¼æ¶æ§‹&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç’°å¢ƒä¸€è‡´æ€§&lt;/strong&gt;ï¼šç¢ºä¿é–‹ç™¼ã€æ¸¬è©¦ã€ç”Ÿç”¢ç’°å¢ƒçš„ä¸€è‡´æ€§&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¿«é€Ÿéƒ¨ç½²&lt;/strong&gt;ï¼šä¸€éµå•Ÿå‹•æ•´å€‹æ‡‰ç”¨ç¨‹å¼å †ç–Š&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœå‹™ç·¨æ’&lt;/strong&gt;ï¼šè¼•é¬†ç®¡ç†æœå‹™é–“çš„ä¾è³´é—œä¿‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯é‡ç¾æ€§&lt;/strong&gt;ï¼šç‰ˆæœ¬æ§åˆ¶å‹å¥½ï¼Œä¾¿æ–¼åœ˜éšŠå”ä½œ&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;ä½¿ç”¨å ´æ™¯&quot;&gt;&lt;a href=&quot;#ä½¿ç”¨å ´æ™¯&quot; class=&quot;headerlink&quot; title=&quot;ä½¿ç”¨å ´æ™¯&quot;&gt;&lt;/a&gt;ä½¿ç”¨å ´æ™¯&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¾®æœå‹™æ¶æ§‹&lt;/strong&gt;ï¼šç®¡ç†å¤šå€‹ç›¸äº’ä¾è³´çš„æœå‹™&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é–‹ç™¼ç’°å¢ƒ&lt;/strong&gt;ï¼šå¿«é€Ÿæ­å»ºå®Œæ•´çš„é–‹ç™¼ç’°å¢ƒ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¸¬è©¦ç’°å¢ƒ&lt;/strong&gt;ï¼šå‰µå»ºéš”é›¢çš„æ¸¬è©¦ç’°å¢ƒ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;CI&amp;#x2F;CD æµç¨‹&lt;/strong&gt;ï¼šè‡ªå‹•åŒ–éƒ¨ç½²å’Œæ¸¬è©¦&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="docker" scheme="https://pcion123.github.io/categories/docker/"/>
    
    
      <category term="docker" scheme="https://pcion123.github.io/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>Docker Dockerfile ç·¨å¯«æŒ‡å—</title>
    <link href="https://pcion123.github.io/2025/11/23/docker-file-intro/"/>
    <id>https://pcion123.github.io/2025/11/23/docker-file-intro/</id>
    <published>2025-11-23T14:03:18.000Z</published>
    <updated>2025-11-23T14:25:39.882Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Docker-Dockerfile-ç·¨å¯«æŒ‡å—"><a href="#Docker-Dockerfile-ç·¨å¯«æŒ‡å—" class="headerlink" title="Docker Dockerfile ç·¨å¯«æŒ‡å—"></a>Docker Dockerfile ç·¨å¯«æŒ‡å—</h1><h2 id="ä»€éº¼æ˜¯-Dockerfileï¼Ÿ"><a href="#ä»€éº¼æ˜¯-Dockerfileï¼Ÿ" class="headerlink" title="ä»€éº¼æ˜¯ Dockerfileï¼Ÿ"></a>ä»€éº¼æ˜¯ Dockerfileï¼Ÿ</h2><p>Dockerfile æ˜¯ä¸€å€‹æ–‡å­—æª”æ¡ˆï¼ŒåŒ…å«äº†ä¸€ç³»åˆ—æŒ‡ä»¤ç”¨ä¾†è‡ªå‹•åŒ–å»ºæ§‹ Docker æ˜ åƒæª”ã€‚é€é Dockerfileï¼Œæˆ‘å€‘å¯ä»¥å°‡æ‡‰ç”¨ç¨‹å¼åŠå…¶é‹è¡Œç’°å¢ƒå°è£æˆä¸€å€‹å¯ç§»æ¤çš„æ˜ åƒæª”ï¼Œå¯¦ç¾ã€Œä¸€æ¬¡å»ºæ§‹ï¼Œåˆ°è™•é‹è¡Œã€çš„ç›®æ¨™ã€‚</p><h3 id="Dockerfile-çš„å„ªå‹¢"><a href="#Dockerfile-çš„å„ªå‹¢" class="headerlink" title="Dockerfile çš„å„ªå‹¢"></a>Dockerfile çš„å„ªå‹¢</h3><ul><li><strong>å¯é‡ç¾æ€§</strong>ï¼šç¢ºä¿åœ¨ä¸åŒç’°å¢ƒä¸­å»ºæ§‹å‡ºç›¸åŒçš„æ˜ åƒæª”</li><li><strong>ç‰ˆæœ¬æ§åˆ¶</strong>ï¼šå¯ä»¥åƒç¨‹å¼ç¢¼ä¸€æ¨£é€²è¡Œç‰ˆæœ¬ç®¡ç†</li><li><strong>è‡ªå‹•åŒ–</strong>ï¼šæ¸›å°‘æ‰‹å‹•é…ç½®ï¼Œé™ä½äººç‚ºéŒ¯èª¤</li><li><strong>æ¨™æº–åŒ–</strong>ï¼šçµ±ä¸€çš„å»ºæ§‹æµç¨‹å’Œç’°å¢ƒé…ç½®</li></ul><span id="more"></span><hr><h2 id="åŸºæœ¬æŒ‡ä»¤ä»‹ç´¹"><a href="#åŸºæœ¬æŒ‡ä»¤ä»‹ç´¹" class="headerlink" title="åŸºæœ¬æŒ‡ä»¤ä»‹ç´¹"></a>åŸºæœ¬æŒ‡ä»¤ä»‹ç´¹</h2><h3 id="æ ¸å¿ƒæŒ‡ä»¤"><a href="#æ ¸å¿ƒæŒ‡ä»¤" class="headerlink" title="æ ¸å¿ƒæŒ‡ä»¤"></a>æ ¸å¿ƒæŒ‡ä»¤</h3><table><thead><tr><th>æŒ‡ä»¤</th><th>åŠŸèƒ½</th><th>ç¯„ä¾‹</th></tr></thead><tbody><tr><td><code>FROM</code></td><td>æŒ‡å®šåŸºç¤æ˜ åƒæª”</td><td><code>FROM openjdk:21-jre</code></td></tr><tr><td><code>WORKDIR</code></td><td>è¨­å®šå·¥ä½œç›®éŒ„</td><td><code>WORKDIR /app</code></td></tr><tr><td><code>COPY</code></td><td>è¤‡è£½æª”æ¡ˆåˆ°æ˜ åƒæª”</td><td><code>COPY . /app</code></td></tr><tr><td><code>RUN</code></td><td>åŸ·è¡Œå‘½ä»¤</td><td><code>RUN apt-get update</code></td></tr><tr><td><code>EXPOSE</code></td><td>è²æ˜å®¹å™¨ç«¯å£</td><td><code>EXPOSE 8080</code></td></tr><tr><td><code>CMD</code></td><td>å®¹å™¨å•Ÿå‹•æ™‚çš„é è¨­å‘½ä»¤</td><td><code>CMD [&quot;java&quot;, &quot;-jar&quot;, &quot;app.jar&quot;]</code></td></tr><tr><td><code>ENTRYPOINT</code></td><td>å®¹å™¨å•Ÿå‹•é»</td><td><code>ENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;]</code></td></tr></tbody></table><h3 id="é€²éšæŒ‡ä»¤"><a href="#é€²éšæŒ‡ä»¤" class="headerlink" title="é€²éšæŒ‡ä»¤"></a>é€²éšæŒ‡ä»¤</h3><table><thead><tr><th>æŒ‡ä»¤</th><th>åŠŸèƒ½</th><th>ç¯„ä¾‹</th></tr></thead><tbody><tr><td><code>ARG</code></td><td>å»ºæ§‹æ™‚åƒæ•¸</td><td><code>ARG JAVA_VERSION=21</code></td></tr><tr><td><code>ENV</code></td><td>ç’°å¢ƒè®Šæ•¸</td><td><code>ENV NODE_ENV=production</code></td></tr><tr><td><code>VOLUME</code></td><td>è²æ˜å·æ›è¼‰é»</td><td><code>VOLUME [&quot;/data&quot;]</code></td></tr><tr><td><code>USER</code></td><td>åˆ‡æ›ä½¿ç”¨è€…</td><td><code>USER app</code></td></tr><tr><td><code>HEALTHCHECK</code></td><td>å¥åº·æª¢æŸ¥</td><td><code>HEALTHCHECK CMD curl -f http://localhost:8080/health</code></td></tr><tr><td><code>LABEL</code></td><td>æ·»åŠ å…ƒæ•¸æ“š</td><td><code>LABEL version=&quot;1.0&quot;</code></td></tr></tbody></table><hr><h2 id="å®Œæ•´ç¯„ä¾‹ï¼šSpring-Boot-æ‡‰ç”¨ç¨‹å¼"><a href="#å®Œæ•´ç¯„ä¾‹ï¼šSpring-Boot-æ‡‰ç”¨ç¨‹å¼" class="headerlink" title="å®Œæ•´ç¯„ä¾‹ï¼šSpring Boot æ‡‰ç”¨ç¨‹å¼"></a>å®Œæ•´ç¯„ä¾‹ï¼šSpring Boot æ‡‰ç”¨ç¨‹å¼</h2><p>ä»¥ä¸‹æ˜¯ä¸€å€‹ç”Ÿç”¢ç´šåˆ¥çš„ Spring Boot æ‡‰ç”¨ç¨‹å¼ Dockerfile ç¯„ä¾‹ï¼š</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Dockerfile for Spring Boot Application with Java 21</span></span><br><span class="line"><span class="comment"># Multi-stage build for optimized image size</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Global build arguments (available to all stages)</span></span><br><span class="line"><span class="keyword">ARG</span> MAVEN_PROFILE=dev</span><br><span class="line"><span class="keyword">ARG</span> SPRING_PROFILE=dev</span><br><span class="line"></span><br><span class="line"><span class="comment"># Build stage</span></span><br><span class="line"><span class="keyword">FROM</span> maven:<span class="number">3.9</span>.<span class="number">9</span>-eclipse-temurin-<span class="number">21</span> AS build</span><br><span class="line"></span><br><span class="line"><span class="comment"># Re-declare args to make them available in this stage</span></span><br><span class="line"><span class="keyword">ARG</span> MAVEN_PROFILE</span><br><span class="line"></span><br><span class="line"><span class="comment"># Set working directory</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /app</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Copy Maven configuration files first for better layer caching</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> pom.xml ./</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> mvnw ./</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> mvnw.cmd ./</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> .mvn ./.mvn</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Download dependencies (this layer will be cached unless pom.xml changes)</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> mvn dependency:go-offline -B</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Copy source code</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> src ./src</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Build the application</span></span><br><span class="line"><span class="comment"># Using the specified profile and skipping tests for faster build</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> mvn clean package -DskipTests -P<span class="variable">$&#123;MAVEN_PROFILE&#125;</span> -B</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Runtime stage</span></span><br><span class="line"><span class="keyword">FROM</span> eclipse-temurin:<span class="number">21</span>-jre AS runtime</span><br><span class="line"></span><br><span class="line"><span class="comment"># Re-declare args to make them available in this stage</span></span><br><span class="line"><span class="keyword">ARG</span> SPRING_PROFILE</span><br><span class="line"></span><br><span class="line"><span class="comment"># Install necessary packages and create non-root user</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt-get update &amp;&amp; apt-get install -y --no-install-recommends \</span></span><br><span class="line"><span class="language-bash">    curl \</span></span><br><span class="line"><span class="language-bash">    tzdata \</span></span><br><span class="line"><span class="language-bash">    &amp;&amp; <span class="built_in">rm</span> -rf /var/lib/apt/lists/* \</span></span><br><span class="line"><span class="language-bash">    &amp;&amp; groupadd -g 1001 dockertest \</span></span><br><span class="line"><span class="language-bash">    &amp;&amp; useradd -u 1001 -g dockertest -s /bin/bash -m dockertest</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Set timezone (optional, adjust as needed)</span></span><br><span class="line"><span class="keyword">ENV</span> TZ=Asia/Taipei</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create log directories with proper permissions</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">mkdir</span> -p /var/log/dockertest /app/logs \</span></span><br><span class="line"><span class="language-bash">    &amp;&amp; <span class="built_in">chown</span> -R dockertest:dockertest /var/log/dockertest /app/logs</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Set working directory</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /app</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Copy the built jar from build stage</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> --from=build /app/target/dockertest-0.0.1-SNAPSHOT-boot.jar app.jar</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Change ownership to non-root user</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">chown</span> -R dockertest:dockertest /app</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Create volume mount points for logs</span></span><br><span class="line"><span class="keyword">VOLUME</span><span class="language-bash"> [<span class="string">&quot;/app/logs&quot;</span>, <span class="string">&quot;/var/log/dockertest&quot;</span>]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Switch to non-root user</span></span><br><span class="line"><span class="keyword">USER</span> dockertest</span><br><span class="line"></span><br><span class="line"><span class="comment"># Expose port</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">8080</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Health check</span></span><br><span class="line"><span class="keyword">HEALTHCHECK</span><span class="language-bash"> --interval=30s --<span class="built_in">timeout</span>=10s --start-period=60s --retries=3 \</span></span><br><span class="line"><span class="language-bash">    CMD curl -f http://localhost:8080/actuator/health || <span class="built_in">exit</span> 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Environment variables</span></span><br><span class="line"><span class="keyword">ENV</span> JAVA_OPTS=<span class="string">&quot;-Djava.awt.headless=true -Djava.security.egd=file:/dev/./urandom&quot;</span> \</span><br><span class="line">    SPRING_PROFILES_ACTIVE=$&#123;SPRING_PROFILE&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Run the application</span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="language-bash"> [<span class="string">&quot;sh&quot;</span>, <span class="string">&quot;-c&quot;</span>, <span class="string">&quot;java <span class="variable">$JAVA_OPTS</span> -jar app.jar&quot;</span>]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Labels for better container management</span></span><br><span class="line"><span class="keyword">LABEL</span><span class="language-bash"> maintainer=<span class="string">&quot;vscodelife&quot;</span> \</span></span><br><span class="line"><span class="language-bash">      version=<span class="string">&quot;0.0.1-SNAPSHOT&quot;</span> \</span></span><br><span class="line"><span class="language-bash">      description=<span class="string">&quot;Spring Boot Docker Test Application&quot;</span> \</span></span><br><span class="line"><span class="language-bash">      org.opencontainers.image.title=<span class="string">&quot;dockertest&quot;</span> \</span></span><br><span class="line"><span class="language-bash">      org.opencontainers.image.description=<span class="string">&quot;Demo project for Spring Boot with Docker&quot;</span> \</span></span><br><span class="line"><span class="language-bash">      org.opencontainers.image.version=<span class="string">&quot;0.0.1-SNAPSHOT&quot;</span> \</span></span><br><span class="line"><span class="language-bash">      org.opencontainers.image.vendor=<span class="string">&quot;vscodelife&quot;</span></span></span><br></pre></td></tr></table></figure><h3 id="ç¯„ä¾‹è§£æ"><a href="#ç¯„ä¾‹è§£æ" class="headerlink" title="ç¯„ä¾‹è§£æ"></a>ç¯„ä¾‹è§£æ</h3><h4 id="1-å¤šéšæ®µå»ºæ§‹-Multi-stage-Build"><a href="#1-å¤šéšæ®µå»ºæ§‹-Multi-stage-Build" class="headerlink" title="1. å¤šéšæ®µå»ºæ§‹ (Multi-stage Build)"></a>1. å¤šéšæ®µå»ºæ§‹ (Multi-stage Build)</h4><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> maven:<span class="number">3.9</span>.<span class="number">9</span>-eclipse-temurin-<span class="number">21</span> AS build</span><br><span class="line"><span class="comment"># ... å»ºæ§‹éšæ®µ</span></span><br><span class="line"><span class="keyword">FROM</span> eclipse-temurin:<span class="number">21</span>-jre AS runtime</span><br><span class="line"><span class="comment"># ... é‹è¡Œéšæ®µ</span></span><br></pre></td></tr></table></figure><ul><li><strong>ç›®çš„</strong>ï¼šåˆ†é›¢å»ºæ§‹ç’°å¢ƒå’Œé‹è¡Œç’°å¢ƒï¼Œæ¸›å°‘æœ€çµ‚æ˜ åƒæª”å¤§å°</li><li><strong>å„ªå‹¢</strong>ï¼šå»ºæ§‹å·¥å…·ä¸æœƒåŒ…å«åœ¨æœ€çµ‚æ˜ åƒæª”ä¸­</li></ul><h4 id="2-å»ºæ§‹åƒæ•¸-Build-Arguments"><a href="#2-å»ºæ§‹åƒæ•¸-Build-Arguments" class="headerlink" title="2. å»ºæ§‹åƒæ•¸ (Build Arguments)"></a>2. å»ºæ§‹åƒæ•¸ (Build Arguments)</h4><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ARG</span> MAVEN_PROFILE=dev</span><br><span class="line"><span class="keyword">ARG</span> SPRING_PROFILE=dev</span><br></pre></td></tr></table></figure><ul><li><strong>ç”¨é€”</strong>ï¼šåœ¨å»ºæ§‹æ™‚å‹•æ…‹é…ç½®åƒæ•¸</li><li><strong>ä½¿ç”¨</strong>ï¼š<code>docker build --build-arg MAVEN_PROFILE=prod .</code></li></ul><h4 id="3-å±¤ç´šå¿«å–å„ªåŒ–"><a href="#3-å±¤ç´šå¿«å–å„ªåŒ–" class="headerlink" title="3. å±¤ç´šå¿«å–å„ªåŒ–"></a>3. å±¤ç´šå¿«å–å„ªåŒ–</h4><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">COPY</span><span class="language-bash"> pom.xml ./</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> mvn dependency:go-offline -B</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> src ./src</span></span><br></pre></td></tr></table></figure><ul><li><strong>ç­–ç•¥</strong>ï¼šå…ˆè¤‡è£½ä¾è³´é…ç½®ï¼Œå†è¤‡è£½åŸå§‹ç¢¼</li><li><strong>æ•ˆæœ</strong>ï¼šä¾è³´ä¸‹è¼‰å±¤å¯ä»¥è¢«å¿«å–ï¼ŒåŠ é€Ÿå¾ŒçºŒå»ºæ§‹</li></ul><h4 id="4-å®‰å…¨æ€§é…ç½®"><a href="#4-å®‰å…¨æ€§é…ç½®" class="headerlink" title="4. å®‰å…¨æ€§é…ç½®"></a>4. å®‰å…¨æ€§é…ç½®</h4><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">RUN</span><span class="language-bash"> groupadd -g 1001 dockertest \</span></span><br><span class="line"><span class="language-bash">    &amp;&amp; useradd -u 1001 -g dockertest -s /bin/bash -m dockertest</span></span><br><span class="line"><span class="keyword">USER</span> dockertest</span><br></pre></td></tr></table></figure><ul><li><strong>ç›®çš„</strong>ï¼šé¿å…ä½¿ç”¨ root ä½¿ç”¨è€…é‹è¡Œæ‡‰ç”¨ç¨‹å¼</li><li><strong>å¥½è™•</strong>ï¼šæ¸›å°‘å®‰å…¨é¢¨éšªï¼Œç¬¦åˆæœ€å°æ¬Šé™åŸå‰‡</li></ul><h4 id="5-å¥åº·æª¢æŸ¥"><a href="#5-å¥åº·æª¢æŸ¥" class="headerlink" title="5. å¥åº·æª¢æŸ¥"></a>5. å¥åº·æª¢æŸ¥</h4><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">HEALTHCHECK</span><span class="language-bash"> --interval=30s --<span class="built_in">timeout</span>=10s --start-period=60s --retries=3 \</span></span><br><span class="line"><span class="language-bash">    CMD curl -f http://localhost:8080/actuator/health || <span class="built_in">exit</span> 1</span></span><br></pre></td></tr></table></figure><ul><li><strong>åŠŸèƒ½</strong>ï¼šå®šæœŸæª¢æŸ¥å®¹å™¨å¥åº·ç‹€æ…‹</li><li><strong>åƒæ•¸èªªæ˜</strong>ï¼š<ul><li><code>interval</code>ï¼šæª¢æŸ¥é–“éš”</li><li><code>timeout</code>ï¼šæª¢æŸ¥è¶…æ™‚æ™‚é–“</li><li><code>start-period</code>ï¼šå®¹å™¨å•Ÿå‹•å¾Œç­‰å¾…æ™‚é–“</li><li><code>retries</code>ï¼šå¤±æ•—é‡è©¦æ¬¡æ•¸</li></ul></li></ul><hr><h2 id="æœ€ä½³å¯¦è¸å»ºè­°"><a href="#æœ€ä½³å¯¦è¸å»ºè­°" class="headerlink" title="æœ€ä½³å¯¦è¸å»ºè­°"></a>æœ€ä½³å¯¦è¸å»ºè­°</h2><h3 id="1-æ˜ åƒæª”å¤§å°å„ªåŒ–"><a href="#1-æ˜ åƒæª”å¤§å°å„ªåŒ–" class="headerlink" title="1. æ˜ åƒæª”å¤§å°å„ªåŒ–"></a>1. æ˜ åƒæª”å¤§å°å„ªåŒ–</h3><p><strong>ä½¿ç”¨å¤šéšæ®µå»ºæ§‹</strong></p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å»ºæ§‹éšæ®µ - åŒ…å«ç·¨è­¯å·¥å…·</span></span><br><span class="line"><span class="keyword">FROM</span> node:<span class="number">18</span> AS build</span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> package*.json ./</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> npm ci --only=production</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é‹è¡Œéšæ®µ - åªåŒ…å«é‹è¡Œæ™‚</span></span><br><span class="line"><span class="keyword">FROM</span> node:<span class="number">18</span>-alpine</span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> --from=build /app/node_modules ./node_modules</span></span><br></pre></td></tr></table></figure><p><strong>é¸æ“‡åˆé©çš„åŸºç¤æ˜ åƒæª”</strong></p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸€èˆ¬ç”¨é€”</span></span><br><span class="line"><span class="keyword">FROM</span> ubuntu:<span class="number">22.04</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æœ€å°åŒ– (æ¨è–¦)</span></span><br><span class="line"><span class="keyword">FROM</span> alpine:<span class="number">3.18</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç‰¹å®šæ‡‰ç”¨ (æ¨è–¦)</span></span><br><span class="line"><span class="keyword">FROM</span> openjdk:<span class="number">21</span>-jre-slim</span><br></pre></td></tr></table></figure><h3 id="2-å±¤ç´šå¿«å–ç­–ç•¥"><a href="#2-å±¤ç´šå¿«å–ç­–ç•¥" class="headerlink" title="2. å±¤ç´šå¿«å–ç­–ç•¥"></a>2. å±¤ç´šå¿«å–ç­–ç•¥</h3><p><strong>æ­£ç¢ºçš„æª”æ¡ˆè¤‡è£½é †åº</strong></p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># éŒ¯èª¤ - ä»»ä½•æª”æ¡ˆè®Šæ›´éƒ½æœƒé‡æ–°åŸ·è¡Œå®‰è£</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> . /app</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> npm install</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ­£ç¢º - ä¾è³´é…ç½®è®Šæ›´æ‰é‡æ–°å®‰è£</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> package*.json /app/</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> npm install</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> . /app</span></span><br></pre></td></tr></table></figure><h3 id="3-å®‰å…¨æ€§æœ€ä½³å¯¦è¸"><a href="#3-å®‰å…¨æ€§æœ€ä½³å¯¦è¸" class="headerlink" title="3. å®‰å…¨æ€§æœ€ä½³å¯¦è¸"></a>3. å®‰å…¨æ€§æœ€ä½³å¯¦è¸</h3><p><strong>ä½¿ç”¨é root ä½¿ç”¨è€…</strong></p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">RUN</span><span class="language-bash"> addgroup -g 1001 -S appgroup &amp;&amp; \</span></span><br><span class="line"><span class="language-bash">    adduser -u 1001 -S appuser -G appgroup</span></span><br><span class="line"><span class="keyword">USER</span> appuser</span><br></pre></td></tr></table></figure><p><strong>æ¸›å°‘æ”»æ“Šé¢</strong></p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ¸…ç†ä¸å¿…è¦çš„å¥—ä»¶</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt-get update &amp;&amp; apt-get install -y package \</span></span><br><span class="line"><span class="language-bash">    &amp;&amp; apt-get clean \</span></span><br><span class="line"><span class="language-bash">    &amp;&amp; <span class="built_in">rm</span> -rf /var/lib/apt/lists/*</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åªè¤‡è£½å¿…è¦çš„æª”æ¡ˆ</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> --<span class="built_in">chown</span>=appuser:appgroup app.jar /app/</span></span><br></pre></td></tr></table></figure><h3 id="4-ç’°å¢ƒé…ç½®"><a href="#4-ç’°å¢ƒé…ç½®" class="headerlink" title="4. ç’°å¢ƒé…ç½®"></a>4. ç’°å¢ƒé…ç½®</h3><p><strong>ä½¿ç”¨ç’°å¢ƒè®Šæ•¸</strong></p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ENV</span> NODE_ENV=production \</span><br><span class="line">    PORT=<span class="number">3000</span> \</span><br><span class="line">    LOG_LEVEL=info</span><br></pre></td></tr></table></figure><p><strong>æ”¯æ´é…ç½®è¦†å¯«</strong></p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å…è¨±é‹è¡Œæ™‚è¦†å¯«</span></span><br><span class="line"><span class="keyword">ENV</span> JAVA_OPTS=<span class="string">&quot;-Xmx512m&quot;</span> \</span><br><span class="line">    SERVER_PORT=<span class="number">8080</span></span><br></pre></td></tr></table></figure><hr><h2 id="å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ"><a href="#å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ" class="headerlink" title="å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ"></a>å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ</h2><h3 id="Q1-æ˜ åƒæª”å¤ªå¤§æ€éº¼è¾¦ï¼Ÿ"><a href="#Q1-æ˜ åƒæª”å¤ªå¤§æ€éº¼è¾¦ï¼Ÿ" class="headerlink" title="Q1: æ˜ åƒæª”å¤ªå¤§æ€éº¼è¾¦ï¼Ÿ"></a>Q1: æ˜ åƒæª”å¤ªå¤§æ€éº¼è¾¦ï¼Ÿ</h3><p><strong>è§£æ±ºæ–¹æ¡ˆï¼š</strong></p><ol><li>ä½¿ç”¨ Alpine åŸºç¤æ˜ åƒæª”</li><li>å¯¦æ–½å¤šéšæ®µå»ºæ§‹</li><li>æ¸…ç†æš«å­˜æª”æ¡ˆå’Œå¿«å–</li><li>ä½¿ç”¨ <code>.dockerignore</code> æ’é™¤ä¸å¿…è¦æª”æ¡ˆ</li></ol><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># .dockerignore</span></span><br><span class="line">node_modules</span><br><span class="line">*.log</span><br><span class="line">.git</span><br><span class="line">Dockerfile</span><br><span class="line">README.md</span><br></pre></td></tr></table></figure><h3 id="Q2-å»ºæ§‹é€Ÿåº¦å¤ªæ…¢ï¼Ÿ"><a href="#Q2-å»ºæ§‹é€Ÿåº¦å¤ªæ…¢ï¼Ÿ" class="headerlink" title="Q2: å»ºæ§‹é€Ÿåº¦å¤ªæ…¢ï¼Ÿ"></a>Q2: å»ºæ§‹é€Ÿåº¦å¤ªæ…¢ï¼Ÿ</h3><p><strong>è§£æ±ºæ–¹æ¡ˆï¼š</strong></p><ol><li>å„ªåŒ–å±¤ç´šé †åºï¼Œå–„ç”¨å¿«å–</li><li>ä½¿ç”¨ BuildKit</li><li>ä¸¦è¡ŒåŒ–å»ºæ§‹æ­¥é©Ÿ</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å•Ÿç”¨ BuildKit</span></span><br><span class="line"><span class="built_in">export</span> DOCKER_BUILDKIT=1</span><br><span class="line">docker build --progress=plain .</span><br></pre></td></tr></table></figure><h3 id="Q3-å®¹å™¨å•Ÿå‹•å¤±æ•—ï¼Ÿ"><a href="#Q3-å®¹å™¨å•Ÿå‹•å¤±æ•—ï¼Ÿ" class="headerlink" title="Q3: å®¹å™¨å•Ÿå‹•å¤±æ•—ï¼Ÿ"></a>Q3: å®¹å™¨å•Ÿå‹•å¤±æ•—ï¼Ÿ</h3><p><strong>é™¤éŒ¯æ­¥é©Ÿï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æª¢æŸ¥æ˜ åƒæª”</span></span><br><span class="line">docker images</span><br><span class="line"></span><br><span class="line"><span class="comment"># äº’å‹•å¼åŸ·è¡Œ</span></span><br><span class="line">docker run -it --entrypoint /bin/bash your-image</span><br><span class="line"></span><br><span class="line"><span class="comment"># æª¢æŸ¥æ—¥èªŒ</span></span><br><span class="line">docker logs container-name</span><br></pre></td></tr></table></figure><hr><h2 id="é€²éšæŠ€å·§"><a href="#é€²éšæŠ€å·§" class="headerlink" title="é€²éšæŠ€å·§"></a>é€²éšæŠ€å·§</h2><h3 id="1-ä½¿ç”¨-BuildKit-åŠŸèƒ½"><a href="#1-ä½¿ç”¨-BuildKit-åŠŸèƒ½" class="headerlink" title="1. ä½¿ç”¨ BuildKit åŠŸèƒ½"></a>1. ä½¿ç”¨ BuildKit åŠŸèƒ½</h3><p><strong>å¿«å–æ›è¼‰</strong></p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨å¿«å–æ›è¼‰åŠ é€Ÿå¥—ä»¶å®‰è£</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> --mount=<span class="built_in">type</span>=cache,target=/var/cache/apt \</span></span><br><span class="line"><span class="language-bash">    apt-get update &amp;&amp; apt-get install -y package</span></span><br></pre></td></tr></table></figure><p><strong>å¯†é‘°æ›è¼‰</strong></p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰å…¨åœ°ä½¿ç”¨å¯†é‘°</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> --mount=<span class="built_in">type</span>=secret,<span class="built_in">id</span>=api_key \</span></span><br><span class="line"><span class="language-bash">    curl -H <span class="string">&quot;Authorization: <span class="subst">$(cat /run/secrets/api_key)</span>&quot;</span> api.example.com</span></span><br></pre></td></tr></table></figure><h3 id="2-æ¢ä»¶å»ºæ§‹"><a href="#2-æ¢ä»¶å»ºæ§‹" class="headerlink" title="2. æ¢ä»¶å»ºæ§‹"></a>2. æ¢ä»¶å»ºæ§‹</h3><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ARG</span> BUILD_ENV=development</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ ¹æ“šç’°å¢ƒå®‰è£ä¸åŒå¥—ä»¶</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$BUILD_ENV</span>&quot;</span> = <span class="string">&quot;development&quot;</span> ] ; <span class="keyword">then</span> \</span></span><br><span class="line"><span class="language-bash">        npm install --include=dev ; \</span></span><br><span class="line"><span class="language-bash">    <span class="keyword">else</span> \</span></span><br><span class="line"><span class="language-bash">        npm install --omit=dev ; \</span></span><br><span class="line"><span class="language-bash">    <span class="keyword">fi</span></span></span><br></pre></td></tr></table></figure><h3 id="3-å¥åº·æª¢æŸ¥æœ€ä½³å¯¦è¸"><a href="#3-å¥åº·æª¢æŸ¥æœ€ä½³å¯¦è¸" class="headerlink" title="3. å¥åº·æª¢æŸ¥æœ€ä½³å¯¦è¸"></a>3. å¥åº·æª¢æŸ¥æœ€ä½³å¯¦è¸</h3><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è‡ªå®šç¾©å¥åº·æª¢æŸ¥è…³æœ¬</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> healthcheck.sh /usr/local/bin/</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">chmod</span> +x /usr/local/bin/healthcheck.sh</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">HEALTHCHECK</span><span class="language-bash"> --interval=30s --<span class="built_in">timeout</span>=3s --start-period=60s --retries=3 \</span></span><br><span class="line"><span class="language-bash">    CMD /usr/local/bin/healthcheck.sh</span></span><br></pre></td></tr></table></figure><hr><h2 id="å»ºæ§‹å’Œéƒ¨ç½²"><a href="#å»ºæ§‹å’Œéƒ¨ç½²" class="headerlink" title="å»ºæ§‹å’Œéƒ¨ç½²"></a>å»ºæ§‹å’Œéƒ¨ç½²</h2><h3 id="å»ºæ§‹æ˜ åƒæª”"><a href="#å»ºæ§‹æ˜ åƒæª”" class="headerlink" title="å»ºæ§‹æ˜ åƒæª”"></a>å»ºæ§‹æ˜ åƒæª”</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åŸºæœ¬å»ºæ§‹</span></span><br><span class="line">docker build -t myapp:latest .</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‡å®šå»ºæ§‹åƒæ•¸</span></span><br><span class="line">docker build --build-arg MAVEN_PROFILE=prod -t myapp:prod .</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨ç‰¹å®š Dockerfile</span></span><br><span class="line">docker build -f Dockerfile.prod -t myapp:prod .</span><br></pre></td></tr></table></figure><h3 id="æ¨é€åˆ°-Registry"><a href="#æ¨é€åˆ°-Registry" class="headerlink" title="æ¨é€åˆ° Registry"></a>æ¨é€åˆ° Registry</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ¨™è¨˜æ˜ åƒæª”</span></span><br><span class="line">docker tag myapp:latest registry.example.com/myapp:latest</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¨é€</span></span><br><span class="line">docker push registry.example.com/myapp:latest</span><br></pre></td></tr></table></figure><h3 id="é‹è¡Œå®¹å™¨"><a href="#é‹è¡Œå®¹å™¨" class="headerlink" title="é‹è¡Œå®¹å™¨"></a>é‹è¡Œå®¹å™¨</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åŸºæœ¬é‹è¡Œï¼ˆèƒŒæ™¯åŸ·è¡Œï¼‰</span></span><br><span class="line">docker run -d -p 8080:8080 myapp:latest</span><br><span class="line"></span><br><span class="line"><span class="comment"># è‡¨æ™‚é‹è¡Œï¼ˆå®¹å™¨åœæ­¢å¾Œè‡ªå‹•åˆªé™¤ï¼‰</span></span><br><span class="line">docker run --<span class="built_in">rm</span> -p 8080:8080 myapp:latest</span><br></pre></td></tr></table></figure><p><strong>åƒæ•¸èªªæ˜ï¼š</strong></p><ul><li><code>-d</code>ï¼šåœ¨èƒŒæ™¯åŸ·è¡Œå®¹å™¨</li><li><code>--rm</code>ï¼šå®¹å™¨åœæ­¢å¾Œè‡ªå‹•åˆªé™¤ï¼Œé©ç”¨æ–¼æ¸¬è©¦æˆ–è‡¨æ™‚åŸ·è¡Œ</li><li><code>-p 8080:8080</code>ï¼šå°‡ä¸»æ©Ÿçš„ 8080 ç«¯å£æ˜ å°„åˆ°å®¹å™¨çš„ 8080 ç«¯å£</li></ul><blockquote><p><strong>æç¤º</strong><br>å»ºè­°ä½¿ç”¨ Docker Compose ä¾†ç®¡ç†è¤‡é›œçš„å¤šå®¹å™¨æ‡‰ç”¨ç¨‹å¼</p></blockquote><blockquote><p><strong>é‡è¦æç¤º</strong><br>åœ¨ç”Ÿç”¢ç’°å¢ƒä¸­ï¼Œå‹™å¿…éµå¾ªå®‰å…¨æœ€ä½³å¯¦è¸ï¼Œå®šæœŸæ›´æ–°åŸºç¤æ˜ åƒæª”ï¼Œä¸¦é€²è¡Œå®‰å…¨æƒæ</p></blockquote><p><strong>ğŸ“º å¯¦æˆ°æ•™å­¸å½±ç‰‡ï¼š<a href="https://youtu.be/1duxkm1t09s">ç·¨å¯«dockerfileå»ºç«‹imageå¿«é€Ÿéƒ¨å±¬ç’°å¢ƒ</a></strong></p><div style="position: relative; width: 100%; max-width: 800px; margin: 20px auto; box-shadow: 0 4px 8px rgba(0,0,0,0.1); border-radius: 8px; overflow: hidden;">  <div style="position: relative; padding-bottom: 56.25%; height: 0;">    <iframe src="https://www.youtube.com/embed/1duxkm1t09s?rel=0&modestbranding=1&showinfo=0"             style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none;"             allowfullscreen>    </iframe>  </div></div>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Docker-Dockerfile-ç·¨å¯«æŒ‡å—&quot;&gt;&lt;a href=&quot;#Docker-Dockerfile-ç·¨å¯«æŒ‡å—&quot; class=&quot;headerlink&quot; title=&quot;Docker Dockerfile ç·¨å¯«æŒ‡å—&quot;&gt;&lt;/a&gt;Docker Dockerfile ç·¨å¯«æŒ‡å—&lt;/h1&gt;&lt;h2 id=&quot;ä»€éº¼æ˜¯-Dockerfileï¼Ÿ&quot;&gt;&lt;a href=&quot;#ä»€éº¼æ˜¯-Dockerfileï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;ä»€éº¼æ˜¯ Dockerfileï¼Ÿ&quot;&gt;&lt;/a&gt;ä»€éº¼æ˜¯ Dockerfileï¼Ÿ&lt;/h2&gt;&lt;p&gt;Dockerfile æ˜¯ä¸€å€‹æ–‡å­—æª”æ¡ˆï¼ŒåŒ…å«äº†ä¸€ç³»åˆ—æŒ‡ä»¤ç”¨ä¾†è‡ªå‹•åŒ–å»ºæ§‹ Docker æ˜ åƒæª”ã€‚é€é Dockerfileï¼Œæˆ‘å€‘å¯ä»¥å°‡æ‡‰ç”¨ç¨‹å¼åŠå…¶é‹è¡Œç’°å¢ƒå°è£æˆä¸€å€‹å¯ç§»æ¤çš„æ˜ åƒæª”ï¼Œå¯¦ç¾ã€Œä¸€æ¬¡å»ºæ§‹ï¼Œåˆ°è™•é‹è¡Œã€çš„ç›®æ¨™ã€‚&lt;/p&gt;
&lt;h3 id=&quot;Dockerfile-çš„å„ªå‹¢&quot;&gt;&lt;a href=&quot;#Dockerfile-çš„å„ªå‹¢&quot; class=&quot;headerlink&quot; title=&quot;Dockerfile çš„å„ªå‹¢&quot;&gt;&lt;/a&gt;Dockerfile çš„å„ªå‹¢&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¯é‡ç¾æ€§&lt;/strong&gt;ï¼šç¢ºä¿åœ¨ä¸åŒç’°å¢ƒä¸­å»ºæ§‹å‡ºç›¸åŒçš„æ˜ åƒæª”&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç‰ˆæœ¬æ§åˆ¶&lt;/strong&gt;ï¼šå¯ä»¥åƒç¨‹å¼ç¢¼ä¸€æ¨£é€²è¡Œç‰ˆæœ¬ç®¡ç†&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‡ªå‹•åŒ–&lt;/strong&gt;ï¼šæ¸›å°‘æ‰‹å‹•é…ç½®ï¼Œé™ä½äººç‚ºéŒ¯èª¤&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¨™æº–åŒ–&lt;/strong&gt;ï¼šçµ±ä¸€çš„å»ºæ§‹æµç¨‹å’Œç’°å¢ƒé…ç½®&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="docker" scheme="https://pcion123.github.io/categories/docker/"/>
    
    
      <category term="docker" scheme="https://pcion123.github.io/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>Docker åŸºæœ¬ä»‹ç´¹</title>
    <link href="https://pcion123.github.io/2025/11/16/docker-intro/"/>
    <id>https://pcion123.github.io/2025/11/16/docker-intro/</id>
    <published>2025-11-16T15:44:54.000Z</published>
    <updated>2025-11-16T15:51:46.787Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Docker-åŸºæœ¬ä»‹ç´¹"><a href="#Docker-åŸºæœ¬ä»‹ç´¹" class="headerlink" title="Docker åŸºæœ¬ä»‹ç´¹"></a>Docker åŸºæœ¬ä»‹ç´¹</h1><h2 id="æ¶æ§‹ç¸½è¦½"><a href="#æ¶æ§‹ç¸½è¦½" class="headerlink" title="æ¶æ§‹ç¸½è¦½"></a>æ¶æ§‹ç¸½è¦½</h2><img src="/2025/11/16/docker-intro/docker-architecture.svg" class="" title="Docker æ¶æ§‹åœ–"><p><em>ä¸Šåœ–å±•ç¤ºäº† Docker å®Œæ•´æ¶æ§‹ï¼ŒåŒ…å« Docker å®¢æˆ¶ç«¯ã€Docker å®ˆè­·ç¨‹åºã€å®¹å™¨é‹è¡Œæ™‚ã€æ˜ åƒæª”å€‰åº«ç­‰æ ¸å¿ƒå…ƒä»¶åŠå…¶äº’å‹•é—œä¿‚</em></p><h3 id="Docker-å¦‚ä½•é‹ä½œï¼Ÿ"><a href="#Docker-å¦‚ä½•é‹ä½œï¼Ÿ" class="headerlink" title="Docker å¦‚ä½•é‹ä½œï¼Ÿ"></a>Docker å¦‚ä½•é‹ä½œï¼Ÿ</h3><p>Docker é‡‡ç”¨å®¢æˆ¶ç«¯-ä¼ºæœå™¨æ¶æ§‹ï¼Œä¸»è¦åŒ…å«ä»¥ä¸‹å·¥ä½œæµç¨‹ï¼š</p><ol><li><strong>é–‹ç™¼éšæ®µ</strong>ï¼šä½¿ç”¨ Dockerfile å®šç¾©æ‡‰ç”¨ç¨‹å¼ç’°å¢ƒ</li><li><strong>å»ºæ§‹éšæ®µ</strong>ï¼šé€é <code>docker build</code> å°‡ Dockerfile è½‰æ›ç‚ºæ˜ åƒæª”</li><li><strong>åˆ†äº«éšæ®µ</strong>ï¼šå°‡æ˜ åƒæª”æ¨é€åˆ° Docker Registry é€²è¡Œåˆ†äº«</li><li><strong>éƒ¨ç½²éšæ®µ</strong>ï¼šåœ¨ä»»ä½•æ”¯æ´ Docker çš„ç’°å¢ƒä¸­é‹è¡Œå®¹å™¨</li></ol><p>é€™å€‹æµç¨‹ç¢ºä¿äº†ã€Œä¸€æ¬¡å»ºæ§‹ï¼Œåˆ°è™•é‹è¡Œã€çš„ç›®æ¨™ã€‚</p><span id="more"></span><hr><h2 id="Docker-Engine"><a href="#Docker-Engine" class="headerlink" title="Docker Engine"></a>Docker Engine</h2><p><strong>Docker çš„æ ¸å¿ƒé‹è¡Œå¼•æ“</strong></p><ul><li>è² è²¬ç®¡ç†å®¹å™¨çš„æ•´å€‹ç”Ÿå‘½é€±æœŸ</li><li>åŒ…å« Docker å®ˆè­·ç¨‹åºï¼ˆdockerdï¼‰å’Œ REST API</li><li>æä¾›å®¹å™¨çš„å»ºç«‹ã€å•Ÿå‹•ã€åœæ­¢å’Œåˆªé™¤ç­‰åŠŸèƒ½</li></ul><h2 id="Containerï¼ˆå®¹å™¨ï¼‰"><a href="#Containerï¼ˆå®¹å™¨ï¼‰" class="headerlink" title="Containerï¼ˆå®¹å™¨ï¼‰"></a>Containerï¼ˆå®¹å™¨ï¼‰</h2><p><strong>æ‡‰ç”¨ç¨‹å¼çš„è¼•é‡åŒ–é‹è¡Œç’°å¢ƒ</strong></p><ul><li>åŸºæ–¼æ˜ åƒæª”å»ºç«‹çš„å¯åŸ·è¡Œå¯¦ä¾‹</li><li>æä¾›éš”é›¢çš„é‹è¡Œç’°å¢ƒï¼ŒåŒ…å«æ‡‰ç”¨ç¨‹å¼åŠå…¶æ‰€æœ‰ä¾è³´</li><li>ç›¸è¼ƒæ–¼è™›æ“¬æ©Ÿå™¨ï¼Œå…·æœ‰æ›´å¿«çš„å•Ÿå‹•é€Ÿåº¦å’Œæ›´ä½çš„è³‡æºæ¶ˆè€—</li><li>æ¯å€‹å®¹å™¨éƒ½æœ‰ç¨ç«‹çš„æª”æ¡ˆç³»çµ±ã€ç¶²è·¯å’Œç¨‹åºç©ºé–“</li></ul><h2 id="Imageï¼ˆæ˜ åƒæª”ï¼‰"><a href="#Imageï¼ˆæ˜ åƒæª”ï¼‰" class="headerlink" title="Imageï¼ˆæ˜ åƒæª”ï¼‰"></a>Imageï¼ˆæ˜ åƒæª”ï¼‰</h2><p><strong>å®¹å™¨çš„å”¯è®€æ¨¡æ¿</strong></p><ul><li>åŒ…å«åŸ·è¡Œæ‡‰ç”¨ç¨‹å¼æ‰€éœ€çš„æ‰€æœ‰æª”æ¡ˆã€å‡½å¼åº«å’Œè¨­å®š</li><li>æ¡ç”¨åˆ†å±¤æ¶æ§‹ï¼Œæ”¯æ´å¢é‡æ›´æ–°å’Œå¿«é€Ÿéƒ¨ç½²</li><li>å…·æœ‰ä¸å¯è®Šæ€§ï¼Œç¢ºä¿ç’°å¢ƒä¸€è‡´æ€§</li><li>å¯ä»¥é€é Dockerfile è‡ªå‹•åŒ–å»ºæ§‹</li></ul><h2 id="Dockerfile"><a href="#Dockerfile" class="headerlink" title="Dockerfile"></a>Dockerfile</h2><p><strong>æ˜ åƒæª”çš„å»ºæ§‹è…³æœ¬</strong></p><ul><li>å®šç¾©æ˜ åƒæª”å»ºæ§‹éç¨‹çš„æ–‡å­—æª”æ¡ˆ</li><li>åŒ…å«ä¸€ç³»åˆ—æŒ‡ä»¤ï¼Œå¦‚ FROMã€RUNã€COPYã€CMD ç­‰</li><li>å¯¦ç¾åŸºç¤è¨­æ–½å³ç¨‹å¼ç¢¼ï¼ˆInfrastructure as Codeï¼‰</li><li>æ”¯æ´ç‰ˆæœ¬æ§åˆ¶å’Œè‡ªå‹•åŒ–å»ºæ§‹</li></ul><blockquote><p><strong>æç¤º</strong><br>Dockerfile æ˜¯å¯¦ç¾å¯é‡ç¾éƒ¨ç½²çš„é—œéµï¼Œå»ºè­°éµå¾ªæœ€ä½³å¯¦è¸ä¾†å„ªåŒ–æ˜ åƒæª”å¤§å°å’Œå®‰å…¨æ€§</p></blockquote><h2 id="Docker-Registry"><a href="#Docker-Registry" class="headerlink" title="Docker Registry"></a>Docker Registry</h2><p><strong>æ˜ åƒæª”çš„å„²å­˜å’Œåˆ†ç™¼ä¸­å¿ƒ</strong></p><ul><li>æä¾›æ˜ åƒæª”çš„ä¸Šå‚³ã€ä¸‹è¼‰å’Œç‰ˆæœ¬ç®¡ç†</li><li>Docker Hub æ˜¯å®˜æ–¹çš„å…¬å…±è¨»å†Šä¸­å¿ƒ</li><li>æ”¯æ´ç§æœ‰è¨»å†Šä¸­å¿ƒï¼Œæ»¿è¶³ä¼æ¥­å®‰å…¨éœ€æ±‚</li><li>å¯¦ç¾æ˜ åƒæª”çš„é›†ä¸­ç®¡ç†å’Œåœ˜éšŠå”ä½œ</li></ul><h2 id="Volumeï¼ˆè³‡æ–™å·ï¼‰"><a href="#Volumeï¼ˆè³‡æ–™å·ï¼‰" class="headerlink" title="Volumeï¼ˆè³‡æ–™å·ï¼‰"></a>Volumeï¼ˆè³‡æ–™å·ï¼‰</h2><p><strong>æŒä¹…åŒ–è³‡æ–™å„²å­˜</strong></p><ul><li>è§£æ±ºå®¹å™¨é‡å•Ÿæ™‚è³‡æ–™éºå¤±çš„å•é¡Œ</li><li>æä¾›å®¹å™¨é–“çš„è³‡æ–™å…±äº«æ©Ÿåˆ¶</li><li>æ”¯æ´å¤šç¨®å„²å­˜é©…å‹•ï¼Œå¦‚æœ¬æ©Ÿå„²å­˜ã€ç¶²è·¯å„²å­˜ç­‰</li><li>è³‡æ–™ç”Ÿå‘½é€±æœŸç¨ç«‹æ–¼å®¹å™¨ç”Ÿå‘½é€±æœŸ</li></ul><h2 id="Networkï¼ˆç¶²è·¯ï¼‰"><a href="#Networkï¼ˆç¶²è·¯ï¼‰" class="headerlink" title="Networkï¼ˆç¶²è·¯ï¼‰"></a>Networkï¼ˆç¶²è·¯ï¼‰</h2><p><strong>å®¹å™¨é–“çš„é€šè¨Šç®¡ç†</strong></p><ul><li>æä¾›å®¹å™¨èˆ‡å¤–éƒ¨ä¸–ç•Œçš„ç¶²è·¯é€£æ¥</li><li>æ”¯æ´å¤šç¨®ç¶²è·¯é©…å‹•æ¨¡å¼ï¼š<ul><li><strong>bridge</strong>: é è¨­ç¶²è·¯æ¨¡å¼ï¼Œé©ç”¨æ–¼å–®æ©Ÿå®¹å™¨é€šè¨Š</li><li><strong>host</strong>: ç›´æ¥ä½¿ç”¨ä¸»æ©Ÿç¶²è·¯ï¼Œæä¾›æœ€ä½³æ€§èƒ½</li><li><strong>overlay</strong>: è·¨ä¸»æ©Ÿå®¹å™¨é€šè¨Šï¼Œé©ç”¨æ–¼å¢é›†ç’°å¢ƒ</li><li><strong>none</strong>: ç„¡ç¶²è·¯å­˜å–ï¼Œé©ç”¨æ–¼å®‰å…¨è¦æ±‚è¼ƒé«˜çš„å ´æ™¯</li></ul></li></ul><blockquote><p><strong>è¨»è§£</strong><br>é©ç•¶çš„ç¶²è·¯é…ç½®å°æ–¼å®¹å™¨å®‰å…¨æ€§å’Œæ€§èƒ½è‡³é—œé‡è¦</p></blockquote><h2 id="Docker-Compose"><a href="#Docker-Compose" class="headerlink" title="Docker Compose"></a>Docker Compose</h2><p><strong>å¤šå®¹å™¨æ‡‰ç”¨ç¨‹å¼çš„ç·¨æ’å·¥å…·</strong></p><ul><li>é€é YAML æª”æ¡ˆå®šç¾©å’Œç®¡ç†å¤šå®¹å™¨æ‡‰ç”¨ç¨‹å¼</li><li>ç°¡åŒ–è¤‡é›œæ‡‰ç”¨ç¨‹å¼çš„éƒ¨ç½²å’Œç®¡ç†</li><li>æ”¯æ´æœå‹™ä¾è³´é—œä¿‚å’Œå•Ÿå‹•é †åºæ§åˆ¶</li><li>æä¾›é–‹ç™¼ã€æ¸¬è©¦å’Œç”Ÿç”¢ç’°å¢ƒçš„ä¸€è‡´æ€§</li></ul><blockquote><p><strong>é‡è¦æç¤º</strong><br>Docker Compose éå¸¸é©åˆé–‹ç™¼ç’°å¢ƒå’Œå°è¦æ¨¡éƒ¨ç½²ï¼Œå°æ–¼å¤§è¦æ¨¡ç”Ÿç”¢ç’°å¢ƒå»ºè­°ä½¿ç”¨ Kubernetes ç­‰ç·¨æ’å·¥å…·</p></blockquote><h2 id="å®‰è£-Docker"><a href="#å®‰è£-Docker" class="headerlink" title="å®‰è£ Docker"></a>å®‰è£ Docker</h2><p>Docker æä¾›äº†è·¨å¹³å°çš„å®‰è£æ”¯æ´ã€‚ä»¥ä¸‹å°‡ä»‹ç´¹æœ€å¸¸ç”¨çš„å®‰è£æ–¹å¼å’Œæ³¨æ„äº‹é …ã€‚</p><h3 id="æ¨è–¦å®‰è£æ–¹å¼"><a href="#æ¨è–¦å®‰è£æ–¹å¼" class="headerlink" title="æ¨è–¦å®‰è£æ–¹å¼"></a>æ¨è–¦å®‰è£æ–¹å¼</h3><p><strong>Windows&#x2F;macOS ä½¿ç”¨è€…</strong>ï¼šç›´æ¥ä¸‹è¼‰ <a href="https://www.docker.com/products/docker-desktop">Docker Desktop</a>ï¼Œé€™æ˜¯æœ€ç°¡å–®ä¸”å®Œæ•´çš„è§£æ±ºæ–¹æ¡ˆã€‚</p><p><strong>Linux ä½¿ç”¨è€…</strong>ï¼šä½¿ç”¨ä»¥ä¸‹æ–¹å¼ä¹‹ä¸€ï¼š</p><ul><li><strong>æ¨è–¦</strong>ï¼šå®˜æ–¹å®‰è£è…³æœ¬ï¼ˆæœ€æ–°ç‰ˆæœ¬ï¼‰</li><li><strong>æ›¿ä»£</strong>ï¼šå¥—ä»¶ç®¡ç†å™¨å®‰è£ï¼ˆç°¡å–®å¿«é€Ÿï¼‰</li></ul><h3 id="ç³»çµ±éœ€æ±‚"><a href="#ç³»çµ±éœ€æ±‚" class="headerlink" title="ç³»çµ±éœ€æ±‚"></a>ç³»çµ±éœ€æ±‚</h3><table><thead><tr><th>å¹³å°</th><th>æœ€ä½éœ€æ±‚</th><th>å»ºè­°é…ç½®</th></tr></thead><tbody><tr><td><strong>Linux</strong></td><td>64ä½å…ƒã€Kernel 3.10+</td><td>Ubuntu 20.04+ã€Debian 10+ã€CentOS 8+</td></tr><tr><td><strong>Windows</strong></td><td>Windows 10 Pro 64ä½å…ƒ</td><td>Windows 11 + WSL 2</td></tr><tr><td><strong>macOS</strong></td><td>macOS 10.15+</td><td>macOS 12+ å« Apple Silicon æ”¯æ´</td></tr></tbody></table><h3 id="æ–¹æ³•ä¸€ï¼šå®˜æ–¹ä¸€éµå®‰è£è…³æœ¬ï¼ˆæ¨è–¦ï¼‰"><a href="#æ–¹æ³•ä¸€ï¼šå®˜æ–¹ä¸€éµå®‰è£è…³æœ¬ï¼ˆæ¨è–¦ï¼‰" class="headerlink" title="æ–¹æ³•ä¸€ï¼šå®˜æ–¹ä¸€éµå®‰è£è…³æœ¬ï¼ˆæ¨è–¦ï¼‰"></a>æ–¹æ³•ä¸€ï¼šå®˜æ–¹ä¸€éµå®‰è£è…³æœ¬ï¼ˆæ¨è–¦ï¼‰</h3><p>é€™æ˜¯ Docker å®˜æ–¹æä¾›çš„æœ€ç°¡å–®å®‰è£æ–¹å¼ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸‹è¼‰ä¸¦åŸ·è¡Œå®˜æ–¹å®‰è£è…³æœ¬</span></span><br><span class="line">curl -fsSL https://get.docker.com -o get-docker.sh</span><br><span class="line">sudo sh get-docker.sh</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å•Ÿå‹• Docker æœå‹™</span></span><br><span class="line">sudo systemctl enable --now docker</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å°‡ä½¿ç”¨è€…åŠ å…¥ docker ç¾¤çµ„</span></span><br><span class="line">sudo usermod -aG docker $USER</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é‡æ–°è¼‰å…¥ç¾¤çµ„è¨­å®š</span></span><br><span class="line">newgrp docker</span><br></pre></td></tr></table></figure><h3 id="æ–¹æ³•äºŒï¼šæ‰‹å‹•å®‰è£ï¼ˆUbuntu-Debianï¼‰"><a href="#æ–¹æ³•äºŒï¼šæ‰‹å‹•å®‰è£ï¼ˆUbuntu-Debianï¼‰" class="headerlink" title="æ–¹æ³•äºŒï¼šæ‰‹å‹•å®‰è£ï¼ˆUbuntu&#x2F;Debianï¼‰"></a>æ–¹æ³•äºŒï¼šæ‰‹å‹•å®‰è£ï¼ˆUbuntu&#x2F;Debianï¼‰</h3><p>å¦‚æœæ‚¨éœ€è¦æ›´ç²¾ç¢ºçš„æ§åˆ¶ï¼Œå¯ä»¥ä½¿ç”¨æ‰‹å‹•å®‰è£ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ›´æ–°å¥—ä»¶ç´¢å¼•</span></span><br><span class="line">sudo apt update</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®‰è£å¿…è¦çš„å¥—ä»¶</span></span><br><span class="line">sudo apt install -y apt-transport-https ca-certificates curl gnupg lsb-release</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ·»åŠ  Docker å®˜æ–¹ GPG é‡‘é‘°</span></span><br><span class="line">curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ·»åŠ  Docker è»Ÿé«”æº</span></span><br><span class="line">echo &quot;deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable&quot; | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ›´æ–°å¥—ä»¶ç´¢å¼•ä¸¦å®‰è£ Docker</span></span><br><span class="line">sudo apt update</span><br><span class="line">sudo apt install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å•Ÿå‹• Docker æœå‹™ä¸¦è¨­å®šç‚ºé–‹æ©Ÿè‡ªå‹•å•Ÿå‹•</span></span><br><span class="line">sudo systemctl enable --now docker</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å°‡ç›®å‰ä½¿ç”¨è€…åŠ å…¥ docker ç¾¤çµ„ï¼Œé¿å…æ¯æ¬¡éƒ½éœ€è¦ <span class="built_in">sudo</span></span></span><br><span class="line">sudo usermod -aG docker $USER</span><br></pre></td></tr></table></figure><h3 id="æ–¹æ³•ä¸‰ï¼šå¥—ä»¶ç®¡ç†å™¨å®‰è£ï¼ˆç°¡å–®å¿«é€Ÿï¼‰"><a href="#æ–¹æ³•ä¸‰ï¼šå¥—ä»¶ç®¡ç†å™¨å®‰è£ï¼ˆç°¡å–®å¿«é€Ÿï¼‰" class="headerlink" title="æ–¹æ³•ä¸‰ï¼šå¥—ä»¶ç®¡ç†å™¨å®‰è£ï¼ˆç°¡å–®å¿«é€Ÿï¼‰"></a>æ–¹æ³•ä¸‰ï¼šå¥—ä»¶ç®¡ç†å™¨å®‰è£ï¼ˆç°¡å–®å¿«é€Ÿï¼‰</h3><p>é©ç”¨æ–¼å¿«é€Ÿæ¸¬è©¦æˆ–å­¸ç¿’ç’°å¢ƒï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Ubuntu/Debian</span></span><br><span class="line">sudo apt update &amp;&amp; sudo apt install -y docker.io docker-compose-plugin</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">CentOS/RHEL</span></span><br><span class="line">sudo yum install -y docker docker-compose-plugin</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å•Ÿå‹•æœå‹™ä¸¦è¨­å®šé–‹æ©Ÿè‡ªå•Ÿ</span></span><br><span class="line">sudo systemctl enable --now docker</span><br><span class="line">sudo usermod -aG docker $USER</span><br><span class="line">newgrp docker</span><br></pre></td></tr></table></figure><h3 id="å®‰è£å¾Œå¿…è¦æ­¥é©Ÿ"><a href="#å®‰è£å¾Œå¿…è¦æ­¥é©Ÿ" class="headerlink" title="å®‰è£å¾Œå¿…è¦æ­¥é©Ÿ"></a>å®‰è£å¾Œå¿…è¦æ­¥é©Ÿ</h3><p>ç„¡è«–ä½¿ç”¨å“ªç¨®å®‰è£æ–¹å¼ï¼Œéƒ½éœ€è¦å®Œæˆä»¥ä¸‹æ­¥é©Ÿï¼š</p><h4 id="1-é©—è­‰å®‰è£"><a href="#1-é©—è­‰å®‰è£" class="headerlink" title="1. é©—è­‰å®‰è£"></a>1. é©—è­‰å®‰è£</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æª¢æŸ¥ Docker ç‰ˆæœ¬</span></span><br><span class="line">docker --version</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æª¢æŸ¥ Docker ç‹€æ…‹</span></span><br><span class="line">docker info</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åŸ·è¡Œæ¸¬è©¦å®¹å™¨</span></span><br><span class="line">docker run --rm hello-world</span><br></pre></td></tr></table></figure><h4 id="2-ç¢ºèªæ¬Šé™è¨­å®š"><a href="#2-ç¢ºèªæ¬Šé™è¨­å®š" class="headerlink" title="2. ç¢ºèªæ¬Šé™è¨­å®š"></a>2. ç¢ºèªæ¬Šé™è¨­å®š</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç¢ºèªä½¿ç”¨è€…åœ¨ docker ç¾¤çµ„ä¸­</span></span><br><span class="line">groups $USER | grep docker</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å¦‚æœæ²’æœ‰ï¼ŒåŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼š</span></span><br><span class="line">sudo usermod -aG docker $USER</span><br><span class="line">newgrp docker</span><br></pre></td></tr></table></figure><blockquote><p><strong>å®‰å…¨æé†’</strong>ï¼šå°‡ä½¿ç”¨è€…åŠ å…¥ docker ç¾¤çµ„æœƒçµ¦äºˆè©²ä½¿ç”¨è€…ç­‰åŒ root çš„ Docker æ“ä½œæ¬Šé™ã€‚åœ¨ç”Ÿç”¢ç’°å¢ƒä¸­è«‹è¬¹æ…è€ƒæ…®å®‰å…¨æ€§ã€‚</p></blockquote><h3 id="Windows-å’Œ-macOS-å®‰è£"><a href="#Windows-å’Œ-macOS-å®‰è£" class="headerlink" title="Windows å’Œ macOS å®‰è£"></a>Windows å’Œ macOS å®‰è£</h3><p>é€™å…©å€‹å¹³å°çš„å®‰è£éå¸¸ç°¡å–®ï¼š</p><ol><li>ä¸‹è¼‰ <a href="https://www.docker.com/products/docker-desktop">Docker Desktop</a></li><li>åŸ·è¡Œå®‰è£æª”ä¸¦éµå¾ªå®‰è£ç²¾éˆ</li><li>å®‰è£å®Œæˆå¾Œé‡æ–°å•Ÿå‹•é›»è…¦ï¼ˆWindowsï¼‰æˆ–å•Ÿå‹•æ‡‰ç”¨ç¨‹å¼ï¼ˆmacOSï¼‰</li><li>ç­‰å¾… Docker æœå‹™å•Ÿå‹•å®Œæˆ</li><li>ä½¿ç”¨ä¸Šè¿°é©—è­‰æ­¥é©Ÿç¢ºèªå®‰è£æˆåŠŸ</li></ol><h2 id="å®‰è£-Docker-Compose"><a href="#å®‰è£-Docker-Compose" class="headerlink" title="å®‰è£ Docker Compose"></a>å®‰è£ Docker Compose</h2><p>Docker Compose æ˜¯ç”¨æ–¼å®šç¾©å’Œç®¡ç†å¤šå®¹å™¨ Docker æ‡‰ç”¨ç¨‹å¼çš„å·¥å…·ã€‚ç¾ä»£ç‰ˆæœ¬çš„ Docker å·²ç¶“å…§å»º Compose åŠŸèƒ½ï¼Œä½†æ‚¨ä¹Ÿå¯ä»¥å–®ç¨å®‰è£ Docker Composeã€‚</p><h3 id="æª¢æŸ¥æ˜¯å¦å·²å®‰è£"><a href="#æª¢æŸ¥æ˜¯å¦å·²å®‰è£" class="headerlink" title="æª¢æŸ¥æ˜¯å¦å·²å®‰è£"></a>æª¢æŸ¥æ˜¯å¦å·²å®‰è£</h3><p>ç¾ä»£ç‰ˆæœ¬çš„ Docker Desktop å’Œ Docker Engine å·²ç¶“å…§å»ºäº† Docker Composeï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æª¢æŸ¥ Docker Compose ç‰ˆæœ¬ï¼ˆæ–°ç‰ˆèªæ³•ï¼‰</span></span><br><span class="line">docker compose version</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æª¢æŸ¥ Docker Compose ç‰ˆæœ¬ï¼ˆèˆŠç‰ˆèªæ³•ï¼‰</span></span><br><span class="line">docker-compose --version</span><br></pre></td></tr></table></figure><h3 id="Linux-æ‰‹å‹•å®‰è£-Docker-Compose"><a href="#Linux-æ‰‹å‹•å®‰è£-Docker-Compose" class="headerlink" title="Linux æ‰‹å‹•å®‰è£ Docker Compose"></a>Linux æ‰‹å‹•å®‰è£ Docker Compose</h3><p>å¦‚æœæ‚¨çš„ç³»çµ±æ²’æœ‰å…§å»º Docker Composeï¼Œå¯ä»¥æ‰‹å‹•å®‰è£ã€‚æœ‰å…©ç¨®ä¸»è¦çš„å®‰è£æ–¹å¼ï¼š</p><h4 id="æ–¹æ³•ä¸€ï¼šä½œç‚º-Docker-CLI-æ’ä»¶å®‰è£ï¼ˆæ¨è–¦ï¼‰"><a href="#æ–¹æ³•ä¸€ï¼šä½œç‚º-Docker-CLI-æ’ä»¶å®‰è£ï¼ˆæ¨è–¦ï¼‰" class="headerlink" title="æ–¹æ³•ä¸€ï¼šä½œç‚º Docker CLI æ’ä»¶å®‰è£ï¼ˆæ¨è–¦ï¼‰"></a>æ–¹æ³•ä¸€ï¼šä½œç‚º Docker CLI æ’ä»¶å®‰è£ï¼ˆæ¨è–¦ï¼‰</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è¨­å®š Docker é…ç½®ç›®éŒ„</span></span><br><span class="line">DOCKER_CONFIG=$&#123;DOCKER_CONFIG:-$HOME/.docker&#125;</span><br><span class="line">mkdir -p $DOCKER_CONFIG/cli-plugins</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸‹è¼‰ Docker Compose æ’ä»¶</span></span><br><span class="line">curl -SL https://github.com/docker/compose/releases/download/v2.24.5/docker-compose-linux-x86_64 \</span><br><span class="line">  -o $DOCKER_CONFIG/cli-plugins/docker-compose</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">çµ¦äºˆåŸ·è¡Œæ¬Šé™</span></span><br><span class="line">chmod +x $DOCKER_CONFIG/cli-plugins/docker-compose</span><br></pre></td></tr></table></figure><h4 id="æ–¹æ³•äºŒï¼šä½œç‚ºç¨ç«‹åŸ·è¡Œæª”å®‰è£"><a href="#æ–¹æ³•äºŒï¼šä½œç‚ºç¨ç«‹åŸ·è¡Œæª”å®‰è£" class="headerlink" title="æ–¹æ³•äºŒï¼šä½œç‚ºç¨ç«‹åŸ·è¡Œæª”å®‰è£"></a>æ–¹æ³•äºŒï¼šä½œç‚ºç¨ç«‹åŸ·è¡Œæª”å®‰è£</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸‹è¼‰æœ€æ–°ç‰ˆæœ¬çš„ Docker Compose</span></span><br><span class="line">sudo curl -L &quot;https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">çµ¦äºˆåŸ·è¡Œæ¬Šé™</span></span><br><span class="line">sudo chmod +x /usr/local/bin/docker-compose</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å»ºç«‹è»Ÿé€£çµï¼ˆå¯é¸ï¼‰</span></span><br><span class="line">sudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose</span><br></pre></td></tr></table></figure><h4 id="å…©ç¨®å®‰è£æ–¹å¼çš„å€åˆ¥"><a href="#å…©ç¨®å®‰è£æ–¹å¼çš„å€åˆ¥" class="headerlink" title="å…©ç¨®å®‰è£æ–¹å¼çš„å€åˆ¥"></a>å…©ç¨®å®‰è£æ–¹å¼çš„å€åˆ¥</h4><table><thead><tr><th>ç‰¹æ€§</th><th>æ’ä»¶å®‰è£ï¼ˆæ–¹æ³•ä¸€ï¼‰</th><th>ç¨ç«‹å®‰è£ï¼ˆæ–¹æ³•äºŒï¼‰</th></tr></thead><tbody><tr><td><strong>å®‰è£ä½ç½®</strong></td><td><code>~/.docker/cli-plugins/</code></td><td><code>/usr/local/bin/</code></td></tr><tr><td><strong>æ¬Šé™éœ€æ±‚</strong></td><td>ç”¨æˆ¶æ¬Šé™å³å¯</td><td>éœ€è¦ sudo æ¬Šé™</td></tr><tr><td><strong>ä½¿ç”¨èªæ³•</strong></td><td><code>docker compose</code></td><td><code>docker-compose</code></td></tr><tr><td><strong>æ•´åˆæ€§</strong></td><td>èˆ‡ Docker CLI æ·±åº¦æ•´åˆ</td><td>ç¨ç«‹é‹è¡Œ</td></tr><tr><td><strong>æ›´æ–°æ–¹å¼</strong></td><td>æ›¿æ›æ’ä»¶æª”æ¡ˆ</td><td>é‡æ–°ä¸‹è¼‰åŸ·è¡Œæª”</td></tr><tr><td><strong>ç³»çµ±å½±éŸ¿</strong></td><td>åƒ…å½±éŸ¿ç•¶å‰ç”¨æˆ¶</td><td>å…¨ç³»çµ±å¯ç”¨</td></tr><tr><td><strong>Docker ç‰ˆæœ¬</strong></td><td>éœ€è¦ Docker 20.10+</td><td>æ”¯æ´è¼ƒèˆŠç‰ˆæœ¬</td></tr></tbody></table><p><strong>æ¨è–¦ä½¿ç”¨æ’ä»¶å®‰è£</strong>çš„åŸå› ï¼š</p><ul><li>ä¸éœ€è¦ sudo æ¬Šé™ï¼Œæ›´å®‰å…¨</li><li>èˆ‡ Docker CLI æ›´å¥½çš„æ•´åˆ</li><li>æ”¯æ´æ–°çš„ <code>docker compose</code> èªæ³•</li><li>æ›´å®¹æ˜“ç®¡ç†å’Œæ›´æ–°</li></ul><h3 id="ä½¿ç”¨å¥—ä»¶ç®¡ç†å™¨å®‰è£"><a href="#ä½¿ç”¨å¥—ä»¶ç®¡ç†å™¨å®‰è£" class="headerlink" title="ä½¿ç”¨å¥—ä»¶ç®¡ç†å™¨å®‰è£"></a>ä½¿ç”¨å¥—ä»¶ç®¡ç†å™¨å®‰è£</h3><p><strong>Ubuntu&#x2F;Debian</strong>ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install -y docker-compose-plugin</span><br></pre></td></tr></table></figure><p><strong>CentOS&#x2F;RHEL</strong>ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install -y docker-compose-plugin</span><br></pre></td></tr></table></figure><h3 id="é©—è­‰å®‰è£"><a href="#é©—è­‰å®‰è£" class="headerlink" title="é©—è­‰å®‰è£"></a>é©—è­‰å®‰è£</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é©—è­‰ Docker Compose å®‰è£</span></span><br><span class="line">docker compose version</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹å¹«åŠ©è³‡è¨Š</span></span><br><span class="line">docker compose --help</span><br></pre></td></tr></table></figure><h3 id="æ–°èˆŠèªæ³•å·®ç•°"><a href="#æ–°èˆŠèªæ³•å·®ç•°" class="headerlink" title="æ–°èˆŠèªæ³•å·®ç•°"></a>æ–°èˆŠèªæ³•å·®ç•°</h3><ul><li><strong>æ–°ç‰ˆèªæ³•</strong>ï¼š<code>docker compose</code> ï¼ˆæ¨è–¦ä½¿ç”¨ï¼‰</li><li><strong>èˆŠç‰ˆèªæ³•</strong>ï¼š<code>docker-compose</code></li></ul><p>æ–°ç‰ˆ Docker Compose ä½œç‚º Docker CLI çš„æ’ä»¶ï¼Œæä¾›æ›´å¥½çš„æ•´åˆæ€§å’Œæ€§èƒ½ã€‚</p><hr><h2 id="å®Œæ•´ç’°å¢ƒé©—è­‰"><a href="#å®Œæ•´ç’°å¢ƒé©—è­‰" class="headerlink" title="å®Œæ•´ç’°å¢ƒé©—è­‰"></a>å®Œæ•´ç’°å¢ƒé©—è­‰</h2><p>å®Œæˆ Docker å’Œ Docker Compose å®‰è£å¾Œï¼Œä½¿ç”¨ä»¥ä¸‹æ­¥é©Ÿé©—è­‰æ•´å€‹ç’°å¢ƒï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">1. æª¢æŸ¥ Docker åŸºæœ¬ç‹€æ…‹</span></span><br><span class="line">docker --version &amp;&amp; docker compose version</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">2. æª¢æŸ¥ Docker æœå‹™ç‹€æ…‹</span></span><br><span class="line">docker info | grep -E &quot;Server Version|Storage Driver|Cgroup Driver&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">3. åŸ·è¡Œç°¡å–®çš„å®¹å™¨æ¸¬è©¦</span></span><br><span class="line">docker run --rm hello-world</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">4. æ¸¬è©¦ Docker Compose åŠŸèƒ½</span></span><br><span class="line">echo &#x27;version: &quot;3.8&quot;</span><br><span class="line">services:</span><br><span class="line">  test:</span><br><span class="line">    image: hello-world&#x27; &gt; docker-compose.yml</span><br><span class="line">docker compose up</span><br><span class="line">docker compose down</span><br><span class="line">rm docker-compose.yml</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">5. æ¸…ç†æ¸¬è©¦è³‡æº</span></span><br><span class="line">docker system prune -f</span><br></pre></td></tr></table></figure><p>å¦‚æœä»¥ä¸Šæ‰€æœ‰æ­¥é©Ÿéƒ½æˆåŠŸåŸ·è¡Œï¼Œæ°å–œæ‚¨ï¼Docker ç’°å¢ƒå·²ç¶“æº–å‚™å°±ç·’ï¼Œå¯ä»¥é–‹å§‹æ‚¨çš„å®¹å™¨åŒ–ä¹‹æ—…äº†ï¼</p><hr><h2 id="ä¸‹ä¸€æ­¥å­¸ç¿’å»ºè­°"><a href="#ä¸‹ä¸€æ­¥å­¸ç¿’å»ºè­°" class="headerlink" title="ä¸‹ä¸€æ­¥å­¸ç¿’å»ºè­°"></a>ä¸‹ä¸€æ­¥å­¸ç¿’å»ºè­°</h2><p>ç¾åœ¨æ‚¨å·²ç¶“äº†è§£äº† Docker çš„æ ¸å¿ƒæ¦‚å¿µä¸¦å®Œæˆäº†å®‰è£ï¼Œæ¥ä¸‹ä¾†å»ºè­°ï¼š</p><ol><li><strong>å­¸ç¿’åŸºæœ¬æŒ‡ä»¤</strong>ï¼šç†Ÿæ‚‰ <code>docker run</code>ã€<code>docker build</code>ã€<code>docker ps</code> ç­‰å¸¸ç”¨æŒ‡ä»¤</li><li><strong>ç·¨å¯« Dockerfile</strong>ï¼šå­¸ç¿’å¦‚ä½•å»ºç«‹è‡ªå·±çš„æ˜ åƒæª”</li><li><strong>ä½¿ç”¨ Docker Compose</strong>ï¼šç®¡ç†å¤šå®¹å™¨æ‡‰ç”¨ç¨‹å¼</li><li><strong>æ¢ç´¢å¯¦éš›å°ˆæ¡ˆ</strong>ï¼šå°‡ç¾æœ‰æ‡‰ç”¨ç¨‹å¼å®¹å™¨åŒ–</li></ol>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Docker-åŸºæœ¬ä»‹ç´¹&quot;&gt;&lt;a href=&quot;#Docker-åŸºæœ¬ä»‹ç´¹&quot; class=&quot;headerlink&quot; title=&quot;Docker åŸºæœ¬ä»‹ç´¹&quot;&gt;&lt;/a&gt;Docker åŸºæœ¬ä»‹ç´¹&lt;/h1&gt;&lt;h2 id=&quot;æ¶æ§‹ç¸½è¦½&quot;&gt;&lt;a href=&quot;#æ¶æ§‹ç¸½è¦½&quot; class=&quot;headerlink&quot; title=&quot;æ¶æ§‹ç¸½è¦½&quot;&gt;&lt;/a&gt;æ¶æ§‹ç¸½è¦½&lt;/h2&gt;&lt;img src=&quot;/2025/11/16/docker-intro/docker-architecture.svg&quot; class=&quot;&quot; title=&quot;Docker æ¶æ§‹åœ–&quot;&gt;

&lt;p&gt;&lt;em&gt;ä¸Šåœ–å±•ç¤ºäº† Docker å®Œæ•´æ¶æ§‹ï¼ŒåŒ…å« Docker å®¢æˆ¶ç«¯ã€Docker å®ˆè­·ç¨‹åºã€å®¹å™¨é‹è¡Œæ™‚ã€æ˜ åƒæª”å€‰åº«ç­‰æ ¸å¿ƒå…ƒä»¶åŠå…¶äº’å‹•é—œä¿‚&lt;/em&gt;&lt;/p&gt;
&lt;h3 id=&quot;Docker-å¦‚ä½•é‹ä½œï¼Ÿ&quot;&gt;&lt;a href=&quot;#Docker-å¦‚ä½•é‹ä½œï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;Docker å¦‚ä½•é‹ä½œï¼Ÿ&quot;&gt;&lt;/a&gt;Docker å¦‚ä½•é‹ä½œï¼Ÿ&lt;/h3&gt;&lt;p&gt;Docker é‡‡ç”¨å®¢æˆ¶ç«¯-ä¼ºæœå™¨æ¶æ§‹ï¼Œä¸»è¦åŒ…å«ä»¥ä¸‹å·¥ä½œæµç¨‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;é–‹ç™¼éšæ®µ&lt;/strong&gt;ï¼šä½¿ç”¨ Dockerfile å®šç¾©æ‡‰ç”¨ç¨‹å¼ç’°å¢ƒ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å»ºæ§‹éšæ®µ&lt;/strong&gt;ï¼šé€é &lt;code&gt;docker build&lt;/code&gt; å°‡ Dockerfile è½‰æ›ç‚ºæ˜ åƒæª”&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†äº«éšæ®µ&lt;/strong&gt;ï¼šå°‡æ˜ åƒæª”æ¨é€åˆ° Docker Registry é€²è¡Œåˆ†äº«&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éƒ¨ç½²éšæ®µ&lt;/strong&gt;ï¼šåœ¨ä»»ä½•æ”¯æ´ Docker çš„ç’°å¢ƒä¸­é‹è¡Œå®¹å™¨&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;é€™å€‹æµç¨‹ç¢ºä¿äº†ã€Œä¸€æ¬¡å»ºæ§‹ï¼Œåˆ°è™•é‹è¡Œã€çš„ç›®æ¨™ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="docker" scheme="https://pcion123.github.io/categories/docker/"/>
    
    
      <category term="docker" scheme="https://pcion123.github.io/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>Kubernetes Secret ä½¿ç”¨æŒ‡å—</title>
    <link href="https://pcion123.github.io/2025/11/02/kubernetes-secret-intro/"/>
    <id>https://pcion123.github.io/2025/11/02/kubernetes-secret-intro/</id>
    <published>2025-11-02T15:06:22.000Z</published>
    <updated>2025-11-02T16:04:52.596Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Kubernetes-Secret-ä½¿ç”¨æŒ‡å—"><a href="#Kubernetes-Secret-ä½¿ç”¨æŒ‡å—" class="headerlink" title="Kubernetes Secret ä½¿ç”¨æŒ‡å—"></a>Kubernetes Secret ä½¿ç”¨æŒ‡å—</h1><h2 id="ä»€éº¼æ˜¯-Secretsï¼Ÿ"><a href="#ä»€éº¼æ˜¯-Secretsï¼Ÿ" class="headerlink" title="ä»€éº¼æ˜¯ Secretsï¼Ÿ"></a>ä»€éº¼æ˜¯ Secretsï¼Ÿ</h2><p>Kubernetes Secrets æ˜¯ä¸€å€‹ API ç‰©ä»¶ï¼Œç”¨æ–¼å­˜å„²å’Œç®¡ç†æ•æ„Ÿè³‡è¨Šï¼Œå¦‚å¯†ç¢¼ã€OAuth æ¬Šæ–ã€SSH é‡‘é‘°ç­‰ã€‚Secrets é¡ä¼¼æ–¼ ConfigMapï¼Œä½†å°ˆé–€è¨­è¨ˆç”¨æ–¼ä¿å­˜æ©Ÿå¯†è³‡æ–™ï¼Œæä¾›äº†é¡å¤–çš„å®‰å…¨æ€§ä¿è­·ã€‚</p><h3 id="Secrets-çš„ä¸»è¦åŠŸèƒ½ï¼š"><a href="#Secrets-çš„ä¸»è¦åŠŸèƒ½ï¼š" class="headerlink" title="Secrets çš„ä¸»è¦åŠŸèƒ½ï¼š"></a>Secrets çš„ä¸»è¦åŠŸèƒ½ï¼š</h3><ul><li><strong>æ•æ„Ÿè³‡æ–™å­˜å„²</strong>ï¼šå®‰å…¨åœ°å­˜å„²å¯†ç¢¼ã€é‡‘é‘°ã€æ†‘è­‰ç­‰æ•æ„Ÿè³‡è¨Š</li><li><strong>è³‡æ–™åŠ å¯†</strong>ï¼šåœ¨ etcd ä¸­ä»¥ Base64 ç·¨ç¢¼å­˜å„²ï¼ˆå¯é…ç½®åŠ å¯†ï¼‰</li><li><strong>å­˜å–æ§åˆ¶</strong>ï¼šé€é RBAC æ§åˆ¶å°æ•æ„Ÿè³‡æ–™çš„å­˜å–</li><li><strong>å¤šç¨®é¡å‹æ”¯æ´</strong>ï¼šæ”¯æ´ä¸åŒé¡å‹çš„æ©Ÿå¯†è³‡æ–™æ ¼å¼</li></ul><h3 id="ç‚ºä»€éº¼ä½¿ç”¨-Secretsï¼Ÿ"><a href="#ç‚ºä»€éº¼ä½¿ç”¨-Secretsï¼Ÿ" class="headerlink" title="ç‚ºä»€éº¼ä½¿ç”¨ Secretsï¼Ÿ"></a>ç‚ºä»€éº¼ä½¿ç”¨ Secretsï¼Ÿ</h3><p>ç›¸è¼ƒæ–¼å°‡æ•æ„Ÿè³‡æ–™ç¡¬ç·¨ç¢¼åœ¨æ‡‰ç”¨ç¨‹å¼æˆ– ConfigMap ä¸­ï¼ŒSecrets æä¾›äº†æ›´å®‰å…¨çš„ç®¡ç†æ–¹å¼ï¼š</p><ol><li><strong>å®‰å…¨æ€§</strong>ï¼šæ•æ„Ÿè³‡æ–™èˆ‡æ‡‰ç”¨ç¨‹å¼ç¨‹å¼ç¢¼åˆ†é›¢</li><li><strong>å­˜å–æ§åˆ¶</strong>ï¼šç²¾ç´°çš„æ¬Šé™ç®¡ç†å’Œå¯©è¨ˆåŠŸèƒ½</li><li><strong>éˆæ´»æ€§</strong>ï¼šæ”¯æ´å¤šç¨®æ›è¼‰å’Œä½¿ç”¨æ–¹å¼</li><li><strong>åˆè¦æ€§</strong>ï¼šç¬¦åˆä¼æ¥­å®‰å…¨å’Œåˆè¦è¦æ±‚</li></ol><span id="more"></span><hr><h2 id="Secrets-é¡å‹å’Œé…ç½®"><a href="#Secrets-é¡å‹å’Œé…ç½®" class="headerlink" title="Secrets é¡å‹å’Œé…ç½®"></a>Secrets é¡å‹å’Œé…ç½®</h2><h3 id="Opaque-Secretsï¼ˆé€šç”¨å‹ï¼‰"><a href="#Opaque-Secretsï¼ˆé€šç”¨å‹ï¼‰" class="headerlink" title="Opaque Secretsï¼ˆé€šç”¨å‹ï¼‰"></a>Opaque Secretsï¼ˆé€šç”¨å‹ï¼‰</h3><p>æœ€å¸¸ç”¨çš„ Secret é¡å‹ï¼Œç”¨æ–¼å­˜å„²ä»»æ„çš„ä½¿ç”¨è€…å®šç¾©è³‡æ–™ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Secret</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">dockertest-secret</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dockertest-namespace</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">dockertest</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">Opaque</span></span><br><span class="line"><span class="attr">data:</span></span><br><span class="line">  <span class="comment"># Base64 ç·¨ç¢¼çš„è³‡æ–™</span></span><br><span class="line">  <span class="attr">username:</span> <span class="string">cm9vdA==</span>          <span class="comment"># root</span></span><br><span class="line">  <span class="attr">password:</span> <span class="string">MTIzNDU2</span>          <span class="comment"># 123456</span></span><br><span class="line">  <span class="attr">api-key:</span> <span class="string">YWJjZGVmZ2hpams=</span>   <span class="comment"># abcdefghijk</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment"># æˆ–ä½¿ç”¨ stringDataï¼ˆè‡ªå‹•ç·¨ç¢¼ï¼‰</span></span><br><span class="line"><span class="attr">stringData:</span></span><br><span class="line">  <span class="attr">database-url:</span> <span class="string">&quot;postgresql://user:pass@localhost:5432/db&quot;</span></span><br><span class="line">  <span class="attr">secret-token:</span> <span class="string">&quot;my-secret-token-value&quot;</span></span><br></pre></td></tr></table></figure><h3 id="Docker-Registry-Secrets"><a href="#Docker-Registry-Secrets" class="headerlink" title="Docker Registry Secrets"></a>Docker Registry Secrets</h3><p>ç”¨æ–¼ç§æœ‰æ˜ åƒå€‰åº«çš„èº«ä»½é©—è­‰ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Secret</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">docker-registry-secret</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dockertest-namespace</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">kubernetes.io/dockerconfigjson</span></span><br><span class="line"><span class="attr">data:</span></span><br><span class="line">  <span class="string">.dockerconfigjson:</span> <span class="string">eyJhdXRocyI6eyJyZWdpc3RyeS5leGFtcGxlLmNvbSI6eyJ1c2VybmFtZSI6InVzZXIiLCJwYXNzd29yZCI6InBhc3MiLCJhdXRoIjoiZFhObGNqcHdZWE56In19fQ==</span></span><br></pre></td></tr></table></figure><h3 id="TLS-Secrets"><a href="#TLS-Secrets" class="headerlink" title="TLS Secrets"></a>TLS Secrets</h3><p>ç”¨æ–¼å­˜å„² TLS æ†‘è­‰å’Œç§é‘°ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Secret</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">tls-secret</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dockertest-namespace</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">kubernetes.io/tls</span></span><br><span class="line"><span class="attr">data:</span></span><br><span class="line">  <span class="attr">tls.crt:</span> <span class="string">LS0tLS1CRUdJTi...</span> <span class="comment"># Base64 ç·¨ç¢¼çš„æ†‘è­‰</span></span><br><span class="line">  <span class="attr">tls.key:</span> <span class="string">LS0tLS1CRUdJTi...</span> <span class="comment"># Base64 ç·¨ç¢¼çš„ç§é‘°</span></span><br></pre></td></tr></table></figure><h3 id="Service-Account-Token-Secrets"><a href="#Service-Account-Token-Secrets" class="headerlink" title="Service Account Token Secrets"></a>Service Account Token Secrets</h3><p>ç”¨æ–¼æœå‹™å¸³æˆ¶æ¬Šæ–ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Secret</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">service-account-secret</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dockertest-namespace</span></span><br><span class="line">  <span class="attr">annotations:</span></span><br><span class="line">    <span class="attr">kubernetes.io/service-account.name:</span> <span class="string">&quot;my-service-account&quot;</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">kubernetes.io/service-account-token</span></span><br></pre></td></tr></table></figure><h2 id="åœ¨-Pod-ä¸­ä½¿ç”¨-Secrets"><a href="#åœ¨-Pod-ä¸­ä½¿ç”¨-Secrets" class="headerlink" title="åœ¨ Pod ä¸­ä½¿ç”¨ Secrets"></a>åœ¨ Pod ä¸­ä½¿ç”¨ Secrets</h2><h3 id="æ–¹æ³•ä¸€ï¼šä½œç‚ºç’°å¢ƒè®Šæ•¸"><a href="#æ–¹æ³•ä¸€ï¼šä½œç‚ºç’°å¢ƒè®Šæ•¸" class="headerlink" title="æ–¹æ³•ä¸€ï¼šä½œç‚ºç’°å¢ƒè®Šæ•¸"></a>æ–¹æ³•ä¸€ï¼šä½œç‚ºç’°å¢ƒè®Šæ•¸</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">dockertest-deployment</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dockertest-namespace</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">1</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">dockertest</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">dockertest</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">dockertest</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">docker.io/pcion123/tinydocker:0.0.10</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">        <span class="comment"># å¼•ç”¨ç‰¹å®šçš„ Secret éµ</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">DB_USERNAME</span></span><br><span class="line">          <span class="attr">valueFrom:</span></span><br><span class="line">            <span class="attr">secretKeyRef:</span></span><br><span class="line">              <span class="attr">name:</span> <span class="string">dockertest-secret</span></span><br><span class="line">              <span class="attr">key:</span> <span class="string">username</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">DB_PASSWORD</span></span><br><span class="line">          <span class="attr">valueFrom:</span></span><br><span class="line">            <span class="attr">secretKeyRef:</span></span><br><span class="line">              <span class="attr">name:</span> <span class="string">dockertest-secret</span></span><br><span class="line">              <span class="attr">key:</span> <span class="string">password</span></span><br><span class="line">        <span class="comment"># å¼•ç”¨æ•´å€‹ Secret ä½œç‚ºç’°å¢ƒè®Šæ•¸</span></span><br><span class="line">        <span class="attr">envFrom:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">secretRef:</span></span><br><span class="line">            <span class="attr">name:</span> <span class="string">dockertest-secret</span></span><br></pre></td></tr></table></figure><img src="/2025/11/02/kubernetes-secret-intro/kubernetes_secret_get_config1.png" class=""><h3 id="æ–¹æ³•äºŒï¼šä½œç‚ºæª”æ¡ˆæ›è¼‰"><a href="#æ–¹æ³•äºŒï¼šä½œç‚ºæª”æ¡ˆæ›è¼‰" class="headerlink" title="æ–¹æ³•äºŒï¼šä½œç‚ºæª”æ¡ˆæ›è¼‰"></a>æ–¹æ³•äºŒï¼šä½œç‚ºæª”æ¡ˆæ›è¼‰</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">app-with-secret-files</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dockertest-namespace</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">1</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">app-with-secrets</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">app-with-secrets</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">app</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">nginx:alpine</span></span><br><span class="line">        <span class="attr">volumeMounts:</span></span><br><span class="line">        <span class="comment"># æ›è¼‰æ•´å€‹ Secret ç‚ºç›®éŒ„</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">secret-volume</span></span><br><span class="line">          <span class="attr">mountPath:</span> <span class="string">/etc/secrets</span></span><br><span class="line">          <span class="attr">readOnly:</span> <span class="literal">true</span></span><br><span class="line">        <span class="comment"># æ›è¼‰ç‰¹å®šæª”æ¡ˆåˆ°æŒ‡å®šä½ç½®</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">secret-token</span></span><br><span class="line">          <span class="attr">mountPath:</span> <span class="string">/etc/token/secret-token</span></span><br><span class="line">          <span class="attr">subPath:</span> <span class="string">secret-token</span></span><br><span class="line">          <span class="attr">readOnly:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">secret-volume</span></span><br><span class="line">        <span class="attr">secret:</span></span><br><span class="line">          <span class="attr">secretName:</span> <span class="string">dockertest-secret</span></span><br><span class="line">          <span class="comment"># è¨­å®šæª”æ¡ˆæ¬Šé™</span></span><br><span class="line">          <span class="attr">defaultMode:</span> <span class="number">0400</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">secret-token</span></span><br><span class="line">        <span class="attr">secret:</span></span><br><span class="line">          <span class="attr">secretName:</span> <span class="string">dockertest-secret</span></span><br><span class="line">          <span class="attr">items:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">key:</span> <span class="string">secret-token</span></span><br><span class="line">            <span class="attr">path:</span> <span class="string">secret-token</span></span><br><span class="line">            <span class="attr">mode:</span> <span class="number">0444</span></span><br></pre></td></tr></table></figure><img src="/2025/11/02/kubernetes-secret-intro/kubernetes_secret_get_config2.png" class=""><h3 id="æ–¹æ³•ä¸‰ï¼šç”¨æ–¼-Image-Pull-Secrets"><a href="#æ–¹æ³•ä¸‰ï¼šç”¨æ–¼-Image-Pull-Secrets" class="headerlink" title="æ–¹æ³•ä¸‰ï¼šç”¨æ–¼ Image Pull Secrets"></a>æ–¹æ³•ä¸‰ï¼šç”¨æ–¼ Image Pull Secrets</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">private-image-deployment</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dockertest-namespace</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">1</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">private-app</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">private-app</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="comment"># ä½¿ç”¨ Image Pull Secret</span></span><br><span class="line">      <span class="attr">imagePullSecrets:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">docker-registry-secret</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">app</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">private-registry.example.com/my-app:latest</span></span><br></pre></td></tr></table></figure><h2 id="å»ºç«‹å’Œç®¡ç†-Secrets"><a href="#å»ºç«‹å’Œç®¡ç†-Secrets" class="headerlink" title="å»ºç«‹å’Œç®¡ç† Secrets"></a>å»ºç«‹å’Œç®¡ç† Secrets</h2><h3 id="ä½¿ç”¨-kubectl-æŒ‡ä»¤å»ºç«‹"><a href="#ä½¿ç”¨-kubectl-æŒ‡ä»¤å»ºç«‹" class="headerlink" title="ä½¿ç”¨ kubectl æŒ‡ä»¤å»ºç«‹"></a>ä½¿ç”¨ kubectl æŒ‡ä»¤å»ºç«‹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¾å­—é¢å€¼å»ºç«‹</span></span><br><span class="line">kubectl create secret generic my-secret \</span><br><span class="line">  --from-literal=username=admin \</span><br><span class="line">  --from-literal=password=secretpassword \</span><br><span class="line">  -n dockertest-namespace</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¾æª”æ¡ˆå»ºç«‹</span></span><br><span class="line">kubectl create secret generic file-secret \</span><br><span class="line">  --from-file=ssh-privatekey=/path/to/ssh/key \</span><br><span class="line">  --from-file=ssh-publickey=/path/to/ssh/key.pub \</span><br><span class="line">  -n dockertest-namespace</span><br><span class="line"></span><br><span class="line"><span class="comment"># å»ºç«‹ Docker Registry Secret</span></span><br><span class="line">kubectl create secret docker-registry regcred \</span><br><span class="line">  --docker-server=registry.example.com \</span><br><span class="line">  --docker-username=myuser \</span><br><span class="line">  --docker-password=mypassword \</span><br><span class="line">  --docker-email=myemail@example.com \</span><br><span class="line">  -n dockertest-namespace</span><br><span class="line"></span><br><span class="line"><span class="comment"># å»ºç«‹ TLS Secret</span></span><br><span class="line">kubectl create secret tls tls-secret \</span><br><span class="line">  --cert=path/to/tls.crt \</span><br><span class="line">  --key=path/to/tls.key \</span><br><span class="line">  -n dockertest-namespace</span><br></pre></td></tr></table></figure><h3 id="ç®¡ç†æŒ‡ä»¤"><a href="#ç®¡ç†æŒ‡ä»¤" class="headerlink" title="ç®¡ç†æŒ‡ä»¤"></a>ç®¡ç†æŒ‡ä»¤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹ Secret åˆ—è¡¨</span></span><br><span class="line">kubectl get secrets -n dockertest-namespace</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ Secret è©³ç´°è³‡è¨Šï¼ˆä¸é¡¯ç¤ºæ•æ„Ÿè³‡æ–™ï¼‰</span></span><br><span class="line">kubectl describe secret dockertest-secret -n dockertest-namespace</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ Secret çš„ YAML æ ¼å¼</span></span><br><span class="line">kubectl get secret dockertest-secret -n dockertest-namespace -o yaml</span><br><span class="line"></span><br><span class="line"><span class="comment"># è§£ç¢¼ Secret è³‡æ–™</span></span><br><span class="line">kubectl get secret dockertest-secret -n dockertest-namespace -o jsonpath=<span class="string">&#x27;&#123;.data.username&#125;&#x27;</span> | <span class="built_in">base64</span> -d</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç·¨è¼¯ Secret</span></span><br><span class="line">kubectl edit secret dockertest-secret -n dockertest-namespace</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆªé™¤ Secret</span></span><br><span class="line">kubectl delete secret dockertest-secret -n dockertest-namespace</span><br></pre></td></tr></table></figure><h3 id="æ›´æ–°-Secrets"><a href="#æ›´æ–°-Secrets" class="headerlink" title="æ›´æ–° Secrets"></a>æ›´æ–° Secrets</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ–¹æ³•ä¸€ï¼šé‡æ–°æ‡‰ç”¨ YAML æª”æ¡ˆ</span></span><br><span class="line">kubectl apply -f secret.yaml</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–¹æ³•äºŒï¼šä½¿ç”¨ patch æ›´æ–°</span></span><br><span class="line">kubectl patch secret dockertest-secret -n dockertest-namespace \</span><br><span class="line">  --<span class="built_in">type</span> merge -p <span class="string">&#x27;&#123;&quot;stringData&quot;:&#123;&quot;new-key&quot;:&quot;new-value&quot;&#125;&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–¹æ³•ä¸‰ï¼šæ›¿æ›æ•´å€‹ Secret</span></span><br><span class="line">kubectl replace -f updated-secret.yaml</span><br></pre></td></tr></table></figure><h2 id="å¯¦éš›æ‡‰ç”¨ç¯„ä¾‹"><a href="#å¯¦éš›æ‡‰ç”¨ç¯„ä¾‹" class="headerlink" title="å¯¦éš›æ‡‰ç”¨ç¯„ä¾‹"></a>å¯¦éš›æ‡‰ç”¨ç¯„ä¾‹</h2><h3 id="ç¯„ä¾‹ä¸€ï¼šè³‡æ–™åº«é€£ç·šé…ç½®"><a href="#ç¯„ä¾‹ä¸€ï¼šè³‡æ–™åº«é€£ç·šé…ç½®" class="headerlink" title="ç¯„ä¾‹ä¸€ï¼šè³‡æ–™åº«é€£ç·šé…ç½®"></a>ç¯„ä¾‹ä¸€ï¼šè³‡æ–™åº«é€£ç·šé…ç½®</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Secret</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">database-secret</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dockertest-namespace</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">Opaque</span></span><br><span class="line"><span class="attr">stringData:</span></span><br><span class="line">  <span class="attr">DB_HOST:</span> <span class="string">&quot;postgresql.example.com&quot;</span></span><br><span class="line">  <span class="attr">DB_PORT:</span> <span class="string">&quot;5432&quot;</span></span><br><span class="line">  <span class="attr">DB_NAME:</span> <span class="string">&quot;myapp&quot;</span></span><br><span class="line">  <span class="attr">DB_USERNAME:</span> <span class="string">&quot;appuser&quot;</span></span><br><span class="line">  <span class="attr">DB_PASSWORD:</span> <span class="string">&quot;super-secret-password&quot;</span></span><br><span class="line">  <span class="attr">DB_URL:</span> <span class="string">&quot;postgresql://appuser:super-secret-password@postgresql.example.com:5432/myapp&quot;</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">database-app</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dockertest-namespace</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">1</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">database-app</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">database-app</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">app</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">docker.io/pcion123/tinydocker:0.0.10</span></span><br><span class="line">        <span class="attr">envFrom:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">secretRef:</span></span><br><span class="line">            <span class="attr">name:</span> <span class="string">database-secret</span></span><br></pre></td></tr></table></figure><h3 id="ç¯„ä¾‹äºŒï¼šå¤šæœå‹™èªè­‰é…ç½®"><a href="#ç¯„ä¾‹äºŒï¼šå¤šæœå‹™èªè­‰é…ç½®" class="headerlink" title="ç¯„ä¾‹äºŒï¼šå¤šæœå‹™èªè­‰é…ç½®"></a>ç¯„ä¾‹äºŒï¼šå¤šæœå‹™èªè­‰é…ç½®</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Secret</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">service-credentials</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dockertest-namespace</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">Opaque</span></span><br><span class="line"><span class="attr">stringData:</span></span><br><span class="line">  <span class="comment"># API æœå‹™èªè­‰</span></span><br><span class="line">  <span class="attr">API_KEY:</span> <span class="string">&quot;sk-1234567890abcdef&quot;</span></span><br><span class="line">  <span class="attr">API_SECRET:</span> <span class="string">&quot;secret-key-abcdef123456&quot;</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment"># OAuth é…ç½®</span></span><br><span class="line">  <span class="attr">OAUTH_CLIENT_ID:</span> <span class="string">&quot;my-client-id&quot;</span></span><br><span class="line">  <span class="attr">OAUTH_CLIENT_SECRET:</span> <span class="string">&quot;my-client-secret&quot;</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment"># JWT é‡‘é‘°</span></span><br><span class="line">  <span class="attr">JWT_SECRET:</span> <span class="string">&quot;jwt-signing-secret-key&quot;</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment"># å¤–éƒ¨æœå‹™ Token</span></span><br><span class="line">  <span class="attr">GITHUB_TOKEN:</span> <span class="string">&quot;ghp_1234567890abcdef&quot;</span></span><br><span class="line">  <span class="attr">SLACK_WEBHOOK:</span> <span class="string">&quot;https://hooks.slack.com/services/...&quot;</span></span><br></pre></td></tr></table></figure><h3 id="ç¯„ä¾‹ä¸‰ï¼šSSL-TLS-æ†‘è­‰é…ç½®"><a href="#ç¯„ä¾‹ä¸‰ï¼šSSL-TLS-æ†‘è­‰é…ç½®" class="headerlink" title="ç¯„ä¾‹ä¸‰ï¼šSSL&#x2F;TLS æ†‘è­‰é…ç½®"></a>ç¯„ä¾‹ä¸‰ï¼šSSL&#x2F;TLS æ†‘è­‰é…ç½®</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Secret</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">app-tls-secret</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dockertest-namespace</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">kubernetes.io/tls</span></span><br><span class="line"><span class="attr">data:</span></span><br><span class="line">  <span class="attr">tls.crt:</span> <span class="string">|</span></span><br><span class="line"><span class="string">    LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0t...</span></span><br><span class="line"><span class="string"></span>  <span class="attr">tls.key:</span> <span class="string">|</span></span><br><span class="line"><span class="string">    LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0t...</span></span><br><span class="line"><span class="string"></span><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Ingress</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">app-ingress</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dockertest-namespace</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">tls:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">hosts:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">app.example.com</span></span><br><span class="line">    <span class="attr">secretName:</span> <span class="string">app-tls-secret</span></span><br><span class="line">  <span class="attr">rules:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">host:</span> <span class="string">app.example.com</span></span><br><span class="line">    <span class="attr">http:</span></span><br><span class="line">      <span class="attr">paths:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">path:</span> <span class="string">/</span></span><br><span class="line">        <span class="attr">pathType:</span> <span class="string">Prefix</span></span><br><span class="line">        <span class="attr">backend:</span></span><br><span class="line">          <span class="attr">service:</span></span><br><span class="line">            <span class="attr">name:</span> <span class="string">app-service</span></span><br><span class="line">            <span class="attr">port:</span></span><br><span class="line">              <span class="attr">number:</span> <span class="number">80</span></span><br></pre></td></tr></table></figure><h2 id="å®‰å…¨æ€§æœ€ä½³å¯¦å‹™"><a href="#å®‰å…¨æ€§æœ€ä½³å¯¦å‹™" class="headerlink" title="å®‰å…¨æ€§æœ€ä½³å¯¦å‹™"></a>å®‰å…¨æ€§æœ€ä½³å¯¦å‹™</h2><h3 id="Secret-ç®¡ç†"><a href="#Secret-ç®¡ç†" class="headerlink" title="Secret ç®¡ç†"></a>Secret ç®¡ç†</h3><ol><li><strong>æœ€å°æ¬Šé™åŸå‰‡</strong>ï¼šåªæˆäºˆå¿…è¦çš„ Secret å­˜å–æ¬Šé™</li><li><strong>å®šæœŸè¼ªæ›</strong>ï¼šå®šæœŸæ›´æ–°å¯†ç¢¼å’Œé‡‘é‘°</li><li><strong>ç‰ˆæœ¬æ§åˆ¶</strong>ï¼šé¿å…å°‡ Secret å…§å®¹æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»çµ±</li><li><strong>ç’°å¢ƒåˆ†é›¢</strong>ï¼šç‚ºä¸åŒç’°å¢ƒä½¿ç”¨ç¨ç«‹çš„ Secret</li></ol><h3 id="å­˜å–æ§åˆ¶"><a href="#å­˜å–æ§åˆ¶" class="headerlink" title="å­˜å–æ§åˆ¶"></a>å­˜å–æ§åˆ¶</h3><ol><li><strong>RBAC é…ç½®</strong>ï¼šä½¿ç”¨ Role-Based Access Control é™åˆ¶å­˜å–</li><li><strong>å‘½åç©ºé–“éš”é›¢</strong>ï¼šåˆ©ç”¨å‘½åç©ºé–“éš”é›¢ä¸åŒæ‡‰ç”¨çš„ Secret</li><li><strong>ServiceAccount ç®¡ç†</strong>ï¼šç‚ºä¸åŒæ‡‰ç”¨ä½¿ç”¨å°ˆç”¨çš„ ServiceAccount</li><li><strong>å¯©è¨ˆæ—¥èªŒ</strong>ï¼šå•Ÿç”¨ Secret å­˜å–çš„å¯©è¨ˆè¨˜éŒ„</li></ol><h3 id="åŠ å¯†å’Œå­˜å„²"><a href="#åŠ å¯†å’Œå­˜å„²" class="headerlink" title="åŠ å¯†å’Œå­˜å„²"></a>åŠ å¯†å’Œå­˜å„²</h3><ol><li><strong>éœæ…‹åŠ å¯†</strong>ï¼šå•Ÿç”¨ etcd ä¸­ Secret çš„åŠ å¯†</li><li><strong>å‚³è¼¸åŠ å¯†</strong>ï¼šç¢ºä¿ API é€šä¿¡ä½¿ç”¨ TLS</li><li><strong>è¨˜æ†¶é«”ä¿è­·</strong>ï¼šé¿å…å°‡ Secret å¯«å…¥ç£ç¢Ÿäº¤æ›å€</li><li><strong>å‚™ä»½å®‰å…¨</strong>ï¼šç¢ºä¿å‚™ä»½ä¸­çš„ Secret ä¹Ÿè¢«åŠ å¯†</li></ol><h3 id="æ‡‰ç”¨ç¨‹å¼æ•´åˆ"><a href="#æ‡‰ç”¨ç¨‹å¼æ•´åˆ" class="headerlink" title="æ‡‰ç”¨ç¨‹å¼æ•´åˆ"></a>æ‡‰ç”¨ç¨‹å¼æ•´åˆ</h3><ol><li><strong>ç’°å¢ƒè®Šæ•¸ vs æª”æ¡ˆ</strong>ï¼šæ ¹æ“šå®‰å…¨è¦æ±‚é¸æ“‡é©ç•¶çš„æ›è¼‰æ–¹å¼</li><li><strong>æª”æ¡ˆæ¬Šé™</strong>ï¼šè¨­å®šé©ç•¶çš„æª”æ¡ˆæ¬Šé™å’Œæ“æœ‰è€…</li><li><strong>ç¨‹åºéš”é›¢</strong>ï¼šé¿å…åœ¨æ—¥èªŒæˆ–éŒ¯èª¤è¨Šæ¯ä¸­æ´©éœ² Secret</li><li><strong>æ¸…ç†ç­–ç•¥</strong>ï¼šæ‡‰ç”¨ç¨‹å¼é€€å‡ºæ™‚æ¸…ç†è¨˜æ†¶é«”ä¸­çš„æ•æ„Ÿè³‡æ–™</li></ol><h2 id="ç–‘é›£æ’è§£"><a href="#ç–‘é›£æ’è§£" class="headerlink" title="ç–‘é›£æ’è§£"></a>ç–‘é›£æ’è§£</h2><h3 id="å¸¸è¦‹å•é¡Œ"><a href="#å¸¸è¦‹å•é¡Œ" class="headerlink" title="å¸¸è¦‹å•é¡Œ"></a>å¸¸è¦‹å•é¡Œ</h3><h4 id="1-Pod-ç„¡æ³•å­˜å–-Secret"><a href="#1-Pod-ç„¡æ³•å­˜å–-Secret" class="headerlink" title="1. Pod ç„¡æ³•å­˜å– Secret"></a>1. Pod ç„¡æ³•å­˜å– Secret</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æª¢æŸ¥ Secret æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">kubectl get secret dockertest-secret -n dockertest-namespace</span><br><span class="line"></span><br><span class="line"><span class="comment"># æª¢æŸ¥ Pod çš„æœå‹™å¸³æˆ¶æ¬Šé™</span></span><br><span class="line">kubectl describe pod &lt;pod-name&gt; -n dockertest-namespace</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ RBAC é…ç½®</span></span><br><span class="line">kubectl auth can-i get secrets --as=system:serviceaccount:dockertest-namespace:default</span><br></pre></td></tr></table></figure><h4 id="2-Secret-è³‡æ–™è§£ç¢¼å•é¡Œ"><a href="#2-Secret-è³‡æ–™è§£ç¢¼å•é¡Œ" class="headerlink" title="2. Secret è³‡æ–™è§£ç¢¼å•é¡Œ"></a>2. Secret è³‡æ–™è§£ç¢¼å•é¡Œ</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æª¢æŸ¥ Secret å…§å®¹</span></span><br><span class="line">kubectl get secret dockertest-secret -n dockertest-namespace -o yaml</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰‹å‹•è§£ç¢¼ Base64 è³‡æ–™</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;cm9vdA==&quot;</span> | <span class="built_in">base64</span> -d</span><br><span class="line"></span><br><span class="line"><span class="comment"># æª¢æŸ¥ç·¨ç¢¼æ ¼å¼æ˜¯å¦æ­£ç¢º</span></span><br><span class="line">kubectl get secret dockertest-secret -n dockertest-namespace -o jsonpath=<span class="string">&#x27;&#123;.data.username&#125;&#x27;</span> | <span class="built_in">base64</span> -d</span><br></pre></td></tr></table></figure><h4 id="3-Image-Pull-Secret-å¤±æ•ˆ"><a href="#3-Image-Pull-Secret-å¤±æ•ˆ" class="headerlink" title="3. Image Pull Secret å¤±æ•ˆ"></a>3. Image Pull Secret å¤±æ•ˆ</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ¸¬è©¦ Docker Registry é€£ç·š</span></span><br><span class="line">docker login registry.example.com</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡æ–°å»ºç«‹ Image Pull Secret</span></span><br><span class="line">kubectl delete secret regcred -n dockertest-namespace</span><br><span class="line">kubectl create secret docker-registry regcred \</span><br><span class="line">  --docker-server=registry.example.com \</span><br><span class="line">  --docker-username=newuser \</span><br><span class="line">  --docker-password=newpassword \</span><br><span class="line">  -n dockertest-namespace</span><br><span class="line"></span><br><span class="line"><span class="comment"># æª¢æŸ¥ Pod ä½¿ç”¨çš„ Image Pull Secret</span></span><br><span class="line">kubectl describe pod &lt;pod-name&gt; -n dockertest-namespace</span><br></pre></td></tr></table></figure><h4 id="4-Secret-æ›´æ–°å¾Œ-Pod-æœªé‡æ–°è¼‰å…¥"><a href="#4-Secret-æ›´æ–°å¾Œ-Pod-æœªé‡æ–°è¼‰å…¥" class="headerlink" title="4. Secret æ›´æ–°å¾Œ Pod æœªé‡æ–°è¼‰å…¥"></a>4. Secret æ›´æ–°å¾Œ Pod æœªé‡æ–°è¼‰å…¥</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é‡å•Ÿ Deployment ä»¥è¼‰å…¥æ–°çš„ Secret</span></span><br><span class="line">kubectl rollout restart deployment dockertest-deployment -n dockertest-namespace</span><br><span class="line"></span><br><span class="line"><span class="comment"># æª¢æŸ¥é‡å•Ÿç‹€æ…‹</span></span><br><span class="line">kubectl rollout status deployment dockertest-deployment -n dockertest-namespace</span><br><span class="line"></span><br><span class="line"><span class="comment"># é©—è­‰æ–° Secret æ˜¯å¦ç”Ÿæ•ˆ</span></span><br><span class="line">kubectl <span class="built_in">exec</span> -it &lt;pod-name&gt; -n dockertest-namespace -- <span class="built_in">env</span> | grep DB_PASSWORD</span><br></pre></td></tr></table></figure><h2 id="é€²éšé…ç½®"><a href="#é€²éšé…ç½®" class="headerlink" title="é€²éšé…ç½®"></a>é€²éšé…ç½®</h2><h3 id="ä½¿ç”¨å¤–éƒ¨-Secret-ç®¡ç†å™¨"><a href="#ä½¿ç”¨å¤–éƒ¨-Secret-ç®¡ç†å™¨" class="headerlink" title="ä½¿ç”¨å¤–éƒ¨ Secret ç®¡ç†å™¨"></a>ä½¿ç”¨å¤–éƒ¨ Secret ç®¡ç†å™¨</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨ External Secrets Operator</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">external-secrets.io/v1beta1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">SecretStore</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">vault-backend</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dockertest-namespace</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">provider:</span></span><br><span class="line">    <span class="attr">vault:</span></span><br><span class="line">      <span class="attr">server:</span> <span class="string">&quot;https://vault.example.com&quot;</span></span><br><span class="line">      <span class="attr">path:</span> <span class="string">&quot;secret&quot;</span></span><br><span class="line">      <span class="attr">version:</span> <span class="string">&quot;v2&quot;</span></span><br><span class="line">      <span class="attr">auth:</span></span><br><span class="line">        <span class="attr">tokenSecretRef:</span></span><br><span class="line">          <span class="attr">name:</span> <span class="string">&quot;vault-token&quot;</span></span><br><span class="line">          <span class="attr">key:</span> <span class="string">&quot;token&quot;</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">external-secrets.io/v1beta1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ExternalSecret</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">vault-secret</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dockertest-namespace</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">refreshInterval:</span> <span class="string">15s</span></span><br><span class="line">  <span class="attr">secretStoreRef:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">vault-backend</span></span><br><span class="line">    <span class="attr">kind:</span> <span class="string">SecretStore</span></span><br><span class="line">  <span class="attr">target:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">myapp-secret</span></span><br><span class="line">    <span class="attr">creationPolicy:</span> <span class="string">Owner</span></span><br><span class="line">  <span class="attr">data:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">secretKey:</span> <span class="string">password</span></span><br><span class="line">    <span class="attr">remoteRef:</span></span><br><span class="line">      <span class="attr">key:</span> <span class="string">secret/myapp</span></span><br><span class="line">      <span class="attr">property:</span> <span class="string">password</span></span><br></pre></td></tr></table></figure><h3 id="è‡ªå‹•-Secret-è¼ªæ›"><a href="#è‡ªå‹•-Secret-è¼ªæ›" class="headerlink" title="è‡ªå‹• Secret è¼ªæ›"></a>è‡ªå‹• Secret è¼ªæ›</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">batch/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">CronJob</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">secret-rotation</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dockertest-namespace</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">schedule:</span> <span class="string">&quot;0 2 * * 0&quot;</span>  <span class="comment"># æ¯é€±æ—¥å‡Œæ™¨ 2 é»</span></span><br><span class="line">  <span class="attr">jobTemplate:</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">template:</span></span><br><span class="line">        <span class="attr">spec:</span></span><br><span class="line">          <span class="attr">containers:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">rotate-secrets</span></span><br><span class="line">            <span class="attr">image:</span> <span class="string">secret-rotator:latest</span></span><br><span class="line">            <span class="attr">command:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">/bin/sh</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">-c</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">|</span></span><br><span class="line"><span class="string">              # æ›´æ–° Secret çš„è…³æœ¬é‚è¼¯</span></span><br><span class="line"><span class="string">              kubectl patch secret dockertest-secret \</span></span><br><span class="line"><span class="string">                --type merge \</span></span><br><span class="line"><span class="string">                -p &#x27;&#123;&quot;stringData&quot;:&#123;&quot;password&quot;:&quot;&#x27;$(generate-new-password)&#x27;&quot;&#125;&#125;&#x27;</span></span><br><span class="line"><span class="string"></span>          <span class="attr">restartPolicy:</span> <span class="string">OnFailure</span></span><br></pre></td></tr></table></figure><p>é€éæ­£ç¢ºä½¿ç”¨å’Œç®¡ç† Kubernetes Secretsï¼Œæ‚¨å¯ä»¥å®‰å…¨åœ°è™•ç†æ‡‰ç”¨ç¨‹å¼çš„æ•æ„Ÿè³‡æ–™ï¼Œç¢ºä¿ç¬¦åˆä¼æ¥­å®‰å…¨æ¨™æº–ï¼ŒåŒæ™‚ä¿æŒæ‡‰ç”¨ç¨‹å¼çš„éˆæ´»æ€§å’Œå¯ç¶­è­·æ€§ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Kubernetes-Secret-ä½¿ç”¨æŒ‡å—&quot;&gt;&lt;a href=&quot;#Kubernetes-Secret-ä½¿ç”¨æŒ‡å—&quot; class=&quot;headerlink&quot; title=&quot;Kubernetes Secret ä½¿ç”¨æŒ‡å—&quot;&gt;&lt;/a&gt;Kubernetes Secret ä½¿ç”¨æŒ‡å—&lt;/h1&gt;&lt;h2 id=&quot;ä»€éº¼æ˜¯-Secretsï¼Ÿ&quot;&gt;&lt;a href=&quot;#ä»€éº¼æ˜¯-Secretsï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;ä»€éº¼æ˜¯ Secretsï¼Ÿ&quot;&gt;&lt;/a&gt;ä»€éº¼æ˜¯ Secretsï¼Ÿ&lt;/h2&gt;&lt;p&gt;Kubernetes Secrets æ˜¯ä¸€å€‹ API ç‰©ä»¶ï¼Œç”¨æ–¼å­˜å„²å’Œç®¡ç†æ•æ„Ÿè³‡è¨Šï¼Œå¦‚å¯†ç¢¼ã€OAuth æ¬Šæ–ã€SSH é‡‘é‘°ç­‰ã€‚Secrets é¡ä¼¼æ–¼ ConfigMapï¼Œä½†å°ˆé–€è¨­è¨ˆç”¨æ–¼ä¿å­˜æ©Ÿå¯†è³‡æ–™ï¼Œæä¾›äº†é¡å¤–çš„å®‰å…¨æ€§ä¿è­·ã€‚&lt;/p&gt;
&lt;h3 id=&quot;Secrets-çš„ä¸»è¦åŠŸèƒ½ï¼š&quot;&gt;&lt;a href=&quot;#Secrets-çš„ä¸»è¦åŠŸèƒ½ï¼š&quot; class=&quot;headerlink&quot; title=&quot;Secrets çš„ä¸»è¦åŠŸèƒ½ï¼š&quot;&gt;&lt;/a&gt;Secrets çš„ä¸»è¦åŠŸèƒ½ï¼š&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ•æ„Ÿè³‡æ–™å­˜å„²&lt;/strong&gt;ï¼šå®‰å…¨åœ°å­˜å„²å¯†ç¢¼ã€é‡‘é‘°ã€æ†‘è­‰ç­‰æ•æ„Ÿè³‡è¨Š&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è³‡æ–™åŠ å¯†&lt;/strong&gt;ï¼šåœ¨ etcd ä¸­ä»¥ Base64 ç·¨ç¢¼å­˜å„²ï¼ˆå¯é…ç½®åŠ å¯†ï¼‰&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å­˜å–æ§åˆ¶&lt;/strong&gt;ï¼šé€é RBAC æ§åˆ¶å°æ•æ„Ÿè³‡æ–™çš„å­˜å–&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤šç¨®é¡å‹æ”¯æ´&lt;/strong&gt;ï¼šæ”¯æ´ä¸åŒé¡å‹çš„æ©Ÿå¯†è³‡æ–™æ ¼å¼&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;ç‚ºä»€éº¼ä½¿ç”¨-Secretsï¼Ÿ&quot;&gt;&lt;a href=&quot;#ç‚ºä»€éº¼ä½¿ç”¨-Secretsï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;ç‚ºä»€éº¼ä½¿ç”¨ Secretsï¼Ÿ&quot;&gt;&lt;/a&gt;ç‚ºä»€éº¼ä½¿ç”¨ Secretsï¼Ÿ&lt;/h3&gt;&lt;p&gt;ç›¸è¼ƒæ–¼å°‡æ•æ„Ÿè³‡æ–™ç¡¬ç·¨ç¢¼åœ¨æ‡‰ç”¨ç¨‹å¼æˆ– ConfigMap ä¸­ï¼ŒSecrets æä¾›äº†æ›´å®‰å…¨çš„ç®¡ç†æ–¹å¼ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å®‰å…¨æ€§&lt;/strong&gt;ï¼šæ•æ„Ÿè³‡æ–™èˆ‡æ‡‰ç”¨ç¨‹å¼ç¨‹å¼ç¢¼åˆ†é›¢&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å­˜å–æ§åˆ¶&lt;/strong&gt;ï¼šç²¾ç´°çš„æ¬Šé™ç®¡ç†å’Œå¯©è¨ˆåŠŸèƒ½&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;éˆæ´»æ€§&lt;/strong&gt;ï¼šæ”¯æ´å¤šç¨®æ›è¼‰å’Œä½¿ç”¨æ–¹å¼&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆè¦æ€§&lt;/strong&gt;ï¼šç¬¦åˆä¼æ¥­å®‰å…¨å’Œåˆè¦è¦æ±‚&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
    
      <category term="kubernetes" scheme="https://pcion123.github.io/categories/kubernetes/"/>
    
    
      <category term="kubernetes" scheme="https://pcion123.github.io/tags/kubernetes/"/>
    
  </entry>
  
  <entry>
    <title>Kubernetes ConfigMap ä½¿ç”¨æŒ‡å—</title>
    <link href="https://pcion123.github.io/2025/10/25/kubernetes-configmap-intro/"/>
    <id>https://pcion123.github.io/2025/10/25/kubernetes-configmap-intro/</id>
    <published>2025-10-25T07:42:38.000Z</published>
    <updated>2025-10-25T09:35:51.896Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Kubernetes-ConfigMap-ä½¿ç”¨æŒ‡å—"><a href="#Kubernetes-ConfigMap-ä½¿ç”¨æŒ‡å—" class="headerlink" title="Kubernetes ConfigMap ä½¿ç”¨æŒ‡å—"></a>Kubernetes ConfigMap ä½¿ç”¨æŒ‡å—</h1><h2 id="ä»€éº¼æ˜¯-ConfigMapï¼Ÿ"><a href="#ä»€éº¼æ˜¯-ConfigMapï¼Ÿ" class="headerlink" title="ä»€éº¼æ˜¯ ConfigMapï¼Ÿ"></a>ä»€éº¼æ˜¯ ConfigMapï¼Ÿ</h2><p>Kubernetes ConfigMap æ˜¯ä¸€å€‹ API ç‰©ä»¶ï¼Œç”¨æ–¼å­˜å„²éæ•æ„Ÿçš„é…ç½®è³‡æ–™ï¼Œä»¥éµå€¼å°çš„å½¢å¼å­˜åœ¨ã€‚ConfigMap å…è¨±æ‚¨å°‡é…ç½®å¾å®¹å™¨æ˜ åƒä¸­åˆ†é›¢å‡ºä¾†ï¼Œä½¿æ‡‰ç”¨ç¨‹å¼æ›´å…·å¯ç§»æ¤æ€§å’Œéˆæ´»æ€§ã€‚</p><h3 id="ConfigMap-çš„ä¸»è¦åŠŸèƒ½ï¼š"><a href="#ConfigMap-çš„ä¸»è¦åŠŸèƒ½ï¼š" class="headerlink" title="ConfigMap çš„ä¸»è¦åŠŸèƒ½ï¼š"></a>ConfigMap çš„ä¸»è¦åŠŸèƒ½ï¼š</h3><ul><li><strong>é…ç½®åˆ†é›¢</strong>ï¼šå°‡æ‡‰ç”¨ç¨‹å¼é…ç½®èˆ‡ç¨‹å¼ç¢¼åˆ†é›¢</li><li><strong>ç’°å¢ƒç®¡ç†</strong>ï¼šæ”¯æ´ä¸åŒç’°å¢ƒçš„é…ç½®ç®¡ç†</li><li><strong>å‹•æ…‹æ›´æ–°</strong>ï¼šæ”¯æ´é‹è¡Œæ™‚é…ç½®æ›´æ–°</li><li><strong>å¤šç¨®æ›è¼‰æ–¹å¼</strong>ï¼šå¯ä½œç‚ºç’°å¢ƒè®Šæ•¸ã€æª”æ¡ˆæˆ–ç›®éŒ„æ›è¼‰</li></ul><h3 id="ç‚ºä»€éº¼ä½¿ç”¨-ConfigMapï¼Ÿ"><a href="#ç‚ºä»€éº¼ä½¿ç”¨-ConfigMapï¼Ÿ" class="headerlink" title="ç‚ºä»€éº¼ä½¿ç”¨ ConfigMapï¼Ÿ"></a>ç‚ºä»€éº¼ä½¿ç”¨ ConfigMapï¼Ÿ</h3><p>ç›¸è¼ƒæ–¼å°‡é…ç½®ç¡¬ç·¨ç¢¼åœ¨æ‡‰ç”¨ç¨‹å¼ä¸­ï¼ŒConfigMap æä¾›äº†æ›´å¥½çš„é…ç½®ç®¡ç†æ–¹å¼ï¼š</p><ol><li><strong>éˆæ´»æ€§</strong>ï¼šç„¡éœ€é‡æ–°æ§‹å»ºæ˜ åƒå°±èƒ½æ”¹è®Šé…ç½®</li><li><strong>å¯é‡ç”¨æ€§</strong>ï¼šåŒä¸€å€‹ ConfigMap å¯è¢«å¤šå€‹ Pod ä½¿ç”¨</li><li><strong>ç‰ˆæœ¬æ§åˆ¶</strong>ï¼šé…ç½®è®Šæ›´å¯ä»¥è¢«è¿½è¹¤å’Œç®¡ç†</li><li><strong>ç’°å¢ƒä¸€è‡´æ€§</strong>ï¼šç¢ºä¿ä¸åŒç’°å¢ƒä½¿ç”¨æ­£ç¢ºçš„é…ç½®</li></ol><span id="more"></span><hr><h2 id="ConfigMap-åŸºæœ¬é…ç½®"><a href="#ConfigMap-åŸºæœ¬é…ç½®" class="headerlink" title="ConfigMap åŸºæœ¬é…ç½®"></a>ConfigMap åŸºæœ¬é…ç½®</h2><h3 id="åŸºæœ¬-ConfigMap-ç¯„ä¾‹"><a href="#åŸºæœ¬-ConfigMap-ç¯„ä¾‹" class="headerlink" title="åŸºæœ¬ ConfigMap ç¯„ä¾‹"></a>åŸºæœ¬ ConfigMap ç¯„ä¾‹</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ConfigMap</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">dockertest-config</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dockertest-namespace</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">dockertest</span></span><br><span class="line"><span class="attr">data:</span></span><br><span class="line">  <span class="comment"># æ‡‰ç”¨ç¨‹å¼é…ç½®</span></span><br><span class="line">  <span class="attr">CUSTOM_VALUE:</span> <span class="string">&quot;configmap_version&quot;</span></span><br><span class="line">  <span class="attr">LOG_LEVEL:</span> <span class="string">&quot;INFO&quot;</span></span><br><span class="line">  <span class="attr">MAX_CONNECTIONS:</span> <span class="string">&quot;100&quot;</span></span><br><span class="line">  <span class="attr">FEATURE_ENABLED:</span> <span class="string">&quot;true&quot;</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment"># è³‡æ–™åº«é…ç½®</span></span><br><span class="line">  <span class="attr">DB_HOST:</span> <span class="string">&quot;database.example.com&quot;</span></span><br><span class="line">  <span class="attr">DB_PORT:</span> <span class="string">&quot;5432&quot;</span></span><br><span class="line">  <span class="attr">DB_NAME:</span> <span class="string">&quot;myapp&quot;</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment"># å¿«å–é…ç½®</span></span><br><span class="line">  <span class="attr">REDIS_HOST:</span> <span class="string">&quot;redis.example.com&quot;</span></span><br><span class="line">  <span class="attr">REDIS_PORT:</span> <span class="string">&quot;6379&quot;</span></span><br></pre></td></tr></table></figure><h3 id="åŒ…å«æª”æ¡ˆå…§å®¹çš„-ConfigMap"><a href="#åŒ…å«æª”æ¡ˆå…§å®¹çš„-ConfigMap" class="headerlink" title="åŒ…å«æª”æ¡ˆå…§å®¹çš„ ConfigMap"></a>åŒ…å«æª”æ¡ˆå…§å®¹çš„ ConfigMap</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ConfigMap</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">app-config-files</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dockertest-namespace</span></span><br><span class="line"><span class="attr">data:</span></span><br><span class="line">  <span class="comment"># é…ç½®æª”æ¡ˆå…§å®¹</span></span><br><span class="line">  <span class="attr">application.properties:</span> <span class="string">|</span></span><br><span class="line"><span class="string">    app.name=MyApplication</span></span><br><span class="line"><span class="string">    app.version=1.0.0</span></span><br><span class="line"><span class="string">    server.port=8080</span></span><br><span class="line"><span class="string">    logging.level.root=INFO</span></span><br><span class="line"><span class="string"></span>    </span><br><span class="line">  <span class="attr">nginx.conf:</span> <span class="string">|</span></span><br><span class="line"><span class="string">    server &#123;</span></span><br><span class="line"><span class="string">        listen 80;</span></span><br><span class="line"><span class="string">        server_name localhost;</span></span><br><span class="line"><span class="string">        location / &#123;</span></span><br><span class="line"><span class="string">            root /usr/share/nginx/html;</span></span><br><span class="line"><span class="string">            index index.html;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string"></span>    </span><br><span class="line">  <span class="comment"># JSON æ ¼å¼é…ç½®</span></span><br><span class="line">  <span class="attr">config.json:</span> <span class="string">|</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">      &quot;database&quot;: &#123;</span></span><br><span class="line"><span class="string">        &quot;host&quot;: &quot;localhost&quot;,</span></span><br><span class="line"><span class="string">        &quot;port&quot;: 5432,</span></span><br><span class="line"><span class="string">        &quot;name&quot;: &quot;myapp&quot;</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      &quot;features&quot;: &#123;</span></span><br><span class="line"><span class="string">        &quot;enableLogging&quot;: true,</span></span><br><span class="line"><span class="string">        &quot;maxRetries&quot;: 3</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br></pre></td></tr></table></figure><h2 id="åœ¨-Pod-ä¸­ä½¿ç”¨-ConfigMap"><a href="#åœ¨-Pod-ä¸­ä½¿ç”¨-ConfigMap" class="headerlink" title="åœ¨ Pod ä¸­ä½¿ç”¨ ConfigMap"></a>åœ¨ Pod ä¸­ä½¿ç”¨ ConfigMap</h2><h3 id="æ–¹æ³•ä¸€ï¼šä½œç‚ºç’°å¢ƒè®Šæ•¸"><a href="#æ–¹æ³•ä¸€ï¼šä½œç‚ºç’°å¢ƒè®Šæ•¸" class="headerlink" title="æ–¹æ³•ä¸€ï¼šä½œç‚ºç’°å¢ƒè®Šæ•¸"></a>æ–¹æ³•ä¸€ï¼šä½œç‚ºç’°å¢ƒè®Šæ•¸</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">dockertest-deployment</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dockertest-namespace</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">1</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">dockertest</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">dockertest</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">dockertest</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">docker.io/pcion123/tinydocker:0.0.10</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">        <span class="comment"># å¼•ç”¨æ•´å€‹ ConfigMap</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">CUSTOM_VALUE</span></span><br><span class="line">          <span class="attr">valueFrom:</span></span><br><span class="line">            <span class="attr">configMapKeyRef:</span></span><br><span class="line">              <span class="attr">name:</span> <span class="string">dockertest-config</span></span><br><span class="line">              <span class="attr">key:</span> <span class="string">CUSTOM_VALUE</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">LOG_LEVEL</span></span><br><span class="line">          <span class="attr">valueFrom:</span></span><br><span class="line">            <span class="attr">configMapKeyRef:</span></span><br><span class="line">              <span class="attr">name:</span> <span class="string">dockertest-config</span></span><br><span class="line">              <span class="attr">key:</span> <span class="string">LOG_LEVEL</span></span><br><span class="line">        <span class="comment"># å¼•ç”¨å¤šå€‹éµå€¼</span></span><br><span class="line">        <span class="attr">envFrom:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">configMapRef:</span></span><br><span class="line">            <span class="attr">name:</span> <span class="string">dockertest-config</span></span><br></pre></td></tr></table></figure><img src="/2025/10/25/kubernetes-configmap-intro/kubernetes_configmap_get_config1.png" class=""><h3 id="æ–¹æ³•äºŒï¼šä½œç‚ºæª”æ¡ˆæ›è¼‰"><a href="#æ–¹æ³•äºŒï¼šä½œç‚ºæª”æ¡ˆæ›è¼‰" class="headerlink" title="æ–¹æ³•äºŒï¼šä½œç‚ºæª”æ¡ˆæ›è¼‰"></a>æ–¹æ³•äºŒï¼šä½œç‚ºæª”æ¡ˆæ›è¼‰</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">dockertest-deployment</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dockertest-namespace</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">1</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">dockertest</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">dockertest</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">dockertest</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">docker.io/pcion123/tinydocker:0.0.10</span></span><br><span class="line">        <span class="attr">volumeMounts:</span></span><br><span class="line">        <span class="comment"># æ›è¼‰æ•´å€‹ ConfigMap ç‚ºç›®éŒ„</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">config-volume</span></span><br><span class="line">          <span class="attr">mountPath:</span> <span class="string">/etc/config</span></span><br><span class="line">        <span class="comment"># æ›è¼‰ç‰¹å®šæª”æ¡ˆåˆ°æŒ‡å®šä½ç½®</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx-config</span></span><br><span class="line">          <span class="attr">mountPath:</span> <span class="string">/etc/nginx/nginx.conf</span></span><br><span class="line">          <span class="attr">subPath:</span> <span class="string">nginx.conf</span></span><br><span class="line">      <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">config-volume</span></span><br><span class="line">        <span class="attr">configMap:</span></span><br><span class="line">          <span class="attr">name:</span> <span class="string">dockertest-config</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx-config</span></span><br><span class="line">        <span class="attr">configMap:</span></span><br><span class="line">          <span class="attr">name:</span> <span class="string">dockertest-config</span></span><br><span class="line">          <span class="attr">items:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">key:</span> <span class="string">nginx.conf</span></span><br><span class="line">            <span class="attr">path:</span> <span class="string">nginx.conf</span></span><br></pre></td></tr></table></figure><img src="/2025/10/25/kubernetes-configmap-intro/kubernetes_configmap_get_config2.png" class=""><h3 id="æ–¹æ³•ä¸‰ï¼šæ··åˆä½¿ç”¨"><a href="#æ–¹æ³•ä¸‰ï¼šæ··åˆä½¿ç”¨" class="headerlink" title="æ–¹æ³•ä¸‰ï¼šæ··åˆä½¿ç”¨"></a>æ–¹æ³•ä¸‰ï¼šæ··åˆä½¿ç”¨</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">dockertest-deployment</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dockertest-namespace</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">1</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">dockertest</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">dockertest</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">dockertest</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">docker.io/pcion123/tinydocker:0.0.10</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">        <span class="comment"># å¼•ç”¨æ•´å€‹ ConfigMap</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">CUSTOM_VALUE</span></span><br><span class="line">          <span class="attr">valueFrom:</span></span><br><span class="line">            <span class="attr">configMapKeyRef:</span></span><br><span class="line">              <span class="attr">name:</span> <span class="string">dockertest-config</span></span><br><span class="line">              <span class="attr">key:</span> <span class="string">CUSTOM_VALUE</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">LOG_LEVEL</span></span><br><span class="line">          <span class="attr">valueFrom:</span></span><br><span class="line">            <span class="attr">configMapKeyRef:</span></span><br><span class="line">              <span class="attr">name:</span> <span class="string">dockertest-config</span></span><br><span class="line">              <span class="attr">key:</span> <span class="string">LOG_LEVEL</span></span><br><span class="line">        <span class="comment"># å¼•ç”¨å¤šå€‹éµå€¼</span></span><br><span class="line">        <span class="attr">envFrom:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">configMapRef:</span></span><br><span class="line">            <span class="attr">name:</span> <span class="string">dockertest-config</span></span><br><span class="line">        <span class="attr">volumeMounts:</span></span><br><span class="line">        <span class="comment"># æ›è¼‰æ•´å€‹ ConfigMap ç‚ºç›®éŒ„</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">config-volume</span></span><br><span class="line">          <span class="attr">mountPath:</span> <span class="string">/etc/config</span></span><br><span class="line">        <span class="comment"># æ›è¼‰ç‰¹å®šæª”æ¡ˆåˆ°æŒ‡å®šä½ç½®</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx-config</span></span><br><span class="line">          <span class="attr">mountPath:</span> <span class="string">/etc/nginx/nginx.conf</span></span><br><span class="line">          <span class="attr">subPath:</span> <span class="string">nginx.conf</span></span><br><span class="line">      <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">config-volume</span></span><br><span class="line">        <span class="attr">configMap:</span></span><br><span class="line">          <span class="attr">name:</span> <span class="string">dockertest-config</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx-config</span></span><br><span class="line">        <span class="attr">configMap:</span></span><br><span class="line">          <span class="attr">name:</span> <span class="string">dockertest-config</span></span><br><span class="line">          <span class="attr">items:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="attr">key:</span> <span class="string">nginx.conf</span></span><br><span class="line">            <span class="attr">path:</span> <span class="string">nginx.conf</span></span><br></pre></td></tr></table></figure><h2 id="å»ºç«‹å’Œç®¡ç†-ConfigMap"><a href="#å»ºç«‹å’Œç®¡ç†-ConfigMap" class="headerlink" title="å»ºç«‹å’Œç®¡ç† ConfigMap"></a>å»ºç«‹å’Œç®¡ç† ConfigMap</h2><h3 id="ä½¿ç”¨-kubectl-æŒ‡ä»¤å»ºç«‹"><a href="#ä½¿ç”¨-kubectl-æŒ‡ä»¤å»ºç«‹" class="headerlink" title="ä½¿ç”¨ kubectl æŒ‡ä»¤å»ºç«‹"></a>ä½¿ç”¨ kubectl æŒ‡ä»¤å»ºç«‹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¾å­—é¢å€¼å»ºç«‹</span></span><br><span class="line">kubectl create configmap my-config \</span><br><span class="line">  --from-literal=key1=value1 \</span><br><span class="line">  --from-literal=key2=value2 \</span><br><span class="line">  -n dockertest-namespace</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¾æª”æ¡ˆå»ºç«‹</span></span><br><span class="line">kubectl create configmap file-config \</span><br><span class="line">  --from-file=application.properties \</span><br><span class="line">  --from-file=config.json \</span><br><span class="line">  -n dockertest-namespace</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¾ç›®éŒ„å»ºç«‹</span></span><br><span class="line">kubectl create configmap dir-config \</span><br><span class="line">  --from-file=./config-directory/ \</span><br><span class="line">  -n dockertest-namespace</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¾ç’°å¢ƒæª”æ¡ˆå»ºç«‹</span></span><br><span class="line">kubectl create configmap env-config \</span><br><span class="line">  --from-env-file=.<span class="built_in">env</span> \</span><br><span class="line">  -n dockertest-namespace</span><br></pre></td></tr></table></figure><h3 id="ç®¡ç†æŒ‡ä»¤"><a href="#ç®¡ç†æŒ‡ä»¤" class="headerlink" title="ç®¡ç†æŒ‡ä»¤"></a>ç®¡ç†æŒ‡ä»¤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹ ConfigMap åˆ—è¡¨</span></span><br><span class="line">kubectl get configmaps -n dockertest-namespace</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ ConfigMap è©³ç´°å…§å®¹</span></span><br><span class="line">kubectl describe configmap dockertest-config -n dockertest-namespace</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ ConfigMap çš„ YAML æ ¼å¼</span></span><br><span class="line">kubectl get configmap dockertest-config -n dockertest-namespace -o yaml</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç·¨è¼¯ ConfigMap</span></span><br><span class="line">kubectl edit configmap dockertest-config -n dockertest-namespace</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆªé™¤ ConfigMap</span></span><br><span class="line">kubectl delete configmap dockertest-config -n dockertest-namespace</span><br></pre></td></tr></table></figure><h3 id="æ›´æ–°-ConfigMap"><a href="#æ›´æ–°-ConfigMap" class="headerlink" title="æ›´æ–° ConfigMap"></a>æ›´æ–° ConfigMap</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ–¹æ³•ä¸€ï¼šé‡æ–°æ‡‰ç”¨ YAML æª”æ¡ˆ</span></span><br><span class="line">kubectl apply -f configmap.yaml</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–¹æ³•äºŒï¼šä½¿ç”¨ patch æ›´æ–°ç‰¹å®šéµå€¼</span></span><br><span class="line">kubectl patch configmap dockertest-config -n dockertest-namespace \</span><br><span class="line">  --<span class="built_in">type</span> merge -p <span class="string">&#x27;&#123;&quot;data&quot;:&#123;&quot;NEW_KEY&quot;:&quot;new_value&quot;&#125;&#125;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–¹æ³•ä¸‰ï¼šæ›¿æ›æ•´å€‹ ConfigMap</span></span><br><span class="line">kubectl replace -f updated-configmap.yaml</span><br></pre></td></tr></table></figure><h2 id="å¯¦éš›æ‡‰ç”¨ç¯„ä¾‹"><a href="#å¯¦éš›æ‡‰ç”¨ç¯„ä¾‹" class="headerlink" title="å¯¦éš›æ‡‰ç”¨ç¯„ä¾‹"></a>å¯¦éš›æ‡‰ç”¨ç¯„ä¾‹</h2><h3 id="ç¯„ä¾‹ä¸€ï¼šSpring-Boot-æ‡‰ç”¨ç¨‹å¼é…ç½®"><a href="#ç¯„ä¾‹ä¸€ï¼šSpring-Boot-æ‡‰ç”¨ç¨‹å¼é…ç½®" class="headerlink" title="ç¯„ä¾‹ä¸€ï¼šSpring Boot æ‡‰ç”¨ç¨‹å¼é…ç½®"></a>ç¯„ä¾‹ä¸€ï¼šSpring Boot æ‡‰ç”¨ç¨‹å¼é…ç½®</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ConfigMap</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">spring-app-config</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dockertest-namespace</span></span><br><span class="line"><span class="attr">data:</span></span><br><span class="line">  <span class="comment"># Spring Boot é…ç½®</span></span><br><span class="line">  <span class="attr">SPRING_PROFILES_ACTIVE:</span> <span class="string">&quot;production&quot;</span></span><br><span class="line">  <span class="attr">SERVER_PORT:</span> <span class="string">&quot;8080&quot;</span></span><br><span class="line">  <span class="attr">LOGGING_LEVEL_ROOT:</span> <span class="string">&quot;INFO&quot;</span></span><br><span class="line">  <span class="attr">LOGGING_LEVEL_COM_EXAMPLE:</span> <span class="string">&quot;DEBUG&quot;</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment"># è³‡æ–™åº«é…ç½®</span></span><br><span class="line">  <span class="attr">SPRING_DATASOURCE_URL:</span> <span class="string">&quot;jdbc:postgresql://db:5432/myapp&quot;</span></span><br><span class="line">  <span class="attr">SPRING_DATASOURCE_USERNAME:</span> <span class="string">&quot;appuser&quot;</span></span><br><span class="line">  <span class="attr">SPRING_DATASOURCE_DRIVERCLASSNAME:</span> <span class="string">&quot;org.postgresql.Driver&quot;</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment"># JVM é…ç½®</span></span><br><span class="line">  <span class="attr">JAVA_OPTS:</span> <span class="string">&quot;-Xmx512m -Xms256m -Djava.awt.headless=true&quot;</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">spring-app</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dockertest-namespace</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">2</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">spring-app</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">spring-app</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">spring-app</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">docker.io/pcion123/tinydocker:0.0.10</span></span><br><span class="line">        <span class="attr">envFrom:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">configMapRef:</span></span><br><span class="line">            <span class="attr">name:</span> <span class="string">spring-app-config</span></span><br><span class="line">        <span class="attr">ports:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">8080</span></span><br></pre></td></tr></table></figure><h3 id="ç¯„ä¾‹äºŒï¼šå¤šç’°å¢ƒé…ç½®ç®¡ç†"><a href="#ç¯„ä¾‹äºŒï¼šå¤šç’°å¢ƒé…ç½®ç®¡ç†" class="headerlink" title="ç¯„ä¾‹äºŒï¼šå¤šç’°å¢ƒé…ç½®ç®¡ç†"></a>ç¯„ä¾‹äºŒï¼šå¤šç’°å¢ƒé…ç½®ç®¡ç†</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é–‹ç™¼ç’°å¢ƒ ConfigMap</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ConfigMap</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">app-config-dev</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">development</span></span><br><span class="line"><span class="attr">data:</span></span><br><span class="line">  <span class="attr">ENVIRONMENT:</span> <span class="string">&quot;development&quot;</span></span><br><span class="line">  <span class="attr">LOG_LEVEL:</span> <span class="string">&quot;DEBUG&quot;</span></span><br><span class="line">  <span class="attr">DB_HOST:</span> <span class="string">&quot;dev-database&quot;</span></span><br><span class="line">  <span class="attr">CACHE_ENABLED:</span> <span class="string">&quot;false&quot;</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># ç”Ÿç”¢ç’°å¢ƒ ConfigMap</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ConfigMap</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">app-config-prod</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">production</span></span><br><span class="line"><span class="attr">data:</span></span><br><span class="line">  <span class="attr">ENVIRONMENT:</span> <span class="string">&quot;production&quot;</span></span><br><span class="line">  <span class="attr">LOG_LEVEL:</span> <span class="string">&quot;WARN&quot;</span></span><br><span class="line">  <span class="attr">DB_HOST:</span> <span class="string">&quot;prod-database&quot;</span></span><br><span class="line">  <span class="attr">CACHE_ENABLED:</span> <span class="string">&quot;true&quot;</span></span><br></pre></td></tr></table></figure><h2 id="æœ€ä½³å¯¦å‹™å»ºè­°"><a href="#æœ€ä½³å¯¦å‹™å»ºè­°" class="headerlink" title="æœ€ä½³å¯¦å‹™å»ºè­°"></a>æœ€ä½³å¯¦å‹™å»ºè­°</h2><h3 id="é…ç½®ç®¡ç†"><a href="#é…ç½®ç®¡ç†" class="headerlink" title="é…ç½®ç®¡ç†"></a>é…ç½®ç®¡ç†</h3><ol><li><strong>å‘½åè¦ç¯„</strong>ï¼šä½¿ç”¨æ¸…æ™°ã€ä¸€è‡´çš„ ConfigMap å‘½å</li><li><strong>ç’°å¢ƒåˆ†é›¢</strong>ï¼šç‚ºä¸åŒç’°å¢ƒå»ºç«‹ç¨ç«‹çš„ ConfigMap</li><li><strong>ç‰ˆæœ¬æ§åˆ¶</strong>ï¼šå°‡ ConfigMap å®šç¾©ç´å…¥ç‰ˆæœ¬æ§åˆ¶ç³»çµ±</li><li><strong>æ–‡æª”è¨˜éŒ„</strong>ï¼šè©³ç´°è¨˜éŒ„æ¯å€‹é…ç½®é …çš„ç”¨é€”å’Œæ ¼å¼</li></ol><h3 id="å®‰å…¨æ€§è€ƒé‡"><a href="#å®‰å…¨æ€§è€ƒé‡" class="headerlink" title="å®‰å…¨æ€§è€ƒé‡"></a>å®‰å…¨æ€§è€ƒé‡</h3><ol><li><strong>æ•æ„Ÿè³‡æ–™</strong>ï¼šå°‡å¯†ç¢¼ç­‰æ•æ„Ÿè³‡æ–™å­˜å„²åœ¨ Secret ä¸­ï¼Œè€Œé ConfigMap</li><li><strong>å­˜å–æ§åˆ¶</strong>ï¼šä½¿ç”¨ RBAC æ§åˆ¶ ConfigMap çš„å­˜å–æ¬Šé™</li><li><strong>æœ€å°æ¬Šé™</strong>ï¼šåªæˆäºˆæ‡‰ç”¨ç¨‹å¼æ‰€éœ€çš„æœ€å°é…ç½®å­˜å–æ¬Šé™</li><li><strong>å®šæœŸå¯©æ ¸</strong>ï¼šå®šæœŸæª¢æŸ¥å’Œæ¸…ç†ä¸å†ä½¿ç”¨çš„ ConfigMap</li></ol><h3 id="æ•ˆèƒ½å’Œå¯é æ€§"><a href="#æ•ˆèƒ½å’Œå¯é æ€§" class="headerlink" title="æ•ˆèƒ½å’Œå¯é æ€§"></a>æ•ˆèƒ½å’Œå¯é æ€§</h3><ol><li><strong>å¤§å°é™åˆ¶</strong>ï¼šå–®å€‹ ConfigMap ä¸æ‡‰è¶…é 1MB</li><li><strong>è®Šæ›´å½±éŸ¿</strong>ï¼šäº†è§£ ConfigMap è®Šæ›´å°é‹è¡Œä¸­ Pod çš„å½±éŸ¿</li><li><strong>è‡ªå‹•é‡å•Ÿ</strong>ï¼šè€ƒæ…®ä½¿ç”¨å·¥å…·è‡ªå‹•é‡å•Ÿä½¿ç”¨æ›´æ–°é…ç½®çš„ Pod</li><li><strong>é…ç½®é©—è­‰</strong>ï¼šåœ¨æ‡‰ç”¨é…ç½®å‰é©—è­‰é…ç½®çš„æ­£ç¢ºæ€§</li></ol><h3 id="ç›£æ§å’Œç¶­è­·"><a href="#ç›£æ§å’Œç¶­è­·" class="headerlink" title="ç›£æ§å’Œç¶­è­·"></a>ç›£æ§å’Œç¶­è­·</h3><ol><li><strong>é…ç½®è¿½è¹¤</strong>ï¼šè¿½è¹¤é…ç½®è®Šæ›´çš„æ­·å²å’Œå½±éŸ¿</li><li><strong>å¥åº·æª¢æŸ¥</strong>ï¼šç¢ºä¿æ‡‰ç”¨ç¨‹å¼èƒ½æ­£ç¢ºè®€å–å’Œä½¿ç”¨é…ç½®</li><li><strong>å‚™ä»½ç­–ç•¥</strong>ï¼šå®šæœŸå‚™ä»½é‡è¦çš„ ConfigMap</li><li><strong>æ¸…ç†ç­–ç•¥</strong>ï¼šå®šæœŸæ¸…ç†ä¸å†ä½¿ç”¨çš„ ConfigMap</li></ol><h2 id="ç–‘é›£æ’è§£"><a href="#ç–‘é›£æ’è§£" class="headerlink" title="ç–‘é›£æ’è§£"></a>ç–‘é›£æ’è§£</h2><h3 id="å¸¸è¦‹å•é¡Œ"><a href="#å¸¸è¦‹å•é¡Œ" class="headerlink" title="å¸¸è¦‹å•é¡Œ"></a>å¸¸è¦‹å•é¡Œ</h3><h4 id="1-Pod-ç„¡æ³•è®€å–-ConfigMap"><a href="#1-Pod-ç„¡æ³•è®€å–-ConfigMap" class="headerlink" title="1. Pod ç„¡æ³•è®€å– ConfigMap"></a>1. Pod ç„¡æ³•è®€å– ConfigMap</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æª¢æŸ¥ ConfigMap æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">kubectl get configmap dockertest-config -n dockertest-namespace</span><br><span class="line"></span><br><span class="line"><span class="comment"># æª¢æŸ¥ Pod é…ç½®</span></span><br><span class="line">kubectl describe pod &lt;pod-name&gt; -n dockertest-namespace</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ Pod æ—¥èªŒ</span></span><br><span class="line">kubectl logs &lt;pod-name&gt; -n dockertest-namespace</span><br></pre></td></tr></table></figure><h4 id="2-é…ç½®æ›´æ–°å¾Œ-Pod-æœªé‡å•Ÿ"><a href="#2-é…ç½®æ›´æ–°å¾Œ-Pod-æœªé‡å•Ÿ" class="headerlink" title="2. é…ç½®æ›´æ–°å¾Œ Pod æœªé‡å•Ÿ"></a>2. é…ç½®æ›´æ–°å¾Œ Pod æœªé‡å•Ÿ</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ‰‹å‹•é‡å•Ÿ Deployment</span></span><br><span class="line">kubectl rollout restart deployment dockertest-deployment -n dockertest-namespace</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹é‡å•Ÿç‹€æ…‹</span></span><br><span class="line">kubectl rollout status deployment dockertest-deployment -n dockertest-namespace</span><br></pre></td></tr></table></figure><h4 id="3-ç’°å¢ƒè®Šæ•¸æœªæ­£ç¢ºè¼‰å…¥"><a href="#3-ç’°å¢ƒè®Šæ•¸æœªæ­£ç¢ºè¼‰å…¥" class="headerlink" title="3. ç’°å¢ƒè®Šæ•¸æœªæ­£ç¢ºè¼‰å…¥"></a>3. ç’°å¢ƒè®Šæ•¸æœªæ­£ç¢ºè¼‰å…¥</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é€²å…¥ Pod æª¢æŸ¥ç’°å¢ƒè®Šæ•¸</span></span><br><span class="line">kubectl <span class="built_in">exec</span> -it &lt;pod-name&gt; -n dockertest-namespace -- <span class="built_in">env</span> | grep CUSTOM_VALUE</span><br><span class="line"></span><br><span class="line"><span class="comment"># æª¢æŸ¥ ConfigMap å…§å®¹</span></span><br><span class="line">kubectl get configmap dockertest-config -n dockertest-namespace -o yaml</span><br></pre></td></tr></table></figure><p>é€éæ­£ç¢ºä½¿ç”¨ ConfigMapï¼Œæ‚¨å¯ä»¥å¯¦ç¾éˆæ´»çš„é…ç½®ç®¡ç†ï¼Œè®“æ‡‰ç”¨ç¨‹å¼æ›´å®¹æ˜“åœ¨ä¸åŒç’°å¢ƒé–“ç§»æ¤å’Œéƒ¨ç½²ï¼ŒåŒæ™‚ä¿æŒé…ç½®çš„ä¸€è‡´æ€§å’Œå¯ç¶­è­·æ€§ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Kubernetes-ConfigMap-ä½¿ç”¨æŒ‡å—&quot;&gt;&lt;a href=&quot;#Kubernetes-ConfigMap-ä½¿ç”¨æŒ‡å—&quot; class=&quot;headerlink&quot; title=&quot;Kubernetes ConfigMap ä½¿ç”¨æŒ‡å—&quot;&gt;&lt;/a&gt;Kubernetes ConfigMap ä½¿ç”¨æŒ‡å—&lt;/h1&gt;&lt;h2 id=&quot;ä»€éº¼æ˜¯-ConfigMapï¼Ÿ&quot;&gt;&lt;a href=&quot;#ä»€éº¼æ˜¯-ConfigMapï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;ä»€éº¼æ˜¯ ConfigMapï¼Ÿ&quot;&gt;&lt;/a&gt;ä»€éº¼æ˜¯ ConfigMapï¼Ÿ&lt;/h2&gt;&lt;p&gt;Kubernetes ConfigMap æ˜¯ä¸€å€‹ API ç‰©ä»¶ï¼Œç”¨æ–¼å­˜å„²éæ•æ„Ÿçš„é…ç½®è³‡æ–™ï¼Œä»¥éµå€¼å°çš„å½¢å¼å­˜åœ¨ã€‚ConfigMap å…è¨±æ‚¨å°‡é…ç½®å¾å®¹å™¨æ˜ åƒä¸­åˆ†é›¢å‡ºä¾†ï¼Œä½¿æ‡‰ç”¨ç¨‹å¼æ›´å…·å¯ç§»æ¤æ€§å’Œéˆæ´»æ€§ã€‚&lt;/p&gt;
&lt;h3 id=&quot;ConfigMap-çš„ä¸»è¦åŠŸèƒ½ï¼š&quot;&gt;&lt;a href=&quot;#ConfigMap-çš„ä¸»è¦åŠŸèƒ½ï¼š&quot; class=&quot;headerlink&quot; title=&quot;ConfigMap çš„ä¸»è¦åŠŸèƒ½ï¼š&quot;&gt;&lt;/a&gt;ConfigMap çš„ä¸»è¦åŠŸèƒ½ï¼š&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é…ç½®åˆ†é›¢&lt;/strong&gt;ï¼šå°‡æ‡‰ç”¨ç¨‹å¼é…ç½®èˆ‡ç¨‹å¼ç¢¼åˆ†é›¢&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç’°å¢ƒç®¡ç†&lt;/strong&gt;ï¼šæ”¯æ´ä¸åŒç’°å¢ƒçš„é…ç½®ç®¡ç†&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å‹•æ…‹æ›´æ–°&lt;/strong&gt;ï¼šæ”¯æ´é‹è¡Œæ™‚é…ç½®æ›´æ–°&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤šç¨®æ›è¼‰æ–¹å¼&lt;/strong&gt;ï¼šå¯ä½œç‚ºç’°å¢ƒè®Šæ•¸ã€æª”æ¡ˆæˆ–ç›®éŒ„æ›è¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;ç‚ºä»€éº¼ä½¿ç”¨-ConfigMapï¼Ÿ&quot;&gt;&lt;a href=&quot;#ç‚ºä»€éº¼ä½¿ç”¨-ConfigMapï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;ç‚ºä»€éº¼ä½¿ç”¨ ConfigMapï¼Ÿ&quot;&gt;&lt;/a&gt;ç‚ºä»€éº¼ä½¿ç”¨ ConfigMapï¼Ÿ&lt;/h3&gt;&lt;p&gt;ç›¸è¼ƒæ–¼å°‡é…ç½®ç¡¬ç·¨ç¢¼åœ¨æ‡‰ç”¨ç¨‹å¼ä¸­ï¼ŒConfigMap æä¾›äº†æ›´å¥½çš„é…ç½®ç®¡ç†æ–¹å¼ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;éˆæ´»æ€§&lt;/strong&gt;ï¼šç„¡éœ€é‡æ–°æ§‹å»ºæ˜ åƒå°±èƒ½æ”¹è®Šé…ç½®&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯é‡ç”¨æ€§&lt;/strong&gt;ï¼šåŒä¸€å€‹ ConfigMap å¯è¢«å¤šå€‹ Pod ä½¿ç”¨&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç‰ˆæœ¬æ§åˆ¶&lt;/strong&gt;ï¼šé…ç½®è®Šæ›´å¯ä»¥è¢«è¿½è¹¤å’Œç®¡ç†&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç’°å¢ƒä¸€è‡´æ€§&lt;/strong&gt;ï¼šç¢ºä¿ä¸åŒç’°å¢ƒä½¿ç”¨æ­£ç¢ºçš„é…ç½®&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
    
      <category term="kubernetes" scheme="https://pcion123.github.io/categories/kubernetes/"/>
    
    
      <category term="kubernetes" scheme="https://pcion123.github.io/tags/kubernetes/"/>
    
  </entry>
  
  <entry>
    <title>Kubernetes Deployment ä½¿ç”¨æŒ‡å—</title>
    <link href="https://pcion123.github.io/2025/10/11/kubernetes-deployment/"/>
    <id>https://pcion123.github.io/2025/10/11/kubernetes-deployment/</id>
    <published>2025-10-11T15:20:40.000Z</published>
    <updated>2025-10-11T15:42:59.118Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Kubernetes-Deployment-ä½¿ç”¨æŒ‡å—"><a href="#Kubernetes-Deployment-ä½¿ç”¨æŒ‡å—" class="headerlink" title="Kubernetes Deployment ä½¿ç”¨æŒ‡å—"></a>Kubernetes Deployment ä½¿ç”¨æŒ‡å—</h1><h2 id="ä»€éº¼æ˜¯-Deploymentï¼Ÿ"><a href="#ä»€éº¼æ˜¯-Deploymentï¼Ÿ" class="headerlink" title="ä»€éº¼æ˜¯ Deploymentï¼Ÿ"></a>ä»€éº¼æ˜¯ Deploymentï¼Ÿ</h2><p>Kubernetes Deployment æ˜¯ä¸€å€‹ API ç‰©ä»¶ï¼Œç”¨æ–¼ç®¡ç†æ‡‰ç”¨ç¨‹å¼çš„å®£å‘Šå¼éƒ¨ç½²å’Œæ›´æ–°ã€‚Deployment æä¾›äº†å° Pod å’Œ ReplicaSet çš„ç®¡ç†åŠŸèƒ½ï¼Œç¢ºä¿æ‡‰ç”¨ç¨‹å¼èƒ½å¤ ç©©å®šé‹è¡Œä¸¦æ”¯æ´ç„¡ç¸«æ›´æ–°ã€‚</p><h3 id="Deployment-çš„ä¸»è¦åŠŸèƒ½ï¼š"><a href="#Deployment-çš„ä¸»è¦åŠŸèƒ½ï¼š" class="headerlink" title="Deployment çš„ä¸»è¦åŠŸèƒ½ï¼š"></a>Deployment çš„ä¸»è¦åŠŸèƒ½ï¼š</h3><ul><li><strong>å‰¯æœ¬ç®¡ç†</strong>ï¼šç¶­è­·æŒ‡å®šæ•¸é‡çš„ Pod å‰¯æœ¬ï¼Œç¢ºä¿æœå‹™çš„é«˜å¯ç”¨æ€§</li><li><strong>æ»¾å‹•æ›´æ–°</strong>ï¼šæ”¯æ´é›¶åœæ©Ÿæ™‚é–“çš„æ‡‰ç”¨ç¨‹å¼æ›´æ–°</li><li><strong>ç‰ˆæœ¬å›æ»¾</strong>ï¼šå¿«é€Ÿå›æ»¾åˆ°å…ˆå‰çš„æ‡‰ç”¨ç¨‹å¼ç‰ˆæœ¬</li><li><strong>æ“´ç¸®å®¹</strong>ï¼šæ ¹æ“šéœ€æ±‚å‹•æ…‹èª¿æ•´ Pod çš„æ•¸é‡</li></ul><h3 id="ç‚ºä»€éº¼ä½¿ç”¨-Deploymentï¼Ÿ"><a href="#ç‚ºä»€éº¼ä½¿ç”¨-Deploymentï¼Ÿ" class="headerlink" title="ç‚ºä»€éº¼ä½¿ç”¨ Deploymentï¼Ÿ"></a>ç‚ºä»€éº¼ä½¿ç”¨ Deploymentï¼Ÿ</h3><p>ç›¸è¼ƒæ–¼ç›´æ¥ç®¡ç† Pod æˆ– ReplicaSetï¼ŒDeployment æä¾›äº†æ›´é«˜å±¤æ¬¡çš„ç®¡ç†æŠ½è±¡ï¼š</p><ol><li><strong>å®£å‘Šå¼ç®¡ç†</strong>ï¼šåªéœ€æè¿°æœŸæœ›ç‹€æ…‹ï¼ŒKubernetes æœƒè‡ªå‹•é”æˆç›®æ¨™</li><li><strong>æ›´æ–°ç­–ç•¥</strong>ï¼šå…§å»ºæ»¾å‹•æ›´æ–°æ©Ÿåˆ¶ï¼Œé¿å…æœå‹™ä¸­æ–·</li><li><strong>ç‰ˆæœ¬æ§åˆ¶</strong>ï¼šä¿ç•™éƒ¨ç½²æ­·å²ï¼Œæ”¯æ´å¿«é€Ÿå›æ»¾</li></ol><span id="more"></span><hr><h2 id="Deployment-ç¯„ä¾‹é…ç½®"><a href="#Deployment-ç¯„ä¾‹é…ç½®" class="headerlink" title="Deployment ç¯„ä¾‹é…ç½®"></a>Deployment ç¯„ä¾‹é…ç½®</h2><p>ä»¥ä¸‹æ˜¯ä¸€å€‹å®Œæ•´çš„ Deployment é…ç½®ç¯„ä¾‹ï¼Œå±•ç¤ºäº†å¦‚ä½•éƒ¨ç½²ä¸€å€‹ Java Spring Boot æ‡‰ç”¨ç¨‹å¼ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">dockertest-deployment</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dockertest-namespace</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">dockertest</span></span><br><span class="line">    <span class="attr">version:</span> <span class="string">v0.0.8</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">1</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">dockertest</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">dockertest</span></span><br><span class="line">        <span class="attr">version:</span> <span class="string">v0.0.8</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">dockertest</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">docker.io/pcion123/tinydocker:0.0.8</span></span><br><span class="line">        <span class="attr">imagePullPolicy:</span> <span class="string">Always</span></span><br><span class="line">        <span class="attr">ports:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">8080</span></span><br><span class="line">        <span class="attr">env:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">JAVA_OPTS</span></span><br><span class="line">          <span class="attr">value:</span> <span class="string">&quot;-Xmx512m -Xms256m -Djava.awt.headless=true -Dspring.profiles.active=dev&quot;</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">TZ</span></span><br><span class="line">          <span class="attr">value:</span> <span class="string">&quot;Asia/Taipei&quot;</span></span><br><span class="line">        <span class="attr">livenessProbe:</span></span><br><span class="line">          <span class="attr">httpGet:</span></span><br><span class="line">            <span class="attr">path:</span> <span class="string">/actuator/health</span></span><br><span class="line">            <span class="attr">port:</span> <span class="number">8080</span></span><br><span class="line">          <span class="attr">initialDelaySeconds:</span> <span class="number">60</span></span><br><span class="line">          <span class="attr">periodSeconds:</span> <span class="number">30</span></span><br><span class="line">          <span class="attr">timeoutSeconds:</span> <span class="number">10</span></span><br><span class="line">          <span class="attr">failureThreshold:</span> <span class="number">3</span></span><br><span class="line">        <span class="attr">readinessProbe:</span></span><br><span class="line">          <span class="attr">httpGet:</span></span><br><span class="line">            <span class="attr">path:</span> <span class="string">/actuator/health/readiness</span></span><br><span class="line">            <span class="attr">port:</span> <span class="number">8080</span></span><br><span class="line">          <span class="attr">initialDelaySeconds:</span> <span class="number">30</span></span><br><span class="line">          <span class="attr">periodSeconds:</span> <span class="number">10</span></span><br><span class="line">          <span class="attr">timeoutSeconds:</span> <span class="number">5</span></span><br><span class="line">          <span class="attr">failureThreshold:</span> <span class="number">3</span></span><br><span class="line">      <span class="attr">imagePullSecrets:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">regcred</span></span><br></pre></td></tr></table></figure><h2 id="é…ç½®è©³è§£"><a href="#é…ç½®è©³è§£" class="headerlink" title="é…ç½®è©³è§£"></a>é…ç½®è©³è§£</h2><h3 id="Metadata-å€æ®µ"><a href="#Metadata-å€æ®µ" class="headerlink" title="Metadata å€æ®µ"></a>Metadata å€æ®µ</h3><ul><li><strong>name</strong>: Deployment çš„åç¨±ï¼Œåœ¨åŒä¸€å€‹ namespace ä¸­å¿…é ˆå”¯ä¸€</li><li><strong>namespace</strong>: æŒ‡å®šéƒ¨ç½²çš„å‘½åç©ºé–“</li><li><strong>labels</strong>: ç”¨æ–¼è­˜åˆ¥å’Œåˆ†çµ„è³‡æºçš„æ¨™ç±¤</li></ul><h3 id="Spec-å€æ®µ"><a href="#Spec-å€æ®µ" class="headerlink" title="Spec å€æ®µ"></a>Spec å€æ®µ</h3><ul><li><strong>replicas</strong>: æŒ‡å®šè¦é‹è¡Œçš„ Pod å‰¯æœ¬æ•¸é‡</li><li><strong>selector</strong>: ç”¨æ–¼é¸æ“‡ç®¡ç†å“ªäº› Pod çš„æ¨™ç±¤é¸æ“‡å™¨</li><li><strong>template</strong>: Pod æ¨¡æ¿ï¼Œå®šç¾©äº† Pod çš„è¦æ ¼</li></ul><h3 id="Container-é…ç½®"><a href="#Container-é…ç½®" class="headerlink" title="Container é…ç½®"></a>Container é…ç½®</h3><ul><li><strong>image</strong>: å®¹å™¨æ˜ åƒæª”ä½ç½®</li><li><strong>imagePullPolicy</strong>: æ˜ åƒæª”æ‹‰å–ç­–ç•¥ï¼Œ<code>Always</code> è¡¨ç¤ºæ¯æ¬¡éƒ½æœƒé‡æ–°æ‹‰å–</li><li><strong>ports</strong>: å®¹å™¨å°å¤–æš´éœ²çš„é€£æ¥åŸ </li><li><strong>env</strong>: ç’°å¢ƒè®Šæ•¸è¨­å®š</li><li><strong>imagePullSecrets</strong>: æŒ‡å®šç”¨æ–¼å¾ç§æœ‰å®¹å™¨è¨»å†Šè¡¨æ‹‰å–æ˜ åƒæª”çš„ Secret è³‡æºã€‚ç•¶å®¹å™¨æ˜ åƒæª”å­˜æ”¾åœ¨éœ€è¦èº«ä»½é©—è­‰çš„ç§æœ‰å€‰åº«æ™‚ï¼ˆå¦‚ Docker Hub ç§æœ‰å€‰åº«ã€Azure Container Registryã€Amazon ECR ç­‰ï¼‰ï¼ŒKubernetes éœ€è¦ç›¸æ‡‰çš„èªè­‰è³‡è¨Šæ‰èƒ½æˆåŠŸæ‹‰å–æ˜ åƒæª”ã€‚æ­¤é…ç½®å¼•ç”¨é å…ˆå»ºç«‹çš„ Kubernetes Secret ç‰©ä»¶ï¼Œè©² Secret åŒ…å«äº†è¨»å†Šè¡¨çš„ç™»å…¥æ†‘è­‰ã€‚</li></ul><blockquote><a href="/2025/10/11/kubernetes-image-pull/" title="Kubernetes Image æ‹‰å–æŒ‡å—">é—œæ–¼å¦‚ä½•æ‹‰å– image çš„è©³ç´°èªªæ˜ï¼Œè«‹åƒè€ƒä¹‹å‰çš„æ–‡ç« </a></blockquote><h3 id="å¥åº·æª¢æŸ¥é…ç½®"><a href="#å¥åº·æª¢æŸ¥é…ç½®" class="headerlink" title="å¥åº·æª¢æŸ¥é…ç½®"></a>å¥åº·æª¢æŸ¥é…ç½®</h3><h4 id="Liveness-Probeï¼ˆå­˜æ´»æ¢é‡ï¼‰"><a href="#Liveness-Probeï¼ˆå­˜æ´»æ¢é‡ï¼‰" class="headerlink" title="Liveness Probeï¼ˆå­˜æ´»æ¢é‡ï¼‰"></a>Liveness Probeï¼ˆå­˜æ´»æ¢é‡ï¼‰</h4><p>ç”¨æ–¼æª¢æŸ¥å®¹å™¨æ˜¯å¦ä»åœ¨é‹è¡Œï¼Œå¦‚æœæª¢æŸ¥å¤±æ•—ï¼ŒKubernetes æœƒé‡å•Ÿå®¹å™¨ã€‚</p><h4 id="Readiness-Probeï¼ˆå°±ç·’æ¢é‡ï¼‰"><a href="#Readiness-Probeï¼ˆå°±ç·’æ¢é‡ï¼‰" class="headerlink" title="Readiness Probeï¼ˆå°±ç·’æ¢é‡ï¼‰"></a>Readiness Probeï¼ˆå°±ç·’æ¢é‡ï¼‰</h4><p>ç”¨æ–¼æª¢æŸ¥å®¹å™¨æ˜¯å¦æº–å‚™å¥½æ¥æ”¶æµé‡ï¼Œå¦‚æœæª¢æŸ¥å¤±æ•—ï¼Œå®¹å™¨æœƒå¾ Service çš„ç«¯é»ä¸­ç§»é™¤ã€‚</p><h2 id="å¸¸ç”¨æ“ä½œæŒ‡ä»¤"><a href="#å¸¸ç”¨æ“ä½œæŒ‡ä»¤" class="headerlink" title="å¸¸ç”¨æ“ä½œæŒ‡ä»¤"></a>å¸¸ç”¨æ“ä½œæŒ‡ä»¤</h2><h3 id="éƒ¨ç½²æ‡‰ç”¨ç¨‹å¼"><a href="#éƒ¨ç½²æ‡‰ç”¨ç¨‹å¼" class="headerlink" title="éƒ¨ç½²æ‡‰ç”¨ç¨‹å¼"></a>éƒ¨ç½²æ‡‰ç”¨ç¨‹å¼</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl apply -f dockertest-deployment-v0.0.8.yaml</span><br></pre></td></tr></table></figure><img src="/2025/10/11/kubernetes-deployment/kubernetes_deployment_create.png" class=""><h3 id="æŸ¥çœ‹-Deployment-ç‹€æ…‹"><a href="#æŸ¥çœ‹-Deployment-ç‹€æ…‹" class="headerlink" title="æŸ¥çœ‹ Deployment ç‹€æ…‹"></a>æŸ¥çœ‹ Deployment ç‹€æ…‹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl get deployments -n dockertest-namespace</span><br></pre></td></tr></table></figure><img src="/2025/10/11/kubernetes-deployment/kubernetes_deployment_get_all.png" class=""><h3 id="æŸ¥çœ‹-Deployment-è©³ç´°è³‡è¨Š"><a href="#æŸ¥çœ‹-Deployment-è©³ç´°è³‡è¨Š" class="headerlink" title="æŸ¥çœ‹ Deployment è©³ç´°è³‡è¨Š"></a>æŸ¥çœ‹ Deployment è©³ç´°è³‡è¨Š</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl describe deployment dockertest-deployment -n dockertest-namespace</span><br></pre></td></tr></table></figure><img src="/2025/10/11/kubernetes-deployment/kubernetes_deployment_describe.png" class=""><h3 id="æ“´ç¸®å®¹æ“ä½œ"><a href="#æ“´ç¸®å®¹æ“ä½œ" class="headerlink" title="æ“´ç¸®å®¹æ“ä½œ"></a>æ“´ç¸®å®¹æ“ä½œ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ“´å±•åˆ° 3 å€‹å‰¯æœ¬</span></span><br><span class="line">kubectl scale deployment dockertest-deployment --replicas=3 -n dockertest-namespace</span><br></pre></td></tr></table></figure><img src="/2025/10/11/kubernetes-deployment/kubernetes_deployment_scale.png" class=""><h3 id="æ›´æ–°æ‡‰ç”¨ç¨‹å¼"><a href="#æ›´æ–°æ‡‰ç”¨ç¨‹å¼" class="headerlink" title="æ›´æ–°æ‡‰ç”¨ç¨‹å¼"></a>æ›´æ–°æ‡‰ç”¨ç¨‹å¼</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ›´æ–°æ˜ åƒæª”ç‰ˆæœ¬ï¼ˆå¾ 0.0.10 æ›´æ–°åˆ° 0.0.11ï¼‰</span></span><br><span class="line">kubectl <span class="built_in">set</span> image deployment/dockertest-deployment dockertest=docker.io/pcion123/tinydocker:0.0.11 -n dockertest-namespace</span><br></pre></td></tr></table></figure><img src="/2025/10/11/kubernetes-deployment/kubernetes_deployment_update.png" class=""><h3 id="æŸ¥çœ‹æ›´æ–°ç‹€æ…‹"><a href="#æŸ¥çœ‹æ›´æ–°ç‹€æ…‹" class="headerlink" title="æŸ¥çœ‹æ›´æ–°ç‹€æ…‹"></a>æŸ¥çœ‹æ›´æ–°ç‹€æ…‹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl rollout status deployment/dockertest-deployment -n dockertest-namespace</span><br></pre></td></tr></table></figure><img src="/2025/10/11/kubernetes-deployment/kubernetes_deployment_update_status.png" class=""><h3 id="å›æ»¾åˆ°ä¸Šä¸€å€‹ç‰ˆæœ¬"><a href="#å›æ»¾åˆ°ä¸Šä¸€å€‹ç‰ˆæœ¬" class="headerlink" title="å›æ»¾åˆ°ä¸Šä¸€å€‹ç‰ˆæœ¬"></a>å›æ»¾åˆ°ä¸Šä¸€å€‹ç‰ˆæœ¬</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl rollout undo deployment/dockertest-deployment -n dockertest-namespace</span><br></pre></td></tr></table></figure><img src="/2025/10/11/kubernetes-deployment/kubernetes_deployment_rollback.png" class=""><h3 id="æŸ¥çœ‹éƒ¨ç½²æ­·å²"><a href="#æŸ¥çœ‹éƒ¨ç½²æ­·å²" class="headerlink" title="æŸ¥çœ‹éƒ¨ç½²æ­·å²"></a>æŸ¥çœ‹éƒ¨ç½²æ­·å²</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl rollout <span class="built_in">history</span> deployment/dockertest-deployment -n dockertest-namespace</span><br></pre></td></tr></table></figure><img src="/2025/10/11/kubernetes-deployment/kubernetes_deployment_history.png" class=""><h3 id="æŸ¥çœ‹-Pod-ç‹€æ…‹"><a href="#æŸ¥çœ‹-Pod-ç‹€æ…‹" class="headerlink" title="æŸ¥çœ‹ Pod ç‹€æ…‹"></a>æŸ¥çœ‹ Pod ç‹€æ…‹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl get pods -n dockertest-namespace -l app=dockertest</span><br></pre></td></tr></table></figure><img src="/2025/10/11/kubernetes-deployment/kubernetes_deployment_pod_status.png" class=""><h2 id="æœ€ä½³å¯¦å‹™å»ºè­°"><a href="#æœ€ä½³å¯¦å‹™å»ºè­°" class="headerlink" title="æœ€ä½³å¯¦å‹™å»ºè­°"></a>æœ€ä½³å¯¦å‹™å»ºè­°</h2><ol><li><strong>è¨­å®šé©ç•¶çš„è³‡æºé™åˆ¶</strong>: ç‚ºå®¹å™¨è¨­å®š CPU å’Œè¨˜æ†¶é«”çš„ requests å’Œ limits</li><li><strong>é…ç½®å¥åº·æª¢æŸ¥</strong>: å‹™å¿…è¨­å®š liveness å’Œ readiness probe ä»¥ç¢ºä¿æ‡‰ç”¨ç¨‹å¼çš„ç©©å®šæ€§</li><li><strong>ä½¿ç”¨æ¨™ç±¤ç®¡ç†</strong>: å–„ç”¨æ¨™ç±¤ä¾†çµ„ç¹”å’Œç®¡ç†ä¸åŒçš„è³‡æº</li><li><strong>ç‰ˆæœ¬æ§åˆ¶</strong>: ä½¿ç”¨å…·é«”çš„æ˜ åƒæª”æ¨™ç±¤è€Œé <code>latest</code></li><li><strong>å‘½åç©ºé–“éš”é›¢</strong>: ä½¿ç”¨ä¸åŒçš„å‘½åç©ºé–“ä¾†éš”é›¢ä¸åŒç’°å¢ƒçš„æ‡‰ç”¨ç¨‹å¼</li></ol><p>é€éé€™äº›é…ç½®å’Œæ“ä½œï¼Œæ‚¨å¯ä»¥æœ‰æ•ˆåœ°ç®¡ç† Kubernetes ä¸­çš„æ‡‰ç”¨ç¨‹å¼éƒ¨ç½²ï¼Œç¢ºä¿æœå‹™çš„é«˜å¯ç”¨æ€§å’Œç©©å®šæ€§ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Kubernetes-Deployment-ä½¿ç”¨æŒ‡å—&quot;&gt;&lt;a href=&quot;#Kubernetes-Deployment-ä½¿ç”¨æŒ‡å—&quot; class=&quot;headerlink&quot; title=&quot;Kubernetes Deployment ä½¿ç”¨æŒ‡å—&quot;&gt;&lt;/a&gt;Kubernetes Deployment ä½¿ç”¨æŒ‡å—&lt;/h1&gt;&lt;h2 id=&quot;ä»€éº¼æ˜¯-Deploymentï¼Ÿ&quot;&gt;&lt;a href=&quot;#ä»€éº¼æ˜¯-Deploymentï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;ä»€éº¼æ˜¯ Deploymentï¼Ÿ&quot;&gt;&lt;/a&gt;ä»€éº¼æ˜¯ Deploymentï¼Ÿ&lt;/h2&gt;&lt;p&gt;Kubernetes Deployment æ˜¯ä¸€å€‹ API ç‰©ä»¶ï¼Œç”¨æ–¼ç®¡ç†æ‡‰ç”¨ç¨‹å¼çš„å®£å‘Šå¼éƒ¨ç½²å’Œæ›´æ–°ã€‚Deployment æä¾›äº†å° Pod å’Œ ReplicaSet çš„ç®¡ç†åŠŸèƒ½ï¼Œç¢ºä¿æ‡‰ç”¨ç¨‹å¼èƒ½å¤ ç©©å®šé‹è¡Œä¸¦æ”¯æ´ç„¡ç¸«æ›´æ–°ã€‚&lt;/p&gt;
&lt;h3 id=&quot;Deployment-çš„ä¸»è¦åŠŸèƒ½ï¼š&quot;&gt;&lt;a href=&quot;#Deployment-çš„ä¸»è¦åŠŸèƒ½ï¼š&quot; class=&quot;headerlink&quot; title=&quot;Deployment çš„ä¸»è¦åŠŸèƒ½ï¼š&quot;&gt;&lt;/a&gt;Deployment çš„ä¸»è¦åŠŸèƒ½ï¼š&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å‰¯æœ¬ç®¡ç†&lt;/strong&gt;ï¼šç¶­è­·æŒ‡å®šæ•¸é‡çš„ Pod å‰¯æœ¬ï¼Œç¢ºä¿æœå‹™çš„é«˜å¯ç”¨æ€§&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ»¾å‹•æ›´æ–°&lt;/strong&gt;ï¼šæ”¯æ´é›¶åœæ©Ÿæ™‚é–“çš„æ‡‰ç”¨ç¨‹å¼æ›´æ–°&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç‰ˆæœ¬å›æ»¾&lt;/strong&gt;ï¼šå¿«é€Ÿå›æ»¾åˆ°å…ˆå‰çš„æ‡‰ç”¨ç¨‹å¼ç‰ˆæœ¬&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ“´ç¸®å®¹&lt;/strong&gt;ï¼šæ ¹æ“šéœ€æ±‚å‹•æ…‹èª¿æ•´ Pod çš„æ•¸é‡&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;ç‚ºä»€éº¼ä½¿ç”¨-Deploymentï¼Ÿ&quot;&gt;&lt;a href=&quot;#ç‚ºä»€éº¼ä½¿ç”¨-Deploymentï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;ç‚ºä»€éº¼ä½¿ç”¨ Deploymentï¼Ÿ&quot;&gt;&lt;/a&gt;ç‚ºä»€éº¼ä½¿ç”¨ Deploymentï¼Ÿ&lt;/h3&gt;&lt;p&gt;ç›¸è¼ƒæ–¼ç›´æ¥ç®¡ç† Pod æˆ– ReplicaSetï¼ŒDeployment æä¾›äº†æ›´é«˜å±¤æ¬¡çš„ç®¡ç†æŠ½è±¡ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å®£å‘Šå¼ç®¡ç†&lt;/strong&gt;ï¼šåªéœ€æè¿°æœŸæœ›ç‹€æ…‹ï¼ŒKubernetes æœƒè‡ªå‹•é”æˆç›®æ¨™&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ›´æ–°ç­–ç•¥&lt;/strong&gt;ï¼šå…§å»ºæ»¾å‹•æ›´æ–°æ©Ÿåˆ¶ï¼Œé¿å…æœå‹™ä¸­æ–·&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç‰ˆæœ¬æ§åˆ¶&lt;/strong&gt;ï¼šä¿ç•™éƒ¨ç½²æ­·å²ï¼Œæ”¯æ´å¿«é€Ÿå›æ»¾&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
    
      <category term="kubernetes" scheme="https://pcion123.github.io/categories/kubernetes/"/>
    
    
      <category term="kubernetes" scheme="https://pcion123.github.io/tags/kubernetes/"/>
    
  </entry>
  
  <entry>
    <title>Kubernetes Image æ‹‰å–æŒ‡å—</title>
    <link href="https://pcion123.github.io/2025/10/11/kubernetes-image-pull/"/>
    <id>https://pcion123.github.io/2025/10/11/kubernetes-image-pull/</id>
    <published>2025-10-11T15:13:38.000Z</published>
    <updated>2025-10-11T15:49:13.215Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Kubernetes-Image-æ‹‰å–æŒ‡å—"><a href="#Kubernetes-Image-æ‹‰å–æŒ‡å—" class="headerlink" title="Kubernetes Image æ‹‰å–æŒ‡å—"></a>Kubernetes Image æ‹‰å–æŒ‡å—</h1><h2 id="ä»€éº¼æ˜¯å®¹å™¨æ˜ åƒæ‹‰å–ï¼Ÿ"><a href="#ä»€éº¼æ˜¯å®¹å™¨æ˜ åƒæ‹‰å–ï¼Ÿ" class="headerlink" title="ä»€éº¼æ˜¯å®¹å™¨æ˜ åƒæ‹‰å–ï¼Ÿ"></a>ä»€éº¼æ˜¯å®¹å™¨æ˜ åƒæ‹‰å–ï¼Ÿ</h2><p>åœ¨ Kubernetes ä¸­ï¼ŒPod éœ€è¦ä½¿ç”¨å®¹å™¨æ˜ åƒä¾†å•Ÿå‹•å®¹å™¨ã€‚æ ¹æ“šæ˜ åƒçš„ä¾†æºå’Œå­˜å–æ–¹å¼ä¸åŒï¼ŒKubernetes æä¾›äº†å¤šç¨®æ˜ åƒæ‹‰å–ç­–ç•¥ã€‚äº†è§£é€™äº›ä¸åŒçš„æ‹‰å–æ–¹å¼å°æ–¼æœ‰æ•ˆç®¡ç†æ‡‰ç”¨ç¨‹å¼éƒ¨ç½²è‡³é—œé‡è¦ã€‚</p><h3 id="æ˜ åƒæ‹‰å–çš„ä¸»è¦å ´æ™¯ï¼š"><a href="#æ˜ åƒæ‹‰å–çš„ä¸»è¦å ´æ™¯ï¼š" class="headerlink" title="æ˜ åƒæ‹‰å–çš„ä¸»è¦å ´æ™¯ï¼š"></a>æ˜ åƒæ‹‰å–çš„ä¸»è¦å ´æ™¯ï¼š</h3><ul><li><strong>æœ¬åœ°æ˜ åƒ</strong>ï¼šä½¿ç”¨æœ¬åœ°æ§‹å»ºä¸¦è¼‰å…¥åˆ°ç¯€é»çš„æ˜ åƒ</li><li><strong>å…¬é–‹å€‰åº«</strong>ï¼šå¾ Docker Hub ç­‰å…¬é–‹å€‰åº«æ‹‰å–æ˜ åƒ</li><li><strong>ç§æœ‰å€‰åº«</strong>ï¼šå¾éœ€è¦èº«ä»½é©—è­‰çš„ç§æœ‰å€‰åº«æ‹‰å–æ˜ åƒ</li><li><strong>ä¼æ¥­å€‰åº«</strong>ï¼šå¾çµ„ç¹”å…§éƒ¨çš„ç§æœ‰æ˜ åƒå€‰åº«æ‹‰å–æ˜ åƒ</li></ul><h3 id="ç‚ºä»€éº¼éœ€è¦äº†è§£ä¸åŒçš„æ‹‰å–æ–¹å¼ï¼Ÿ"><a href="#ç‚ºä»€éº¼éœ€è¦äº†è§£ä¸åŒçš„æ‹‰å–æ–¹å¼ï¼Ÿ" class="headerlink" title="ç‚ºä»€éº¼éœ€è¦äº†è§£ä¸åŒçš„æ‹‰å–æ–¹å¼ï¼Ÿ"></a>ç‚ºä»€éº¼éœ€è¦äº†è§£ä¸åŒçš„æ‹‰å–æ–¹å¼ï¼Ÿ</h3><p>æ ¹æ“šä¸åŒçš„ä½¿ç”¨å ´æ™¯ï¼Œé¸æ“‡åˆé©çš„æ˜ åƒæ‹‰å–æ–¹å¼å¯ä»¥ï¼š</p><ol><li><strong>æå‡æ•ˆç‡</strong>ï¼šæ¸›å°‘ä¸å¿…è¦çš„ç¶²è·¯å‚³è¼¸å’Œä¸‹è¼‰æ™‚é–“</li><li><strong>å¢å¼·å®‰å…¨æ€§</strong>ï¼šä¿è­·ç§æœ‰æ˜ åƒä¸è¢«æœªæˆæ¬Šå­˜å–</li><li><strong>é™ä½æˆæœ¬</strong>ï¼šé¿å…é‡è¤‡æ‹‰å–ç›¸åŒçš„æ˜ åƒ</li></ol><span id="more"></span><hr><h2 id="æ–¹å¼ä¸€ï¼šæœ¬åœ°-Docker-æ˜ åƒç›´æ¥å¼•ç”¨"><a href="#æ–¹å¼ä¸€ï¼šæœ¬åœ°-Docker-æ˜ åƒç›´æ¥å¼•ç”¨" class="headerlink" title="æ–¹å¼ä¸€ï¼šæœ¬åœ° Docker æ˜ åƒç›´æ¥å¼•ç”¨"></a>æ–¹å¼ä¸€ï¼šæœ¬åœ° Docker æ˜ åƒç›´æ¥å¼•ç”¨</h2><h3 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p>ç•¶æ‚¨åœ¨æœ¬åœ°ç’°å¢ƒï¼ˆå¦‚ Minikubeã€Docker Desktopï¼‰é–‹ç™¼æ™‚ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨æœ¬åœ°æ§‹å»ºçš„ Docker æ˜ åƒï¼Œç„¡éœ€æ¨é€åˆ°é ç«¯å€‰åº«ã€‚</p><h3 id="ä½¿ç”¨å ´æ™¯"><a href="#ä½¿ç”¨å ´æ™¯" class="headerlink" title="ä½¿ç”¨å ´æ™¯"></a>ä½¿ç”¨å ´æ™¯</h3><ul><li>é–‹ç™¼å’Œæ¸¬è©¦éšæ®µ</li><li>æœ¬åœ° Kubernetes ç’°å¢ƒï¼ˆMinikubeã€Kindï¼‰</li><li>ä¸å¸Œæœ›å°‡æ˜ åƒæ¨é€åˆ°å¤–éƒ¨å€‰åº«çš„æƒ…æ³</li></ul><h3 id="å¯¦ä½œæ­¥é©Ÿ"><a href="#å¯¦ä½œæ­¥é©Ÿ" class="headerlink" title="å¯¦ä½œæ­¥é©Ÿ"></a>å¯¦ä½œæ­¥é©Ÿ</h3><h4 id="1-ç¢ºä¿-Docker-ç’°å¢ƒèˆ‡-Kubernetes-å…±äº«"><a href="#1-ç¢ºä¿-Docker-ç’°å¢ƒèˆ‡-Kubernetes-å…±äº«" class="headerlink" title="1. ç¢ºä¿ Docker ç’°å¢ƒèˆ‡ Kubernetes å…±äº«"></a>1. ç¢ºä¿ Docker ç’°å¢ƒèˆ‡ Kubernetes å…±äº«</h4><p><strong>åœ¨ Minikube ä¸­ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¨­å®š Docker ç’°å¢ƒæŒ‡å‘ Minikube</span></span><br><span class="line"><span class="built_in">eval</span> $(minikube docker-env)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆ–åœ¨ Windows PowerShell ä¸­</span></span><br><span class="line">minikube docker-env | Invoke-Expression</span><br><span class="line"></span><br><span class="line"><span class="comment"># é©—è­‰å·²åˆ‡æ›åˆ° Minikube Docker ç’°å¢ƒ</span></span><br><span class="line">docker context <span class="built_in">ls</span></span><br><span class="line"><span class="comment"># æˆ–è€…æª¢æŸ¥ Docker Host</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$DOCKER_HOST</span></span><br><span class="line"><span class="comment"># Minikube ç’°å¢ƒæœƒé¡¯ç¤ºé¡ä¼¼ï¼štcp://192.168.49.2:2376</span></span><br></pre></td></tr></table></figure><img src="/2025/10/11/kubernetes-image-pull/kubernetes_pull-image_switch_in.png" class=""><p><strong>åˆ‡å›åŸæœ¬çš„ Docker ç’°å¢ƒï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨ Linux/macOS ä¸­</span></span><br><span class="line"><span class="built_in">eval</span> $(minikube docker-env -u)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆ–åœ¨ Windows PowerShell ä¸­</span></span><br><span class="line">minikube docker-env -u | Invoke-Expression</span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆ–è€…ç›´æ¥é‡æ–°å•Ÿå‹•çµ‚ç«¯æ©Ÿæœƒè©±</span></span><br><span class="line"><span class="comment"># æ–°çš„çµ‚ç«¯æœƒè‡ªå‹•ä½¿ç”¨æœ¬åœ° Docker ç’°å¢ƒ</span></span><br></pre></td></tr></table></figure><img src="/2025/10/11/kubernetes-image-pull/kubernetes_pull-image_switch_back.png" class=""><p><strong>åœ¨ Docker Desktop ä¸­ï¼š</strong><br>Docker Desktop çš„ Kubernetes æœƒè‡ªå‹•å…±äº«æœ¬åœ° Docker æ˜ åƒã€‚</p><h4 id="2-æ§‹å»ºæœ¬åœ°æ˜ åƒ"><a href="#2-æ§‹å»ºæœ¬åœ°æ˜ åƒ" class="headerlink" title="2. æ§‹å»ºæœ¬åœ°æ˜ åƒ"></a>2. æ§‹å»ºæœ¬åœ°æ˜ åƒ</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ§‹å»º Docker æ˜ åƒ</span></span><br><span class="line">docker build -t my-local-app:latest .</span><br><span class="line"></span><br><span class="line"><span class="comment"># é©—è­‰æ˜ åƒå·²å»ºç«‹</span></span><br><span class="line">docker images | grep my-local-app</span><br></pre></td></tr></table></figure><h4 id="3-åœ¨-Kubernetes-ä¸­ä½¿ç”¨æœ¬åœ°æ˜ åƒ"><a href="#3-åœ¨-Kubernetes-ä¸­ä½¿ç”¨æœ¬åœ°æ˜ åƒ" class="headerlink" title="3. åœ¨ Kubernetes ä¸­ä½¿ç”¨æœ¬åœ°æ˜ åƒ"></a>3. åœ¨ Kubernetes ä¸­ä½¿ç”¨æœ¬åœ°æ˜ åƒ</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">local-app-deployment</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">default</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">1</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">local-app</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">local-app</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">app</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">my-local-app:latest</span></span><br><span class="line">        <span class="attr">imagePullPolicy:</span> <span class="string">Never</span>  <span class="comment"># é—œéµè¨­å®šï¼šä¸å¾é ç«¯æ‹‰å–</span></span><br><span class="line">        <span class="attr">ports:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">8080</span></span><br></pre></td></tr></table></figure><h4 id="4-éƒ¨ç½²æ‡‰ç”¨ç¨‹å¼"><a href="#4-éƒ¨ç½²æ‡‰ç”¨ç¨‹å¼" class="headerlink" title="4. éƒ¨ç½²æ‡‰ç”¨ç¨‹å¼"></a>4. éƒ¨ç½²æ‡‰ç”¨ç¨‹å¼</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl apply -f local-deployment.yaml</span><br></pre></td></tr></table></figure><h3 id="é‡è¦æ³¨æ„äº‹é …"><a href="#é‡è¦æ³¨æ„äº‹é …" class="headerlink" title="é‡è¦æ³¨æ„äº‹é …"></a>é‡è¦æ³¨æ„äº‹é …</h3><ul><li><strong>imagePullPolicy</strong>: å¿…é ˆè¨­å®šç‚º <code>Never</code> æˆ– <code>IfNotPresent</code></li><li><strong>æ˜ åƒæ¨™ç±¤</strong>: å»ºè­°ä½¿ç”¨å…·é«”çš„æ¨™ç±¤è€Œé <code>latest</code></li><li><strong>ç¯€é»é™åˆ¶</strong>: æ˜ åƒåªå­˜åœ¨æ–¼ç‰¹å®šç¯€é»ä¸Š</li><li><strong>Docker ç’°å¢ƒåˆ‡æ›</strong>: ä½¿ç”¨ <code>minikube docker-env</code> å¾Œè¨˜å¾—åˆ‡å›åŸæœ¬ç’°å¢ƒ<ul><li>ä½¿ç”¨ <code>eval $(minikube docker-env -u)</code> ä¾†å–æ¶ˆè¨­å®š</li><li>æˆ–é‡æ–°å•Ÿå‹•çµ‚ç«¯æ©Ÿæœƒè©±</li></ul></li></ul><h3 id="Docker-ç’°å¢ƒç®¡ç†"><a href="#Docker-ç’°å¢ƒç®¡ç†" class="headerlink" title="Docker ç’°å¢ƒç®¡ç†"></a>Docker ç’°å¢ƒç®¡ç†</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æª¢æŸ¥ç•¶å‰ Docker ç’°å¢ƒå’Œä¸»æ©Ÿ</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$DOCKER_HOST</span></span><br><span class="line"><span class="comment"># æœ¬åœ°ï¼šé€šå¸¸ç‚ºç©ºæˆ–é¡¯ç¤º unix:///var/run/docker.sock</span></span><br><span class="line"><span class="comment"># Minikubeï¼šé¡¯ç¤º tcp://192.168.49.2:2376 (æˆ–é¡ä¼¼çš„ IP)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ Docker ä¸Šä¸‹æ–‡</span></span><br><span class="line">docker context <span class="built_in">ls</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ—å‡º Docker æ˜ åƒï¼ˆç¢ºèªåœ¨æ­£ç¢ºçš„ç’°å¢ƒä¸­ï¼‰</span></span><br><span class="line">docker images</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¦‚æœéœ€è¦åœ¨ä¸åŒç’°å¢ƒé–“åˆ‡æ›ï¼š</span></span><br><span class="line"><span class="comment"># åˆ‡æ›åˆ° Minikube</span></span><br><span class="line"><span class="built_in">eval</span> $(minikube docker-env)</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;ç•¶å‰ Docker Host: <span class="variable">$DOCKER_HOST</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ‡æ›å›æœ¬åœ°</span></span><br><span class="line"><span class="built_in">eval</span> $(minikube docker-env -u)</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;ç•¶å‰ Docker Host: <span class="variable">$DOCKER_HOST</span>&quot;</span></span><br></pre></td></tr></table></figure><hr><h2 id="æ–¹å¼äºŒï¼šæ‹‰å–-Docker-Hub-å…¬é–‹å€‰åº«æ˜ åƒ"><a href="#æ–¹å¼äºŒï¼šæ‹‰å–-Docker-Hub-å…¬é–‹å€‰åº«æ˜ åƒ" class="headerlink" title="æ–¹å¼äºŒï¼šæ‹‰å– Docker Hub å…¬é–‹å€‰åº«æ˜ åƒ"></a>æ–¹å¼äºŒï¼šæ‹‰å– Docker Hub å…¬é–‹å€‰åº«æ˜ åƒ</h2><h3 id="æ¦‚è¿°-1"><a href="#æ¦‚è¿°-1" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p>å¾ Docker Hub ç­‰å…¬é–‹å€‰åº«æ‹‰å–æ˜ åƒæ˜¯æœ€å¸¸è¦‹çš„æ–¹å¼ï¼Œé©ç”¨æ–¼ä½¿ç”¨é–‹æºè»Ÿé«”æˆ–å…¬é–‹å¯ç”¨çš„æ‡‰ç”¨ç¨‹å¼æ˜ åƒã€‚</p><h3 id="ä½¿ç”¨å ´æ™¯-1"><a href="#ä½¿ç”¨å ´æ™¯-1" class="headerlink" title="ä½¿ç”¨å ´æ™¯"></a>ä½¿ç”¨å ´æ™¯</h3><ul><li>ä½¿ç”¨å®˜æ–¹æ˜ åƒï¼ˆå¦‚ nginxã€redisã€mysqlï¼‰</li><li>ä½¿ç”¨é–‹æºå°ˆæ¡ˆçš„å…¬é–‹æ˜ åƒ</li><li>ç”Ÿç”¢ç’°å¢ƒä¸­çš„æ¨™æº–åŒ–æ˜ åƒ</li></ul><h3 id="å¯¦ä½œæ­¥é©Ÿ-1"><a href="#å¯¦ä½œæ­¥é©Ÿ-1" class="headerlink" title="å¯¦ä½œæ­¥é©Ÿ"></a>å¯¦ä½œæ­¥é©Ÿ</h3><h4 id="1-åŸºæœ¬å…¬é–‹æ˜ åƒä½¿ç”¨ç¯„ä¾‹"><a href="#1-åŸºæœ¬å…¬é–‹æ˜ åƒä½¿ç”¨ç¯„ä¾‹" class="headerlink" title="1. åŸºæœ¬å…¬é–‹æ˜ åƒä½¿ç”¨ç¯„ä¾‹"></a>1. åŸºæœ¬å…¬é–‹æ˜ åƒä½¿ç”¨ç¯„ä¾‹</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">nginx-deployment</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">default</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">3</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">nginx</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">nginx</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">nginx:1.21-alpine</span>  <span class="comment"># Docker Hub å®˜æ–¹æ˜ åƒ</span></span><br><span class="line">        <span class="attr">imagePullPolicy:</span> <span class="string">Always</span>   <span class="comment"># ç¸½æ˜¯æ‹‰å–æœ€æ–°ç‰ˆæœ¬</span></span><br><span class="line">        <span class="attr">ports:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">80</span></span><br></pre></td></tr></table></figure><h4 id="2-é€²éšå…¬é–‹æ˜ åƒé…ç½®ç¯„ä¾‹"><a href="#2-é€²éšå…¬é–‹æ˜ åƒé…ç½®ç¯„ä¾‹" class="headerlink" title="2. é€²éšå…¬é–‹æ˜ åƒé…ç½®ç¯„ä¾‹"></a>2. é€²éšå…¬é–‹æ˜ åƒé…ç½®ç¯„ä¾‹</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">tomcat-deployment</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">default</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">1</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">tomcat</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">tomcat</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">tomcat</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">tomcat:10.1-jdk17</span></span><br><span class="line">        <span class="attr">imagePullPolicy:</span> <span class="string">IfNotPresent</span>  <span class="comment"># å¦‚æœæœ¬åœ°ä¸å­˜åœ¨æ‰æ‹‰å–</span></span><br><span class="line">        <span class="attr">ports:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">8080</span></span><br><span class="line">        <span class="attr">command:</span> [<span class="string">&quot;/bin/sh&quot;</span>,<span class="string">&quot;-c&quot;</span>]</span><br><span class="line">        <span class="attr">args:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">cp</span> <span class="string">-r</span> <span class="string">/usr/local/tomcat/webapps.dist/ROOT</span> <span class="string">/usr/local/tomcat/webapps/</span> <span class="string">&amp;&amp;</span> <span class="string">exec</span> <span class="string">catalina.sh</span> <span class="string">run</span></span><br><span class="line">        <span class="attr">readinessProbe:</span></span><br><span class="line">          <span class="attr">httpGet:</span></span><br><span class="line">            <span class="attr">path:</span> <span class="string">/</span></span><br><span class="line">            <span class="attr">port:</span> <span class="number">8080</span></span><br><span class="line">          <span class="attr">initialDelaySeconds:</span> <span class="number">10</span></span><br><span class="line">          <span class="attr">periodSeconds:</span> <span class="number">5</span></span><br></pre></td></tr></table></figure><h4 id="3-éƒ¨ç½²æ‡‰ç”¨ç¨‹å¼"><a href="#3-éƒ¨ç½²æ‡‰ç”¨ç¨‹å¼" class="headerlink" title="3. éƒ¨ç½²æ‡‰ç”¨ç¨‹å¼"></a>3. éƒ¨ç½²æ‡‰ç”¨ç¨‹å¼</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># éƒ¨ç½²åŸºæœ¬çš„ Nginx æ‡‰ç”¨</span></span><br><span class="line">kubectl apply -f nginx-deployment.yaml</span><br><span class="line"></span><br><span class="line"><span class="comment"># éƒ¨ç½²é€²éšçš„ Tomcat æ‡‰ç”¨</span></span><br><span class="line">kubectl apply -f tomcat-deployment.yaml</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹éƒ¨ç½²ç‹€æ…‹</span></span><br><span class="line">kubectl get deployments</span><br><span class="line">kubectl get pods</span><br></pre></td></tr></table></figure><h3 id="ImagePullPolicy-é¸é …èªªæ˜"><a href="#ImagePullPolicy-é¸é …èªªæ˜" class="headerlink" title="ImagePullPolicy é¸é …èªªæ˜"></a>ImagePullPolicy é¸é …èªªæ˜</h3><ul><li><strong>Always</strong>: æ¯æ¬¡éƒ½é‡æ–°æ‹‰å–æ˜ åƒ</li><li><strong>IfNotPresent</strong>: æœ¬åœ°ä¸å­˜åœ¨æ™‚æ‰æ‹‰å–ï¼ˆé è¨­å€¼ï¼‰</li><li><strong>Never</strong>: çµ•ä¸æ‹‰å–ï¼Œåªä½¿ç”¨æœ¬åœ°æ˜ åƒ</li></ul><hr><h2 id="æ–¹å¼ä¸‰ï¼šæ‹‰å–-Docker-Hub-ç§æœ‰å€‰åº«æ˜ åƒ"><a href="#æ–¹å¼ä¸‰ï¼šæ‹‰å–-Docker-Hub-ç§æœ‰å€‰åº«æ˜ åƒ" class="headerlink" title="æ–¹å¼ä¸‰ï¼šæ‹‰å– Docker Hub ç§æœ‰å€‰åº«æ˜ åƒ"></a>æ–¹å¼ä¸‰ï¼šæ‹‰å– Docker Hub ç§æœ‰å€‰åº«æ˜ åƒ</h2><h3 id="æ¦‚è¿°-2"><a href="#æ¦‚è¿°-2" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p>ç•¶ä½¿ç”¨ç§æœ‰å€‰åº«ä¸­çš„æ˜ åƒæ™‚ï¼Œéœ€è¦æä¾›èº«ä»½é©—è­‰è³‡è¨Šã€‚Kubernetes ä½¿ç”¨ Image Pull Secret ä¾†å®‰å…¨åœ°å­˜å„²é€™äº›æ†‘è­‰ã€‚</p><h3 id="ä½¿ç”¨å ´æ™¯-2"><a href="#ä½¿ç”¨å ´æ™¯-2" class="headerlink" title="ä½¿ç”¨å ´æ™¯"></a>ä½¿ç”¨å ´æ™¯</h3><ul><li>ä½¿ç”¨çµ„ç¹”çš„ç§æœ‰æ˜ åƒ</li><li>å•†æ¥­è»Ÿé«”çš„ç§æœ‰æ˜ åƒ</li><li>åŒ…å«æ•æ„Ÿè³‡è¨Šçš„æ‡‰ç”¨ç¨‹å¼æ˜ åƒ</li></ul><h3 id="å¯¦ä½œæ­¥é©Ÿ-2"><a href="#å¯¦ä½œæ­¥é©Ÿ-2" class="headerlink" title="å¯¦ä½œæ­¥é©Ÿ"></a>å¯¦ä½œæ­¥é©Ÿ</h3><h4 id="1-å»ºç«‹-Docker-Registry-Secret"><a href="#1-å»ºç«‹-Docker-Registry-Secret" class="headerlink" title="1. å»ºç«‹ Docker Registry Secret"></a>1. å»ºç«‹ Docker Registry Secret</h4><p>ç‚ºäº†è®“ Kubernetes èƒ½å¤ å¾ Docker Hub ç§æœ‰å€‰åº«æ‹‰å–æ˜ åƒæª”ï¼Œéœ€è¦å»ºç«‹åŒ…å«èªè­‰è³‡è¨Šçš„ Secret è³‡æºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">kubectl create secret docker-registry regcred \</span><br><span class="line">  --docker-server=https://index.docker.io/v1/ \</span><br><span class="line">  --docker-username=&lt;username&gt; \</span><br><span class="line">  --docker-password=&lt;password&gt; \</span><br><span class="line">  --docker-email=&lt;mail&gt; \</span><br><span class="line">  --namespace=&lt;namespace&gt;</span><br></pre></td></tr></table></figure><p><strong>åƒæ•¸èªªæ˜ï¼š</strong></p><ul><li><code>regcred</code>ï¼šSecret çš„åç¨±ï¼Œå¯ä»¥è‡ªè¡Œå®šç¾©</li><li><code>--docker-server</code>ï¼šDocker Hub çš„ä¼ºæœå™¨åœ°å€ï¼Œå›ºå®šç‚º <code>https://index.docker.io/v1/</code></li><li><code>--docker-username</code>ï¼šæ‚¨çš„ Docker Hub ä½¿ç”¨è€…åç¨±</li><li><code>--docker-password</code>ï¼šå»ºè­°ä½¿ç”¨ Personal Access Token (PAT) è€Œéå¯†ç¢¼</li><li><code>--namespace</code>ï¼šæŒ‡å®š Secret å»ºç«‹çš„å‘½åç©ºé–“</li></ul><blockquote><a href="/2025/10/11/docker-hub-pat-guide/" title="Docker Hub PAT ç”³è«‹æŒ‡å—">é—œæ–¼å¦‚ä½•ç²å– Docker Hub Personal Access Token çš„è©³ç´°èªªæ˜ï¼Œè«‹åƒè€ƒä¹‹å‰çš„æ–‡ç« </a></blockquote><p><strong>é‡è¦æé†’ï¼š</strong></p><ul><li>å‡ºæ–¼å®‰å…¨è€ƒé‡ï¼Œå¼·çƒˆå»ºè­°ä½¿ç”¨ <strong>Personal Access Token (PAT)</strong> è€Œéå¸³æˆ¶å¯†ç¢¼</li><li><code>--docker-email</code> åƒæ•¸ç‚ºå¯é¸ï¼Œç¾ä»£ Docker å€‰åº«é€šå¸¸ä¸éœ€è¦æ­¤åƒæ•¸</li><li>Secret å¿…é ˆå»ºç«‹åœ¨èˆ‡ Pod ç›¸åŒçš„å‘½åç©ºé–“ä¸­æ‰èƒ½ä½¿ç”¨</li></ul><h4 id="2-åœ¨-Deployment-ä¸­ä½¿ç”¨ç§æœ‰æ˜ åƒ"><a href="#2-åœ¨-Deployment-ä¸­ä½¿ç”¨ç§æœ‰æ˜ åƒ" class="headerlink" title="2. åœ¨ Deployment ä¸­ä½¿ç”¨ç§æœ‰æ˜ åƒ"></a>2. åœ¨ Deployment ä¸­ä½¿ç”¨ç§æœ‰æ˜ åƒ</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">k8s-deployment</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">k8s-namespace</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">1</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">k8s-app</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">k8s-app</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">k8s-app</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">&lt;username&gt;/&lt;repo-name&gt;:latest</span>  <span class="comment"># ç§æœ‰å€‰åº«æ˜ åƒ</span></span><br><span class="line">        <span class="attr">imagePullPolicy:</span> <span class="string">Always</span></span><br><span class="line">        <span class="attr">ports:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">8080</span></span><br><span class="line">      <span class="attr">imagePullSecrets:</span>  <span class="comment"># æŒ‡å®šç”¨æ–¼èº«ä»½é©—è­‰çš„ Secret</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">regcred</span></span><br></pre></td></tr></table></figure><h4 id="3-ä½¿ç”¨-ServiceAccount-è‡ªå‹•å¥—ç”¨-Secret"><a href="#3-ä½¿ç”¨-ServiceAccount-è‡ªå‹•å¥—ç”¨-Secret" class="headerlink" title="3. ä½¿ç”¨ ServiceAccount è‡ªå‹•å¥—ç”¨ Secret"></a>3. ä½¿ç”¨ ServiceAccount è‡ªå‹•å¥—ç”¨ Secret</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ServiceAccount</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">k8s-sa</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">k8s-namespace</span></span><br><span class="line"><span class="attr">imagePullSecrets:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">regcred</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">k8s-deployment</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">k8s-namespace</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">1</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">k8s-app</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">k8s-app</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">serviceAccountName:</span> <span class="string">k8s-sa</span>  <span class="comment"># ä½¿ç”¨ ServiceAccount</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">k8s-app</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">&lt;username&gt;/&lt;repo-name&gt;:latest</span>  <span class="comment"># ç§æœ‰å€‰åº«æ˜ åƒ</span></span><br><span class="line">        <span class="attr">imagePullPolicy:</span> <span class="string">Always</span></span><br><span class="line">        <span class="attr">ports:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">8080</span></span><br></pre></td></tr></table></figure><h3 id="ä¸åŒç§æœ‰å€‰åº«çš„è¨­å®š"><a href="#ä¸åŒç§æœ‰å€‰åº«çš„è¨­å®š" class="headerlink" title="ä¸åŒç§æœ‰å€‰åº«çš„è¨­å®š"></a>ä¸åŒç§æœ‰å€‰åº«çš„è¨­å®š</h3><h4 id="AWS-ECR"><a href="#AWS-ECR" class="headerlink" title="AWS ECR"></a>AWS ECR</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">kubectl create secret docker-registry ecr-secret \</span><br><span class="line">  --docker-server=&lt;account-id&gt;.dkr.ecr.&lt;region&gt;.amazonaws.com \</span><br><span class="line">  --docker-username=AWS \</span><br><span class="line">  --docker-password=$(aws ecr get-login-password) \</span><br><span class="line">  --namespace=&lt;namespace&gt;</span><br></pre></td></tr></table></figure><h4 id="Azure-ACR"><a href="#Azure-ACR" class="headerlink" title="Azure ACR"></a>Azure ACR</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">kubectl create secret docker-registry acr-secret \</span><br><span class="line">  --docker-server=&lt;registry-name&gt;.azurecr.io \</span><br><span class="line">  --docker-username=&lt;username&gt; \</span><br><span class="line">  --docker-password=&lt;password&gt; \</span><br><span class="line">  --namespace=&lt;namespace&gt;</span><br></pre></td></tr></table></figure><h4 id="Google-GCR"><a href="#Google-GCR" class="headerlink" title="Google GCR"></a>Google GCR</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">kubectl create secret docker-registry gcr-secret \</span><br><span class="line">  --docker-server=gcr.io \</span><br><span class="line">  --docker-username=_json_key \</span><br><span class="line">  --docker-password=<span class="string">&quot;<span class="subst">$(cat key.json)</span>&quot;</span> \</span><br><span class="line">  --namespace=&lt;namespace&gt;</span><br></pre></td></tr></table></figure><h2 id="å¸¸ç”¨ç®¡ç†æŒ‡ä»¤"><a href="#å¸¸ç”¨ç®¡ç†æŒ‡ä»¤" class="headerlink" title="å¸¸ç”¨ç®¡ç†æŒ‡ä»¤"></a>å¸¸ç”¨ç®¡ç†æŒ‡ä»¤</h2><h3 id="æŸ¥çœ‹æ˜ åƒæ‹‰å–ç‹€æ…‹"><a href="#æŸ¥çœ‹æ˜ åƒæ‹‰å–ç‹€æ…‹" class="headerlink" title="æŸ¥çœ‹æ˜ åƒæ‹‰å–ç‹€æ…‹"></a>æŸ¥çœ‹æ˜ åƒæ‹‰å–ç‹€æ…‹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹ Pod ç‹€æ…‹</span></span><br><span class="line">kubectl get pods -n &lt;namespace&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ Pod è©³ç´°è³‡è¨Šï¼ˆåŒ…å«æ˜ åƒæ‹‰å–äº‹ä»¶ï¼‰</span></span><br><span class="line">kubectl describe pod &lt;pod-name&gt; -n &lt;namespace&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹æ˜ åƒæ‹‰å–ç›¸é—œçš„äº‹ä»¶</span></span><br><span class="line">kubectl get events --field-selector reason=Pulling -n &lt;namespace&gt;</span><br></pre></td></tr></table></figure><h3 id="ç®¡ç†-Image-Pull-Secrets"><a href="#ç®¡ç†-Image-Pull-Secrets" class="headerlink" title="ç®¡ç† Image Pull Secrets"></a>ç®¡ç† Image Pull Secrets</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹ Secret åˆ—è¡¨</span></span><br><span class="line">kubectl get secrets -n &lt;namespace&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ Secret è©³ç´°è³‡è¨Š</span></span><br><span class="line">kubectl describe secret &lt;secret-name&gt; -n &lt;namespace&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆªé™¤ Secret</span></span><br><span class="line">kubectl delete secret &lt;secret-name&gt; -n &lt;namespace&gt;</span><br></pre></td></tr></table></figure><h3 id="æ‰‹å‹•æ‹‰å–æ˜ åƒé€²è¡Œæ¸¬è©¦"><a href="#æ‰‹å‹•æ‹‰å–æ˜ åƒé€²è¡Œæ¸¬è©¦" class="headerlink" title="æ‰‹å‹•æ‹‰å–æ˜ åƒé€²è¡Œæ¸¬è©¦"></a>æ‰‹å‹•æ‹‰å–æ˜ åƒé€²è¡Œæ¸¬è©¦</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨ç¯€é»ä¸Šæ‰‹å‹•æ‹‰å–æ˜ åƒ</span></span><br><span class="line">docker pull &lt;image-name&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æª¢æŸ¥æ˜ åƒæ˜¯å¦å­˜åœ¨</span></span><br><span class="line">docker images | grep &lt;image-name&gt;</span><br></pre></td></tr></table></figure><h2 id="ç–‘é›£æ’è§£"><a href="#ç–‘é›£æ’è§£" class="headerlink" title="ç–‘é›£æ’è§£"></a>ç–‘é›£æ’è§£</h2><h3 id="å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ"><a href="#å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ" class="headerlink" title="å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ"></a>å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ</h3><h4 id="1-ImagePullBackOff-éŒ¯èª¤"><a href="#1-ImagePullBackOff-éŒ¯èª¤" class="headerlink" title="1. ImagePullBackOff éŒ¯èª¤"></a>1. ImagePullBackOff éŒ¯èª¤</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æª¢æŸ¥ Pod äº‹ä»¶</span></span><br><span class="line">kubectl describe pod &lt;pod-name&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¸¸è¦‹åŸå› ï¼š</span></span><br><span class="line"><span class="comment"># - æ˜ åƒåç¨±éŒ¯èª¤</span></span><br><span class="line"><span class="comment"># - ç¶²è·¯é€£ç·šå•é¡Œ</span></span><br><span class="line"><span class="comment"># - èº«ä»½é©—è­‰å¤±æ•—</span></span><br><span class="line"><span class="comment"># - æ˜ åƒä¸å­˜åœ¨</span></span><br></pre></td></tr></table></figure><h4 id="2-æœ¬åœ°æ˜ åƒç„¡æ³•æ‹‰å–"><a href="#2-æœ¬åœ°æ˜ åƒç„¡æ³•æ‹‰å–" class="headerlink" title="2. æœ¬åœ°æ˜ åƒç„¡æ³•æ‹‰å–"></a>2. æœ¬åœ°æ˜ åƒç„¡æ³•æ‹‰å–</h4><ul><li>ç¢ºèª <code>imagePullPolicy</code> è¨­å®šç‚º <code>Never</code> æˆ– <code>IfNotPresent</code></li><li>æª¢æŸ¥æ˜ åƒæ˜¯å¦å­˜åœ¨æ–¼æ­£ç¢ºçš„ç¯€é»ä¸Š</li><li>åœ¨ Minikube ä¸­ç¢ºèª Docker ç’°å¢ƒè¨­å®šæ­£ç¢º</li><li><strong>Docker ç’°å¢ƒå•é¡Œ</strong>ï¼šç¢ºèªæ˜¯å¦åœ¨æ­£ç¢ºçš„ Docker ç’°å¢ƒä¸­<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æª¢æŸ¥ç•¶å‰ Docker ç’°å¢ƒï¼ˆæ›´æº–ç¢ºçš„æ–¹æ³•ï¼‰</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$DOCKER_HOST</span></span><br><span class="line"><span class="comment"># æœ¬åœ°ç’°å¢ƒï¼šé€šå¸¸ç‚ºç©ºæˆ– unix:///var/run/docker.sock</span></span><br><span class="line"><span class="comment"># Minikube ç’°å¢ƒï¼štcp://192.168.49.2:2376 æˆ–é¡ä¼¼ IP</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆ–è€…æª¢æŸ¥ç’°å¢ƒè®Šæ•¸</span></span><br><span class="line"><span class="built_in">env</span> | grep DOCKER</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¦‚æœåœ¨ Minikube ç’°å¢ƒä¸­æ‰¾ä¸åˆ°æ˜ åƒï¼Œåˆ‡æ›åˆ°æ­£ç¢ºç’°å¢ƒ</span></span><br><span class="line"><span class="built_in">eval</span> $(minikube docker-env)  <span class="comment"># åˆ‡æ›åˆ° Minikube</span></span><br><span class="line">docker images  <span class="comment"># ç¢ºèªæ˜ åƒå­˜åœ¨</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¦‚æœéœ€è¦åˆ‡å›æœ¬åœ°ç’°å¢ƒ</span></span><br><span class="line"><span class="built_in">eval</span> $(minikube docker-env -u)</span><br></pre></td></tr></table></figure></li></ul><h4 id="3-ç§æœ‰å€‰åº«èªè­‰å¤±æ•—"><a href="#3-ç§æœ‰å€‰åº«èªè­‰å¤±æ•—" class="headerlink" title="3. ç§æœ‰å€‰åº«èªè­‰å¤±æ•—"></a>3. ç§æœ‰å€‰åº«èªè­‰å¤±æ•—</h4><ul><li>é©—è­‰ Secret ä¸­çš„æ†‘è­‰æ˜¯å¦æ­£ç¢º</li><li>æª¢æŸ¥ Secret æ˜¯å¦åœ¨æ­£ç¢ºçš„å‘½åç©ºé–“ä¸­</li><li>ç¢ºèªå€‰åº«ä¼ºæœå™¨åœ°å€æ ¼å¼æ­£ç¢º</li></ul><h4 id="4-æ˜ åƒæ‹‰å–é€Ÿåº¦ç·©æ…¢"><a href="#4-æ˜ åƒæ‹‰å–é€Ÿåº¦ç·©æ…¢" class="headerlink" title="4. æ˜ åƒæ‹‰å–é€Ÿåº¦ç·©æ…¢"></a>4. æ˜ åƒæ‹‰å–é€Ÿåº¦ç·©æ…¢</h4><ul><li>è€ƒæ…®ä½¿ç”¨æ˜ åƒå¿«å–æˆ–æœ¬åœ°å€‰åº«</li><li>æª¢æŸ¥ç¶²è·¯é€£ç·šå“è³ª</li><li>ä½¿ç”¨è¼ƒå°çš„æ˜ åƒæˆ–å¤šéšæ®µæ§‹å»º</li></ul><h2 id="æœ€ä½³å¯¦å‹™å»ºè­°"><a href="#æœ€ä½³å¯¦å‹™å»ºè­°" class="headerlink" title="æœ€ä½³å¯¦å‹™å»ºè­°"></a>æœ€ä½³å¯¦å‹™å»ºè­°</h2><h3 id="æ˜ åƒç®¡ç†"><a href="#æ˜ åƒç®¡ç†" class="headerlink" title="æ˜ åƒç®¡ç†"></a>æ˜ åƒç®¡ç†</h3><ol><li><strong>ä½¿ç”¨å…·é«”æ¨™ç±¤</strong>ï¼šé¿å…ä½¿ç”¨ <code>latest</code> æ¨™ç±¤</li><li><strong>æ˜ åƒæƒæ</strong>ï¼šå®šæœŸæƒææ˜ åƒçš„å®‰å…¨æ¼æ´</li><li><strong>æ˜ åƒåˆ†å±¤</strong>ï¼šå„ªåŒ– Dockerfile ä»¥æ¸›å°‘æ˜ åƒå¤§å°</li><li><strong>å®šæœŸæ›´æ–°</strong>ï¼šä¿æŒæ˜ åƒç‚ºæœ€æ–°ç‰ˆæœ¬</li></ol><h3 id="å®‰å…¨æ€§"><a href="#å®‰å…¨æ€§" class="headerlink" title="å®‰å…¨æ€§"></a>å®‰å…¨æ€§</h3><ol><li><strong>æœ€å°æ¬Šé™</strong>ï¼šä½¿ç”¨æœ€å°æ¬Šé™çš„ ServiceAccount</li><li><strong>Secret ç®¡ç†</strong>ï¼šå®šæœŸè¼ªæ› Image Pull Secret</li><li><strong>ç¶²è·¯éš”é›¢</strong>ï¼šåœ¨é©ç•¶çš„æƒ…æ³ä¸‹ä½¿ç”¨ç¶²è·¯ç­–ç•¥</li><li><strong>æ˜ åƒç°½ç« </strong>ï¼šè€ƒæ…®ä½¿ç”¨æ˜ åƒç°½ç« é©—è­‰</li></ol><h3 id="æ•ˆèƒ½å„ªåŒ–"><a href="#æ•ˆèƒ½å„ªåŒ–" class="headerlink" title="æ•ˆèƒ½å„ªåŒ–"></a>æ•ˆèƒ½å„ªåŒ–</h3><ol><li><strong>æœ¬åœ°å¿«å–</strong>ï¼šåœ¨é–‹ç™¼ç’°å¢ƒä¸­ä½¿ç”¨æœ¬åœ°æ˜ åƒ</li><li><strong>ä¸¦è¡Œæ‹‰å–</strong>ï¼šåˆç†è¨­å®š Pod çš„ä¸¦è¡Œå•Ÿå‹•æ•¸é‡</li><li><strong>æ˜ åƒé æ‹‰å–</strong>ï¼šåœ¨ç¯€é»ä¸Šé å…ˆæ‹‰å–å¸¸ç”¨æ˜ åƒ</li><li><strong>è³‡æºé™åˆ¶</strong>ï¼šè¨­å®šé©ç•¶çš„è³‡æºé™åˆ¶é¿å…è³‡æºç«¶çˆ­</li></ol><p>é€éäº†è§£å’Œæ­£ç¢ºä½¿ç”¨é€™ä¸‰ç¨®æ˜ åƒæ‹‰å–æ–¹å¼ï¼Œæ‚¨å¯ä»¥åœ¨ä¸åŒçš„ç’°å¢ƒå’Œå ´æ™¯ä¸­é«˜æ•ˆã€å®‰å…¨åœ°ç®¡ç† Kubernetes æ‡‰ç”¨ç¨‹å¼çš„å®¹å™¨æ˜ åƒã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Kubernetes-Image-æ‹‰å–æŒ‡å—&quot;&gt;&lt;a href=&quot;#Kubernetes-Image-æ‹‰å–æŒ‡å—&quot; class=&quot;headerlink&quot; title=&quot;Kubernetes Image æ‹‰å–æŒ‡å—&quot;&gt;&lt;/a&gt;Kubernetes Image æ‹‰å–æŒ‡å—&lt;/h1&gt;&lt;h2 id=&quot;ä»€éº¼æ˜¯å®¹å™¨æ˜ åƒæ‹‰å–ï¼Ÿ&quot;&gt;&lt;a href=&quot;#ä»€éº¼æ˜¯å®¹å™¨æ˜ åƒæ‹‰å–ï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;ä»€éº¼æ˜¯å®¹å™¨æ˜ åƒæ‹‰å–ï¼Ÿ&quot;&gt;&lt;/a&gt;ä»€éº¼æ˜¯å®¹å™¨æ˜ åƒæ‹‰å–ï¼Ÿ&lt;/h2&gt;&lt;p&gt;åœ¨ Kubernetes ä¸­ï¼ŒPod éœ€è¦ä½¿ç”¨å®¹å™¨æ˜ åƒä¾†å•Ÿå‹•å®¹å™¨ã€‚æ ¹æ“šæ˜ åƒçš„ä¾†æºå’Œå­˜å–æ–¹å¼ä¸åŒï¼ŒKubernetes æä¾›äº†å¤šç¨®æ˜ åƒæ‹‰å–ç­–ç•¥ã€‚äº†è§£é€™äº›ä¸åŒçš„æ‹‰å–æ–¹å¼å°æ–¼æœ‰æ•ˆç®¡ç†æ‡‰ç”¨ç¨‹å¼éƒ¨ç½²è‡³é—œé‡è¦ã€‚&lt;/p&gt;
&lt;h3 id=&quot;æ˜ åƒæ‹‰å–çš„ä¸»è¦å ´æ™¯ï¼š&quot;&gt;&lt;a href=&quot;#æ˜ åƒæ‹‰å–çš„ä¸»è¦å ´æ™¯ï¼š&quot; class=&quot;headerlink&quot; title=&quot;æ˜ åƒæ‹‰å–çš„ä¸»è¦å ´æ™¯ï¼š&quot;&gt;&lt;/a&gt;æ˜ åƒæ‹‰å–çš„ä¸»è¦å ´æ™¯ï¼š&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æœ¬åœ°æ˜ åƒ&lt;/strong&gt;ï¼šä½¿ç”¨æœ¬åœ°æ§‹å»ºä¸¦è¼‰å…¥åˆ°ç¯€é»çš„æ˜ åƒ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…¬é–‹å€‰åº«&lt;/strong&gt;ï¼šå¾ Docker Hub ç­‰å…¬é–‹å€‰åº«æ‹‰å–æ˜ åƒ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç§æœ‰å€‰åº«&lt;/strong&gt;ï¼šå¾éœ€è¦èº«ä»½é©—è­‰çš„ç§æœ‰å€‰åº«æ‹‰å–æ˜ åƒ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼æ¥­å€‰åº«&lt;/strong&gt;ï¼šå¾çµ„ç¹”å…§éƒ¨çš„ç§æœ‰æ˜ åƒå€‰åº«æ‹‰å–æ˜ åƒ&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;ç‚ºä»€éº¼éœ€è¦äº†è§£ä¸åŒçš„æ‹‰å–æ–¹å¼ï¼Ÿ&quot;&gt;&lt;a href=&quot;#ç‚ºä»€éº¼éœ€è¦äº†è§£ä¸åŒçš„æ‹‰å–æ–¹å¼ï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;ç‚ºä»€éº¼éœ€è¦äº†è§£ä¸åŒçš„æ‹‰å–æ–¹å¼ï¼Ÿ&quot;&gt;&lt;/a&gt;ç‚ºä»€éº¼éœ€è¦äº†è§£ä¸åŒçš„æ‹‰å–æ–¹å¼ï¼Ÿ&lt;/h3&gt;&lt;p&gt;æ ¹æ“šä¸åŒçš„ä½¿ç”¨å ´æ™¯ï¼Œé¸æ“‡åˆé©çš„æ˜ åƒæ‹‰å–æ–¹å¼å¯ä»¥ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æå‡æ•ˆç‡&lt;/strong&gt;ï¼šæ¸›å°‘ä¸å¿…è¦çš„ç¶²è·¯å‚³è¼¸å’Œä¸‹è¼‰æ™‚é–“&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¢å¼·å®‰å…¨æ€§&lt;/strong&gt;ï¼šä¿è­·ç§æœ‰æ˜ åƒä¸è¢«æœªæˆæ¬Šå­˜å–&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é™ä½æˆæœ¬&lt;/strong&gt;ï¼šé¿å…é‡è¤‡æ‹‰å–ç›¸åŒçš„æ˜ åƒ&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
    
      <category term="kubernetes" scheme="https://pcion123.github.io/categories/kubernetes/"/>
    
    
      <category term="kubernetes" scheme="https://pcion123.github.io/tags/kubernetes/"/>
    
  </entry>
  
  <entry>
    <title>Docker Hub PAT ç”³è«‹æŒ‡å—</title>
    <link href="https://pcion123.github.io/2025/10/11/docker-hub-pat-guide/"/>
    <id>https://pcion123.github.io/2025/10/11/docker-hub-pat-guide/</id>
    <published>2025-10-11T15:00:52.000Z</published>
    <updated>2025-10-11T15:54:12.573Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Docker-Hub-PAT-ç”³è«‹æŒ‡å—"><a href="#Docker-Hub-PAT-ç”³è«‹æŒ‡å—" class="headerlink" title="Docker Hub PAT ç”³è«‹æŒ‡å—"></a>Docker Hub PAT ç”³è«‹æŒ‡å—</h1><h2 id="ä»€éº¼æ˜¯-Docker-Hub-PATï¼Ÿ"><a href="#ä»€éº¼æ˜¯-Docker-Hub-PATï¼Ÿ" class="headerlink" title="ä»€éº¼æ˜¯ Docker Hub PATï¼Ÿ"></a>ä»€éº¼æ˜¯ Docker Hub PATï¼Ÿ</h2><p>Docker Hub Personal Access Token (PAT) æ˜¯ Docker Hub æä¾›çš„èº«ä»½é©—è­‰æ©Ÿåˆ¶ï¼Œç”¨æ–¼æ›¿ä»£å‚³çµ±çš„ä½¿ç”¨è€…åç¨±å’Œå¯†ç¢¼çµ„åˆã€‚PAT æä¾›äº†æ›´å®‰å…¨çš„æ–¹å¼ä¾†å­˜å– Docker Hub çš„ API å’Œæ˜ åƒå€‰åº«ã€‚</p><h3 id="PAT-çš„ä¸»è¦å„ªå‹¢ï¼š"><a href="#PAT-çš„ä¸»è¦å„ªå‹¢ï¼š" class="headerlink" title="PAT çš„ä¸»è¦å„ªå‹¢ï¼š"></a>PAT çš„ä¸»è¦å„ªå‹¢ï¼š</h3><ul><li><strong>å®‰å…¨æ€§</strong>ï¼šé¿å…åœ¨è…³æœ¬æˆ–é…ç½®ä¸­ä½¿ç”¨æ˜æ–‡å¯†ç¢¼</li><li><strong>æ¬Šé™æ§åˆ¶</strong>ï¼šå¯ä»¥è¨­å®šç‰¹å®šçš„æ¬Šé™ç¯„åœ</li><li><strong>æ˜“æ–¼ç®¡ç†</strong>ï¼šå¯ä»¥ç¨ç«‹æ’¤éŠ·å’Œæ›´æ–°ï¼Œä¸å½±éŸ¿å¸³æˆ¶å¯†ç¢¼</li><li><strong>å¯©è¨ˆè¿½è¹¤</strong>ï¼šæä¾›æ›´å¥½çš„å­˜å–è¨˜éŒ„å’Œç›£æ§</li></ul><h3 id="ç‚ºä»€éº¼éœ€è¦ä½¿ç”¨-PATï¼Ÿ"><a href="#ç‚ºä»€éº¼éœ€è¦ä½¿ç”¨-PATï¼Ÿ" class="headerlink" title="ç‚ºä»€éº¼éœ€è¦ä½¿ç”¨ PATï¼Ÿ"></a>ç‚ºä»€éº¼éœ€è¦ä½¿ç”¨ PATï¼Ÿ</h3><p>åœ¨ä»¥ä¸‹æƒ…æ³ä¸‹ï¼Œå»ºè­°ä½¿ç”¨ PAT æ›¿ä»£å¯†ç¢¼ï¼š</p><ol><li><strong>CI&#x2F;CD æµç¨‹</strong>ï¼šåœ¨è‡ªå‹•åŒ–éƒ¨ç½²ä¸­é€²è¡Œæ˜ åƒæ¨é€å’Œæ‹‰å–</li><li><strong>æœ¬åœ°é–‹ç™¼</strong>ï¼šåœ¨ Minikube æˆ–å…¶ä»–æœ¬åœ°ç’°å¢ƒä¸­æ‹‰å–ç§æœ‰æ˜ åƒ</li><li><strong>è…³æœ¬è‡ªå‹•åŒ–</strong>ï¼šéœ€è¦ç¨‹å¼åŒ–å­˜å– Docker Hub API</li><li><strong>ä¼æ¥­ç’°å¢ƒ</strong>ï¼šç¬¦åˆä¼æ¥­å®‰å…¨æ”¿ç­–å’Œæœ€ä½³å¯¦å‹™</li></ol><span id="more"></span><hr><h2 id="PAT-ç”³è«‹æ­¥é©Ÿ"><a href="#PAT-ç”³è«‹æ­¥é©Ÿ" class="headerlink" title="PAT ç”³è«‹æ­¥é©Ÿ"></a>PAT ç”³è«‹æ­¥é©Ÿ</h2><h3 id="æ­¥é©Ÿ-1ï¼šç™»å…¥-Docker-Hub"><a href="#æ­¥é©Ÿ-1ï¼šç™»å…¥-Docker-Hub" class="headerlink" title="æ­¥é©Ÿ 1ï¼šç™»å…¥ Docker Hub"></a>æ­¥é©Ÿ 1ï¼šç™»å…¥ Docker Hub</h3><ol><li>é–‹å•Ÿç€è¦½å™¨ï¼Œå‰å¾€ <a href="https://hub.docker.com/">Docker Hub</a></li><li>é»é¸å³ä¸Šè§’çš„ <strong>Sign In</strong> æŒ‰éˆ•</li><li>è¼¸å…¥æ‚¨çš„ Docker Hub å¸³è™Ÿå’Œå¯†ç¢¼é€²è¡Œç™»å…¥</li></ol><h3 id="æ­¥é©Ÿ-2ï¼šé€²å…¥å¸³æˆ¶è¨­å®š"><a href="#æ­¥é©Ÿ-2ï¼šé€²å…¥å¸³æˆ¶è¨­å®š" class="headerlink" title="æ­¥é©Ÿ 2ï¼šé€²å…¥å¸³æˆ¶è¨­å®š"></a>æ­¥é©Ÿ 2ï¼šé€²å…¥å¸³æˆ¶è¨­å®š</h3><ol><li>ç™»å…¥å¾Œï¼Œé»é¸å³ä¸Šè§’çš„<strong>å¸³æˆ¶é ­åƒ</strong></li><li>å¾ä¸‹æ‹‰é¸å–®ä¸­é¸æ“‡ <strong>Account Settings</strong></li></ol><h3 id="æ­¥é©Ÿ-3ï¼šé€²å…¥-Personal-Access-Tokens"><a href="#æ­¥é©Ÿ-3ï¼šé€²å…¥-Personal-Access-Tokens" class="headerlink" title="æ­¥é©Ÿ 3ï¼šé€²å…¥ Personal Access Tokens"></a>æ­¥é©Ÿ 3ï¼šé€²å…¥ Personal Access Tokens</h3><ol><li>åœ¨å·¦å´å°èˆªé¸å–®ä¸­é»é¸ <strong>Settings</strong></li><li>å±•é–‹ Settings é¸å–®ï¼Œé¸æ“‡ <strong>Personal access tokens</strong></li><li>æ‚¨æœƒçœ‹åˆ° <strong>Personal access tokens</strong> é é¢ï¼Œé¡¯ç¤ºç¾æœ‰çš„æ¬Šæ–åˆ—è¡¨</li></ol><img src="/2025/10/11/docker-hub-pat-guide/docker_pat_overview.png" class=""><h3 id="æ­¥é©Ÿ-4ï¼šå»ºç«‹æ–°çš„å­˜å–æ¬Šæ–"><a href="#æ­¥é©Ÿ-4ï¼šå»ºç«‹æ–°çš„å­˜å–æ¬Šæ–" class="headerlink" title="æ­¥é©Ÿ 4ï¼šå»ºç«‹æ–°çš„å­˜å–æ¬Šæ–"></a>æ­¥é©Ÿ 4ï¼šå»ºç«‹æ–°çš„å­˜å–æ¬Šæ–</h3><ol><li>é»é¸å³ä¸Šè§’çš„ <strong>Generate new token</strong> æŒ‰éˆ•</li><li>é€²å…¥ <strong>Create access token</strong> é é¢</li></ol><img src="/2025/10/11/docker-hub-pat-guide/docker_pat_create.png" class=""><h3 id="æ­¥é©Ÿ-5ï¼šé…ç½®æ¬Šæ–è¨­å®š"><a href="#æ­¥é©Ÿ-5ï¼šé…ç½®æ¬Šæ–è¨­å®š" class="headerlink" title="æ­¥é©Ÿ 5ï¼šé…ç½®æ¬Šæ–è¨­å®š"></a>æ­¥é©Ÿ 5ï¼šé…ç½®æ¬Šæ–è¨­å®š</h3><ol><li><p><strong>Access token description</strong>ï¼šè¼¸å…¥æœ‰æ„ç¾©çš„æè¿°åç¨±</p><ul><li>ç¯„ä¾‹ï¼š<code>minikube-pull</code>ã€<code>ci-cd-pipeline</code>ã€<code>local-development</code></li></ul></li><li><p><strong>Expiration date</strong>ï¼šé¸æ“‡æ¬Šæ–çš„éæœŸæ™‚é–“</p><ul><li><strong>None</strong>ï¼šæ°¸ä¸éæœŸï¼ˆä¸å»ºè­°ç”¨æ–¼ç”Ÿç”¢ç’°å¢ƒï¼‰</li><li><strong>30 days</strong>ï¼š30 å¤©å¾ŒéæœŸ</li><li><strong>90 days</strong>ï¼š90 å¤©å¾ŒéæœŸ</li><li><strong>Custom</strong>ï¼šè‡ªè¨‚éæœŸæ—¥æœŸ</li></ul></li><li><p><strong>Access permissions</strong>ï¼šé¸æ“‡é©ç•¶çš„æ¬Šé™ç´šåˆ¥</p><ul><li><strong>Public Repo Read-only</strong>ï¼šåªèƒ½è®€å–å…¬é–‹å€‰åº«ï¼ˆé è¨­é¸é …ï¼Œæ¨è–¦ç”¨æ–¼æ‹‰å–ï¼‰</li><li><strong>Read-only</strong>ï¼šåªèƒ½è®€å–æ‰€æœ‰å¯å­˜å–çš„å€‰åº«</li><li><strong>Read &amp; Write</strong>ï¼šå¯ä»¥è®€å–å’Œå¯«å…¥å€‰åº«</li><li><strong>Read, Write, Delete</strong>ï¼šå®Œæ•´æ¬Šé™ï¼ˆè¬¹æ…ä½¿ç”¨ï¼‰</li></ul></li><li><p>é»é¸ <strong>Generate</strong> æŒ‰éˆ•å»ºç«‹æ¬Šæ–</p></li></ol><h3 id="æ­¥é©Ÿ-6ï¼šè¤‡è£½å’Œä¿å­˜æ¬Šæ–"><a href="#æ­¥é©Ÿ-6ï¼šè¤‡è£½å’Œä¿å­˜æ¬Šæ–" class="headerlink" title="æ­¥é©Ÿ 6ï¼šè¤‡è£½å’Œä¿å­˜æ¬Šæ–"></a>æ­¥é©Ÿ 6ï¼šè¤‡è£½å’Œä¿å­˜æ¬Šæ–</h3><p>æ¬Šæ–å»ºç«‹æˆåŠŸå¾Œï¼Œæ‚¨æœƒçœ‹åˆ° <strong>Copy access token</strong> é é¢ï¼š</p><p>âš ï¸ <strong>é‡è¦æé†’</strong>ï¼šå€‹äººå­˜å–æ¬Šæ–åªæœƒé¡¯ç¤ºä¸€æ¬¡ï¼Œç„¡æ³•å„²å­˜ä¸”ä¹‹å¾Œç„¡æ³•å†æª¢ç´¢</p><ol><li><p><strong>æ¬Šæ–è³‡è¨Šç¢ºèª</strong>ï¼š</p><ul><li><strong>Access token description</strong>ï¼šæ‚¨è¨­å®šçš„æè¿°åç¨±ï¼ˆå¦‚ï¼štestï¼‰</li><li><strong>Expires on</strong>ï¼šéæœŸæ™‚é–“ï¼ˆå¦‚ï¼šNever è¡¨ç¤ºæ°¸ä¸éæœŸï¼‰</li><li><strong>Access permissions</strong>ï¼šæ¬Šé™ç´šåˆ¥ï¼ˆå¦‚ï¼šPublic Repo Read-onlyï¼‰</li></ul></li><li><p><strong>è¤‡è£½æ¬Šæ–</strong>ï¼š</p><ul><li>åœ¨æ­¥é©Ÿ 1 ä¸­ï¼Œè¤‡è£½ Docker CLI ç™»å…¥æŒ‡ä»¤ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker login -u &lt;username&gt;</span><br></pre></td></tr></table></figure></li><li>é»é¸å³å´çš„ <strong>Copy</strong> æŒ‰éˆ•è¤‡è£½æŒ‡ä»¤</li></ul></li><li><p><strong>è¤‡è£½å€‹äººå­˜å–æ¬Šæ–</strong>ï¼š</p><ul><li>åœ¨æ­¥é©Ÿ 2 ä¸­ï¼Œé¡¯ç¤ºå®Œæ•´çš„å€‹äººå­˜å–æ¬Šæ–å­—ä¸²</li><li>æ¬Šæ–æ ¼å¼é¡ä¼¼ï¼š<code>dckr_pat_abcdefghijk00000</code></li><li>é»é¸å³å´çš„ <strong>Copy</strong> æŒ‰éˆ•è¤‡è£½æ¬Šæ–</li></ul></li><li><p><strong>å®‰å…¨ä¿å­˜</strong>ï¼š</p><ul><li>ç«‹å³å°‡æ¬Šæ–ä¿å­˜åœ¨å®‰å…¨çš„ä½ç½®ï¼ˆå¦‚å¯†ç¢¼ç®¡ç†å™¨ï¼‰</li><li>è¨˜éŒ„æ¬Šæ–çš„ç”¨é€”å’Œå»ºç«‹æ—¥æœŸ</li></ul></li><li><p><strong>å®Œæˆç”³è«‹</strong>ï¼š</p><ul><li>é»é¸ <strong>Back to access tokens</strong> æŒ‰éˆ•è¿”å›æ¬Šæ–ç®¡ç†é é¢</li></ul></li></ol><img src="/2025/10/11/docker-hub-pat-guide/docker_pat_copy.png" class=""><h2 id="ä½¿ç”¨èªªæ˜"><a href="#ä½¿ç”¨èªªæ˜" class="headerlink" title="ä½¿ç”¨èªªæ˜"></a>ä½¿ç”¨èªªæ˜</h2><p>æ ¹æ“šé é¢æç¤ºï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æ­¤æ¬Šæ–ä½œç‚ºå¯†ç¢¼ï¼Œé€é Docker CLI å®¢æˆ¶ç«¯ç™»å…¥ï¼š</p><ol><li><p><strong>åŸ·è¡Œç™»å…¥æŒ‡ä»¤</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker login -u &lt;username&gt;</span><br></pre></td></tr></table></figure></li><li><p><strong>åœ¨å¯†ç¢¼æç¤ºæ™‚è¼¸å…¥å€‹äººå­˜å–æ¬Šæ–</strong>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Password: &lt;password&gt;</span><br></pre></td></tr></table></figure></li></ol><h2 id="æ¬Šæ–ç®¡ç†ä»‹é¢èªªæ˜"><a href="#æ¬Šæ–ç®¡ç†ä»‹é¢èªªæ˜" class="headerlink" title="æ¬Šæ–ç®¡ç†ä»‹é¢èªªæ˜"></a>æ¬Šæ–ç®¡ç†ä»‹é¢èªªæ˜</h2><p>åœ¨ <strong>Personal access tokens</strong> é é¢ä¸­ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°ï¼š</p><ul><li><strong>Description</strong>ï¼šæ¬Šæ–çš„æè¿°åç¨±</li><li><strong>Scope</strong>ï¼šæ¬Šæ–çš„æ¬Šé™ç¯„åœ</li><li><strong>Status</strong>ï¼šæ¬Šæ–ç‹€æ…‹ï¼ˆActive&#x2F;Inactiveï¼‰</li><li><strong>Source</strong>ï¼šå»ºç«‹æ–¹å¼ï¼ˆManual&#x2F;Auto-generatedï¼‰</li><li><strong>Created</strong>ï¼šå»ºç«‹æ™‚é–“</li><li><strong>Last used</strong>ï¼šæœ€å¾Œä½¿ç”¨æ™‚é–“</li><li><strong>Expiration date</strong>ï¼šéæœŸæ—¥æœŸ</li></ul><p>æ‚¨å¯ä»¥é€éå³å´çš„æ“ä½œé¸å–®ä¾†ç®¡ç†ç¾æœ‰çš„æ¬Šæ–ï¼ŒåŒ…æ‹¬æŸ¥çœ‹è©³ç´°è³‡è¨Šã€åœç”¨æˆ–åˆªé™¤æ¬Šæ–ã€‚</p><h2 id="ä½¿ç”¨-PAT-é€²è¡Œèº«ä»½é©—è­‰"><a href="#ä½¿ç”¨-PAT-é€²è¡Œèº«ä»½é©—è­‰" class="headerlink" title="ä½¿ç”¨ PAT é€²è¡Œèº«ä»½é©—è­‰"></a>ä½¿ç”¨ PAT é€²è¡Œèº«ä»½é©—è­‰</h2><h3 id="åœ¨å‘½ä»¤åˆ—ä¸­ä½¿ç”¨"><a href="#åœ¨å‘½ä»¤åˆ—ä¸­ä½¿ç”¨" class="headerlink" title="åœ¨å‘½ä»¤åˆ—ä¸­ä½¿ç”¨"></a>åœ¨å‘½ä»¤åˆ—ä¸­ä½¿ç”¨</h3><p>æ ¹æ“š Docker Hub æä¾›çš„æŒ‡å¼•ï¼Œæ¨è–¦ä½¿ç”¨ä»¥ä¸‹æ–¹å¼ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ–¹æ³•ä¸€ï¼šä½¿ç”¨ Docker Hub æä¾›çš„ç™»å…¥æŒ‡ä»¤</span></span><br><span class="line">docker login -u &lt;username&gt;</span><br><span class="line"><span class="comment"># åœ¨å¯†ç¢¼æç¤ºæ™‚è¼¸å…¥ PATï¼Œä¾‹å¦‚ï¼š</span></span><br><span class="line"><span class="comment"># Password: dckr_pat_abcdefghijk00000</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–¹æ³•äºŒï¼šç›´æ¥åœ¨æŒ‡ä»¤ä¸­æŒ‡å®šï¼ˆè¼ƒä¸å®‰å…¨ï¼Œæœƒåœ¨å‘½ä»¤æ­·å²ä¸­ç•™ä¸‹è¨˜éŒ„ï¼‰</span></span><br><span class="line">docker login -u &lt;username&gt; -p &lt;password&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–¹æ³•ä¸‰ï¼šäº’å‹•å¼ç™»å…¥ï¼ˆæœ€å®‰å…¨ï¼‰</span></span><br><span class="line">docker login</span><br><span class="line"><span class="comment"># Username: &lt;username&gt;</span></span><br><span class="line"><span class="comment"># Password: &lt;password&gt;</span></span><br></pre></td></tr></table></figure><p><strong>æœ€ä½³å¯¦å‹™</strong>ï¼šå»ºè­°ä½¿ç”¨æ–¹æ³•ä¸€æˆ–æ–¹æ³•ä¸‰ï¼Œé¿å…åœ¨æŒ‡ä»¤è¡Œä¸­ç›´æ¥æš´éœ² PATã€‚</p><h3 id="åœ¨-Kubernetes-ä¸­ä½¿ç”¨"><a href="#åœ¨-Kubernetes-ä¸­ä½¿ç”¨" class="headerlink" title="åœ¨ Kubernetes ä¸­ä½¿ç”¨"></a>åœ¨ Kubernetes ä¸­ä½¿ç”¨</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å»ºç«‹ Docker Registry Secret</span></span><br><span class="line">kubectl create secret docker-registry regcred \</span><br><span class="line">  --docker-server=https://index.docker.io/v1/ \</span><br><span class="line">  --docker-username=&lt;username&gt; \</span><br><span class="line">  --docker-password=&lt;password&gt; \</span><br><span class="line">  --docker-email=&lt;email&gt;</span><br></pre></td></tr></table></figure><h3 id="åœ¨-CI-CD-ä¸­ä½¿ç”¨"><a href="#åœ¨-CI-CD-ä¸­ä½¿ç”¨" class="headerlink" title="åœ¨ CI&#x2F;CD ä¸­ä½¿ç”¨"></a>åœ¨ CI&#x2F;CD ä¸­ä½¿ç”¨</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># GitHub Actions ç¯„ä¾‹</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Login</span> <span class="string">to</span> <span class="string">Docker</span> <span class="string">Hub</span></span><br><span class="line">  <span class="attr">uses:</span> <span class="string">docker/login-action@v2</span></span><br><span class="line">  <span class="attr">with:</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.DOCKERHUB_USERNAME</span> <span class="string">&#125;&#125;</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.DOCKERHUB_TOKEN</span> <span class="string">&#125;&#125;</span></span><br></pre></td></tr></table></figure><h2 id="PAT-ç®¡ç†æœ€ä½³å¯¦å‹™"><a href="#PAT-ç®¡ç†æœ€ä½³å¯¦å‹™" class="headerlink" title="PAT ç®¡ç†æœ€ä½³å¯¦å‹™"></a>PAT ç®¡ç†æœ€ä½³å¯¦å‹™</h2><h3 id="æ¬Šé™è¨­å®šå»ºè­°"><a href="#æ¬Šé™è¨­å®šå»ºè­°" class="headerlink" title="æ¬Šé™è¨­å®šå»ºè­°"></a>æ¬Šé™è¨­å®šå»ºè­°</h3><ol><li><p><strong>æœ€å°æ¬Šé™åŸå‰‡</strong>ï¼šåªæˆäºˆå¿…è¦çš„æ¬Šé™</p><ul><li>åƒ…æ‹‰å–æ˜ åƒï¼šä½¿ç”¨ <strong>Public Repo Read-only</strong> æˆ– <strong>Read-only</strong></li><li>éœ€è¦æ¨é€æ˜ åƒï¼šä½¿ç”¨ <strong>Read &amp; Write</strong></li><li>é¿å…ä½¿ç”¨ <strong>Read, Write, Delete</strong> æ¬Šé™ï¼Œé™¤éçµ•å°å¿…è¦</li></ul></li><li><p><strong>å°ˆç”¨æ¬Šæ–</strong>ï¼šç‚ºä¸åŒç”¨é€”å»ºç«‹å°ˆç”¨çš„ PAT</p><ul><li>é–‹ç™¼ç’°å¢ƒï¼š<code>dev-environment-pat</code></li><li>ç”Ÿç”¢ CI&#x2F;CDï¼š<code>prod-pipeline-pat</code></li><li>å€‹äººä½¿ç”¨ï¼š<code>personal-tools-pat</code></li></ul></li><li><p><strong>éæœŸæ™‚é–“è¨­å®š</strong>ï¼š</p><ul><li>é–‹ç™¼æ¸¬è©¦ï¼šå»ºè­°è¨­å®š 30-90 å¤©</li><li>ç”Ÿç”¢ç’°å¢ƒï¼šå»ºè­°è¨­å®š 90 å¤©ä¸¦å®šæœŸè¼ªæ›</li><li>é¿å…ä½¿ç”¨ <strong>None</strong>ï¼ˆæ°¸ä¸éæœŸï¼‰é¸é …</li></ul></li></ol><h3 id="å®‰å…¨æ€§è€ƒé‡"><a href="#å®‰å…¨æ€§è€ƒé‡" class="headerlink" title="å®‰å…¨æ€§è€ƒé‡"></a>å®‰å…¨æ€§è€ƒé‡</h3><ol><li><strong>å®šæœŸè¼ªæ›</strong>ï¼šå»ºè­°æ¯ 3-6 å€‹æœˆæ›´æ–°ä¸€æ¬¡ PAT</li><li><strong>å®‰å…¨å­˜å„²</strong>ï¼š<ul><li>ä½¿ç”¨ç’°å¢ƒè®Šæ•¸è€Œéç¡¬ç·¨ç¢¼</li><li>å­˜å„²åœ¨å¯†ç¢¼ç®¡ç†å™¨ä¸­</li><li>åœ¨ CI&#x2F;CD ä¸­ä½¿ç”¨ Secrets ç®¡ç†</li></ul></li><li><strong>ç›£æ§ä½¿ç”¨</strong>ï¼šå®šæœŸæª¢æŸ¥ PAT çš„ä½¿ç”¨æƒ…æ³å’Œå­˜å–è¨˜éŒ„</li></ol><h3 id="æ¬Šæ–ç®¡ç†"><a href="#æ¬Šæ–ç®¡ç†" class="headerlink" title="æ¬Šæ–ç®¡ç†"></a>æ¬Šæ–ç®¡ç†</h3><p>åœ¨ Docker Hub çš„ <strong>Personal access tokens</strong> é é¢ä¸­ï¼Œæ‚¨å¯ä»¥ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹ç•¶å‰çš„ PAT è³‡è¨Š</span></span><br><span class="line"><span class="comment"># åŒ…å«ï¼šDescriptionã€Scopeã€Statusã€Sourceã€Createdã€Last usedã€Expiration date</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç®¡ç†ç¾æœ‰æ¬Šæ–</span></span><br><span class="line"><span class="comment"># - é»é¸æ¬Šæ–å³å´çš„ä¸‰é»é¸å–®</span></span><br><span class="line"><span class="comment"># - é¸æ“‡ &quot;View details&quot;ã€&quot;Deactivate&quot; æˆ– &quot;Delete&quot;</span></span><br><span class="line"><span class="comment"># - å»ºè­°å®šæœŸæ¸…ç†ä¸å†ä½¿ç”¨çš„æ¬Šæ–</span></span><br></pre></td></tr></table></figure><p><strong>æ¬Šæ–ç‹€æ…‹èªªæ˜ï¼š</strong></p><ul><li><strong>Active</strong>ï¼šæ¬Šæ–æ­£å¸¸å¯ç”¨</li><li><strong>Inactive</strong>ï¼šæ¬Šæ–å·²åœç”¨</li><li><strong>Manual</strong>ï¼šæ‰‹å‹•å»ºç«‹çš„æ¬Šæ–</li><li><strong>Auto-generated</strong>ï¼šç³»çµ±è‡ªå‹•ç”Ÿæˆçš„æ¬Šæ–ï¼ˆå¦‚é€é Docker Desktopï¼‰</li></ul><h2 id="ç–‘é›£æ’è§£"><a href="#ç–‘é›£æ’è§£" class="headerlink" title="ç–‘é›£æ’è§£"></a>ç–‘é›£æ’è§£</h2><h3 id="å¸¸è¦‹å•é¡Œ"><a href="#å¸¸è¦‹å•é¡Œ" class="headerlink" title="å¸¸è¦‹å•é¡Œ"></a>å¸¸è¦‹å•é¡Œ</h3><h4 id="1-æ¬Šæ–é©—è­‰å¤±æ•—"><a href="#1-æ¬Šæ–é©—è­‰å¤±æ•—" class="headerlink" title="1. æ¬Šæ–é©—è­‰å¤±æ•—"></a>1. æ¬Šæ–é©—è­‰å¤±æ•—</h4><p><strong>å¯èƒ½åŸå› ï¼š</strong></p><ul><li>æ¬Šæ–å·²éæœŸæˆ–è¢«æ’¤éŠ·</li><li>æ¬Šé™ä¸è¶³</li><li>ä½¿ç”¨è€…åç¨±éŒ¯èª¤</li></ul><p><strong>è§£æ±ºæ–¹æ³•ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æª¢æŸ¥ç™»å…¥ç‹€æ…‹</span></span><br><span class="line">docker info</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡æ–°ç™»å…¥</span></span><br><span class="line">docker <span class="built_in">logout</span></span><br><span class="line">docker login</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¢ºèªæ¬Šæ–æ¬Šé™æ˜¯å¦è¶³å¤ </span></span><br></pre></td></tr></table></figure><h4 id="2-ç„¡æ³•æ‹‰å–ç§æœ‰æ˜ åƒ"><a href="#2-ç„¡æ³•æ‹‰å–ç§æœ‰æ˜ åƒ" class="headerlink" title="2. ç„¡æ³•æ‹‰å–ç§æœ‰æ˜ åƒ"></a>2. ç„¡æ³•æ‹‰å–ç§æœ‰æ˜ åƒ</h4><p><strong>æª¢æŸ¥é …ç›®ï¼š</strong></p><ul><li>PAT æ˜¯å¦å…·æœ‰ç§æœ‰å€‰åº«è®€å–æ¬Šé™</li><li>æ˜ åƒåç¨±å’Œæ¨™ç±¤æ˜¯å¦æ­£ç¢º</li><li>ç¶²è·¯é€£ç·šæ˜¯å¦æ­£å¸¸</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ¸¬è©¦æ‹‰å–å…¬é–‹æ˜ åƒ</span></span><br><span class="line">docker pull hello-world</span><br><span class="line"></span><br><span class="line"><span class="comment"># æª¢æŸ¥æ˜ åƒå€‰åº«ç‹€æ…‹</span></span><br><span class="line">docker search &lt;your-image-name&gt;</span><br></pre></td></tr></table></figure><h4 id="3-Kubernetes-ä¸­ç„¡æ³•ä½¿ç”¨-Image-Pull-Secret"><a href="#3-Kubernetes-ä¸­ç„¡æ³•ä½¿ç”¨-Image-Pull-Secret" class="headerlink" title="3. Kubernetes ä¸­ç„¡æ³•ä½¿ç”¨ Image Pull Secret"></a>3. Kubernetes ä¸­ç„¡æ³•ä½¿ç”¨ Image Pull Secret</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æª¢æŸ¥ Secret æ˜¯å¦æ­£ç¢ºå»ºç«‹</span></span><br><span class="line">kubectl get secrets</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ Secret è©³ç´°è³‡è¨Š</span></span><br><span class="line">kubectl describe secret regcred</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¸¬è©¦ Pod ä¸­çš„æ˜ åƒæ‹‰å–</span></span><br><span class="line">kubectl run test-pod --image=&lt;your-private-image&gt; --dry-run=client -o yaml</span><br></pre></td></tr></table></figure><h2 id="æ¬Šæ–çºŒæœŸå’Œæ›´æ–°"><a href="#æ¬Šæ–çºŒæœŸå’Œæ›´æ–°" class="headerlink" title="æ¬Šæ–çºŒæœŸå’Œæ›´æ–°"></a>æ¬Šæ–çºŒæœŸå’Œæ›´æ–°</h2><h3 id="å®šæœŸæª¢æŸ¥"><a href="#å®šæœŸæª¢æŸ¥" class="headerlink" title="å®šæœŸæª¢æŸ¥"></a>å®šæœŸæª¢æŸ¥</h3><ol><li>ç™»å…¥ Docker Hub</li><li>å‰å¾€å·¦å´é¸å–®çš„ <strong>Settings</strong> &gt; <strong>Personal access tokens</strong></li><li>æª¢æŸ¥æ¬Šæ–åˆ—è¡¨ä¸­çš„ <strong>Last used</strong> æ™‚é–“å’Œ <strong>Expiration date</strong></li><li>é€éå³å´é¸å–®ç§»é™¤ä¸å†ä½¿ç”¨çš„æ¬Šæ–</li></ol><h3 id="æ›´æ–°æµç¨‹"><a href="#æ›´æ–°æµç¨‹" class="headerlink" title="æ›´æ–°æµç¨‹"></a>æ›´æ–°æµç¨‹</h3><ol><li>åœ¨ <strong>Personal access tokens</strong> é é¢é»é¸ <strong>Generate new token</strong></li><li>å»ºç«‹æ–°çš„ PAT ä¸¦è¨­å®šé©ç•¶çš„éæœŸæ™‚é–“</li><li>åœ¨æ‰€æœ‰ä½¿ç”¨èˆŠ PAT çš„åœ°æ–¹æ›´æ–°ç‚ºæ–° PAT</li><li>æ¸¬è©¦æ–° PAT æ˜¯å¦æ­£å¸¸é‹ä½œ</li><li>åœ¨èˆŠæ¬Šæ–çš„å³å´é¸å–®ä¸­é¸æ“‡ <strong>Delete</strong> ä¾†æ’¤éŠ·èˆŠçš„ PAT</li></ol><h3 id="è‡ªå‹•åŒ–æ›´æ–°æé†’"><a href="#è‡ªå‹•åŒ–æ›´æ–°æé†’" class="headerlink" title="è‡ªå‹•åŒ–æ›´æ–°æé†’"></a>è‡ªå‹•åŒ–æ›´æ–°æé†’</h3><p>å»ºè­°è¨­å®šæ—¥æ›†æé†’æˆ–ä½¿ç”¨ç›£æ§å·¥å…·ï¼Œå®šæœŸæª¢æŸ¥å’Œæ›´æ–° PATï¼Œç¢ºä¿æœå‹™çš„æŒçºŒå¯ç”¨æ€§ã€‚</p><p>é€éæ­£ç¢ºç”³è«‹å’Œç®¡ç† Docker Hub PATï¼Œæ‚¨å¯ä»¥æé«˜ Docker æ˜ åƒç®¡ç†çš„å®‰å…¨æ€§ï¼ŒåŒæ™‚ä¿æŒé–‹ç™¼å’Œéƒ¨ç½²æµç¨‹çš„é †æš¢é‹è¡Œã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Docker-Hub-PAT-ç”³è«‹æŒ‡å—&quot;&gt;&lt;a href=&quot;#Docker-Hub-PAT-ç”³è«‹æŒ‡å—&quot; class=&quot;headerlink&quot; title=&quot;Docker Hub PAT ç”³è«‹æŒ‡å—&quot;&gt;&lt;/a&gt;Docker Hub PAT ç”³è«‹æŒ‡å—&lt;/h1&gt;&lt;h2 id=&quot;ä»€éº¼æ˜¯-Docker-Hub-PATï¼Ÿ&quot;&gt;&lt;a href=&quot;#ä»€éº¼æ˜¯-Docker-Hub-PATï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;ä»€éº¼æ˜¯ Docker Hub PATï¼Ÿ&quot;&gt;&lt;/a&gt;ä»€éº¼æ˜¯ Docker Hub PATï¼Ÿ&lt;/h2&gt;&lt;p&gt;Docker Hub Personal Access Token (PAT) æ˜¯ Docker Hub æä¾›çš„èº«ä»½é©—è­‰æ©Ÿåˆ¶ï¼Œç”¨æ–¼æ›¿ä»£å‚³çµ±çš„ä½¿ç”¨è€…åç¨±å’Œå¯†ç¢¼çµ„åˆã€‚PAT æä¾›äº†æ›´å®‰å…¨çš„æ–¹å¼ä¾†å­˜å– Docker Hub çš„ API å’Œæ˜ åƒå€‰åº«ã€‚&lt;/p&gt;
&lt;h3 id=&quot;PAT-çš„ä¸»è¦å„ªå‹¢ï¼š&quot;&gt;&lt;a href=&quot;#PAT-çš„ä¸»è¦å„ªå‹¢ï¼š&quot; class=&quot;headerlink&quot; title=&quot;PAT çš„ä¸»è¦å„ªå‹¢ï¼š&quot;&gt;&lt;/a&gt;PAT çš„ä¸»è¦å„ªå‹¢ï¼š&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®‰å…¨æ€§&lt;/strong&gt;ï¼šé¿å…åœ¨è…³æœ¬æˆ–é…ç½®ä¸­ä½¿ç”¨æ˜æ–‡å¯†ç¢¼&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¬Šé™æ§åˆ¶&lt;/strong&gt;ï¼šå¯ä»¥è¨­å®šç‰¹å®šçš„æ¬Šé™ç¯„åœ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ˜“æ–¼ç®¡ç†&lt;/strong&gt;ï¼šå¯ä»¥ç¨ç«‹æ’¤éŠ·å’Œæ›´æ–°ï¼Œä¸å½±éŸ¿å¸³æˆ¶å¯†ç¢¼&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯©è¨ˆè¿½è¹¤&lt;/strong&gt;ï¼šæä¾›æ›´å¥½çš„å­˜å–è¨˜éŒ„å’Œç›£æ§&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;ç‚ºä»€éº¼éœ€è¦ä½¿ç”¨-PATï¼Ÿ&quot;&gt;&lt;a href=&quot;#ç‚ºä»€éº¼éœ€è¦ä½¿ç”¨-PATï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;ç‚ºä»€éº¼éœ€è¦ä½¿ç”¨ PATï¼Ÿ&quot;&gt;&lt;/a&gt;ç‚ºä»€éº¼éœ€è¦ä½¿ç”¨ PATï¼Ÿ&lt;/h3&gt;&lt;p&gt;åœ¨ä»¥ä¸‹æƒ…æ³ä¸‹ï¼Œå»ºè­°ä½¿ç”¨ PAT æ›¿ä»£å¯†ç¢¼ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;CI&amp;#x2F;CD æµç¨‹&lt;/strong&gt;ï¼šåœ¨è‡ªå‹•åŒ–éƒ¨ç½²ä¸­é€²è¡Œæ˜ åƒæ¨é€å’Œæ‹‰å–&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœ¬åœ°é–‹ç™¼&lt;/strong&gt;ï¼šåœ¨ Minikube æˆ–å…¶ä»–æœ¬åœ°ç’°å¢ƒä¸­æ‹‰å–ç§æœ‰æ˜ åƒ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è…³æœ¬è‡ªå‹•åŒ–&lt;/strong&gt;ï¼šéœ€è¦ç¨‹å¼åŒ–å­˜å– Docker Hub API&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼æ¥­ç’°å¢ƒ&lt;/strong&gt;ï¼šç¬¦åˆä¼æ¥­å®‰å…¨æ”¿ç­–å’Œæœ€ä½³å¯¦å‹™&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
    
      <category term="docker" scheme="https://pcion123.github.io/categories/docker/"/>
    
      <category term="docker-hub" scheme="https://pcion123.github.io/categories/docker/docker-hub/"/>
    
    
      <category term="docker" scheme="https://pcion123.github.io/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>Kubernetes Namespace ä½¿ç”¨æŒ‡å—</title>
    <link href="https://pcion123.github.io/2025/10/10/kubernetes-namespace/"/>
    <id>https://pcion123.github.io/2025/10/10/kubernetes-namespace/</id>
    <published>2025-10-10T15:48:31.000Z</published>
    <updated>2025-10-10T15:55:53.379Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Kubernetes-Namespace-ä½¿ç”¨æŒ‡å—"><a href="#Kubernetes-Namespace-ä½¿ç”¨æŒ‡å—" class="headerlink" title="Kubernetes Namespace ä½¿ç”¨æŒ‡å—"></a>Kubernetes Namespace ä½¿ç”¨æŒ‡å—</h1><h2 id="ä»€éº¼æ˜¯-Namespaceï¼Ÿ"><a href="#ä»€éº¼æ˜¯-Namespaceï¼Ÿ" class="headerlink" title="ä»€éº¼æ˜¯ Namespaceï¼Ÿ"></a>ä»€éº¼æ˜¯ Namespaceï¼Ÿ</h2><p>Kubernetes Namespace æ˜¯ä¸€å€‹ API ç‰©ä»¶ï¼Œç”¨æ–¼åœ¨ Kubernetes å¢é›†ä¸­å‰µå»ºè™›æ“¬çš„è³‡æºéš”é›¢ç’°å¢ƒã€‚Namespace æä¾›äº†ä¸€ç¨®å°‡å¢é›†è³‡æºåŠƒåˆ†ç‚ºå¤šå€‹ç¨ç«‹å€åŸŸçš„æ–¹å¼ï¼Œè®“ä¸åŒçš„åœ˜éšŠã€å°ˆæ¡ˆæˆ–ç’°å¢ƒå¯ä»¥åœ¨åŒä¸€å€‹å¢é›†ä¸­å®‰å…¨åœ°å…±å­˜ã€‚</p><h3 id="Namespace-çš„ä¸»è¦åŠŸèƒ½ï¼š"><a href="#Namespace-çš„ä¸»è¦åŠŸèƒ½ï¼š" class="headerlink" title="Namespace çš„ä¸»è¦åŠŸèƒ½ï¼š"></a>Namespace çš„ä¸»è¦åŠŸèƒ½ï¼š</h3><ul><li><strong>è³‡æºéš”é›¢</strong>ï¼šå°‡ä¸åŒçš„æ‡‰ç”¨ç¨‹å¼æˆ–ç’°å¢ƒåˆ†éš”åœ¨ä¸åŒçš„å‘½åç©ºé–“ä¸­</li><li><strong>å­˜å–æ§åˆ¶</strong>ï¼šé€é RBAC å¯¦ç¾ç´°ç²’åº¦çš„æ¬Šé™ç®¡ç†</li><li><strong>è³‡æºé…é¡ç®¡ç†</strong>ï¼šé™åˆ¶æ¯å€‹å‘½åç©ºé–“å¯ä½¿ç”¨çš„å¢é›†è³‡æºé‡</li><li><strong>åç¨±ç©ºé–“ç®¡ç†</strong>ï¼šé¿å…è³‡æºåç¨±è¡çªï¼Œæ”¯æ´ç›¸åŒåç¨±çš„è³‡æºå­˜åœ¨æ–¼ä¸åŒå‘½åç©ºé–“</li></ul><h3 id="ç‚ºä»€éº¼ä½¿ç”¨-Namespaceï¼Ÿ"><a href="#ç‚ºä»€éº¼ä½¿ç”¨-Namespaceï¼Ÿ" class="headerlink" title="ç‚ºä»€éº¼ä½¿ç”¨ Namespaceï¼Ÿ"></a>ç‚ºä»€éº¼ä½¿ç”¨ Namespaceï¼Ÿ</h3><p>ç›¸è¼ƒæ–¼å°‡æ‰€æœ‰è³‡æºéƒ½æ”¾åœ¨é è¨­å‘½åç©ºé–“ä¸­ï¼ŒNamespace æä¾›äº†æ›´å¥½çš„è³‡æºç®¡ç†æ–¹å¼ï¼š</p><ol><li><strong>å¤šç§Ÿæˆ¶æ”¯æ´</strong>ï¼šè®“å¤šå€‹åœ˜éšŠæˆ–å°ˆæ¡ˆå®‰å…¨åœ°å…±äº«åŒä¸€å€‹ Kubernetes å¢é›†</li><li><strong>ç’°å¢ƒåˆ†é›¢</strong>ï¼šæ¸…æ¥šå€åˆ†é–‹ç™¼ã€æ¸¬è©¦ã€ç”Ÿç”¢ç­‰ä¸åŒç’°å¢ƒçš„è³‡æº</li><li><strong>è³‡æºç®¡ç†</strong>ï¼šé€éè³‡æºé…é¡æ§åˆ¶æ¯å€‹ç’°å¢ƒçš„è³‡æºä½¿ç”¨é‡</li><li><strong>æ¬Šé™æ§åˆ¶</strong>ï¼šå¯¦ç¾ç²¾ç´°çš„å­˜å–æ¬Šé™ç®¡ç†ï¼Œæå‡å®‰å…¨æ€§</li></ol><span id="more"></span><hr><h2 id="é è¨­-Namespace"><a href="#é è¨­-Namespace" class="headerlink" title="é è¨­ Namespace"></a>é è¨­ Namespace</h2><p>Kubernetes å¢é›†é è¨­æœƒå‰µå»ºå››å€‹ç³»çµ±å‘½åç©ºé–“ï¼š</p><ul><li><strong>kube-system</strong>: å­˜æ”¾ Kubernetes ç³»çµ±å…ƒä»¶ï¼Œå¦‚ kube-dnsã€kube-proxyã€etcd ç­‰æ ¸å¿ƒæœå‹™</li><li><strong>kube-public</strong>: å…¬é–‹å¯è®€çš„å‘½åç©ºé–“ï¼Œé€šå¸¸ç”¨æ–¼å­˜æ”¾å¢é›†è³‡è¨Šï¼Œæ‰€æœ‰ä½¿ç”¨è€…ï¼ˆåŒ…æ‹¬æœªèªè­‰ä½¿ç”¨è€…ï¼‰éƒ½å¯ä»¥è®€å–</li><li><strong>kube-node-lease</strong>: ç”¨æ–¼ Node ç§Ÿç´„ç‰©ä»¶ï¼Œå¹«åŠ©ç¢ºå®š Node çš„å¯ç”¨æ€§å’Œå¥åº·ç‹€æ…‹</li><li><strong>default</strong>: é è¨­å‘½åç©ºé–“ï¼Œç•¶æ²’æœ‰æŒ‡å®šå‘½åç©ºé–“æ™‚ï¼Œè³‡æºæœƒè¢«å‰µå»ºåœ¨é€™è£¡</li></ul><h2 id="å»ºç«‹è‡ªå®šç¾©-Namespace"><a href="#å»ºç«‹è‡ªå®šç¾©-Namespace" class="headerlink" title="å»ºç«‹è‡ªå®šç¾© Namespace"></a>å»ºç«‹è‡ªå®šç¾© Namespace</h2><h3 id="æ–¹æ³•ä¸€ï¼šä½¿ç”¨-YAML-æª”æ¡ˆå»ºç«‹"><a href="#æ–¹æ³•ä¸€ï¼šä½¿ç”¨-YAML-æª”æ¡ˆå»ºç«‹" class="headerlink" title="æ–¹æ³•ä¸€ï¼šä½¿ç”¨ YAML æª”æ¡ˆå»ºç«‹"></a>æ–¹æ³•ä¸€ï¼šä½¿ç”¨ YAML æª”æ¡ˆå»ºç«‹</h3><p>å»ºç«‹ <code>dockertest-namespace.yaml</code> æª”æ¡ˆï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Namespace</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">dockertest-namespace</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">dockertest-namespace</span></span><br><span class="line">    <span class="attr">environment:</span> <span class="string">dev</span></span><br></pre></td></tr></table></figure><p>å¥—ç”¨è¨­å®šæª”ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl create -f dockertest-namespace.yaml</span><br></pre></td></tr></table></figure><img src="/2025/10/10/kubernetes-namespace/kubernetes_namespace_create.png" class="" title="namespaceå»ºç«‹"><h3 id="æ–¹æ³•äºŒï¼šä½¿ç”¨æŒ‡ä»¤ç›´æ¥å»ºç«‹"><a href="#æ–¹æ³•äºŒï¼šä½¿ç”¨æŒ‡ä»¤ç›´æ¥å»ºç«‹" class="headerlink" title="æ–¹æ³•äºŒï¼šä½¿ç”¨æŒ‡ä»¤ç›´æ¥å»ºç«‹"></a>æ–¹æ³•äºŒï¼šä½¿ç”¨æŒ‡ä»¤ç›´æ¥å»ºç«‹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl create namespace dockertest-namespace</span><br></pre></td></tr></table></figure><h3 id="æª¢è¦–æ‰€æœ‰-Namespace"><a href="#æª¢è¦–æ‰€æœ‰-Namespace" class="headerlink" title="æª¢è¦–æ‰€æœ‰ Namespace"></a>æª¢è¦–æ‰€æœ‰ Namespace</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kubectl get namespaces</span><br><span class="line"><span class="comment"># æˆ–ä½¿ç”¨ç°¡å¯«</span></span><br><span class="line">kubectl get ns</span><br></pre></td></tr></table></figure><h2 id="åœ¨æŒ‡å®š-Namespace-ä¸­æ“ä½œè³‡æº"><a href="#åœ¨æŒ‡å®š-Namespace-ä¸­æ“ä½œè³‡æº" class="headerlink" title="åœ¨æŒ‡å®š Namespace ä¸­æ“ä½œè³‡æº"></a>åœ¨æŒ‡å®š Namespace ä¸­æ“ä½œè³‡æº</h2><h3 id="åœ¨ç‰¹å®š-Namespace-å»ºç«‹è³‡æº"><a href="#åœ¨ç‰¹å®š-Namespace-å»ºç«‹è³‡æº" class="headerlink" title="åœ¨ç‰¹å®š Namespace å»ºç«‹è³‡æº"></a>åœ¨ç‰¹å®š Namespace å»ºç«‹è³‡æº</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨æŒ‡å®šçš„ namespace ä¸­å»ºç«‹ pod</span></span><br><span class="line">kubectl run nginx --image=nginx -n dockertest-namespace</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨ YAML æª”æ¡ˆå»ºç«‹è³‡æºåˆ°æŒ‡å®š namespace</span></span><br><span class="line">kubectl apply -f dockertest-deployment.yaml -n dockertest-namespace</span><br></pre></td></tr></table></figure><img src="/2025/10/10/kubernetes-namespace/kubernetes_namespace_run.png" class="" title="namespaceå»ºç«‹pod"><h3 id="è¨­å®šé è¨­-Namespace"><a href="#è¨­å®šé è¨­-Namespace" class="headerlink" title="è¨­å®šé è¨­ Namespace"></a>è¨­å®šé è¨­ Namespace</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¨­å®šç•¶å‰ context çš„é è¨­ namespace</span></span><br><span class="line">kubectl config set-context --current --namespace=dockertest-namespace</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¢ºèªç›®å‰çš„ context è¨­å®š</span></span><br><span class="line">kubectl config view --minify | grep namespace</span><br></pre></td></tr></table></figure><img src="/2025/10/10/kubernetes-namespace/kubernetes_namespace_default.png" class="" title="è¨­ç½®é è¨­namespace"><h3 id="æª¢è¦–-Namespace-ä¸­çš„è³‡æº"><a href="#æª¢è¦–-Namespace-ä¸­çš„è³‡æº" class="headerlink" title="æª¢è¦– Namespace ä¸­çš„è³‡æº"></a>æª¢è¦– Namespace ä¸­çš„è³‡æº</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æª¢è¦–æŒ‡å®š namespace ä¸­çš„æ‰€æœ‰ pod</span></span><br><span class="line">kubectl get pods -n dockertest-namespace</span><br><span class="line"></span><br><span class="line"><span class="comment"># æª¢è¦–æ‰€æœ‰ namespace ä¸­çš„ pod</span></span><br><span class="line">kubectl get pods --all-namespaces</span><br><span class="line"></span><br><span class="line"><span class="comment"># æª¢è¦– namespace çš„è©³ç´°è³‡è¨Š</span></span><br><span class="line">kubectl describe namespace dockertest-namespace</span><br></pre></td></tr></table></figure><img src="/2025/10/10/kubernetes-namespace/kubernetes_namespace_describe.png" class="" title="namespaceè©³ç´°è³‡è¨Š"><h2 id="åˆªé™¤-Namespace"><a href="#åˆªé™¤-Namespace" class="headerlink" title="åˆªé™¤ Namespace"></a>åˆªé™¤ Namespace</h2><p><strong>æ³¨æ„ï¼šåˆªé™¤ Namespace æœƒåŒæ™‚åˆªé™¤è©²å‘½åç©ºé–“å…§çš„æ‰€æœ‰è³‡æºï¼</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl delete namespace dockertest-namespace</span><br></pre></td></tr></table></figure><img src="/2025/10/10/kubernetes-namespace/kubernetes_namespace_delete.png" class="" title="namespaceåˆªé™¤"><h2 id="è³‡æºé…é¡ç®¡ç†"><a href="#è³‡æºé…é¡ç®¡ç†" class="headerlink" title="è³‡æºé…é¡ç®¡ç†"></a>è³‡æºé…é¡ç®¡ç†</h2><p>ç‚º Namespace è¨­å®šè³‡æºé™åˆ¶ï¼Œé¿å…æŸå€‹ç’°å¢ƒæ¶ˆè€—éå¤šå¢é›†è³‡æºï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ResourceQuota</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">compute-quota</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">dockertest-namespace</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">hard:</span></span><br><span class="line">    <span class="attr">requests.cpu:</span> <span class="string">&quot;4&quot;</span></span><br><span class="line">    <span class="attr">requests.memory:</span> <span class="string">8Gi</span></span><br><span class="line">    <span class="attr">limits.cpu:</span> <span class="string">&quot;8&quot;</span></span><br><span class="line">    <span class="attr">limits.memory:</span> <span class="string">16Gi</span></span><br><span class="line">    <span class="attr">persistentvolumeclaims:</span> <span class="string">&quot;10&quot;</span></span><br><span class="line">    <span class="attr">pods:</span> <span class="string">&quot;10&quot;</span></span><br></pre></td></tr></table></figure><h2 id="æœ€ä½³å¯¦è¸å»ºè­°"><a href="#æœ€ä½³å¯¦è¸å»ºè­°" class="headerlink" title="æœ€ä½³å¯¦è¸å»ºè­°"></a>æœ€ä½³å¯¦è¸å»ºè­°</h2><ol><li><strong>ç’°å¢ƒåˆ†é›¢</strong>ï¼šç‚ºä¸åŒç’°å¢ƒï¼ˆé–‹ç™¼ã€æ¸¬è©¦ã€ç”Ÿç”¢ï¼‰å»ºç«‹ç¨ç«‹çš„å‘½åç©ºé–“</li><li><strong>åœ˜éšŠéš”é›¢</strong>ï¼šç‚ºä¸åŒåœ˜éšŠæˆ–å°ˆæ¡ˆå»ºç«‹å°ˆç”¨çš„å‘½åç©ºé–“</li><li><strong>å‘½åè¦ç¯„</strong>ï¼šæ¡ç”¨ä¸€è‡´çš„å‘½åè¦ç¯„ï¼Œå¦‚ <code>team-environment</code> æ ¼å¼</li><li><strong>è³‡æºé…é¡</strong>ï¼šç‚ºæ¯å€‹å‘½åç©ºé–“è¨­å®šåˆé©çš„è³‡æºé…é¡</li><li><strong>æ¬Šé™æ§åˆ¶</strong>ï¼šçµåˆ RBAC å¯¦ç¾ç´°ç²’åº¦çš„æ¬Šé™ç®¡ç†</li><li><strong>ç›£æ§æ¨™ç±¤</strong>ï¼šç‚ºå‘½åç©ºé–“åŠ ä¸Šæœ‰æ„ç¾©çš„æ¨™ç±¤ï¼Œä¾¿æ–¼ç›£æ§å’Œç®¡ç†</li></ol><p>ç¯„ä¾‹å‘½åå»ºè­°ï¼š</p><ul><li><code>frontend-dev</code>ã€<code>frontend-prod</code></li><li><code>backend-staging</code>ã€<code>backend-prod</code></li><li><code>team-alpha-dev</code>ã€<code>team-beta-prod</code></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Kubernetes-Namespace-ä½¿ç”¨æŒ‡å—&quot;&gt;&lt;a href=&quot;#Kubernetes-Namespace-ä½¿ç”¨æŒ‡å—&quot; class=&quot;headerlink&quot; title=&quot;Kubernetes Namespace ä½¿ç”¨æŒ‡å—&quot;&gt;&lt;/a&gt;Kubernetes Namespace ä½¿ç”¨æŒ‡å—&lt;/h1&gt;&lt;h2 id=&quot;ä»€éº¼æ˜¯-Namespaceï¼Ÿ&quot;&gt;&lt;a href=&quot;#ä»€éº¼æ˜¯-Namespaceï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;ä»€éº¼æ˜¯ Namespaceï¼Ÿ&quot;&gt;&lt;/a&gt;ä»€éº¼æ˜¯ Namespaceï¼Ÿ&lt;/h2&gt;&lt;p&gt;Kubernetes Namespace æ˜¯ä¸€å€‹ API ç‰©ä»¶ï¼Œç”¨æ–¼åœ¨ Kubernetes å¢é›†ä¸­å‰µå»ºè™›æ“¬çš„è³‡æºéš”é›¢ç’°å¢ƒã€‚Namespace æä¾›äº†ä¸€ç¨®å°‡å¢é›†è³‡æºåŠƒåˆ†ç‚ºå¤šå€‹ç¨ç«‹å€åŸŸçš„æ–¹å¼ï¼Œè®“ä¸åŒçš„åœ˜éšŠã€å°ˆæ¡ˆæˆ–ç’°å¢ƒå¯ä»¥åœ¨åŒä¸€å€‹å¢é›†ä¸­å®‰å…¨åœ°å…±å­˜ã€‚&lt;/p&gt;
&lt;h3 id=&quot;Namespace-çš„ä¸»è¦åŠŸèƒ½ï¼š&quot;&gt;&lt;a href=&quot;#Namespace-çš„ä¸»è¦åŠŸèƒ½ï¼š&quot; class=&quot;headerlink&quot; title=&quot;Namespace çš„ä¸»è¦åŠŸèƒ½ï¼š&quot;&gt;&lt;/a&gt;Namespace çš„ä¸»è¦åŠŸèƒ½ï¼š&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è³‡æºéš”é›¢&lt;/strong&gt;ï¼šå°‡ä¸åŒçš„æ‡‰ç”¨ç¨‹å¼æˆ–ç’°å¢ƒåˆ†éš”åœ¨ä¸åŒçš„å‘½åç©ºé–“ä¸­&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å­˜å–æ§åˆ¶&lt;/strong&gt;ï¼šé€é RBAC å¯¦ç¾ç´°ç²’åº¦çš„æ¬Šé™ç®¡ç†&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è³‡æºé…é¡ç®¡ç†&lt;/strong&gt;ï¼šé™åˆ¶æ¯å€‹å‘½åç©ºé–“å¯ä½¿ç”¨çš„å¢é›†è³‡æºé‡&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åç¨±ç©ºé–“ç®¡ç†&lt;/strong&gt;ï¼šé¿å…è³‡æºåç¨±è¡çªï¼Œæ”¯æ´ç›¸åŒåç¨±çš„è³‡æºå­˜åœ¨æ–¼ä¸åŒå‘½åç©ºé–“&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;ç‚ºä»€éº¼ä½¿ç”¨-Namespaceï¼Ÿ&quot;&gt;&lt;a href=&quot;#ç‚ºä»€éº¼ä½¿ç”¨-Namespaceï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;ç‚ºä»€éº¼ä½¿ç”¨ Namespaceï¼Ÿ&quot;&gt;&lt;/a&gt;ç‚ºä»€éº¼ä½¿ç”¨ Namespaceï¼Ÿ&lt;/h3&gt;&lt;p&gt;ç›¸è¼ƒæ–¼å°‡æ‰€æœ‰è³‡æºéƒ½æ”¾åœ¨é è¨­å‘½åç©ºé–“ä¸­ï¼ŒNamespace æä¾›äº†æ›´å¥½çš„è³‡æºç®¡ç†æ–¹å¼ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å¤šç§Ÿæˆ¶æ”¯æ´&lt;/strong&gt;ï¼šè®“å¤šå€‹åœ˜éšŠæˆ–å°ˆæ¡ˆå®‰å…¨åœ°å…±äº«åŒä¸€å€‹ Kubernetes å¢é›†&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç’°å¢ƒåˆ†é›¢&lt;/strong&gt;ï¼šæ¸…æ¥šå€åˆ†é–‹ç™¼ã€æ¸¬è©¦ã€ç”Ÿç”¢ç­‰ä¸åŒç’°å¢ƒçš„è³‡æº&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è³‡æºç®¡ç†&lt;/strong&gt;ï¼šé€éè³‡æºé…é¡æ§åˆ¶æ¯å€‹ç’°å¢ƒçš„è³‡æºä½¿ç”¨é‡&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¬Šé™æ§åˆ¶&lt;/strong&gt;ï¼šå¯¦ç¾ç²¾ç´°çš„å­˜å–æ¬Šé™ç®¡ç†ï¼Œæå‡å®‰å…¨æ€§&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
    
      <category term="kubernetes" scheme="https://pcion123.github.io/categories/kubernetes/"/>
    
    
      <category term="kubernetes" scheme="https://pcion123.github.io/tags/kubernetes/"/>
    
  </entry>
  
  <entry>
    <title>Kubernetes æ§åˆ¶å…ƒä»¶ä»‹ç´¹</title>
    <link href="https://pcion123.github.io/2025/10/04/kubernetes-controller-intro/"/>
    <id>https://pcion123.github.io/2025/10/04/kubernetes-controller-intro/</id>
    <published>2025-10-04T06:16:07.000Z</published>
    <updated>2025-10-04T06:29:12.402Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Kubernetes-æ§åˆ¶å…ƒä»¶ä»‹ç´¹"><a href="#Kubernetes-æ§åˆ¶å…ƒä»¶ä»‹ç´¹" class="headerlink" title="Kubernetes æ§åˆ¶å…ƒä»¶ä»‹ç´¹"></a>Kubernetes æ§åˆ¶å…ƒä»¶ä»‹ç´¹</h1><p>åœ¨ Kubernetes ä¸­ï¼Œæˆ‘å€‘éœ€è¦æ§åˆ¶å¹³é¢ (Control Plane) ä¾†ç®¡ç† Node çš„é‹è¡Œç‹€æ…‹ã€‚æ¥ä¸‹ä¾†æˆ‘å€‘å°‡ä»‹ç´¹ Node æ˜¯å¦‚ä½•è¢«ç®¡ç†çš„ï¼Œä»¥åŠå„å€‹æ§åˆ¶å…ƒä»¶çš„åŠŸèƒ½ã€‚</p><h2 id="æ•´é«”æ¶æ§‹æ¦‚è¿°"><a href="#æ•´é«”æ¶æ§‹æ¦‚è¿°" class="headerlink" title="æ•´é«”æ¶æ§‹æ¦‚è¿°"></a>æ•´é«”æ¶æ§‹æ¦‚è¿°</h2><p>Kubernetes æ¡ç”¨ Master-Worker æ¶æ§‹æ¨¡å¼ï¼š</p><ul><li><strong>Control Plane (Master)</strong>: è² è²¬ç®¡ç†æ•´å€‹å¢é›†çš„æ±ºç­–å’Œæ§åˆ¶</li><li><strong>Worker Nodes</strong>: è² è²¬åŸ·è¡Œå¯¦éš›çš„æ‡‰ç”¨ç¨‹å¼å·¥ä½œè² è¼‰</li></ul><img src="/2025/10/04/kubernetes-controller-intro/kubernetes-control-components.svg" class="" title="Kubernetes æ§åˆ¶å…ƒä»¶æ¶æ§‹åœ–"><span id="more"></span><hr><h2 id="Node-Components"><a href="#Node-Components" class="headerlink" title="Node Components"></a>Node Components</h2><p>Node Components æ˜¯æ¯å€‹ Worker Node å¿…é ˆå…·å‚™çš„æ ¸å¿ƒå…ƒä»¶ï¼š</p><ul><li><strong>Container Runtime</strong>: è² è²¬ç®¡ç†å®¹å™¨çš„ç”Ÿå‘½é€±æœŸï¼ŒåŒ…æ‹¬å®¹å™¨çš„å»ºç«‹ã€åŸ·è¡Œå’ŒéŠ·æ¯€</li><li><strong>kubelet</strong>: ä½œç‚º Node çš„ä»£ç†ç¨‹å¼ï¼Œè² è²¬å»ºç«‹ Pod ä¸¦ç¶­è­·å®¹å™¨çš„å¥åº·ç‹€æ…‹</li><li><strong>kube-proxy</strong>: è² è²¬è™•ç† Node çš„ç¶²è·¯ä»£ç†åŠŸèƒ½ï¼Œå¯¦ç¾æœå‹™ç™¼ç¾å’Œè² è¼‰å¹³è¡¡</li></ul><h2 id="Control-Plane-Components"><a href="#Control-Plane-Components" class="headerlink" title="Control Plane Components"></a>Control Plane Components</h2><p>æ§åˆ¶å¹³é¢è² è²¬ç®¡ç†æ•´å€‹ Kubernetes å¢é›†ä¸­æ‰€æœ‰çš„ <strong>Node Components</strong>ã€‚ä»¥ä¸‹æ˜¯æ§åˆ¶å¹³é¢çš„æ ¸å¿ƒå…ƒä»¶ï¼š</p><ul><li><strong>kube-api-server</strong>: ä½œç‚º Kubernetes API çš„å‰ç«¯ï¼Œè² è²¬è™•ç†ä¾†è‡ªå®¢æˆ¶ç«¯çš„è«‹æ±‚ï¼Œç¶“éé©—è­‰å’Œæˆæ¬Šå¾Œï¼Œå°‡è«‹æ±‚è½‰ç™¼çµ¦å°æ‡‰çš„å…ƒä»¶</li><li><strong>kube-scheduler</strong>: è² è²¬å°‡ Pod èª¿åº¦åˆ°é©åˆçš„ Node ä¸ŠåŸ·è¡Œï¼Œæœƒæ ¹æ“šè³‡æºå¯ç”¨æ€§ã€ç¡¬é«”éœ€æ±‚ç­‰æ¢ä»¶ä¾†é¸æ“‡æœ€ä½³çš„ Node</li><li><strong>kube-controller-manager</strong>: åŸ·è¡Œå„ç¨®æ§åˆ¶å™¨ï¼Œè² è²¬ç›£æ§ Kubernetes å¢é›†çš„ç‹€æ…‹è®ŠåŒ–ä¸¦ç¢ºä¿é”åˆ°æœŸæœ›ç‹€æ…‹</li><li><strong>etcd</strong>: åˆ†æ•£å¼çš„ key-value å„²å­˜ç³»çµ±ï¼Œç”¨ä¾†å„²å­˜ Kubernetes å¢é›†çš„æ‰€æœ‰é…ç½®è³‡æ–™å’Œç‹€æ…‹è³‡è¨Š</li><li><strong>cloud-controller-manager</strong>: è² è²¬èˆ‡é›²ç«¯æœå‹™æä¾›å•†é€²è¡Œæ•´åˆçš„å…ƒä»¶ï¼Œå®ƒå¯ä»¥å¹«åŠ© Kubernetes é€£æ¥å…¬æœ‰é›²å¹³å°ï¼Œä½¿ç”¨é›²ç«¯æœå‹™çš„ API ä¾†ç®¡ç†é›²ç«¯è³‡æº</li></ul><blockquote><p><strong>æç¤º</strong><br>etcd æ¡ç”¨åˆ†æ•£å¼æ¶æ§‹è¨­è¨ˆï¼Œå› æ­¤åœ¨ä¸€å€‹ Kubernetes å¢é›†ä¸­å¯ä»¥åŒæ™‚éƒ¨ç½²å¤šå€‹ Control Plane å…ƒä»¶ä¾†å¯¦ç¾é«˜å¯ç”¨æ€§</p></blockquote><blockquote><p><strong>æç¤º</strong><br>cloud-controller-manager åƒ…åœ¨é›²ç«¯ç’°å¢ƒä¸­æ‰æœƒéƒ¨ç½²ï¼Œå¦‚æœ Kubernetes å¢é›†é‹è¡Œåœ¨æœ¬åœ°ç’°å¢ƒå‰‡ä¸æœƒåŒ…å«æ­¤å…ƒä»¶ï¼ˆä¾‹å¦‚ï¼šminikubeï¼‰</p></blockquote><p>ç‚ºäº†ç¢ºä¿æœå‹™çš„é«˜å¯ç”¨æ€§ï¼Œç”Ÿç”¢ç’°å¢ƒçš„ Kubernetes é€šå¸¸æœƒéƒ¨ç½²å…©å€‹ä»¥ä¸Šçš„ <strong>Control Plane</strong> ç¯€é»ã€‚</p><h2 id="å…ƒä»¶é–“çš„é€šè¨Šæ©Ÿåˆ¶"><a href="#å…ƒä»¶é–“çš„é€šè¨Šæ©Ÿåˆ¶" class="headerlink" title="å…ƒä»¶é–“çš„é€šè¨Šæ©Ÿåˆ¶"></a>å…ƒä»¶é–“çš„é€šè¨Šæ©Ÿåˆ¶</h2><p>æ‰€æœ‰å…ƒä»¶ä¹‹é–“çš„é€šè¨Šéƒ½å¿…é ˆé€é <strong>kube-api-server</strong> é€²è¡Œï¼Œå®ƒæ˜¯æ•´å€‹ Kubernetes æ¶æ§‹çš„æ ¸å¿ƒé€šè¨Šæ¨ç´ï¼š</p><ul><li>kubelet é€é API Server å›å ± Node å’Œ Pod çš„ç‹€æ…‹</li><li>Controller Manager é€é API Server ç›£æ§å¢é›†ç‹€æ…‹</li><li>Scheduler é€é API Server ç²å–èª¿åº¦è³‡è¨Šä¸¦åšå‡ºèª¿åº¦æ±ºç­–</li><li>æ‰€æœ‰é…ç½®å’Œç‹€æ…‹è³‡æ–™éƒ½å„²å­˜åœ¨ etcd ä¸­ï¼Œåªæœ‰ API Server èƒ½ç›´æ¥å­˜å–</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Kubernetes-æ§åˆ¶å…ƒä»¶ä»‹ç´¹&quot;&gt;&lt;a href=&quot;#Kubernetes-æ§åˆ¶å…ƒä»¶ä»‹ç´¹&quot; class=&quot;headerlink&quot; title=&quot;Kubernetes æ§åˆ¶å…ƒä»¶ä»‹ç´¹&quot;&gt;&lt;/a&gt;Kubernetes æ§åˆ¶å…ƒä»¶ä»‹ç´¹&lt;/h1&gt;&lt;p&gt;åœ¨ Kubernetes ä¸­ï¼Œæˆ‘å€‘éœ€è¦æ§åˆ¶å¹³é¢ (Control Plane) ä¾†ç®¡ç† Node çš„é‹è¡Œç‹€æ…‹ã€‚æ¥ä¸‹ä¾†æˆ‘å€‘å°‡ä»‹ç´¹ Node æ˜¯å¦‚ä½•è¢«ç®¡ç†çš„ï¼Œä»¥åŠå„å€‹æ§åˆ¶å…ƒä»¶çš„åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æ•´é«”æ¶æ§‹æ¦‚è¿°&quot;&gt;&lt;a href=&quot;#æ•´é«”æ¶æ§‹æ¦‚è¿°&quot; class=&quot;headerlink&quot; title=&quot;æ•´é«”æ¶æ§‹æ¦‚è¿°&quot;&gt;&lt;/a&gt;æ•´é«”æ¶æ§‹æ¦‚è¿°&lt;/h2&gt;&lt;p&gt;Kubernetes æ¡ç”¨ Master-Worker æ¶æ§‹æ¨¡å¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Control Plane (Master)&lt;/strong&gt;: è² è²¬ç®¡ç†æ•´å€‹å¢é›†çš„æ±ºç­–å’Œæ§åˆ¶&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Worker Nodes&lt;/strong&gt;: è² è²¬åŸ·è¡Œå¯¦éš›çš„æ‡‰ç”¨ç¨‹å¼å·¥ä½œè² è¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;img src=&quot;/2025/10/04/kubernetes-controller-intro/kubernetes-control-components.svg&quot; class=&quot;&quot; title=&quot;Kubernetes æ§åˆ¶å…ƒä»¶æ¶æ§‹åœ–&quot;&gt;
    
    </summary>
    
    
      <category term="kubernetes" scheme="https://pcion123.github.io/categories/kubernetes/"/>
    
    
      <category term="kubernetes" scheme="https://pcion123.github.io/tags/kubernetes/"/>
    
  </entry>
  
  <entry>
    <title>Kubernetes æ ¸å¿ƒå…ƒä»¶ä»‹ç´¹</title>
    <link href="https://pcion123.github.io/2025/09/28/kubernetes-core-intro/"/>
    <id>https://pcion123.github.io/2025/09/28/kubernetes-core-intro/</id>
    <published>2025-09-28T14:58:35.000Z</published>
    <updated>2025-10-04T06:21:42.560Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Kubernetes-æ ¸å¿ƒå…ƒä»¶ä»‹ç´¹"><a href="#Kubernetes-æ ¸å¿ƒå…ƒä»¶ä»‹ç´¹" class="headerlink" title="Kubernetes æ ¸å¿ƒå…ƒä»¶ä»‹ç´¹"></a>Kubernetes æ ¸å¿ƒå…ƒä»¶ä»‹ç´¹</h1><h2 id="æ¶æ§‹ç¸½è¦½"><a href="#æ¶æ§‹ç¸½è¦½" class="headerlink" title="æ¶æ§‹ç¸½è¦½"></a>æ¶æ§‹ç¸½è¦½</h2><img src="/2025/09/28/kubernetes-core-intro/kubernetes-components-overview.svg" class="" title="Kubernetes æ¶æ§‹åœ–"><p><em>ä¸Šåœ–å±•ç¤ºäº† Kubernetes å®Œæ•´æ¶æ§‹ï¼ŒåŒ…å«æ§åˆ¶å¹³é¢ã€å·¥ä½œç¯€é»ã€æœå‹™å±¤å’Œé…ç½®ç®¡ç†ç­‰æ ¸å¿ƒå…ƒä»¶åŠå…¶äº’å‹•é—œä¿‚</em></p><span id="more"></span><hr><h2 id="Pod"><a href="#Pod" class="headerlink" title="Pod"></a>Pod</h2><p><strong>Kubernetes ä¸­çš„æœ€å°é‹è¡Œå–®ä½</strong></p><ul><li>æ¯å€‹ Pod éƒ½æœƒè¢«åˆ†é…ä¸€å€‹å”¯ä¸€çš„è™›æ“¬ IP ä½å€</li><li><strong>Container</strong>: Pod å…§é‹è¡Œçš„æ‡‰ç”¨ç¨‹å¼å®¹å™¨ï¼Œé›–ç„¶æ¯å€‹ Pod å¯ä»¥é‹è¡Œå¤šå€‹å®¹å™¨ï¼Œä½†é€šå¸¸å»ºè­°åªé‹è¡Œä¸€å€‹ä¸»è¦å®¹å™¨</li></ul><h2 id="Node"><a href="#Node" class="headerlink" title="Node"></a>Node</h2><p><strong>Kubernetes å¢é›†çš„å·¥ä½œç¯€é»</strong></p><ul><li>å¯ä»¥æ˜¯å¯¦é«”æ©Ÿå™¨æˆ–è™›æ“¬æ©Ÿå™¨</li><li>å¤šå€‹ Node çµ„æˆ Kubernetes å¢é›†ï¼Œæä¾›é‹ç®—è³‡æº</li></ul><h2 id="Service"><a href="#Service" class="headerlink" title="Service"></a>Service</h2><p><strong>æä¾›ç©©å®šçš„ç¶²è·¯ç«¯é»</strong></p><ul><li>è§£æ±º Pod é‡å•Ÿæ™‚ IP ä½å€è®Šå‹•çš„å•é¡Œ</li><li>æä¾›å›ºå®šçš„ IP ä½å€å’Œ DNS åç¨±ï¼Œä½œç‚º Pod ç¾¤çµ„çš„å­˜å–å…¥å£</li><li>åˆ†ç‚ºå…©ç¨®é¡å‹ï¼š<ul><li><strong>å…§éƒ¨ Service</strong>: åƒ…ä¾›å¢é›†å…§éƒ¨é€šè¨Šä½¿ç”¨</li><li><strong>å¤–éƒ¨ Service</strong>: å…è¨±å¤–éƒ¨æµé‡å­˜å–</li></ul></li></ul><h2 id="Ingress"><a href="#Ingress" class="headerlink" title="Ingress"></a>Ingress</h2><p><strong>HTTP&#x2F;HTTPS è·¯ç”±ç®¡ç†</strong></p><ul><li>æä¾›åŸŸåå°æ‡‰æœå‹™ï¼Œè®“å¤–éƒ¨ç”¨æˆ¶èƒ½é€éç¶²åŸŸåç¨±å­˜å– Service</li><li>æ”¯æ´ SSL&#x2F;TLS æ†‘è­‰ç®¡ç†å’Œè² è¼‰å¹³è¡¡</li></ul><h2 id="ConfigMap"><a href="#ConfigMap" class="headerlink" title="ConfigMap"></a>ConfigMap</h2><p><strong>æ‡‰ç”¨ç¨‹å¼é…ç½®ç®¡ç†</strong></p><ul><li>å„²å­˜éæ•æ„Ÿçš„é…ç½®è³‡æ–™ï¼ˆå¦‚è¨­å®šæª”ã€ç’°å¢ƒè®Šæ•¸ï¼‰</li><li>é¿å…å› é…ç½®è®Šæ›´è€Œé‡æ–°å»ºç½®æ˜ åƒæª”ï¼Œæ¸›å°‘éƒ¨ç½²åœæ©Ÿæ™‚é–“</li><li>æ”¯æ´ç†±æ›´æ–°é…ç½®</li></ul><blockquote><p><strong>è­¦å‘Š</strong><br>ConfigMap ä»¥æ˜æ–‡æ–¹å¼å„²å­˜å…§å®¹ï¼Œ<strong>è«‹å‹¿å­˜æ”¾æ•æ„Ÿè³‡æ–™</strong></p></blockquote><h2 id="Secret"><a href="#Secret" class="headerlink" title="Secret"></a>Secret</h2><p><strong>æ•æ„Ÿè³‡æ–™å®‰å…¨å„²å­˜</strong></p><ul><li>å°ˆé–€ç”¨æ–¼å„²å­˜æ©Ÿæ•è³‡æ–™ï¼ˆå¦‚å¯†ç¢¼ã€API é‡‘é‘°ã€æ†‘è­‰ï¼‰</li><li>è³‡æ–™ä»¥ Base64 ç·¨ç¢¼æ ¼å¼å„²å­˜</li><li>æä¾›æ¯” ConfigMap æ›´é«˜çš„å®‰å…¨æ€§</li></ul><blockquote><p><strong>è¨»è§£</strong><br>Secret ä½¿ç”¨ Base64 ç·¨ç¢¼å„²å­˜è³‡æ–™ï¼Œä¸¦å¯èˆ‡ Pod å®‰å…¨åœ°å…±äº«</p></blockquote><h2 id="Volumes"><a href="#Volumes" class="headerlink" title="Volumes"></a>Volumes</h2><p><strong>æŒä¹…åŒ–è³‡æ–™å„²å­˜</strong></p><ul><li>è§£æ±ºå®¹å™¨é‡å•Ÿæ™‚è³‡æ–™éºå¤±çš„å•é¡Œ</li><li>æä¾›å¤šç¨®å„²å­˜é¡å‹ï¼ˆæœ¬æ©Ÿå„²å­˜ã€ç¶²è·¯å„²å­˜ã€é›²ç«¯å„²å­˜ï¼‰</li><li>ç¢ºä¿é‡è¦è³‡æ–™åœ¨ Pod ç”Ÿå‘½é€±æœŸå¤–æŒçºŒä¿å­˜</li></ul><h2 id="Deployment"><a href="#Deployment" class="headerlink" title="Deployment"></a>Deployment</h2><p><strong>ç„¡ç‹€æ…‹æ‡‰ç”¨ç¨‹å¼çš„éƒ¨ç½²ç®¡ç†</strong></p><ul><li>ç®¡ç† Pod çš„éƒ¨ç½²ã€æ›´æ–°å’Œæ“´ç¸®å®¹</li><li>æä¾›è²æ˜å¼æ›´æ–°ï¼Œç¢ºä¿æ‡‰ç”¨ç¨‹å¼çš„æœŸæœ›ç‹€æ…‹</li><li>æ”¯æ´æ»¾å‹•æ›´æ–°ï¼ˆRolling Updateï¼‰å’Œå›æ»¾åŠŸèƒ½</li><li>é©ç”¨æ–¼ç„¡ç‹€æ…‹çš„æ‡‰ç”¨ç¨‹å¼ï¼Œå¦‚ç¶²é ä¼ºæœå™¨ã€API æœå‹™</li><li>ä¸»è¦åŠŸèƒ½ï¼š<ul><li><strong>å‰¯æœ¬ç®¡ç†</strong>: ç¢ºä¿æŒ‡å®šæ•¸é‡çš„ Pod å‰¯æœ¬æ­£å¸¸é‹è¡Œ</li><li><strong>è‡ªå‹•ä¿®å¾©</strong>: ç•¶ Pod ç•°å¸¸æ™‚è‡ªå‹•é‡æ–°å»ºç«‹</li><li><strong>ç‰ˆæœ¬æ§åˆ¶</strong>: è¿½è¹¤éƒ¨ç½²æ­·å²ï¼Œæ”¯æ´å¿«é€Ÿå›æ»¾</li><li><strong>é›¶åœæ©Ÿéƒ¨ç½²</strong>: é€éæ»¾å‹•æ›´æ–°å¯¦ç¾ç„¡ä¸­æ–·æœå‹™æ›´æ–°</li></ul></li></ul><blockquote><p><strong>æç¤º</strong><br>Deployment æ˜¯éƒ¨ç½²ç„¡ç‹€æ…‹æ‡‰ç”¨ç¨‹å¼çš„é¦–é¸æ–¹å¼ï¼Œæä¾›äº†å¼·å¤§çš„ç”Ÿå‘½é€±æœŸç®¡ç†åŠŸèƒ½</p></blockquote><h2 id="StatefulSet"><a href="#StatefulSet" class="headerlink" title="StatefulSet"></a>StatefulSet</h2><p><strong>æœ‰ç‹€æ…‹æ‡‰ç”¨ç¨‹å¼çš„éƒ¨ç½²ç®¡ç†</strong></p><ul><li>å°ˆé–€ç”¨æ–¼ç®¡ç†æœ‰ç‹€æ…‹çš„æ‡‰ç”¨ç¨‹å¼ï¼Œå¦‚è³‡æ–™åº«ã€è¨Šæ¯ä½‡åˆ—</li><li>ç‚ºæ¯å€‹ Pod æä¾›ç©©å®šä¸”å”¯ä¸€çš„ç¶²è·¯è­˜åˆ¥ç¬¦</li><li>ä¿è­‰ Pod çš„æœ‰åºéƒ¨ç½²ã€æ“´ç¸®å®¹å’Œçµ‚æ­¢</li><li>æä¾›æŒä¹…åŒ–å„²å­˜èˆ‡ Pod çš„ç©©å®šç¶å®šé—œä¿‚</li><li>ä¸»è¦ç‰¹è‰²ï¼š<ul><li><strong>ç©©å®šçš„ç¶²è·¯è­˜åˆ¥</strong>: æ¯å€‹ Pod éƒ½æœ‰å›ºå®šçš„ä¸»æ©Ÿåç¨±ï¼ˆå¦‚ pod-0, pod-1ï¼‰</li><li><strong>æœ‰åºéƒ¨ç½²</strong>: Pod æŒ‰ç…§é †åºå»ºç«‹ï¼Œç¢ºä¿å‰ä¸€å€‹ Pod å°±ç·’å¾Œæ‰å»ºç«‹ä¸‹ä¸€å€‹</li><li><strong>æŒä¹…å„²å­˜</strong>: æ¯å€‹ Pod éƒ½æœ‰å°ˆå±¬çš„æŒä¹…åŒ–å„²å­˜å·</li><li><strong>æœ‰åºçµ‚æ­¢</strong>: åˆªé™¤æ™‚æŒ‰ç…§ç›¸åé †åºé€²è¡Œï¼Œç¢ºä¿è³‡æ–™å®Œæ•´æ€§</li></ul></li></ul><blockquote><p><strong>é‡è¦æç¤º</strong><br>StatefulSet é©ç”¨æ–¼éœ€è¦ç©©å®šå„²å­˜å’Œç¶²è·¯è­˜åˆ¥çš„æ‡‰ç”¨ç¨‹å¼ï¼Œå¦‚ MySQLã€MongoDBã€Kafka ç­‰</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Kubernetes-æ ¸å¿ƒå…ƒä»¶ä»‹ç´¹&quot;&gt;&lt;a href=&quot;#Kubernetes-æ ¸å¿ƒå…ƒä»¶ä»‹ç´¹&quot; class=&quot;headerlink&quot; title=&quot;Kubernetes æ ¸å¿ƒå…ƒä»¶ä»‹ç´¹&quot;&gt;&lt;/a&gt;Kubernetes æ ¸å¿ƒå…ƒä»¶ä»‹ç´¹&lt;/h1&gt;&lt;h2 id=&quot;æ¶æ§‹ç¸½è¦½&quot;&gt;&lt;a href=&quot;#æ¶æ§‹ç¸½è¦½&quot; class=&quot;headerlink&quot; title=&quot;æ¶æ§‹ç¸½è¦½&quot;&gt;&lt;/a&gt;æ¶æ§‹ç¸½è¦½&lt;/h2&gt;&lt;img src=&quot;/2025/09/28/kubernetes-core-intro/kubernetes-components-overview.svg&quot; class=&quot;&quot; title=&quot;Kubernetes æ¶æ§‹åœ–&quot;&gt;

&lt;p&gt;&lt;em&gt;ä¸Šåœ–å±•ç¤ºäº† Kubernetes å®Œæ•´æ¶æ§‹ï¼ŒåŒ…å«æ§åˆ¶å¹³é¢ã€å·¥ä½œç¯€é»ã€æœå‹™å±¤å’Œé…ç½®ç®¡ç†ç­‰æ ¸å¿ƒå…ƒä»¶åŠå…¶äº’å‹•é—œä¿‚&lt;/em&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="kubernetes" scheme="https://pcion123.github.io/categories/kubernetes/"/>
    
    
      <category term="kubernetes" scheme="https://pcion123.github.io/tags/kubernetes/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntuå®‰è£Minikube (2025)</title>
    <link href="https://pcion123.github.io/2025/09/23/minikube-install-2025/"/>
    <id>https://pcion123.github.io/2025/09/23/minikube-install-2025/</id>
    <published>2025-09-23T15:32:37.000Z</published>
    <updated>2025-09-24T16:38:16.885Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ç¾ä»£å®¹å™¨åŒ–é–‹ç™¼ç’°å¢ƒä¸­ï¼ŒMinikube æ˜¯å­¸ç¿’å’Œæ¸¬è©¦ Kubernetes çš„çµ•ä½³å·¥å…·ã€‚æœ¬æ–‡å°‡è©³ç´°ä»‹ç´¹å¦‚ä½•åœ¨ Ubuntu 24.04.3 LTS ä¸Šå®Œæ•´å»ºç½® Minikube ç’°å¢ƒï¼ŒåŒ…å« Docker å®¹å™¨å¼•æ“ã€kubectl å‘½ä»¤åˆ—å·¥å…·ï¼Œä»¥åŠå®Œæ•´çš„ Tomcat æœå‹™éƒ¨ç½²ç¯„ä¾‹ã€‚</p><p>ç„¡è«–æ‚¨æ˜¯ Kubernetes åˆå­¸è€…é‚„æ˜¯éœ€è¦æœ¬åœ°é–‹ç™¼ç’°å¢ƒçš„å·¥ç¨‹å¸«ï¼Œé€™ç¯‡æŒ‡å—éƒ½å°‡å”åŠ©æ‚¨å¿«é€Ÿå»ºç«‹ä¸€å€‹åŠŸèƒ½å®Œæ•´çš„æœ¬åœ° Kubernetes é›†ç¾¤ã€‚</p><h2 id="ç’°å¢ƒéœ€æ±‚"><a href="#ç’°å¢ƒéœ€æ±‚" class="headerlink" title="ç’°å¢ƒéœ€æ±‚"></a>ç’°å¢ƒéœ€æ±‚</h2><ul><li><strong>ä½œæ¥­ç³»çµ±</strong>: Ubuntu 24.04.3 LTS</li><li><strong>è¨˜æ†¶é«”</strong>: å»ºè­°è‡³å°‘ 4GB RAM</li><li><strong>ç¡¬ç¢Ÿç©ºé–“</strong>: å»ºè­°è‡³å°‘ 20GB å¯ç”¨ç©ºé–“</li><li><strong>ç¶²è·¯</strong>: å¯å­˜å–ç¶²éš›ç¶²è·¯é€²è¡Œå¥—ä»¶ä¸‹è¼‰</li></ul><span id="more"></span><h2 id="ç¬¬ä¸€æ­¥ï¼šç³»çµ±å‰ç½®æº–å‚™"><a href="#ç¬¬ä¸€æ­¥ï¼šç³»çµ±å‰ç½®æº–å‚™" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šç³»çµ±å‰ç½®æº–å‚™"></a>ç¬¬ä¸€æ­¥ï¼šç³»çµ±å‰ç½®æº–å‚™</h2><p>åœ¨é–‹å§‹å®‰è£ä¹‹å‰ï¼Œæˆ‘å€‘éœ€è¦æ›´æ–°ç³»çµ±å¥—ä»¶ä¸¦å®‰è£å¿…è¦çš„åŸºç¤å·¥å…·ã€‚é€™äº›å·¥å…·å°‡ç‚ºå¾ŒçºŒçš„ Docker å’Œ Kubernetes çµ„ä»¶å®‰è£æä¾›æ”¯æ´ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ›´æ–°ç³»çµ±å¥—ä»¶è³‡æ–™åº«ä¸¦å‡ç´šç¾æœ‰å¥—ä»¶</span></span><br><span class="line">sudo apt update &amp;&amp; sudo apt upgrade -y</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®‰è£å¿…è¦çš„åŸºç¤å·¥å…·</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">curl: ç”¨æ–¼ä¸‹è¼‰æª”æ¡ˆ</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">wget: å¦ä¸€å€‹ä¸‹è¼‰å·¥å…·</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">apt-transport-https: æ”¯æ´ HTTPS ä¾†æº</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ca-certificates: æ†‘è­‰ç®¡ç†</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">software-properties-common: è»Ÿé«”ä¾†æºç®¡ç†</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">conntrack: Kubernetes ç¶²è·¯è¿½è¹¤æ‰€éœ€</span></span><br><span class="line">sudo apt install -y curl wget apt-transport-https ca-certificates software-properties-common conntrack</span><br></pre></td></tr></table></figure><h2 id="ç¬¬äºŒæ­¥ï¼šå®‰è£-Docker-å®¹å™¨å¼•æ“"><a href="#ç¬¬äºŒæ­¥ï¼šå®‰è£-Docker-å®¹å™¨å¼•æ“" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šå®‰è£ Docker å®¹å™¨å¼•æ“"></a>ç¬¬äºŒæ­¥ï¼šå®‰è£ Docker å®¹å™¨å¼•æ“</h2><p>Docker æ˜¯ Minikube çš„å®¹å™¨é‹è¡Œæ™‚ç’°å¢ƒã€‚Minikube æ”¯æ´å¤šç¨®å®¹å™¨å¼•æ“ï¼Œä½† Docker æ˜¯æœ€å¸¸ç”¨ä¸”ç©©å®šçš„é¸æ“‡ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®‰è£ Docker ç¤¾ç¾¤ç‰ˆæœ¬</span></span><br><span class="line">sudo apt install -y docker.io</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å•Ÿå‹• Docker æœå‹™ä¸¦è¨­å®šç‚ºé–‹æ©Ÿè‡ªå‹•å•Ÿå‹•</span></span><br><span class="line">sudo systemctl enable --now docker</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å°‡ç›®å‰ä½¿ç”¨è€…åŠ å…¥ docker ç¾¤çµ„ï¼Œé¿å…æ¯æ¬¡éƒ½éœ€è¦ <span class="built_in">sudo</span></span></span><br><span class="line">sudo usermod -aG docker $USER</span><br></pre></td></tr></table></figure><p>é€™ä¸€æ­¥å®Œæˆå¾Œéœ€è¦ <strong>é‡æ–°ç™»å…¥ç³»çµ±</strong> æˆ–åŸ·è¡Œ <code>newgrp docker</code> è®“ç¾¤çµ„è®Šæ›´ç”Ÿæ•ˆã€‚</p><blockquote><p><strong>é‡è¦æé†’</strong>: å°‡ä½¿ç”¨è€…åŠ å…¥ docker ç¾¤çµ„å¯ä»¥é¿å…æ¯æ¬¡åŸ·è¡Œ Docker æŒ‡ä»¤æ™‚éƒ½éœ€è¦ sudo æ¬Šé™ï¼Œä½†è«‹æ³¨æ„é€™æœƒçµ¦äºˆè©²ä½¿ç”¨è€…ç­‰åŒ root çš„æ¬Šé™ä¾†æ“ä½œ Dockerã€‚</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é©—è­‰ Docker å®‰è£æ˜¯å¦æˆåŠŸ</span></span><br><span class="line">docker version</span><br></pre></td></tr></table></figure><h2 id="ç¬¬ä¸‰æ­¥ï¼šå®‰è£-kubectl-å‘½ä»¤åˆ—å·¥å…·"><a href="#ç¬¬ä¸‰æ­¥ï¼šå®‰è£-kubectl-å‘½ä»¤åˆ—å·¥å…·" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šå®‰è£ kubectl å‘½ä»¤åˆ—å·¥å…·"></a>ç¬¬ä¸‰æ­¥ï¼šå®‰è£ kubectl å‘½ä»¤åˆ—å·¥å…·</h2><p>kubectl æ˜¯ Kubernetes çš„å®˜æ–¹å‘½ä»¤åˆ—å·¥å…·ï¼Œç”¨æ–¼èˆ‡ Kubernetes é›†ç¾¤é€²è¡Œäº’å‹•ã€‚å®ƒå¯ä»¥è®“æˆ‘å€‘ç®¡ç† Podã€Serviceã€Deployment ç­‰å„ç¨® Kubernetes è³‡æºã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å–å¾—æœ€æ–°ç©©å®šç‰ˆæœ¬çš„ç‰ˆæœ¬è™Ÿ</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">KUBECTL_VER=$(curl -L -s https://dl.k8s.io/release/stable.txt)</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸‹è¼‰å°æ‡‰ç‰ˆæœ¬çš„ kubectl åŸ·è¡Œæª”</span></span><br><span class="line">curl -LO &quot;https://dl.k8s.io/release/$KUBECTL_VER/bin/linux/amd64/kubectl&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è³¦äºˆåŸ·è¡Œæ¬Šé™</span></span><br><span class="line">chmod +x kubectl</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç§»å‹•åˆ°ç³»çµ±åŸ·è¡Œè·¯å¾‘</span></span><br><span class="line">sudo mv kubectl /usr/local/bin/</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é©—è­‰ kubectl å®‰è£æ˜¯å¦æˆåŠŸ</span></span><br><span class="line">kubectl version --client</span><br></pre></td></tr></table></figure><h2 id="ç¬¬å››æ­¥ï¼šå®‰è£ä¸¦è¨­å®š-Minikube"><a href="#ç¬¬å››æ­¥ï¼šå®‰è£ä¸¦è¨­å®š-Minikube" class="headerlink" title="ç¬¬å››æ­¥ï¼šå®‰è£ä¸¦è¨­å®š Minikube"></a>ç¬¬å››æ­¥ï¼šå®‰è£ä¸¦è¨­å®š Minikube</h2><p>Minikube æ˜¯ä¸€å€‹è¼•é‡ç´šçš„ Kubernetes å¯¦ä½œï¼Œè¨­è¨ˆç”¨æ–¼åœ¨æœ¬åœ°ç’°å¢ƒé‹è¡Œå–®ç¯€é»çš„ Kubernetes é›†ç¾¤ã€‚å®ƒéå¸¸é©åˆé–‹ç™¼ã€æ¸¬è©¦å’Œå­¸ç¿’ Kubernetesã€‚</p><h3 id="åŸºç¤å®‰è£"><a href="#åŸºç¤å®‰è£" class="headerlink" title="åŸºç¤å®‰è£"></a>åŸºç¤å®‰è£</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸‹è¼‰æœ€æ–°ç‰ˆæœ¬çš„ Minikube</span></span><br><span class="line">curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®‰è£åˆ°ç³»çµ±åŸ·è¡Œè·¯å¾‘</span></span><br><span class="line">sudo install minikube-linux-amd64 /usr/local/bin/minikube</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">é©—è­‰ Minikube å®‰è£æ˜¯å¦æˆåŠŸ</span></span><br><span class="line">minikube version</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹æ˜¯ Minikube çš„å¸¸ç”¨æ“ä½œæŒ‡ä»¤ï¼Œå»ºè­°å…ˆç†Ÿæ‚‰é€™äº›åŸºæœ¬æŒ‡ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹ Minikube ç‰ˆæœ¬è³‡è¨Š</span></span><br><span class="line">minikube version</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹ç›®å‰é›†ç¾¤ç‹€æ…‹</span></span><br><span class="line">minikube status</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å•Ÿå‹• Kubernetes é›†ç¾¤</span></span><br><span class="line">minikube start</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åœæ­¢é›†ç¾¤ï¼ˆä¿ç•™è³‡æ–™ï¼‰</span></span><br><span class="line">minikube stop</span><br></pre></td></tr></table></figure><h3 id="å•Ÿå‹•-Minikube-é›†ç¾¤"><a href="#å•Ÿå‹•-Minikube-é›†ç¾¤" class="headerlink" title="å•Ÿå‹• Minikube é›†ç¾¤"></a>å•Ÿå‹• Minikube é›†ç¾¤</h3><p>åœ¨å®Œæˆå®‰è£å¾Œï¼Œæˆ‘å€‘å¯ä»¥é–‹å§‹å•Ÿå‹•ä¸¦æ¸¬è©¦ Minikube é›†ç¾¤ï¼š</p><ul><li>å•Ÿå‹•minikube</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä½¿ç”¨ Docker ä½œç‚ºå®¹å™¨å¼•æ“å•Ÿå‹•é›†ç¾¤</span></span><br><span class="line">minikube start --driver=docker</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å•Ÿå‹•é›†ç¾¤ä¸¦æŒ‡å®šç‰¹å®šçš„ Kubernetes ç‰ˆæœ¬</span></span><br><span class="line">minikube start --driver=docker --kubernetes-version=v1.29.0</span><br></pre></td></tr></table></figure><ul><li>å»ºç«‹å¤–éƒ¨å­˜å–ä»£ç†</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å»ºç«‹ä»£ç†é€£ç·šï¼Œå…è¨±å¤–éƒ¨å­˜å– Kubernetes API</span></span><br><span class="line">kubectl proxy --address=&#x27;0.0.0.0&#x27; --disable-filter=true</span><br></pre></td></tr></table></figure><blockquote><p><strong>æ³¨æ„</strong>: æ­¤æŒ‡ä»¤æœƒåœ¨èƒŒæ™¯æŒçºŒé‹è¡Œï¼Œå»ºè­°åœ¨æ–°çš„çµ‚ç«¯è¦–çª—ä¸­åŸ·è¡Œ</p></blockquote><img src="/2025/09/23/minikube-install-2025/minikube_start.png" class=""><ul><li>å­˜å– Kubernetes Dashboard</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å•Ÿå‹• Web ä»‹é¢å„€è¡¨æ¿ä¸¦å–å¾—å­˜å–ç¶²å€</span></span><br><span class="line">minikube dashboard --url</span><br></pre></td></tr></table></figure><p>æ­¤æŒ‡ä»¤æœƒè¼¸å‡ºä¸€å€‹ç¶²å€ï¼Œæ‚¨å¯ä»¥åœ¨ç€è¦½å™¨ä¸­é–‹å•Ÿæ­¤ç¶²å€ä¾†å­˜å– Kubernetes çš„è¦–è¦ºåŒ–ç®¡ç†ä»‹é¢ã€‚</p><img src="/2025/09/23/minikube-install-2025/minikube_dashboard.png" class=""><p>æŸ¥çœ‹dashboardå¯¦éš›é‹è¡Œçµæœ</p><img src="/2025/09/23/minikube-install-2025/minikube_dashboard_url.png" class=""><h3 id="å¯¦æˆ°ç¯„ä¾‹ï¼šéƒ¨ç½²-Tomcat-æ‡‰ç”¨ç¨‹å¼"><a href="#å¯¦æˆ°ç¯„ä¾‹ï¼šéƒ¨ç½²-Tomcat-æ‡‰ç”¨ç¨‹å¼" class="headerlink" title="å¯¦æˆ°ç¯„ä¾‹ï¼šéƒ¨ç½² Tomcat æ‡‰ç”¨ç¨‹å¼"></a>å¯¦æˆ°ç¯„ä¾‹ï¼šéƒ¨ç½² Tomcat æ‡‰ç”¨ç¨‹å¼</h3><p>ç‚ºäº†é©—è­‰ Minikube ç’°å¢ƒé‹ä½œæ­£å¸¸ï¼Œæˆ‘å€‘å°‡éƒ¨ç½²ä¸€å€‹å®Œæ•´çš„ Tomcat Web æ‡‰ç”¨ç¨‹å¼ä½œç‚ºç¤ºç¯„ã€‚</p><h4 id="æ­¥é©Ÿä¸€ï¼šå•Ÿç”¨-Ingress-æ§åˆ¶å™¨"><a href="#æ­¥é©Ÿä¸€ï¼šå•Ÿç”¨-Ingress-æ§åˆ¶å™¨" class="headerlink" title="æ­¥é©Ÿä¸€ï¼šå•Ÿç”¨ Ingress æ§åˆ¶å™¨"></a>æ­¥é©Ÿä¸€ï¼šå•Ÿç”¨ Ingress æ§åˆ¶å™¨</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å•Ÿç”¨ Ingress æ§åˆ¶å™¨é™„åŠ å…ƒä»¶</span></span><br><span class="line">minikube addons enable ingress</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç­‰å¾… Ingress æ§åˆ¶å™¨ Pod æº–å‚™å®Œæˆ</span></span><br><span class="line">kubectl -n ingress-nginx get pods -l app.kubernetes.io/component=controller -w</span><br></pre></td></tr></table></figure><blockquote><p><strong>æç¤º</strong>: ä½¿ç”¨ <code>-w</code> åƒæ•¸å¯ä»¥æŒçºŒç›£çœ‹ Pod ç‹€æ…‹è®ŠåŒ–ï¼Œçœ‹åˆ° Running ç‹€æ…‹æ™‚æŒ‰ Ctrl+C é€€å‡º</p></blockquote><h4 id="æ­¥é©ŸäºŒï¼šæº–å‚™-Kubernetes-YAML-é…ç½®æª”"><a href="#æ­¥é©ŸäºŒï¼šæº–å‚™-Kubernetes-YAML-é…ç½®æª”" class="headerlink" title="æ­¥é©ŸäºŒï¼šæº–å‚™ Kubernetes YAML é…ç½®æª”"></a>æ­¥é©ŸäºŒï¼šæº–å‚™ Kubernetes YAML é…ç½®æª”</h4><p>ä»¥ä¸‹æ˜¯ä¸€å€‹å®Œæ•´çš„ Tomcat éƒ¨ç½²é…ç½®ï¼ŒåŒ…å« Deploymentã€Service å’Œ Ingress ä¸‰å€‹è³‡æºï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">apps/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Deployment</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">tomcat-deployment</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">replicas:</span> <span class="number">1</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">matchLabels:</span></span><br><span class="line">      <span class="attr">app:</span> <span class="string">tomcat</span></span><br><span class="line">  <span class="attr">template:</span></span><br><span class="line">    <span class="attr">metadata:</span></span><br><span class="line">      <span class="attr">labels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">tomcat</span></span><br><span class="line">    <span class="attr">spec:</span></span><br><span class="line">      <span class="attr">containers:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">tomcat</span></span><br><span class="line">        <span class="attr">image:</span> <span class="string">tomcat:10.1-jdk17</span></span><br><span class="line">        <span class="attr">ports:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">containerPort:</span> <span class="number">8080</span></span><br><span class="line">        <span class="attr">command:</span> [<span class="string">&quot;/bin/sh&quot;</span>,<span class="string">&quot;-c&quot;</span>]</span><br><span class="line">        <span class="attr">args:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">cp</span> <span class="string">-r</span> <span class="string">/usr/local/tomcat/webapps.dist/ROOT</span> <span class="string">/usr/local/tomcat/webapps/</span> <span class="string">&amp;&amp;</span> <span class="string">exec</span> <span class="string">catalina.sh</span> <span class="string">run</span></span><br><span class="line">        <span class="attr">readinessProbe:</span></span><br><span class="line">          <span class="attr">httpGet:</span></span><br><span class="line">            <span class="attr">path:</span> <span class="string">/</span></span><br><span class="line">            <span class="attr">port:</span> <span class="number">8080</span></span><br><span class="line">          <span class="attr">initialDelaySeconds:</span> <span class="number">10</span></span><br><span class="line">          <span class="attr">periodSeconds:</span> <span class="number">5</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Service</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">tomcat-service</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">ClusterIP</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">app:</span> <span class="string">tomcat</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">http</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">8080</span></span><br><span class="line">      <span class="attr">targetPort:</span> <span class="number">8080</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.k8s.io/v1</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Ingress</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">tomcat-ingress</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">ingressClassName:</span> <span class="string">nginx</span></span><br><span class="line">  <span class="attr">rules:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">http:</span></span><br><span class="line">      <span class="attr">paths:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">path:</span> <span class="string">/</span></span><br><span class="line">        <span class="attr">pathType:</span> <span class="string">Prefix</span></span><br><span class="line">        <span class="attr">backend:</span></span><br><span class="line">          <span class="attr">service:</span></span><br><span class="line">            <span class="attr">name:</span> <span class="string">tomcat-service</span></span><br><span class="line">            <span class="attr">port:</span></span><br><span class="line">              <span class="attr">number:</span> <span class="number">8080</span></span><br></pre></td></tr></table></figure><h4 id="æ­¥é©Ÿä¸‰ï¼šéƒ¨ç½²æœå‹™åˆ°é›†ç¾¤"><a href="#æ­¥é©Ÿä¸‰ï¼šéƒ¨ç½²æœå‹™åˆ°é›†ç¾¤" class="headerlink" title="æ­¥é©Ÿä¸‰ï¼šéƒ¨ç½²æœå‹™åˆ°é›†ç¾¤"></a>æ­¥é©Ÿä¸‰ï¼šéƒ¨ç½²æœå‹™åˆ°é›†ç¾¤</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">éƒ¨ç½² YAML é…ç½®åˆ°é›†ç¾¤</span></span><br><span class="line">kubectl apply -f tomcat.yaml</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹ Pod é‹è¡Œç‹€æ…‹</span></span><br><span class="line">kubectl get pods</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹æ‰€æœ‰ç›¸é—œè³‡æºç‹€æ…‹</span></span><br><span class="line">kubectl get deployment,service,ingress</span><br></pre></td></tr></table></figure><p>é©—è­‰æœå‹™æ˜¯å¦æ­£å¸¸é‹è¡Œï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å–å¾— Minikube é›†ç¾¤ IP ä½å€</span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">MINIKUBE_IP=$(minikube ip)</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹ Minikube IP</span></span><br><span class="line">echo &quot;Minikube IP: $MINIKUBE_IP&quot;</span><br></pre></td></tr></table></figure><p>ç¾åœ¨å¯ä»¥åœ¨ç€è¦½å™¨ä¸­é–‹å•Ÿ <code>http://$MINIKUBE_IP</code> ä¾†æŸ¥çœ‹ Tomcat æ­¡è¿é é¢ã€‚</p><img src="/2025/09/23/minikube-install-2025/minikube_tomcat_host.png" class=""><h2 id="VirtualBox-ç’°å¢ƒç‰¹æ®Šè¨­å®š"><a href="#VirtualBox-ç’°å¢ƒç‰¹æ®Šè¨­å®š" class="headerlink" title="VirtualBox ç’°å¢ƒç‰¹æ®Šè¨­å®š"></a>VirtualBox ç’°å¢ƒç‰¹æ®Šè¨­å®š</h2><p>å¦‚æœæ‚¨æ˜¯åœ¨ VirtualBox è™›æ“¬æ©Ÿä¸­é‹è¡Œ Ubuntu Serverï¼Œéœ€è¦é€²è¡Œé¡å¤–çš„ç¶²è·¯è¨­å®šä»¥ä¾¿å¾ä¸»æ©Ÿå­˜å–æœå‹™ã€‚</p><h3 id="SSH-éš§é“è¨­å®š"><a href="#SSH-éš§é“è¨­å®š" class="headerlink" title="SSH éš§é“è¨­å®š"></a>SSH éš§é“è¨­å®š</h3><p>ç”±æ–¼ VirtualBox NAT ç¶²è·¯çš„é™åˆ¶ï¼Œæˆ‘å€‘éœ€è¦å»ºç«‹ SSH éš§é“ä¾†æ©‹æ¥ä¸»æ©Ÿèˆ‡è™›æ“¬æ©Ÿå…§çš„æœå‹™ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å»ºç«‹ SSH éš§é“ï¼Œå°‡ä¸»æ©Ÿçš„ 18080 åŸ è½‰ç™¼åˆ° Minikube çš„ 80 åŸ </span></span><br><span class="line"><span class="comment"># å‡è¨­æ‚¨çš„ SSH æœå‹™é‹è¡Œåœ¨è™›æ“¬æ©Ÿçš„ 2222 åŸ ä¸Š</span></span><br><span class="line">ssh -N -L 18080:<span class="variable">$MINIKUBE_IP</span>:80 -p 2222 <span class="variable">$USER</span>@127.0.0.1</span><br></pre></td></tr></table></figure><p><strong>åƒæ•¸èªªæ˜</strong>ï¼š</p><ul><li><code>-N</code>: ä¸åŸ·è¡Œé ç«¯æŒ‡ä»¤ï¼Œåƒ…ç”¨æ–¼å»ºç«‹éš§é“</li><li><code>-L 18080:$MINIKUBE_IP:80</code>: å°‡æœ¬æ©Ÿ 18080 åŸ è½‰ç™¼åˆ°ç›®æ¨™çš„ 80 åŸ </li><li><code>-p 2222</code>: SSH æœå‹™åŸ è™Ÿ</li><li><code>$USER@127.0.0.1</code>: ä½¿ç”¨è€…åç¨±å’Œè™›æ“¬æ©Ÿä½å€</li></ul><p>è¨­å®šå®Œæˆå¾Œï¼Œæ‚¨å°±å¯ä»¥åœ¨ Windows ä¸»æ©Ÿçš„ç€è¦½å™¨ä¸­è¼¸å…¥ <code>http://localhost:18080</code> ä¾†å­˜å– Tomcat æœå‹™ã€‚</p><h3 id="VirtualBox-NAT-è¨­å®š"><a href="#VirtualBox-NAT-è¨­å®š" class="headerlink" title="VirtualBox NAT è¨­å®š"></a>VirtualBox NAT è¨­å®š</h3><p>ç¢ºä¿æ‚¨çš„ VirtualBox è™›æ“¬æ©Ÿç¶²è·¯è¨­å®šå¦‚ä¸‹ï¼š</p><ol><li>ç¶²è·¯ä»‹é¢å¡è¨­å®šç‚º <strong>NAT</strong> æ¨¡å¼</li><li>é€²éšè¨­å®šä¸­é–‹å•Ÿ<strong>åŸ è½‰ç™¼</strong>è¦å‰‡ï¼š</li></ol><img src="/2025/09/23/minikube-install-2025/virtual_box_nat.png" class=""><h3 id="ç¶²è·¯æ¶æ§‹åœ–"><a href="#ç¶²è·¯æ¶æ§‹åœ–" class="headerlink" title="ç¶²è·¯æ¶æ§‹åœ–"></a>ç¶²è·¯æ¶æ§‹åœ–</h3><p>ä¸‹åœ–å±•ç¤ºäº†å®Œæ•´çš„ Minikube + Tomcat + Ingress ç¶²è·¯æ¶æ§‹ï¼š</p><img src="/2025/09/23/minikube-install-2025/net.svg" class="" title="Minikube Tomcat Ingress ç¶²è·¯æ¶æ§‹åœ–"><h2 id="ç¸½çµ"><a href="#ç¸½çµ" class="headerlink" title="ç¸½çµ"></a>ç¸½çµ</h2><p>æœ¬æ–‡è©³ç´°ä»‹ç´¹äº†åœ¨ Ubuntu 24.04.3 ä¸Šå»ºç½® Minikube é–‹ç™¼ç’°å¢ƒçš„å®Œæ•´æµç¨‹ï¼ŒåŒ…å«ï¼š</p><h3 id="ä¸»è¦å®Œæˆé …ç›®"><a href="#ä¸»è¦å®Œæˆé …ç›®" class="headerlink" title="ä¸»è¦å®Œæˆé …ç›®"></a>ä¸»è¦å®Œæˆé …ç›®</h3><ol><li><strong>ç³»çµ±ç’°å¢ƒæº–å‚™</strong> - å®‰è£å¿…è¦çš„åŸºç¤å¥—ä»¶å’Œå·¥å…·</li><li><strong>Docker å®¹å™¨å¼•æ“</strong> - ä½œç‚º Minikube çš„å®¹å™¨é‹è¡Œæ™‚</li><li><strong>kubectl å·¥å…·</strong> - Kubernetes çš„å‘½ä»¤åˆ—ç®¡ç†ä»‹é¢</li><li><strong>Minikube æœ¬æ©Ÿé›†ç¾¤</strong> - å–®ç¯€é» Kubernetes ç’°å¢ƒ</li><li><strong>å®Œæ•´æ‡‰ç”¨éƒ¨ç½²</strong> - Tomcat Web æœå‹™çš„å¯¦éš›ç¯„ä¾‹</li><li><strong>Ingress æ§åˆ¶å™¨</strong> - è™•ç†å¤–éƒ¨æµé‡çš„å…¥å£ç®¡ç†</li><li><strong>VirtualBox æ•´åˆ</strong> - è™›æ“¬æ©Ÿç’°å¢ƒä¸‹çš„ç¶²è·¯è¨­å®š</li></ol><h3 id="ä¸‹ä¸€æ­¥å»ºè­°"><a href="#ä¸‹ä¸€æ­¥å»ºè­°" class="headerlink" title="ä¸‹ä¸€æ­¥å»ºè­°"></a>ä¸‹ä¸€æ­¥å»ºè­°</h3><p>å®Œæˆæœ¬æ•™å­¸å¾Œï¼Œæ‚¨å¯ä»¥ï¼š</p><ul><li>å˜—è©¦éƒ¨ç½²å…¶ä»–é¡å‹çš„æ‡‰ç”¨ç¨‹å¼ï¼ˆå¦‚ MySQLã€Redis ç­‰ï¼‰</li><li>å­¸ç¿’ Kubernetes çš„é€²éšæ¦‚å¿µï¼ˆConfigMapã€Secretã€PersistentVolumeï¼‰</li><li>æ¢ç´¢ Minikube çš„å…¶ä»–é™„åŠ å…ƒä»¶ï¼ˆMetrics Serverã€Dashboard ç­‰ï¼‰</li><li>å¯¦é©—ä¸åŒçš„éƒ¨ç½²ç­–ç•¥ï¼ˆRolling Updateã€Blue-Green Deploymentï¼‰</li></ul><h3 id="å¸¸è¦‹å•é¡Œæ’é™¤"><a href="#å¸¸è¦‹å•é¡Œæ’é™¤" class="headerlink" title="å¸¸è¦‹å•é¡Œæ’é™¤"></a>å¸¸è¦‹å•é¡Œæ’é™¤</h3><ul><li>å¦‚æœé‡åˆ°è³‡æºä¸è¶³çš„å•é¡Œï¼Œå¯ä»¥èª¿æ•´ Minikube çš„è¨˜æ†¶é«”å’Œ CPU é…ç½®</li><li>è‹¥æœå‹™ç„¡æ³•å­˜å–ï¼Œè«‹æª¢æŸ¥é˜²ç«ç‰†è¨­å®šå’Œç¶²è·¯é…ç½®</li><li>Docker æ¬Šé™å•é¡Œè«‹ç¢ºèªä½¿ç”¨è€…æ˜¯å¦å·²åŠ å…¥ docker ç¾¤çµ„</li></ul><p>é€éé€™å€‹ç’°å¢ƒï¼Œæ‚¨å·²ç¶“å…·å‚™äº†æœ¬åœ° Kubernetes é–‹ç™¼çš„åŸºç¤è¨­æ–½ï¼Œå¯ä»¥é–‹å§‹æ¢ç´¢å®¹å™¨ç·¨æ’å’Œå¾®æœå‹™æ¶æ§‹çš„ç²¾å½©ä¸–ç•Œã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åœ¨ç¾ä»£å®¹å™¨åŒ–é–‹ç™¼ç’°å¢ƒä¸­ï¼ŒMinikube æ˜¯å­¸ç¿’å’Œæ¸¬è©¦ Kubernetes çš„çµ•ä½³å·¥å…·ã€‚æœ¬æ–‡å°‡è©³ç´°ä»‹ç´¹å¦‚ä½•åœ¨ Ubuntu 24.04.3 LTS ä¸Šå®Œæ•´å»ºç½® Minikube ç’°å¢ƒï¼ŒåŒ…å« Docker å®¹å™¨å¼•æ“ã€kubectl å‘½ä»¤åˆ—å·¥å…·ï¼Œä»¥åŠå®Œæ•´çš„ Tomcat æœå‹™éƒ¨ç½²ç¯„ä¾‹ã€‚&lt;/p&gt;
&lt;p&gt;ç„¡è«–æ‚¨æ˜¯ Kubernetes åˆå­¸è€…é‚„æ˜¯éœ€è¦æœ¬åœ°é–‹ç™¼ç’°å¢ƒçš„å·¥ç¨‹å¸«ï¼Œé€™ç¯‡æŒ‡å—éƒ½å°‡å”åŠ©æ‚¨å¿«é€Ÿå»ºç«‹ä¸€å€‹åŠŸèƒ½å®Œæ•´çš„æœ¬åœ° Kubernetes é›†ç¾¤ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ç’°å¢ƒéœ€æ±‚&quot;&gt;&lt;a href=&quot;#ç’°å¢ƒéœ€æ±‚&quot; class=&quot;headerlink&quot; title=&quot;ç’°å¢ƒéœ€æ±‚&quot;&gt;&lt;/a&gt;ç’°å¢ƒéœ€æ±‚&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä½œæ¥­ç³»çµ±&lt;/strong&gt;: Ubuntu 24.04.3 LTS&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¨˜æ†¶é«”&lt;/strong&gt;: å»ºè­°è‡³å°‘ 4GB RAM&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¡¬ç¢Ÿç©ºé–“&lt;/strong&gt;: å»ºè­°è‡³å°‘ 20GB å¯ç”¨ç©ºé–“&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¶²è·¯&lt;/strong&gt;: å¯å­˜å–ç¶²éš›ç¶²è·¯é€²è¡Œå¥—ä»¶ä¸‹è¼‰&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="kubernetes" scheme="https://pcion123.github.io/categories/kubernetes/"/>
    
    
      <category term="linux" scheme="https://pcion123.github.io/tags/linux/"/>
    
      <category term="ubuntu" scheme="https://pcion123.github.io/tags/ubuntu/"/>
    
      <category term="docker" scheme="https://pcion123.github.io/tags/docker/"/>
    
      <category term="kubernetes" scheme="https://pcion123.github.io/tags/kubernetes/"/>
    
      <category term="minikube" scheme="https://pcion123.github.io/tags/minikube/"/>
    
  </entry>
  
  <entry>
    <title>ç¾åŒ– PowerShellï¼šOh My Posh å…¨æ”»ç•¥ (2025)</title>
    <link href="https://pcion123.github.io/2025/09/18/powershell-improve-2025/"/>
    <id>https://pcion123.github.io/2025/09/18/powershell-improve-2025/</id>
    <published>2025-09-18T14:43:20.000Z</published>
    <updated>2025-09-24T16:35:34.840Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘æŠŠå…§å»ºçš„ Windows PowerShell 5.1 ç›´æ¥å‡ç´šåˆ°è·¨å¹³å°çš„ PowerShell 7ï¼Œå•Ÿå‹•é€Ÿåº¦ã€äº’å‹•è£œå…¨èˆ‡å¤–è§€è‡ªè¨‚ä¸€æ¬¡å¤§é€²åŒ–ã€‚æ–¼æ˜¯æŠŠé€™æ¬¡å¾ã€Œå‡ç´š â†’ æ¬Šé™å·¥å…· (gsudo) â†’ Prompt ç¾åŒ– (Oh My Posh) â†’ æ–‡å­—&#x2F;å­—å‹ â†’ çµ‚ç«¯é¡è‰²ä¸»é¡Œã€çš„å®Œæ•´æµç¨‹æ•´ç†æˆç­†è¨˜ï¼Œä¹‹å¾Œé‡è£æˆ–æ›æ©Ÿä¹Ÿèƒ½å¿«é€Ÿè¤‡è£½ã€‚ </p><p>é€™ç¯‡ä½ å°‡æœƒç²å¾—ï¼š</p><ol><li>ä¹¾æ·¨å¯é‡ç¾çš„ Profile åˆå§‹åŒ–æ­¥é©Ÿ</li><li>æå‡æ•ˆç‡çš„è£œå…¨èˆ‡æ¬Šé™æ“ä½œè¨­å®š</li><li>ä¸€å¥—æ¼‚äº®åˆè³‡è¨Šé‡è¶³å¤ çš„ Prompt ä¸»é¡Œ</li><li>Windows Terminal é…è‰²èˆ‡å­—å‹å»ºè­°</li></ol><p>å…ˆä¾†çœ‹çœ‹å‡ç´šå‰ã€Œå°šæœªç¾åŒ–ã€çš„æ¨£å­ï¼Œç„¶å¾Œé–‹å§‹æ”¹é€ ï¼š</p><img src="/2025/09/18/powershell-improve-2025/powershell_old.png" class=""><span id="more"></span><h2 id="PowerShell-Profile-æº–å‚™"><a href="#PowerShell-Profile-æº–å‚™" class="headerlink" title="PowerShell Profile æº–å‚™"></a>PowerShell Profile æº–å‚™</h2><p>ä¹‹å¾Œçš„åŠŸèƒ½ï¼ˆè‡ªå‹•è£œå…¨ã€åˆ¥åã€æç¤ºä¸»é¡Œç­‰ï¼‰éƒ½æœƒå¯«é€²å€‹äºº Profileã€‚å…ˆç¢ºèªç›®å‰çš„ <code>$PROFILE</code> æ˜¯å¦å­˜åœ¨ï¼Œæ²’æœ‰å°±å»ºç«‹ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹ç›®å‰ä½¿ç”¨çš„ Profile è·¯å¾‘</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$PROFILE</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æª¢æŸ¥æª”æ¡ˆæ˜¯å¦å­˜åœ¨ï¼ˆTrue = å·²å­˜åœ¨ï¼‰</span></span><br><span class="line">Test-Path <span class="variable">$PROFILE</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç›´æ¥ç”¨è¨˜äº‹æœ¬ç·¨è¼¯</span></span><br><span class="line">notepad <span class="variable">$PROFILE</span></span><br></pre></td></tr></table></figure><h3 id="Windows-PowerShell-5-1-ç›®éŒ„"><a href="#Windows-PowerShell-5-1-ç›®éŒ„" class="headerlink" title="Windows PowerShell 5.1 ç›®éŒ„"></a>Windows PowerShell 5.1 ç›®éŒ„</h3><p>èˆŠç‰ˆï¼ˆå…§å»ºï¼‰ä½¿ç”¨çš„ç›®éŒ„åç¨±æ˜¯ <code>WindowsPowerShell</code>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æª¢æŸ¥èˆŠç‰ˆç›®éŒ„æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">Test-Path <span class="string">&quot;C:\Users\&#123;ä½ çš„å¸³æˆ¶&#125;\Documents\WindowsPowerShell&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å»ºç«‹ç›®éŒ„ï¼ˆè‹¥ä¸å­˜åœ¨ï¼‰</span></span><br><span class="line">New-Item -ItemType Directory -Path <span class="string">&quot;C:\Users\&#123;ä½ çš„å¸³æˆ¶&#125;\Documents\WindowsPowerShell&quot;</span> -Force</span><br><span class="line"></span><br><span class="line"><span class="comment"># å»ºç«‹ Profileï¼ˆç©ºæª”æ¡ˆï¼‰</span></span><br><span class="line">New-Item -ItemType File -Path <span class="variable">$PROFILE</span> -Force</span><br></pre></td></tr></table></figure><h3 id="PowerShell-7-ç›®éŒ„"><a href="#PowerShell-7-ç›®éŒ„" class="headerlink" title="PowerShell 7 ç›®éŒ„"></a>PowerShell 7 ç›®éŒ„</h3><p>PowerShell 7 ä¹‹å¾Œæ”¹ç”¨æ–°ç›®éŒ„ <code>PowerShell</code>ï¼Œä¸è¦æ··ç”¨ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æª¢æŸ¥æ–°ç‰ˆç›®éŒ„æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">Test-Path <span class="string">&quot;C:\Users\&#123;ä½ çš„å¸³æˆ¶&#125;\Documents\PowerShell&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å»ºç«‹ç›®éŒ„</span></span><br><span class="line">New-Item -ItemType Directory -Path <span class="string">&quot;C:\Users\&#123;ä½ çš„å¸³æˆ¶&#125;\Documents\PowerShell&quot;</span> -Force</span><br><span class="line"></span><br><span class="line"><span class="comment"># å»ºç«‹ Profile</span></span><br><span class="line">New-Item -ItemType File -Path <span class="variable">$PROFILE</span> -Force</span><br></pre></td></tr></table></figure><h2 id="å®‰è£-PowerShell-7"><a href="#å®‰è£-PowerShell-7" class="headerlink" title="å®‰è£ PowerShell 7"></a>å®‰è£ PowerShell 7</h2><p>ä½¿ç”¨ winget æœ€æ–¹ä¾¿ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£</span></span><br><span class="line">winget install --<span class="built_in">id</span> Microsoft.Powershell --<span class="built_in">source</span> winget</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ›´æ–°</span></span><br><span class="line">winget upgrade --<span class="built_in">id</span> Microsoft.Powershell</span><br></pre></td></tr></table></figure><h3 id="å•Ÿç”¨æŒ‡ä»¤æ­·å²-AI-é æ¸¬è£œå…¨"><a href="#å•Ÿç”¨æŒ‡ä»¤æ­·å²-AI-é æ¸¬è£œå…¨" class="headerlink" title="å•Ÿç”¨æŒ‡ä»¤æ­·å² + AI é æ¸¬è£œå…¨"></a>å•Ÿç”¨æŒ‡ä»¤æ­·å² + AI é æ¸¬è£œå…¨</h3><p>å»ºè­°åœ¨ Profile ä¸­åŠ å…¥ PSReadLine è¨­å®šï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨æ­·å²ç´€éŒ„ (History) + å¤–æ›/æ“´å……ä¾†æº (Plugin) åŒæ™‚æä¾›é æ¸¬å»ºè­°ã€‚</span></span><br><span class="line"><span class="comment"># å…¶ä»–å¯é¸å€¼ï¼šNone / History / Plugin / HistoryAndPlugin</span></span><br><span class="line"><span class="built_in">Set-PSReadLineOption</span> <span class="literal">-PredictionSource</span> HistoryAndPlugin</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°‡å¤šç­†å»ºè­°ä»¥æ¸…å–®é¢æ¿é¡¯ç¤ºæ–¼æ¸¸æ¨™ä¸‹æ–¹ï¼ˆListViewï¼‰ã€‚</span></span><br><span class="line"><span class="comment"># è‹¥åå¥½è¡Œå…§ç°è‰²å­—é«”ï¼Œå¯æ”¹ç”¨ï¼šInlineView</span></span><br><span class="line"><span class="built_in">Set-PSReadLineOption</span> <span class="literal">-PredictionViewStyle</span> ListView</span><br></pre></td></tr></table></figure><p>è‹¥æƒ³ç«‹å³æ¸¬è©¦ï¼šæŠŠä»¥ä¸Šè²¼é€² <code>notepad $PROFILE</code> é–‹å•Ÿçš„æª”æ¡ˆæœ«ç«¯å¾Œå­˜æª”ï¼Œå†é–‹æ–°è¦–çª—ç”Ÿæ•ˆã€‚</p><h2 id="gsudoï¼šå¿«é€Ÿå–å¾—ç³»çµ±æ¬Šé™"><a href="#gsudoï¼šå¿«é€Ÿå–å¾—ç³»çµ±æ¬Šé™" class="headerlink" title="gsudoï¼šå¿«é€Ÿå–å¾—ç³»çµ±æ¬Šé™"></a>gsudoï¼šå¿«é€Ÿå–å¾—ç³»çµ±æ¬Šé™</h2><p><code>gsudo</code> å¯è¦–ç‚º Windows ç‰ˆ <code>sudo</code>ï¼Œä¸ç”¨æ¯æ¬¡å†æ‰‹å‹•å•Ÿå‹•ã€Œä»¥ç³»çµ±ç®¡ç†å“¡èº«åˆ†åŸ·è¡Œã€ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£</span></span><br><span class="line">winget install gerardog.gsudo</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ›´æ–°</span></span><br><span class="line">winget upgrade gerardog.gsudo</span><br></pre></td></tr></table></figure><p>åœ¨ Profile ä¸­åŠ å…¥åˆ¥åï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Set-Alias</span> sudo gsudo</span><br></pre></td></tr></table></figure><p>å¦‚æœåœ¨ Windows Terminal ä¸­æƒ³å»ºç«‹ä¸€å€‹è‡ªå‹•ææ¬Šå•Ÿå‹• PowerShell 7 çš„å‘½ä»¤ï¼Œå¯åœ¨è¨­å®šä¸­æŒ‡å®šï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gsudo.exe &quot;C:\Program Files\PowerShell\7\pwsh.exe&quot;</span><br></pre></td></tr></table></figure><img src="/2025/09/18/powershell-improve-2025/gsudo_command_setting.png" class=""><h2 id="Oh-My-Poshï¼šPrompt-ä¸»é¡Œç¾åŒ–"><a href="#Oh-My-Poshï¼šPrompt-ä¸»é¡Œç¾åŒ–" class="headerlink" title="Oh My Poshï¼šPrompt ä¸»é¡Œç¾åŒ–"></a>Oh My Poshï¼šPrompt ä¸»é¡Œç¾åŒ–</h2><h3 id="å®‰è£-Nerd-Font-å­—å‹"><a href="#å®‰è£-Nerd-Font-å­—å‹" class="headerlink" title="å®‰è£ Nerd Font å­—å‹"></a>å®‰è£ Nerd Font å­—å‹</h3><p>å…ˆåˆ° <a href="https://www.nerdfonts.com/font-downloads">Nerd Fonts å®˜ç¶²</a> ä¸‹è¼‰ä¸€æ¬¾å­—å‹ï¼ˆå»ºè­° FiraCode &#x2F; Meslo &#x2F; JetBrainsMonoï¼‰ï¼Œå®‰è£å¾Œåˆ° Windows Terminal çš„è©² Profile å…§å¥—ç”¨ï¼Œé¿å…ç¬¦è™Ÿäº‚ç¢¼ã€‚</p><h3 id="å®‰è£-Oh-My-Posh"><a href="#å®‰è£-Oh-My-Posh" class="headerlink" title="å®‰è£ Oh My Posh"></a>å®‰è£ Oh My Posh</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">winget install JanDeDobbeleer.OhMyPosh -s winget</span><br><span class="line">winget upgrade JanDeDobbeleer.OhMyPosh</span><br></pre></td></tr></table></figure><h3 id="å•Ÿç”¨ä¸¦æŒ‡å®šä¸»é¡Œ"><a href="#å•Ÿç”¨ä¸¦æŒ‡å®šä¸»é¡Œ" class="headerlink" title="å•Ÿç”¨ä¸¦æŒ‡å®šä¸»é¡Œ"></a>å•Ÿç”¨ä¸¦æŒ‡å®šä¸»é¡Œ</h3><p>åœ¨ Profile å…§åŠ å…¥ï¼ˆå¯å…ˆç”¨ <code>notepad $PROFILE</code> é–‹å•Ÿï¼‰ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆå§‹åŒ–ï¼ˆé è¨­ä¸»é¡Œï¼‰</span></span><br><span class="line"><span class="built_in">oh</span><span class="literal">-my-posh</span> init pwsh | <span class="built_in">Invoke-Expression</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‡å®š paradox ä¸»é¡Œï¼ˆå¯æ”¹æˆä»»æ„ .omp.jsonï¼‰</span></span><br><span class="line"><span class="built_in">oh</span><span class="literal">-my-posh</span> init pwsh <span class="literal">--config</span> <span class="string">&quot;<span class="variable">$env:POSH_THEMES_PATH</span>\paradox.omp.json&quot;</span> | <span class="built_in">Invoke-Expression</span></span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹æœ‰å“ªäº›å…§å»ºä¸»é¡Œï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Get-ChildItem</span> <span class="variable">$env:POSH_THEMES_PATH</span> <span class="literal">-Recurse</span> <span class="literal">-Filter</span> <span class="string">&quot;*.omp.json&quot;</span></span><br></pre></td></tr></table></figure><p>ä¿®æ”¹å¾Œé‡æ–°é–‹ä¸€å€‹æ–°çš„ PowerShell è¦–çª—å³å¯çœ‹åˆ°æ•ˆæœã€‚</p><h2 id="å®‰è£-Gitï¼ˆè‹¥å°šæœªå®‰è£ï¼‰"><a href="#å®‰è£-Gitï¼ˆè‹¥å°šæœªå®‰è£ï¼‰" class="headerlink" title="å®‰è£ Gitï¼ˆè‹¥å°šæœªå®‰è£ï¼‰"></a>å®‰è£ Gitï¼ˆè‹¥å°šæœªå®‰è£ï¼‰</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">winget install --<span class="built_in">id</span> Git.Git -e --<span class="built_in">source</span> winget</span><br><span class="line">winget upgrade Git.Git</span><br></pre></td></tr></table></figure><h2 id="Windows-Terminal-ä¸»é¡Œé…è‰²ï¼ˆSchemesï¼‰"><a href="#Windows-Terminal-ä¸»é¡Œé…è‰²ï¼ˆSchemesï¼‰" class="headerlink" title="Windows Terminal ä¸»é¡Œé…è‰²ï¼ˆSchemesï¼‰"></a>Windows Terminal ä¸»é¡Œé…è‰²ï¼ˆSchemesï¼‰</h2><p>å¯åˆ° <a href="https://windowsterminalthemes.dev/">Windows Terminal Themes</a> æŒ‘é¸å–œæ­¡çš„è‰²ç¥¨ï¼Œå°‡ JSON ç‰‡æ®µè²¼é€²è¨­å®šæª”çš„ <code>schemes</code> é™£åˆ—ï¼Œå†æ–¼å°æ‡‰ Profile è¨­ <code>&quot;colorScheme&quot;</code> ç‚ºè©²åç¨±ã€‚</p><img src="/2025/09/18/powershell-improve-2025/windows_terminal_themes.png" class=""><p>ä¾‹å¦‚ <code>Espresso</code>ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;background&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#323232&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;black&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#353535&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;blue&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#6C99BB&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;brightBlack&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#535353&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;brightBlue&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#8AB7D9&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;brightCyan&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#DCF4FF&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;brightGreen&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#C2E075&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;brightPurple&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#EFB5F7&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;brightRed&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#F00C0C&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;brightWhite&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#FFFFFF&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;brightYellow&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#E1E48B&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;cursorColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#D6D6D6&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;cyan&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#BED6FF&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;foreground&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#FFFFFF&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;green&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#A5C261&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Espresso&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;purple&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#D197D9&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;red&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#D25252&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;selectionBackground&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#5B5B5B&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;white&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#EEEEEC&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;yellow&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#FFC66D&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>é–‹å•Ÿ JSON è¨­å®šï¼š</p><img src="/2025/09/18/powershell-improve-2025/windows_terminal_json.png" class=""><ol><li>å°‡ä¸Šè¿°ç‰‡æ®µåŠ å…¥ <code>schemes</code>ã€‚</li><li>åœ¨å°æ‡‰çš„ Profile ä¸­è¨­å®šï¼š<code>&quot;colorScheme&quot;: &quot;Espresso&quot;</code>ã€‚</li></ol><h2 id="VS-Code-çµ‚ç«¯æ©Ÿè¨­å®š"><a href="#VS-Code-çµ‚ç«¯æ©Ÿè¨­å®š" class="headerlink" title="VS Code çµ‚ç«¯æ©Ÿè¨­å®š"></a>VS Code çµ‚ç«¯æ©Ÿè¨­å®š</h2><p>å¦‚æœä½ æœ‰åœ¨ä½¿ç”¨ VS Codeï¼Œè¨˜å¾—åŒæ­¥èª¿æ•´ç·¨è¼¯å™¨å…§å»ºçµ‚ç«¯æ©Ÿçš„å­—å‹è¨­å®šï¼Œå¦å‰‡ Oh My Posh çš„ç‰¹æ®Šç¬¦è™Ÿæœƒå‡ºç¾äº‚ç¢¼ã€‚</p><h3 id="è¨­å®šæ­¥é©Ÿ"><a href="#è¨­å®šæ­¥é©Ÿ" class="headerlink" title="è¨­å®šæ­¥é©Ÿ"></a>è¨­å®šæ­¥é©Ÿ</h3><ol><li>é–‹å•Ÿ VS Code è¨­å®šï¼ˆ<code>Ctrl + ,</code> æˆ– <code>File &gt; Preferences &gt; Settings</code>ï¼‰</li><li>æœå°‹ <code>terminal.integrated.fontFamily</code></li><li>å°‡å­—å‹è¨­å®šç‚ºä½ å‰›æ‰å®‰è£çš„ Nerd Fontï¼Œä¾‹å¦‚ï¼š<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x27;FiraCode Nerd Font&#x27;, &#x27;Meslo LG M DZ for Powerline&#x27;, Consolas, &#x27;Courier New&#x27;, monospace</span><br></pre></td></tr></table></figure></li></ol><h3 id="å»ºè­°è¨­å®šå€¼"><a href="#å»ºè­°è¨­å®šå€¼" class="headerlink" title="å»ºè­°è¨­å®šå€¼"></a>å»ºè­°è¨­å®šå€¼</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;terminal.integrated.fontFamily&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&#x27;FiraCode Nerd Font&#x27;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;terminal.integrated.fontSize&quot;</span><span class="punctuation">:</span> <span class="number">14</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;terminal.integrated.cursorBlinking&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;terminal.integrated.cursorStyle&quot;</span><span class="punctuation">:</span> <span class="string">&quot;line&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>é€™æ¨£è¨­å®šå¾Œï¼ŒVS Code å…§å»ºçµ‚ç«¯æ©Ÿå°±èƒ½æ­£ç¢ºé¡¯ç¤º Oh My Posh çš„æ‰€æœ‰åœ–ç¤ºå’Œç¬¦è™Ÿäº†ã€‚</p><img src="/2025/09/18/powershell-improve-2025/powershell_vscode.png" class=""><h2 id="æˆæœå±•ç¤º"><a href="#æˆæœå±•ç¤º" class="headerlink" title="æˆæœå±•ç¤º"></a>æˆæœå±•ç¤º</h2><img src="https://github.com/pcion123/pcion123.github.io/blob/master/2025/09/18/powershell-improve-2025/pwshdemo.webp?raw=true" alt="PowerShell 7 + Oh My Posh çµ‚ç«¯æˆå“ç¤ºæ„" width="100%" /><p>å¸Œæœ›é€™ç¯‡èƒ½å¹«åŠ©ä½ å¿«é€Ÿæ‰“é€ ä¸€å€‹å¥½çœ‹ã€å¥½è®€ã€å¥½ç”¨çš„çµ‚ç«¯ç’°å¢ƒã€‚å¦‚æœä½ æœ‰æ›´å–œæ­¡çš„ä¸»é¡Œæˆ–é¡å¤–æŠ€å·§ï¼Œä¹Ÿæ­¡è¿åˆ†äº«äº¤æµ ğŸ™Œ</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ€è¿‘æŠŠå…§å»ºçš„ Windows PowerShell 5.1 ç›´æ¥å‡ç´šåˆ°è·¨å¹³å°çš„ PowerShell 7ï¼Œå•Ÿå‹•é€Ÿåº¦ã€äº’å‹•è£œå…¨èˆ‡å¤–è§€è‡ªè¨‚ä¸€æ¬¡å¤§é€²åŒ–ã€‚æ–¼æ˜¯æŠŠé€™æ¬¡å¾ã€Œå‡ç´š â†’ æ¬Šé™å·¥å…· (gsudo) â†’ Prompt ç¾åŒ– (Oh My Posh) â†’ æ–‡å­—&amp;#x2F;å­—å‹ â†’ çµ‚ç«¯é¡è‰²ä¸»é¡Œã€çš„å®Œæ•´æµç¨‹æ•´ç†æˆç­†è¨˜ï¼Œä¹‹å¾Œé‡è£æˆ–æ›æ©Ÿä¹Ÿèƒ½å¿«é€Ÿè¤‡è£½ã€‚ &lt;/p&gt;
&lt;p&gt;é€™ç¯‡ä½ å°‡æœƒç²å¾—ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä¹¾æ·¨å¯é‡ç¾çš„ Profile åˆå§‹åŒ–æ­¥é©Ÿ&lt;/li&gt;
&lt;li&gt;æå‡æ•ˆç‡çš„è£œå…¨èˆ‡æ¬Šé™æ“ä½œè¨­å®š&lt;/li&gt;
&lt;li&gt;ä¸€å¥—æ¼‚äº®åˆè³‡è¨Šé‡è¶³å¤ çš„ Prompt ä¸»é¡Œ&lt;/li&gt;
&lt;li&gt;Windows Terminal é…è‰²èˆ‡å­—å‹å»ºè­°&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å…ˆä¾†çœ‹çœ‹å‡ç´šå‰ã€Œå°šæœªç¾åŒ–ã€çš„æ¨£å­ï¼Œç„¶å¾Œé–‹å§‹æ”¹é€ ï¼š&lt;/p&gt;
&lt;img src=&quot;/2025/09/18/powershell-improve-2025/powershell_old.png&quot; class=&quot;&quot;&gt;
    
    </summary>
    
    
      <category term="windows" scheme="https://pcion123.github.io/categories/windows/"/>
    
    
      <category term="windows" scheme="https://pcion123.github.io/tags/windows/"/>
    
      <category term="powershell" scheme="https://pcion123.github.io/tags/powershell/"/>
    
      <category term="terminal" scheme="https://pcion123.github.io/tags/terminal/"/>
    
      <category term="vscode" scheme="https://pcion123.github.io/tags/vscode/"/>
    
  </entry>
  
  <entry>
    <title>vscode+copiloté–‹ç™¼å¿ƒå¾—</title>
    <link href="https://pcion123.github.io/2025/09/14/vscode-copilot-thoughts/"/>
    <id>https://pcion123.github.io/2025/09/14/vscode-copilot-thoughts/</id>
    <published>2025-09-13T17:31:42.000Z</published>
    <updated>2025-09-13T19:17:42.295Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>è·é›¢ä¸Šä¸€ç¯‡ <a href="https://pcion123.github.io/2025/07/30/vscode-copilot-quick/"><strong>ä½¿ç”¨ vscode+copilot å¿«é€Ÿå»ºç«‹å°ˆæ¡ˆ</strong></a> å·²ç¶“å¿«å…©å€‹æœˆã€‚é€™æ®µæ™‚é–“æˆ‘æŠŠä»¥å‰çš„å°ˆæ¡ˆæ‹¿ä¾†ç•¶ç·´æ‰‹é¡Œï¼ŒæŒçºŒç”¨ vscode æ­é… Copilot åšé‡æ§‹ï¼Œæœ€è¿‘ç®—æ˜¯åˆ°äº†ä¸€å€‹éšæ®µæ€§çš„é‡Œç¨‹ç¢‘ï¼Œä¹Ÿæ¯”è¼ƒæœ‰è³‡æ ¼æ•´ç†ä¸€ä¸‹å¿ƒå¾—èˆ‡é«”æ„Ÿã€‚</p><h2 id="æˆæœé€Ÿè¦½"><a href="#æˆæœé€Ÿè¦½" class="headerlink" title="æˆæœé€Ÿè¦½"></a>æˆæœé€Ÿè¦½</h2><p>å…ˆæ”¾çµæœï¼š<a href="https://github.com/pcion123/tinysocket"><strong>tinysocket</strong></a>ã€‚ä¸‹é¢é€™å¼µæ˜¯ç›®å‰ <code>README.md</code> çš„æˆªåœ–ï¼š</p><img src="/2025/09/14/vscode-copilot-thoughts/tinysocket_intro.png" class=""><span id="more"></span><h2 id="æ–‡ä»¶æ’°å¯«é«”é©—"><a href="#æ–‡ä»¶æ’°å¯«é«”é©—" class="headerlink" title="æ–‡ä»¶æ’°å¯«é«”é©—"></a>æ–‡ä»¶æ’°å¯«é«”é©—</h2><p>è€å¯¦èªªï¼Œéå»æˆ‘éå¸¸ä¸æ“…é•·å¯«èªªæ˜æ–‡ä»¶â€”â€”å¸¸å¸¸å¡åœ¨æªè¾­æˆ–çµæ§‹ã€‚æ›ä¸Š vscode + Copilot ä¹‹å¾Œï¼Œæ•´é«”å¿ƒç†é˜»åŠ›æ˜é¡¯ä¸‹é™ã€‚æˆ‘åªéœ€è¦ä¸Ÿä¸€å¥ï¼š<code>æ›¿å°ˆæ¡ˆé€²è¡Œå®Œæ•´çš„åˆ†æä¸¦ç”Ÿæˆé©åˆçš„æ–‡æª”</code>ï¼Œå®ƒå°±æœƒé–‹å§‹ç”¢å‡ºå…§å®¹ã€‚é›–ç„¶ï¼š</p><ul><li>ç”¢å‡ºçš„èªæ°£å¸¸å¸¸æœ‰ä¸€ç¨®ã€Œéåº¦ç†±æƒ…ã€æˆ–çµ±ä¸€çš„ AI é¢¨æ ¼ã€‚</li><li>å¶çˆ¾æœƒå‡ºç¾ <code>å¹»è¦º</code>ï¼ˆè™›æ§‹ä¸å­˜åœ¨çš„æ¨¡çµ„ &#x2F; åƒæ•¸ &#x2F; æµç¨‹ï¼‰ã€‚</li></ul><p>ä½†åœ¨ã€Œå¿«é€Ÿç”¢å‡ºè‰ç¨¿ã€é€™ä»¶äº‹ä¸Šï¼Œæ•ˆç‡æå‡éå¸¸æ˜é¡¯ã€‚ç¾åœ¨çš„æµç¨‹è®Šæˆï¼šAI å‡ºè‰ç¨¿ â†’ æˆ‘åšå¯¦éš›æ ¡é©—èˆ‡èªæ°£èª¿æ•´ â†’ å®Œæˆæœ€çµ‚ç‰ˆæœ¬ã€‚æ•´é«”æŠ•å…¥çš„å¿ƒåŠ›èˆ‡æ™‚é–“æˆæœ¬éƒ½ä¸‹é™ã€‚</p><h2 id="é‡æ§‹èˆ‡æŠ€è¡“å‡ç´š"><a href="#é‡æ§‹èˆ‡æŠ€è¡“å‡ç´š" class="headerlink" title="é‡æ§‹èˆ‡æŠ€è¡“å‡ç´š"></a>é‡æ§‹èˆ‡æŠ€è¡“å‡ç´š</h2><p>é€™æ¬¡ tinysocket å¾éå»çš„ <code>JDK 11 + Spring Boot 2</code>ï¼Œä¸€æ¬¡è·³åˆ° <code>JDK 21 + Spring Boot 3</code>ã€‚åœ¨é‡æ§‹éç¨‹ä¸­æˆ‘é †æ‰‹èª¿æ•´äº†å¹¾å€‹é•·æœŸæƒ³æ”¹çš„é»ï¼š</p><ul><li>buffer çš„å¯¦ä½œç­–ç•¥ï¼ˆè¨˜æ†¶é«”ä½¿ç”¨èˆ‡è¤‡ç”¨æ¨¡å‹ï¼‰</li><li>protocol çš„è¨»å†Šèˆ‡æ“´å……æ–¹å¼ï¼ˆæ¨¡çµ„åŒ–èˆ‡å¯æ’æ‹”ï¼‰</li><li>server-side &#x2F; client-side é‚è¼¯çš„è·è²¬åˆ‡åˆ†</li></ul><p>æ•´é«”ä»£ç¢¼çµæ§‹ä¹¾æ·¨å¾ˆå¤šï¼Œé–‹ç™¼è¿­ä»£çš„ç¯€å¥ä¹Ÿæ›´é †ã€‚é›–ç„¶é‚„ä¸åˆ°ã€Œvibe codingã€é‚£ç¨®ä¸€æ°£å‘µæˆçš„æ²‰æµ¸æµæš¢ï¼Œä½† AI è¼”åŠ©é–‹ç™¼æ˜¯å¯¦å¯¦åœ¨åœ¨å¹«åŠ©æˆ‘ç”¢å‡ºæƒ³è¦çš„çµæœã€‚é€™ä¸€æ¬¡æˆ‘æ²’æœ‰èŠ±å¤ªå¤šæ™‚é–“é‘½ç ” <code>copilot-instructions.md</code> æˆ– <code>spec.md</code> çš„é€²éšç©æ³•â€”â€”ç´”ç²¹ä»¥ã€Œè‡ªç„¶äº’å‹•ã€çš„ä½¿ç”¨æ¨¡å¼ï¼Œå°±å·²ç¶“æœ‰ä¸éŒ¯çš„æ„Ÿå—ã€‚æ›´ç›´æ¥çš„æ„Ÿæƒ³ï¼švscode + Copilot çš„é«”é©—å®Œå…¨ç¢¾å£“ eclipse + Copilotã€‚å¦‚æœæœªä¾† Copilot é‚„æ˜¯ç„¡æ³•åœ¨ eclipse æ·±åº¦æ•´åˆï¼Œé‚£æˆ‘æœƒå»ºè­°ä¹¾è„†ç›´æ¥è½‰é™£ vscodeã€‚</p><h2 id="å‰ç«¯-Demoï¼ˆAI-å”ä½œï¼‰"><a href="#å‰ç«¯-Demoï¼ˆAI-å”ä½œï¼‰" class="headerlink" title="å‰ç«¯ Demoï¼ˆAI å”ä½œï¼‰"></a>å‰ç«¯ Demoï¼ˆAI å”ä½œï¼‰</h2><p>æˆ‘ä¸æ“…é•·é–‹ç™¼å‰ç«¯ï¼Œä¹Ÿåªç•¥æ‡‚ä¸€é» JSã€‚ä¹‹å‰ç‚ºäº†å±•ç¤º tinysocket çš„ websocket ä½¿ç”¨æƒ…å¢ƒï¼Œå‹‰å¼·åˆ»éä¸€å€‹å¾ˆé™½æ˜¥çš„ demoã€‚é€™æ¬¡å‡ç´šæ™‚æˆ‘æŠŠé‚£å€‹é é¢ä¹Ÿä¸€èµ·ç¿»æ–°ã€‚éç¨‹å¾ˆç°¡å–®ï¼šæˆ‘æè¿°ç¾æœ‰å°ˆæ¡ˆçµæ§‹ã€æƒ³è¦çš„äº’å‹•èˆ‡ç‹€æ…‹ï¼ŒCopilot åœ¨å¹¾åˆ†é˜å…§å°±çµ¦äº†ä¸€å€‹ã€Œèƒ½è·‘ã€æœ‰åŸºæœ¬çµæ§‹èˆ‡æ¨£å¼ã€çš„ç‰ˆæœ¬ã€‚æˆ‘å¾Œé¢å†é‡å°ç´°ç¯€ï¼ˆæ’ç‰ˆ &#x2F; é‚è¼¯å¾®èª¿ &#x2F; éŒ¯èª¤è™•ç†ï¼‰åšä¿®æ­£ã€‚é›–ç„¶ä¸è‡³æ–¼åˆ°éœ‡æ’¼ï¼Œä½†åœ¨ç¬¬ä¸€æ¬¡ç”¢å‡ºçµæœçš„ç¬é–“ï¼Œå¯¦éš›çš„è¡æ“Šæ„Ÿé‚„æ˜¯æœ‰çš„ã€‚</p><p>ä»¥ä¸‹æ˜¯æœ€å¾Œçš„ demo æˆªåœ–ï¼š</p><img src="https://github.com/pcion123/tinysocket/blob/master/demo/assets/chatdemo.webp?raw=true" alt="web demo" width="70%" /><h2 id="å–®å…ƒæ¸¬è©¦èˆ‡æœªä¾†å·¥ä½œæ¨¡å¼"><a href="#å–®å…ƒæ¸¬è©¦èˆ‡æœªä¾†å·¥ä½œæ¨¡å¼" class="headerlink" title="å–®å…ƒæ¸¬è©¦èˆ‡æœªä¾†å·¥ä½œæ¨¡å¼"></a>å–®å…ƒæ¸¬è©¦èˆ‡æœªä¾†å·¥ä½œæ¨¡å¼</h2><p>é€™æ¬¡æˆ‘æ²’æœ‰éå¸¸èªçœŸåœ°è£œé½Šæ‰€æœ‰å–®å…ƒæ¸¬è©¦ï¼Œä½†è©¦è‘—è®“ Copilot å¹«å¿™è¦åŠƒæ¸¬è©¦å ´æ™¯èˆ‡ç”Ÿç”¢æ¸¬è©¦éª¨æ¶ã€‚é«”æ„Ÿçµè«–æ˜¯ï¼šã€Œå–®å…ƒæ¸¬è©¦ 80% å¯ä»¥äº¤çµ¦ AI å…ˆèµ·é ­ã€ã€‚é€éè‡ªç„¶èªè¨€æè¿°ï¼šéœ€æ±‚ â†’ é‚Šç•Œæ¢ä»¶ â†’ ä¾‹å¤–æƒ…å¢ƒï¼ŒAI å°±èƒ½å¿«é€Ÿé‹ªå¥½ä¸€çµ„æ¸¬è©¦æª”ã€‚å¾ŒçºŒäººé¡å†å°ˆæ³¨åœ¨ï¼š</p><ul><li>é‡æ¸…èªæ„æ˜¯å¦èˆ‡å¯¦éš›éœ€æ±‚ä¸€è‡´</li><li>è£œå¼· edge cases</li><li>æ•´åˆ CI &#x2F; coverage é–€æª»</li></ul><p>æœªä¾†çœŸçš„å¯èƒ½è®Šæˆï¼šæ¸¬è©¦å¾ã€æ‰‹å¯«ç”¢å‡ºã€è½‰ç‚ºã€å¯©ç¨¿é©—æ”¶ã€æ¨¡å¼ã€‚</p><h2 id="çµèª"><a href="#çµèª" class="headerlink" title="çµèª"></a>çµèª</h2><p>ç°¡å–®ç¸½çµï¼šå·¥å…·èˆ‡å·¥ä½œæ–¹å¼çš„ç”Ÿæ…‹æ­£åœ¨å¿«é€Ÿè½‰è®Šã€‚AI ä¸æ˜¯ã€Œå–ä»£ã€ï¼Œè€Œæ˜¯æŠŠé‡æ§‹ &#x2F; èµ·ç¨¿ &#x2F; æ¨¡æ¿åŒ–å·¥ä½œæˆæœ¬å¾€ä¸‹å£“ï¼Œè®“æˆ‘å€‘æŠŠè…¦åŠ›ç•™çµ¦ç³»çµ±è¨­è¨ˆã€é—œéµæŠ½è±¡èˆ‡å“è³ªåˆ¤æ–·ã€‚æ¥ä¸‹ä¾†æˆ‘æœƒå†èŠ±äº›æ™‚é–“æ¢ç´¢æ›´é€²éšçš„ä¸Šä¸‹æ–‡é¤µé¤Šï¼ˆå¦‚å°ˆæ¡ˆè¦æ ¼ã€è§’è‰²åŒ–æŒ‡ä»¤ï¼‰ï¼Œä¹‹å¾Œå¦‚æœæœ‰æ–°çš„é«”é©—ï¼Œå†å¯«ä¸€ç¯‡çºŒé›†ã€‚ </p><p>æˆ‘å€‘ä¸‹æ¬¡è¦‹ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;è·é›¢ä¸Šä¸€ç¯‡ &lt;a href=&quot;https://pcion123.github.io/2025/07/30/vscode-copilot-quick/&quot;&gt;&lt;strong&gt;ä½¿ç”¨ vscode+copilot å¿«é€Ÿå»ºç«‹å°ˆæ¡ˆ&lt;/strong&gt;&lt;/a&gt; å·²ç¶“å¿«å…©å€‹æœˆã€‚é€™æ®µæ™‚é–“æˆ‘æŠŠä»¥å‰çš„å°ˆæ¡ˆæ‹¿ä¾†ç•¶ç·´æ‰‹é¡Œï¼ŒæŒçºŒç”¨ vscode æ­é… Copilot åšé‡æ§‹ï¼Œæœ€è¿‘ç®—æ˜¯åˆ°äº†ä¸€å€‹éšæ®µæ€§çš„é‡Œç¨‹ç¢‘ï¼Œä¹Ÿæ¯”è¼ƒæœ‰è³‡æ ¼æ•´ç†ä¸€ä¸‹å¿ƒå¾—èˆ‡é«”æ„Ÿã€‚&lt;/p&gt;
&lt;h2 id=&quot;æˆæœé€Ÿè¦½&quot;&gt;&lt;a href=&quot;#æˆæœé€Ÿè¦½&quot; class=&quot;headerlink&quot; title=&quot;æˆæœé€Ÿè¦½&quot;&gt;&lt;/a&gt;æˆæœé€Ÿè¦½&lt;/h2&gt;&lt;p&gt;å…ˆæ”¾çµæœï¼š&lt;a href=&quot;https://github.com/pcion123/tinysocket&quot;&gt;&lt;strong&gt;tinysocket&lt;/strong&gt;&lt;/a&gt;ã€‚ä¸‹é¢é€™å¼µæ˜¯ç›®å‰ &lt;code&gt;README.md&lt;/code&gt; çš„æˆªåœ–ï¼š&lt;/p&gt;
&lt;img src=&quot;/2025/09/14/vscode-copilot-thoughts/tinysocket_intro.png&quot; class=&quot;&quot;&gt;
    
    </summary>
    
    
      <category term="vscodelife" scheme="https://pcion123.github.io/categories/vscodelife/"/>
    
    
      <category term="java" scheme="https://pcion123.github.io/tags/java/"/>
    
      <category term="vscode" scheme="https://pcion123.github.io/tags/vscode/"/>
    
      <category term="github-copilot" scheme="https://pcion123.github.io/tags/github-copilot/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨vscode+copilotå¿«é€Ÿå»ºç«‹å°ˆæ¡ˆ</title>
    <link href="https://pcion123.github.io/2025/07/30/vscode-copilot-quick/"/>
    <id>https://pcion123.github.io/2025/07/30/vscode-copilot-quick/</id>
    <published>2025-07-30T14:37:11.000Z</published>
    <updated>2025-10-04T06:10:18.414Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å¾-Eclipse-åˆ°-VSCodeï¼šæˆ‘çš„-AI-è¼”åŠ©é–‹ç™¼è½‰å‹ä¹‹è·¯"><a href="#å¾-Eclipse-åˆ°-VSCodeï¼šæˆ‘çš„-AI-è¼”åŠ©é–‹ç™¼è½‰å‹ä¹‹è·¯" class="headerlink" title="å¾ Eclipse åˆ° VSCodeï¼šæˆ‘çš„ AI è¼”åŠ©é–‹ç™¼è½‰å‹ä¹‹è·¯"></a>å¾ Eclipse åˆ° VSCodeï¼šæˆ‘çš„ AI è¼”åŠ©é–‹ç™¼è½‰å‹ä¹‹è·¯</h1><p>å—¨å¤§å®¶å¥½ï¼ä»Šå¤©æƒ³è·Ÿå¤§å®¶åˆ†äº«ä¸€å€‹è®“æˆ‘æ—¢èˆˆå¥®åˆæœ‰é»ç·Šå¼µçš„æ±ºå®š â€”â€” æˆ‘è¦å¾ç”¨äº†å¥½å¹¾å¹´çš„ Eclipse è·³æ§½åˆ° VSCode äº†ï¼ğŸš€</p><h2 id="ç‚ºä»€éº¼æ±ºå®šæ›ç·¨è¼¯å™¨ï¼Ÿ"><a href="#ç‚ºä»€éº¼æ±ºå®šæ›ç·¨è¼¯å™¨ï¼Ÿ" class="headerlink" title="ç‚ºä»€éº¼æ±ºå®šæ›ç·¨è¼¯å™¨ï¼Ÿ"></a>ç‚ºä»€éº¼æ±ºå®šæ›ç·¨è¼¯å™¨ï¼Ÿ</h2><p>è€å¯¦èªªï¼Œä½œç‚ºä¸€å€‹ Java é–‹ç™¼è€…ï¼ŒEclipse ä¸€ç›´æ˜¯æˆ‘çš„å¥½å¤¥ä¼´ã€‚ä½†æœ€è¿‘çœ‹åˆ°è¶Šä¾†è¶Šå¤šåŒäº‹åœ¨ç”¨ VSCodeï¼Œç‰¹åˆ¥æ˜¯æ­é… GitHub Copilot çš„é–‹ç™¼é«”é©—ï¼Œè®“æˆ‘é–‹å§‹å¥½å¥‡ï¼šã€Œæˆ‘æ˜¯ä¸æ˜¯éŒ¯éäº†ä»€éº¼ï¼Ÿã€</p><p>æ›´é‡è¦çš„æ˜¯ï¼Œç¾åœ¨ AI è¼”åŠ©é–‹ç™¼å·¥å…·ç™¼å±•å¾—é€™éº¼å¿«ï¼Œæˆ‘è¦ºå¾—æ˜¯æ™‚å€™è·Ÿä¸Šé€™å€‹æ½®æµäº†ã€‚ç•¢ç«Ÿï¼Œèª°ä¸æƒ³å¯« code å¯«å¾—æ›´å¿«ã€æ›´è°æ˜å‘¢ï¼ŸğŸ˜„</p><p><strong>æº–å‚™å¥½äº†å—ï¼Ÿè®“æˆ‘å€‘ä¸€èµ·è¸ä¸Šé€™æ®µ AI è¼”åŠ©é–‹ç™¼çš„å†’éšªä¹‹æ—…å§ï¼</strong> ğŸ‰</p><span id="more"></span><h2 id="é€™ç¯‡æ–‡ç« æœƒèŠä»€éº¼ï¼Ÿ"><a href="#é€™ç¯‡æ–‡ç« æœƒèŠä»€éº¼ï¼Ÿ" class="headerlink" title="é€™ç¯‡æ–‡ç« æœƒèŠä»€éº¼ï¼Ÿ"></a>é€™ç¯‡æ–‡ç« æœƒèŠä»€éº¼ï¼Ÿ</h2><p>é€™æ¬¡æˆ‘æƒ³åˆ†äº«çš„é‡é»æ˜¯ï¼š<strong>å¦‚ä½•ç”¨ VSCode + GitHub Copilot + è‡ªå®šç¾© Prompts ä¾†å¿«é€Ÿå»ºç«‹ Spring Boot å°ˆæ¡ˆ</strong>ã€‚</p><p>å…·é«”ä¾†èªªï¼Œæˆ‘æœƒåˆ†äº«çµ¦å¤§å®¶ï¼š</p><ul><li>ğŸ¯ ä½¿ç”¨ <code>.github/prompts/*.prompt.md</code> è‡ªå®šç¾©æç¤ºè©</li><li>âš¡ å±•ç¤ºè®“ AI å¹«ä½ å¿«é€Ÿæ­å»ºå°ˆæ¡ˆæ¶æ§‹</li><li>ğŸ’¡ ä¸€äº›æˆ‘åœ¨è½‰æ›éç¨‹ä¸­å­¸åˆ°çš„å°æŠ€å·§</li></ul><h2 id="é€™æ¬¡çš„å¯¦æˆ°å…§å®¹"><a href="#é€™æ¬¡çš„å¯¦æˆ°å…§å®¹" class="headerlink" title="é€™æ¬¡çš„å¯¦æˆ°å…§å®¹"></a>é€™æ¬¡çš„å¯¦æˆ°å…§å®¹</h2><p>æˆ‘éŒ„äº†ä¸€å€‹å®Œæ•´çš„æ“ä½œå½±ç‰‡ï¼Œå¾é›¶é–‹å§‹å»ºç«‹ä¸€å€‹ Spring Boot å°ˆæ¡ˆï¼š</p><p><strong>ğŸ“º å¯¦æˆ°æ•™å­¸å½±ç‰‡ï¼š<a href="https://youtu.be/wG2T3G7LXa4">VSCode + AI å¿«é€Ÿå»ºç«‹ Spring Boot å°ˆæ¡ˆ</a></strong></p><div style="position: relative; width: 100%; max-width: 800px; margin: 20px auto; box-shadow: 0 4px 8px rgba(0,0,0,0.1); border-radius: 8px; overflow: hidden;">  <div style="position: relative; padding-bottom: 56.25%; height: 0;">    <iframe src="https://www.youtube.com/embed/wG2T3G7LXa4?rel=0&modestbranding=1&showinfo=0"             style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none;"             allowfullscreen>    </iframe>  </div></div><p>å½±ç‰‡è£¡æˆ‘æœƒå±•ç¤ºï¼š</p><ol><li>VSCode ç’°å¢ƒçš„åŸºæœ¬è¨­å®š</li><li>GitHub Copilot çš„ç¥å¥‡åŠŸèƒ½</li><li>è‡ªå®šç¾© Prompt æ¨¡æ¿çš„è¨­è¨ˆæŠ€å·§</li><li>å¯¦éš›å»ºç«‹ä¸€å€‹å¯é‹è¡Œçš„ Spring Boot æ‡‰ç”¨</li></ol><h2 id="ä½¿ç”¨é«”é©—çœŸå¯¦æ„Ÿæƒ³"><a href="#ä½¿ç”¨é«”é©—çœŸå¯¦æ„Ÿæƒ³" class="headerlink" title="ä½¿ç”¨é«”é©—çœŸå¯¦æ„Ÿæƒ³"></a>ä½¿ç”¨é«”é©—çœŸå¯¦æ„Ÿæƒ³</h2><p>è€å¯¦èªªï¼Œå‰›é–‹å§‹ä½¿ç”¨ VSCode + GitHub Copilot çš„æ™‚å€™ï¼Œæˆ‘çœŸçš„è¢«éœ‡æ’¼åˆ°äº†ï¼ğŸ˜±</p><p><strong>æµæš¢åº¦æ–¹é¢ï¼š</strong></p><ul><li>ğŸš€ <strong>å•Ÿå‹•é€Ÿåº¦</strong>ï¼šå¾é»æ“Šåˆ°å¯ä»¥é–‹å§‹å¯« codeï¼Œå¹¾ä¹æ˜¯ç§’é–‹ï¼è·Ÿ Eclipse é‚£ç¨®ã€Œå…ˆå»æ³¡æ¯å’–å•¡ã€çš„ç­‰å¾…å®Œå…¨ä¸åŒ</li><li>âš¡ <strong>åæ‡‰é€Ÿåº¦</strong>ï¼šæ‰“å­—çš„æ™‚å€™æ²’æœ‰ä»»ä½•å»¶é²æ„Ÿï¼Œæª”æ¡ˆåˆ‡æ›ä¹Ÿæ˜¯ç¬é–“å®Œæˆ</li><li>ğŸ¯ <strong>è¨˜æ†¶é«”ä½¿ç”¨</strong>ï¼šæ˜é¡¯æ¯”å‚³çµ± IDE è¼•é‡å¾ˆå¤šï¼Œå¤šé–‹å¹¾å€‹å°ˆæ¡ˆä¹Ÿä¸æœƒè®“é›»è…¦å¡åˆ°çˆ†</li></ul><p><strong>AI è¼”åŠ©çš„é©šè‰·ä¹‹è™•ï¼š</strong></p><ul><li>ğŸ§  <strong>ä»»å‹™è¦åŠƒèƒ½åŠ›</strong>ï¼šæœ€è®“æˆ‘éœ‡æ’¼çš„æ˜¯ Copilot èƒ½å¤ ç†è§£æ•´å€‹å°ˆæ¡ˆçš„æ¶æ§‹ï¼Œç•¶æˆ‘èªªã€Œå»ºç«‹ä¸€å€‹ Spring Boot å°ˆæ¡ˆã€æ™‚ï¼Œå®ƒä¸åªæ˜¯çµ¦æˆ‘ç‰‡æ®µç¨‹å¼ç¢¼ï¼Œè€Œæ˜¯èƒ½å»ºç«‹ä¸€å€‹å®Œæ•´å¯åŸ·è¡Œçš„å°ˆæ¡ˆ</li><li>ğŸ”¥ <strong>åŸ·è¡Œæ•ˆç‡</strong>ï¼šå¾ Controllerã€Serviceã€Repository åˆ°æ¸¬è©¦æª”æ¡ˆçš„å»ºç«‹ï¼Œæ•´å€‹æµç¨‹ä¸€æ°£å‘µæˆï¼Œå°±åƒæœ‰å€‹ç¶“é©—è±å¯Œçš„ Senior åœ¨æ—é‚Šå”åŠ©</li><li>ğŸ¯ <strong>ä¸Šä¸‹æ–‡ç†è§£</strong>ï¼šå®ƒæœƒè¨˜ä½æˆ‘ä¹‹å‰å¯«çš„ç¨‹å¼ç¢¼é¢¨æ ¼å’Œå°ˆæ¡ˆçµæ§‹ï¼Œæ–°å¢çš„ç¨‹å¼ç¢¼éƒ½èƒ½å®Œç¾èå…¥æ—¢æœ‰çš„æ¶æ§‹ä¸­</li><li>ğŸ’¡ <strong>æ™ºèƒ½è£œå…¨</strong>ï¼šä¸åªæ˜¯ç°¡å–®çš„èªæ³•è£œå…¨ï¼Œå®ƒæœƒæ ¹æ“šä¸Šä¸‹æ–‡çµ¦å‡ºå®Œæ•´çš„å‡½å¼å¯¦ä½œï¼Œç”šè‡³åŒ…å«éŒ¯èª¤è™•ç†</li><li>ğŸ“ <strong>æ–‡ä»¶ç”Ÿæˆ</strong>ï¼šé€£ READMEã€API æ–‡ä»¶ã€è¨»è§£éƒ½èƒ½è‡ªå‹•ç”Ÿæˆï¼Œè€Œä¸”å¯«å¾—æ¯”æˆ‘é‚„è©³ç´°ï¼ˆæœ‰é»å®³ç¾ ğŸ˜…ï¼‰</li></ul><p><strong>æœ€è®“æˆ‘é©šå˜†çš„æ˜¯</strong>ï¼šæ•´å€‹é–‹ç™¼æµç¨‹è®Šå¾—éå¸¸ã€Œè‡ªç„¶ã€ï¼Œå°±åƒåœ¨è·Ÿä¸€å€‹å¾ˆæ‡‚ä½ çš„å¤¥ä¼´å”ä½œã€‚ä»¥å‰å¯« code éœ€è¦é »ç¹æŸ¥æ–‡ä»¶ã€æƒ³èªæ³•ï¼Œç¾åœ¨å¾ˆå¤šæ™‚å€™ AI å°±ç›´æ¥çµ¦å‡ºäº†æˆ‘è¦çš„ç­”æ¡ˆã€‚</p><p>é€™ç¨®æ„Ÿè¦ºå°±åƒå¾ã€Œæ‰‹å‹•æª”ã€æ›åˆ°ã€Œè‡ªå‹•æª”ã€ä¸€æ¨£ â€”â€” ä½ é‚„æ˜¯åœ¨é–‹è»Šï¼Œä½†æ•´å€‹éç¨‹è®Šå¾—æ›´é †æš¢ã€æ›´å°ˆæ³¨åœ¨çœŸæ­£é‡è¦çš„é‚è¼¯æ€è€ƒä¸Šã€‚</p><hr><p><strong>æˆ‘æœƒä¸å®šæœŸåˆ†äº«æ›´å¤š VSCode + AI é–‹ç™¼çš„å¯¦æˆ°é«”é©—ï¼</strong> ğŸ‰</p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;å¾-Eclipse-åˆ°-VSCodeï¼šæˆ‘çš„-AI-è¼”åŠ©é–‹ç™¼è½‰å‹ä¹‹è·¯&quot;&gt;&lt;a href=&quot;#å¾-Eclipse-åˆ°-VSCodeï¼šæˆ‘çš„-AI-è¼”åŠ©é–‹ç™¼è½‰å‹ä¹‹è·¯&quot; class=&quot;headerlink&quot; title=&quot;å¾ Eclipse åˆ° VSCodeï¼šæˆ‘çš„ AI è¼”åŠ©é–‹ç™¼è½‰å‹ä¹‹è·¯&quot;&gt;&lt;/a&gt;å¾ Eclipse åˆ° VSCodeï¼šæˆ‘çš„ AI è¼”åŠ©é–‹ç™¼è½‰å‹ä¹‹è·¯&lt;/h1&gt;&lt;p&gt;å—¨å¤§å®¶å¥½ï¼ä»Šå¤©æƒ³è·Ÿå¤§å®¶åˆ†äº«ä¸€å€‹è®“æˆ‘æ—¢èˆˆå¥®åˆæœ‰é»ç·Šå¼µçš„æ±ºå®š â€”â€” æˆ‘è¦å¾ç”¨äº†å¥½å¹¾å¹´çš„ Eclipse è·³æ§½åˆ° VSCode äº†ï¼ğŸš€&lt;/p&gt;
&lt;h2 id=&quot;ç‚ºä»€éº¼æ±ºå®šæ›ç·¨è¼¯å™¨ï¼Ÿ&quot;&gt;&lt;a href=&quot;#ç‚ºä»€éº¼æ±ºå®šæ›ç·¨è¼¯å™¨ï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;ç‚ºä»€éº¼æ±ºå®šæ›ç·¨è¼¯å™¨ï¼Ÿ&quot;&gt;&lt;/a&gt;ç‚ºä»€éº¼æ±ºå®šæ›ç·¨è¼¯å™¨ï¼Ÿ&lt;/h2&gt;&lt;p&gt;è€å¯¦èªªï¼Œä½œç‚ºä¸€å€‹ Java é–‹ç™¼è€…ï¼ŒEclipse ä¸€ç›´æ˜¯æˆ‘çš„å¥½å¤¥ä¼´ã€‚ä½†æœ€è¿‘çœ‹åˆ°è¶Šä¾†è¶Šå¤šåŒäº‹åœ¨ç”¨ VSCodeï¼Œç‰¹åˆ¥æ˜¯æ­é… GitHub Copilot çš„é–‹ç™¼é«”é©—ï¼Œè®“æˆ‘é–‹å§‹å¥½å¥‡ï¼šã€Œæˆ‘æ˜¯ä¸æ˜¯éŒ¯éäº†ä»€éº¼ï¼Ÿã€&lt;/p&gt;
&lt;p&gt;æ›´é‡è¦çš„æ˜¯ï¼Œç¾åœ¨ AI è¼”åŠ©é–‹ç™¼å·¥å…·ç™¼å±•å¾—é€™éº¼å¿«ï¼Œæˆ‘è¦ºå¾—æ˜¯æ™‚å€™è·Ÿä¸Šé€™å€‹æ½®æµäº†ã€‚ç•¢ç«Ÿï¼Œèª°ä¸æƒ³å¯« code å¯«å¾—æ›´å¿«ã€æ›´è°æ˜å‘¢ï¼ŸğŸ˜„&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æº–å‚™å¥½äº†å—ï¼Ÿè®“æˆ‘å€‘ä¸€èµ·è¸ä¸Šé€™æ®µ AI è¼”åŠ©é–‹ç™¼çš„å†’éšªä¹‹æ—…å§ï¼&lt;/strong&gt; ğŸ‰&lt;/p&gt;
    
    </summary>
    
    
      <category term="vscodelife" scheme="https://pcion123.github.io/categories/vscodelife/"/>
    
    
      <category term="java" scheme="https://pcion123.github.io/tags/java/"/>
    
      <category term="vscode" scheme="https://pcion123.github.io/tags/vscode/"/>
    
      <category term="github-copilot" scheme="https://pcion123.github.io/tags/github-copilot/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntuå®‰è£Nexus</title>
    <link href="https://pcion123.github.io/2021/09/25/nexus-install/"/>
    <id>https://pcion123.github.io/2021/09/25/nexus-install/</id>
    <published>2021-09-25T05:36:17.000Z</published>
    <updated>2025-08-13T14:31:49.406Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å®‰è£JDK"><a href="#å®‰è£JDK" class="headerlink" title="å®‰è£JDK"></a>å®‰è£JDK</h2><a href="/2019/03/10/java-installopenjdk/" title="å®‰è£OpenJDK">è«‹åƒè€ƒä¹‹å‰çš„æ–‡ç« </a><h2 id="ä¸‹è¼‰nexus"><a href="#ä¸‹è¼‰nexus" class="headerlink" title="ä¸‹è¼‰nexus"></a>ä¸‹è¼‰nexus</h2><p><a href="https://www.sonatype.com/products/repository-oss-download">å®˜æ–¹ä¸‹è¼‰</a><br>æˆ–è€…<br><a href="https://sonatype-download.global.ssl.fastly.net/repository/downloads-prod-group/3/nexus-3.33.1-01-unix.tar.gz">nexus-3.33.1-01-unix</a></p><span id="more"></span><h2 id="å»ºç«‹nexusä½¿ç”¨è€…"><a href="#å»ºç«‹nexusä½¿ç”¨è€…" class="headerlink" title="å»ºç«‹nexusä½¿ç”¨è€…"></a>å»ºç«‹nexusä½¿ç”¨è€…</h2><p>å»ºç«‹nexuså°ˆç”¨çš„ç³»çµ±å¸³è™Ÿ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ useradd -M -d /opt/nexus -s /bin/bash -r nexus</span><br></pre></td></tr></table></figure><p>å…è¨±nexusç”¨æˆ¶å¯ä»¥ä½¿ç”¨ç„¡å¯†ç¢¼çš„sudoé‹è¡Œå‘½ä»¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">&quot;nexus   ALL=(ALL)       NOPASSWD: ALL&quot;</span> &gt; /etc/sudoers.d/nexus</span><br></pre></td></tr></table></figure><h2 id="å®‰è£nexus"><a href="#å®‰è£nexus" class="headerlink" title="å®‰è£nexus"></a>å®‰è£nexus</h2><p>å…ˆå»ºç«‹nexusç›®éŒ„</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">mkdir</span> /opt/nexus</span><br></pre></td></tr></table></figure><p>è§£é–‹nexusåˆ°å‰›å‰›å»ºç«‹å¥½çš„ç›®éŒ„åº•ä¸‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ tar -zxvf nexus-3.33.1-01-unix.tar.gz -C /opt/nexus --strip-components=1</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹æ¬Šé™</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">chown</span> -R nexus: /opt/nexus</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹é…ç½®"><a href="#ä¿®æ”¹é…ç½®" class="headerlink" title="ä¿®æ”¹é…ç½®"></a>ä¿®æ”¹é…ç½®</h2><h3 id="èª¿æ•´nexuså…§å­˜å¤§å°"><a href="#èª¿æ•´nexuså…§å­˜å¤§å°" class="headerlink" title="èª¿æ•´nexuså…§å­˜å¤§å°"></a>èª¿æ•´nexuså…§å­˜å¤§å°</h3><p>èª¿æ•´è‡ªèº«æ©Ÿå™¨åˆé©çš„å¤§å°,é€™é‚Šæ¸¬è©¦èª¿æ•´æˆ2G</p><p>é–‹å•Ÿ&#x2F;opt&#x2F;nexus&#x2F;bin&#x2F;nexus.vmoptions</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-Xms2048m</span><br><span class="line">-Xmx2048m</span><br><span class="line">-XX:MaxDirectMemorySize=2048m</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">.</span><br></pre></td></tr></table></figure><h3 id="èª¿æ•´nexusç›¸å°è·¯å¾‘"><a href="#èª¿æ•´nexusç›¸å°è·¯å¾‘" class="headerlink" title="èª¿æ•´nexusç›¸å°è·¯å¾‘"></a>èª¿æ•´nexusç›¸å°è·¯å¾‘</h3><p>å› ç‚ºå‰›å‰›è§£é–‹nexusçš„æ™‚å€™æŠŠsonatype-workç›®éŒ„çš„ä½ç½®ç§»ä¸Šäº†ä¸€å±¤<br>æ‰€ä»¥é€™é‚Šç›¸å°è·¯å¾‘å°±éœ€è¦èª¿æ•´ä¸€ä¸‹</p><p>é–‹å•Ÿ&#x2F;opt&#x2F;nexus&#x2F;bin&#x2F;nexus.vmoptions</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">-XX:LogFile=./sonatype-work/nexus3/log/jvm.log</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">-Dkaraf.data=./sonatype-work/nexus3</span><br><span class="line">-Dkaraf.<span class="built_in">log</span>=./sonatype-work/nexus3/log</span><br><span class="line">-Djava.io.tmpdir=./sonatype-work/nexus3/tmp</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹nexusé‹è¡Œå¸³è™Ÿ"><a href="#ä¿®æ”¹nexusé‹è¡Œå¸³è™Ÿ" class="headerlink" title="ä¿®æ”¹nexusé‹è¡Œå¸³è™Ÿ"></a>ä¿®æ”¹nexusé‹è¡Œå¸³è™Ÿ</h3><p>ä¿®æ”¹nexusé‹è¡Œæ™‚ä½¿ç”¨å¸³è™Ÿ<br>è«‹ä¿®æ”¹æˆå‰›å‰›å°ˆé–€å»ºç«‹çš„å¸³è™Ÿ</p><p>é–‹å•Ÿ&#x2F;opt&#x2F;nexus&#x2F;bin&#x2F;nexus.rc</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">run_as_user=<span class="string">&quot;nexus&quot;</span></span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹nexuså°å¤–port"><a href="#ä¿®æ”¹nexuså°å¤–port" class="headerlink" title="ä¿®æ”¹nexuså°å¤–port"></a>ä¿®æ”¹nexuså°å¤–port</h3><p>é è¨­portæ˜¯8081å¦‚æœä¸éœ€è¦èª¿æ•´è«‹è·³éé€™ä¸€æ­¥<br>å› ç‚ºæ¸¬è©¦ç’°å¢ƒçš„é—œä¿‚é€™é‚Šæ”¹æˆ9090</p><p>é–‹å•Ÿ&#x2F;opt&#x2F;nexus&#x2F;etc&#x2F;nexus-default.properties</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## DO NOT EDIT - CUSTOMIZATIONS BELONG IN $data-dir/etc/nexus.properties</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment"># Jetty section</span></span><br><span class="line">application-port=9090</span><br><span class="line">application-host=0.0.0.0</span><br></pre></td></tr></table></figure><h2 id="å•Ÿå‹•nexus"><a href="#å•Ÿå‹•nexus" class="headerlink" title="å•Ÿå‹•nexus"></a>å•Ÿå‹•nexus</h2><h3 id="å•Ÿå‹•æœå‹™"><a href="#å•Ÿå‹•æœå‹™" class="headerlink" title="å•Ÿå‹•æœå‹™"></a>å•Ÿå‹•æœå‹™</h3><p>å•Ÿå‹•</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> -u nexus /opt/nexus/bin/nexus start</span><br></pre></td></tr></table></figure><h3 id="ç›£çœ‹log"><a href="#ç›£çœ‹log" class="headerlink" title="ç›£çœ‹log"></a>ç›£çœ‹log</h3><p>ç›£çœ‹log</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">tail</span> -f /opt/nexus/sonatype-work/nexus3/log/nexus.log</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€æ¬¡ç™»å…¥æœƒçœ‹åˆ°ä»¥ä¸‹ç•«é¢,é è¨­å¸³è™Ÿç‚ºadmin</p><img src="/2021/09/25/nexus-install/nexus1.png" class=""><h3 id="ç²å–å¯†ç¢¼"><a href="#ç²å–å¯†ç¢¼" class="headerlink" title="ç²å–å¯†ç¢¼"></a>ç²å–å¯†ç¢¼</h3><p>ç²å–ç¬¬ä¸€æ¬¡ç™»å…¥å¯†ç¢¼</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cat</span> /opt/nexus/sonatype-work/nexus3/admin.password</span><br></pre></td></tr></table></figure><h3 id="åˆå§‹è¨­å®š"><a href="#åˆå§‹è¨­å®š" class="headerlink" title="åˆå§‹è¨­å®š"></a>åˆå§‹è¨­å®š</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.ä¿®æ”¹ç®¡ç†è€…å¯†ç¢¼</span><br><span class="line">2.æ ¹æ“šéœ€æ±‚èª¿æ•´,é€™é‚Šæˆ‘é¸æ“‡é—œé–‰åŒ¿åç”¨æˆ¶ç™»å…¥</span><br><span class="line">3.é—œé–‰å•é¡Œå›é¥‹</span><br></pre></td></tr></table></figure><p>ç™»å…¥å¾Œåšå®Œç¬¬ä¸€æ¬¡è¨­å®šå¾Œæœå‹™å°±æ­£å¼è£å¥½å•¦!</p><img src="/2021/09/25/nexus-install/nexus2.png" class=""><h2 id="ç³»çµ±æœå‹™"><a href="#ç³»çµ±æœå‹™" class="headerlink" title="ç³»çµ±æœå‹™"></a>ç³»çµ±æœå‹™</h2><h3 id="å»ºç«‹è…³æœ¬"><a href="#å»ºç«‹è…³æœ¬" class="headerlink" title="å»ºç«‹è…³æœ¬"></a>å»ºç«‹è…³æœ¬</h3><p>å»ºç«‹&#x2F;etc&#x2F;systemd&#x2F;system&#x2F;nexus.service</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=nexus service</span><br><span class="line">After=network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=forking</span><br><span class="line">LimitNOFILE=65536</span><br><span class="line">ExecStart=/opt/nexus/bin/nexus start</span><br><span class="line">ExecStop=/opt/nexus/bin/nexus stop</span><br><span class="line">User=nexus</span><br><span class="line">Restart=on-abort</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure><h3 id="é‡è¼‰systemd"><a href="#é‡è¼‰systemd" class="headerlink" title="é‡è¼‰systemd"></a>é‡è¼‰systemd</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ systemctl daemon-reload</span><br></pre></td></tr></table></figure><h3 id="å•Ÿç”¨æœå‹™"><a href="#å•Ÿç”¨æœå‹™" class="headerlink" title="å•Ÿç”¨æœå‹™"></a>å•Ÿç”¨æœå‹™</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ systemctl <span class="built_in">enable</span> --now nexus.service</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹æœå‹™ç‹€æ…‹"><a href="#æŸ¥çœ‹æœå‹™ç‹€æ…‹" class="headerlink" title="æŸ¥çœ‹æœå‹™ç‹€æ…‹"></a>æŸ¥çœ‹æœå‹™ç‹€æ…‹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ systemctl status nexus.service</span><br></pre></td></tr></table></figure><p>æœå‹™æ­£å¸¸é‹è¡Œ,é€™æ¨£æˆ‘å€‘ä»¥å¾Œå°±å¯ä»¥é€ésystemctlç®¡ç†æœå‹™äº†</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">root@pcionserver:/etc/systemd/system# root@pcionserver:/etc/systemd/system# systemctl status nexus.service</span><br><span class="line">â— nexus.service - nexus service</span><br><span class="line">     Loaded: loaded (/etc/systemd/system/nexus.service; enabled; vendor preset: enabled)</span><br><span class="line">     Active: active (running) since Sat 2021-09-25 07:51:16 UTC; 6min ago</span><br><span class="line">    Process: 8292 ExecStart=/opt/nexus/bin/nexus start (code=exited, status=0/SUCCESS)</span><br><span class="line">   Main PID: 8486 (java)</span><br><span class="line">      Tasks: 80 (<span class="built_in">limit</span>: 4616)</span><br><span class="line">     Memory: 1.3G</span><br><span class="line">     CGroup: /system.slice/nexus.service</span><br><span class="line">             â””â”€8486 /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java -server -Dinstall4j.jvmDir=/usr/lib/jvm/java-8-openjdk-amd64/jre -Dexe4j.moduleName=/opt/nexus/bin/nexus -XX:+UnlockDiag&gt;</span><br><span class="line"></span><br><span class="line">Sep 25 07:51:16 pcionserver systemd[1]: Starting nexus service...</span><br><span class="line">Sep 25 07:51:16 pcionserver nexus[8292]: Starting nexus</span><br><span class="line">Sep 25 07:51:16 pcionserver systemd[1]: Started nexus service.</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;å®‰è£JDK&quot;&gt;&lt;a href=&quot;#å®‰è£JDK&quot; class=&quot;headerlink&quot; title=&quot;å®‰è£JDK&quot;&gt;&lt;/a&gt;å®‰è£JDK&lt;/h2&gt;&lt;a href=&quot;/2019/03/10/java-installopenjdk/&quot; title=&quot;å®‰è£OpenJDK&quot;&gt;è«‹åƒè€ƒä¹‹å‰çš„æ–‡ç« &lt;/a&gt;

&lt;h2 id=&quot;ä¸‹è¼‰nexus&quot;&gt;&lt;a href=&quot;#ä¸‹è¼‰nexus&quot; class=&quot;headerlink&quot; title=&quot;ä¸‹è¼‰nexus&quot;&gt;&lt;/a&gt;ä¸‹è¼‰nexus&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://www.sonatype.com/products/repository-oss-download&quot;&gt;å®˜æ–¹ä¸‹è¼‰&lt;/a&gt;&lt;br&gt;æˆ–è€…&lt;br&gt;&lt;a href=&quot;https://sonatype-download.global.ssl.fastly.net/repository/downloads-prod-group/3/nexus-3.33.1-01-unix.tar.gz&quot;&gt;nexus-3.33.1-01-unix&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="maven" scheme="https://pcion123.github.io/categories/maven/"/>
    
    
      <category term="linux" scheme="https://pcion123.github.io/tags/linux/"/>
    
      <category term="maven" scheme="https://pcion123.github.io/tags/maven/"/>
    
      <category term="nexus" scheme="https://pcion123.github.io/tags/nexus/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntuå®‰è£Minikube</title>
    <link href="https://pcion123.github.io/2021/08/21/minikube-install/"/>
    <id>https://pcion123.github.io/2021/08/21/minikube-install/</id>
    <published>2021-08-21T06:02:15.000Z</published>
    <updated>2025-08-13T14:31:49.406Z</updated>
    
    <content type="html"><![CDATA[<p>ç¹¼ä¸Šæ¬¡çš„dockerå®‰è£ä»Šå¤©è¦ç¹¼çºŒéƒ¨å±¬kubernetesçš„å…§å®¹</p><h2 id="ç°¡ä»‹"><a href="#ç°¡ä»‹" class="headerlink" title="ç°¡ä»‹"></a>ç°¡ä»‹</h2><p>minikubeæ˜¯ç”±googleé–‹ç™¼çš„ç²¾ç°¡ç‰ˆkuberneteså·¥å…·<br>å¯ä»¥ç°¡å–®çš„æ¨¡æ“¬k8såº•ä¸‹çš„ç’°å¢ƒé‹ä½œ</p><span id="more"></span><h2 id="å®‰è£å®¹å™¨"><a href="#å®‰è£å®¹å™¨" class="headerlink" title="å®‰è£å®¹å™¨"></a>å®‰è£å®¹å™¨</h2><p>kuberneteseæä¾›å¤šæ¨£çš„å®¹å™¨éƒ¨å±¬ç’°å¢ƒ<br>é€™é‚Šæˆ‘å€‘é¸ç”¨dockerç•¶ä½œå®¹å™¨çš„åº•å±¤</p><a href="/2021/08/21/docker-install/" title="Ubuntuå®‰è£Docker">è«‹åƒè€ƒä¹‹å‰çš„æ–‡ç« </a><h2 id="å®‰è£kubectl"><a href="#å®‰è£kubectl" class="headerlink" title="å®‰è£kubectl"></a>å®‰è£kubectl</h2><p>kubectlæ˜¯ä¸€å¥—ç®¡ç†kubernetesçš„å‘½ä»¤å·¥å…·</p><h3 id="å®‰è£"><a href="#å®‰è£" class="headerlink" title="å®‰è£"></a>å®‰è£</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ›´æ–°å¥—ä»¶ç®¡ç†</span></span><br><span class="line">$ <span class="built_in">sudo</span> apt update</span><br><span class="line"><span class="comment"># å®‰è£å¥—ä»¶å€‰åº«</span></span><br><span class="line">$ <span class="built_in">sudo</span> apt install -y apt-transport-https ca-certificates curl</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸‹è¼‰å€‰åº«æ†‘è­‰</span></span><br><span class="line">$ <span class="built_in">sudo</span> curl -fsSLo /usr/share/keyrings/kubernetes-archive-keyring.gpg https://packages.cloud.google.com/apt/doc/apt-key.gpg</span><br><span class="line"><span class="comment"># åŠ å…¥æ†‘è­‰ä¿¡ä»»åˆ—è¡¨</span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">&quot;deb [signed-by=/usr/share/keyrings/kubernetes-archive-keyring.gpg] https://apt.kubernetes.io/ kubernetes-xenial main&quot;</span> | <span class="built_in">sudo</span> <span class="built_in">tee</span> /etc/apt/sources.list.d/kubernetes.list</span><br><span class="line"></span><br><span class="line">deb [signed-by=/usr/share/keyrings/kubernetes-archive-keyring.gpg] https://apt.kubernetes.io/ kubernetes-xenial main</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ›´æ–°å¥—ä»¶ç®¡ç†</span></span><br><span class="line">$ <span class="built_in">sudo</span> apt update</span><br><span class="line"><span class="comment"># å®‰è£kubectl</span></span><br><span class="line">$ <span class="built_in">sudo</span> apt install kubectl -y</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹ç‰ˆæœ¬"><a href="#æŸ¥çœ‹ç‰ˆæœ¬" class="headerlink" title="æŸ¥çœ‹ç‰ˆæœ¬"></a>æŸ¥çœ‹ç‰ˆæœ¬</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl version --short --client</span><br><span class="line"></span><br><span class="line">Client Version: v1.22.1</span><br></pre></td></tr></table></figure><h2 id="å®‰è£minikube"><a href="#å®‰è£minikube" class="headerlink" title="å®‰è£minikube"></a>å®‰è£minikube</h2><p>ç¾åœ¨é–‹å§‹å®‰è£ä¸»è§’</p><h3 id="å®‰è£-1"><a href="#å®‰è£-1" class="headerlink" title="å®‰è£"></a>å®‰è£</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸‹è¼‰å®‰è£åŒ…</span></span><br><span class="line">$ curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube_latest_amd64.deb</span><br><span class="line"><span class="comment"># å®‰è£å¥—ä»¶</span></span><br><span class="line">$ <span class="built_in">sudo</span> dpkg -i minikube_latest_amd64.deb</span><br><span class="line"></span><br><span class="line">Selecting previously unselected package minikube.</span><br><span class="line">(Reading database ... 71806 files and directories currently installed.)</span><br><span class="line">Preparing to unpack minikube_latest_amd64.deb ...</span><br><span class="line">Unpacking minikube (1.22.0-0) ...</span><br><span class="line">Setting up minikube (1.22.0-0) ...</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹ç‰ˆæœ¬-1"><a href="#æŸ¥çœ‹ç‰ˆæœ¬-1" class="headerlink" title="æŸ¥çœ‹ç‰ˆæœ¬"></a>æŸ¥çœ‹ç‰ˆæœ¬</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ minikube version</span><br><span class="line"></span><br><span class="line">minikube version: v1.22.0</span><br><span class="line">commit: a03fbcf166e6f74ef224d4a63be4277d017bb62e</span><br></pre></td></tr></table></figure><h3 id="å•Ÿå‹•"><a href="#å•Ÿå‹•" class="headerlink" title="å•Ÿå‹•"></a>å•Ÿå‹•</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$ minikube start</span><br><span class="line"></span><br><span class="line">ğŸ˜„  minikube v1.22.0 on Ubuntu 20.04 (vbox/amd64)</span><br><span class="line">âœ¨  Automatically selected the docker driver. Other choices: ssh, none</span><br><span class="line">ğŸ‘  Starting control plane node minikube <span class="keyword">in</span> cluster minikube</span><br><span class="line">ğŸšœ  Pulling base image ...</span><br><span class="line">ğŸ’¾  Downloading Kubernetes v1.21.2 preload ...</span><br><span class="line">    &gt; preloaded-images-k8s-v11-v1...: 502.14 MiB / 502.14 MiB  100.00% 7.08 MiB</span><br><span class="line">    &gt; gcr.io/k8s-minikube/kicbase...: 361.08 MiB / 361.09 MiB  100.00% 3.95 MiB</span><br><span class="line">ğŸ”¥  Creating docker container (CPUs=2, Memory=2200MB) ...</span><br><span class="line">ğŸ³  Preparing Kubernetes v1.21.2 on Docker 20.10.7 ...</span><br><span class="line">    â–ª Generating certificates and keys ...</span><br><span class="line">    â–ª Booting up control plane ...</span><br><span class="line">    â–ª Configuring RBAC rules ...</span><br><span class="line">ğŸ”  Verifying Kubernetes components...</span><br><span class="line">    â–ª Using image gcr.io/k8s-minikube/storage-provisioner:v5</span><br><span class="line">ğŸŒŸ  Enabled addons: storage-provisioner, default-storageclass</span><br><span class="line">ğŸ„  Done! kubectl is now configured to use <span class="string">&quot;minikube&quot;</span> cluster and <span class="string">&quot;default&quot;</span> namespace by default</span><br></pre></td></tr></table></figure><h3 id="å•Ÿå‹•dashboard"><a href="#å•Ÿå‹•dashboard" class="headerlink" title="å•Ÿå‹•dashboard"></a>å•Ÿå‹•dashboard</h3><p>æ­£å¸¸çš„kubernetesçš„dashboardéœ€è¦å¦å¤–å®‰è£çš„<br>ä½†æ˜¯minikubeå·²ç¶“è‡ªå¸¶dashboardå¥—ä»¶åªéœ€å•Ÿå‹•å°±è¡Œäº†</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ minikube dashboard</span><br><span class="line"></span><br><span class="line">ğŸ”Œ  Enabling dashboard ...</span><br><span class="line">    â–ª Using image kubernetesui/dashboard:v2.1.0</span><br><span class="line">    â–ª Using image kubernetesui/metrics-scraper:v1.0.4</span><br><span class="line">ğŸ¤”  Verifying dashboard health ...</span><br><span class="line">ğŸš€  Launching proxy ...</span><br><span class="line">ğŸ¤”  Verifying proxy health ...</span><br><span class="line">ğŸ‰  Opening http://127.0.0.1:33657/api/v1/namespaces/kubernetes-dashboard/services/http:kubernetes-dashboard:/proxy/ <span class="keyword">in</span> your default browser...</span><br><span class="line">ğŸ‘‰  http://127.0.0.1:33657/api/v1/namespaces/kubernetes-dashboard/services/http:kubernetes-dashboard:/proxy/</span><br></pre></td></tr></table></figure><h3 id="é–‹å•Ÿproxy"><a href="#é–‹å•Ÿproxy" class="headerlink" title="é–‹å•Ÿproxy"></a>é–‹å•Ÿproxy</h3><p>ä¸€èˆ¬ä¾†èªªå•Ÿå‹•dashboardå°±æœƒè‡ªå‹•å¹«ä½ é–‹å•Ÿç€è¦½å™¨åˆ°dashboardçš„é é¢ä¸­äº†<br>ä½†æ˜¯ç­†è€…çš„ç’°å¢ƒæ˜¯è£åœ¨virtualboxçš„ubuntu-serveråº•ä¸‹<br>æ‰€ä»¥å°±éœ€è¦å¦å¤–æä¾›å¤–é€£çš„æ–¹å¼äº†</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ kubectl proxy --address=<span class="string">&#x27;0.0.0.0&#x27;</span> --port=8001 --accept-hosts=<span class="string">&#x27;^*$&#x27;</span></span><br><span class="line"></span><br><span class="line">Starting to serve on [::]:8001</span><br></pre></td></tr></table></figure><p>é€™æ¨£å°±å¤§åŠŸå‘Šæˆå•¦!</p><img src="/2021/08/21/minikube-install/minikube.png" class=""><h2 id="è£œå……"><a href="#è£œå……" class="headerlink" title="è£œå……"></a>è£œå……</h2><p>å®‰è£éç¨‹è¨­å®šå¦‚æœå‡ºäº†ä»€éº¼å•é¡Œæƒ³è¦é‡ç½®<br>æˆ‘å€‘å¯åˆªæ‰æ•´å€‹minikubeè¨­ç½®é‡ä¾†</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆªé™¤minikubeç’°å¢ƒ</span></span><br><span class="line">$ minikube delete &amp;&amp; <span class="built_in">rm</span> -rf ~/.minikube</span><br><span class="line"><span class="comment"># é‡å•Ÿminikube</span></span><br><span class="line">$ minikube start</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç¹¼ä¸Šæ¬¡çš„dockerå®‰è£ä»Šå¤©è¦ç¹¼çºŒéƒ¨å±¬kubernetesçš„å…§å®¹&lt;/p&gt;
&lt;h2 id=&quot;ç°¡ä»‹&quot;&gt;&lt;a href=&quot;#ç°¡ä»‹&quot; class=&quot;headerlink&quot; title=&quot;ç°¡ä»‹&quot;&gt;&lt;/a&gt;ç°¡ä»‹&lt;/h2&gt;&lt;p&gt;minikubeæ˜¯ç”±googleé–‹ç™¼çš„ç²¾ç°¡ç‰ˆkuberneteså·¥å…·&lt;br&gt;å¯ä»¥ç°¡å–®çš„æ¨¡æ“¬k8såº•ä¸‹çš„ç’°å¢ƒé‹ä½œ&lt;/p&gt;
    
    </summary>
    
    
      <category term="kubernetes" scheme="https://pcion123.github.io/categories/kubernetes/"/>
    
    
      <category term="linux" scheme="https://pcion123.github.io/tags/linux/"/>
    
      <category term="ubuntu" scheme="https://pcion123.github.io/tags/ubuntu/"/>
    
      <category term="docker" scheme="https://pcion123.github.io/tags/docker/"/>
    
      <category term="kubernetes" scheme="https://pcion123.github.io/tags/kubernetes/"/>
    
      <category term="minikube" scheme="https://pcion123.github.io/tags/minikube/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntuå®‰è£Docker</title>
    <link href="https://pcion123.github.io/2021/08/21/docker-install/"/>
    <id>https://pcion123.github.io/2021/08/21/docker-install/</id>
    <published>2021-08-21T05:36:17.000Z</published>
    <updated>2025-08-13T14:31:49.388Z</updated>
    
    <content type="html"><![CDATA[<p>dockeræ˜¯ç›®å‰å®¹å™¨åŒ–éƒ¨å±¬æœ€ç«ç´…çš„æ–¹æ¡ˆ<br>å»¢è©±ä¸å¤šèªªç¾åœ¨è¶•å¿«ä¾†çœ‹çœ‹æ€éº¼å®‰è£å§!</p><h2 id="å®‰è£"><a href="#å®‰è£" class="headerlink" title="å®‰è£"></a>å®‰è£</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> apt update</span><br><span class="line">$ <span class="built_in">sudo</span> install docker.io</span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="æŸ¥çœ‹ç‰ˆæœ¬"><a href="#æŸ¥çœ‹ç‰ˆæœ¬" class="headerlink" title="æŸ¥çœ‹ç‰ˆæœ¬"></a>æŸ¥çœ‹ç‰ˆæœ¬</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹ç‰ˆæœ¬</span></span><br><span class="line">$ docker version</span><br><span class="line">Client:</span><br><span class="line"> Version:           20.10.7</span><br><span class="line"> API version:       1.41</span><br><span class="line"> Go version:        go1.13.8</span><br><span class="line"> Git commit:        20.10.7-0ubuntu1~20.04.1</span><br><span class="line"> Built:             Wed Aug  4 22:52:25 2021</span><br><span class="line"> OS/Arch:           linux/amd64</span><br><span class="line"> Context:           default</span><br><span class="line"> Experimental:      <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">Server:</span><br><span class="line"> Engine:</span><br><span class="line">  Version:          20.10.7</span><br><span class="line">  API version:      1.41 (minimum version 1.12)</span><br><span class="line">  Go version:       go1.13.8</span><br><span class="line">  Git commit:       20.10.7-0ubuntu1~20.04.1</span><br><span class="line">  Built:            Wed Aug  4 19:07:47 2021</span><br><span class="line">  OS/Arch:          linux/amd64</span><br><span class="line">  Experimental:     <span class="literal">false</span></span><br><span class="line"> containerd:</span><br><span class="line">  Version:          1.5.2-0ubuntu1~20.04.2</span><br><span class="line">  GitCommit:</span><br><span class="line"> runc:</span><br><span class="line">  Version:          1.0.0~rc95-0ubuntu1~20.04.2</span><br><span class="line">  GitCommit:</span><br><span class="line"> docker-init:</span><br><span class="line">  Version:          0.19.0</span><br><span class="line">  GitCommit:</span><br></pre></td></tr></table></figure><h2 id="æ¸¬è©¦"><a href="#æ¸¬è©¦" class="headerlink" title="æ¸¬è©¦"></a>æ¸¬è©¦</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">$ docker run hello-world</span><br><span class="line"></span><br><span class="line">Hello from Docker!</span><br><span class="line">This message shows that your installation appears to be working correctly.</span><br><span class="line"></span><br><span class="line">To generate this message, Docker took the following steps:</span><br><span class="line"> 1. The Docker client contacted the Docker daemon.</span><br><span class="line"> 2. The Docker daemon pulled the <span class="string">&quot;hello-world&quot;</span> image from the Docker Hub.</span><br><span class="line">    (amd64)</span><br><span class="line"> 3. The Docker daemon created a new container from that image <span class="built_in">which</span> runs the</span><br><span class="line">    executable that produces the output you are currently reading.</span><br><span class="line"> 4. The Docker daemon streamed that output to the Docker client, <span class="built_in">which</span> sent it</span><br><span class="line">    to your terminal.</span><br><span class="line"></span><br><span class="line">To try something more ambitious, you can run an Ubuntu container with:</span><br><span class="line"> $ docker run -it ubuntu bash</span><br><span class="line"></span><br><span class="line">Share images, automate workflows, and more with a free Docker ID:</span><br><span class="line"> https://hub.docker.com/</span><br><span class="line"></span><br><span class="line">For more examples and ideas, visit:</span><br><span class="line"> https://docs.docker.com/get-started/</span><br></pre></td></tr></table></figure><h2 id="è£œå……"><a href="#è£œå……" class="headerlink" title="è£œå……"></a>è£œå……</h2><p>å¦‚æœæˆ‘å€‘å¸Œæœ›dockerå¯ä»¥ç”¨ç‰¹å®šçš„useråŸ·è¡Œçš„è©±å¯ä»¥åƒç…§ä»¥ä¸‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å°‡ç”¨æˆ¶åŠ å…¥dockerç¾¤çµ„ä¸­</span></span><br><span class="line">$ <span class="built_in">sudo</span> usermod -aG docker <span class="variable">$USER</span></span><br><span class="line"><span class="comment"># å¥—ç”¨æ–°çš„ç¾¤çµ„è¨­å®š</span></span><br><span class="line">$ <span class="built_in">sudo</span> newgrp docker</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;dockeræ˜¯ç›®å‰å®¹å™¨åŒ–éƒ¨å±¬æœ€ç«ç´…çš„æ–¹æ¡ˆ&lt;br&gt;å»¢è©±ä¸å¤šèªªç¾åœ¨è¶•å¿«ä¾†çœ‹çœ‹æ€éº¼å®‰è£å§!&lt;/p&gt;
&lt;h2 id=&quot;å®‰è£&quot;&gt;&lt;a href=&quot;#å®‰è£&quot; class=&quot;headerlink&quot; title=&quot;å®‰è£&quot;&gt;&lt;/a&gt;å®‰è£&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;sudo&lt;/span&gt; apt update&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ &lt;span class=&quot;built_in&quot;&gt;sudo&lt;/span&gt; install docker.io&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="docker" scheme="https://pcion123.github.io/categories/docker/"/>
    
    
      <category term="linux" scheme="https://pcion123.github.io/tags/linux/"/>
    
      <category term="ubuntu" scheme="https://pcion123.github.io/tags/ubuntu/"/>
    
      <category term="docker" scheme="https://pcion123.github.io/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>å®‰è£Nginx</title>
    <link href="https://pcion123.github.io/2020/11/14/nginx-install/"/>
    <id>https://pcion123.github.io/2020/11/14/nginx-install/</id>
    <published>2020-11-14T09:47:09.000Z</published>
    <updated>2025-08-13T14:31:49.422Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å®‰è£Nginx"><a href="#å®‰è£Nginx" class="headerlink" title="å®‰è£Nginx"></a>å®‰è£Nginx</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ apt install nginx</span><br></pre></td></tr></table></figure><h2 id="configè·¯å¾‘"><a href="#configè·¯å¾‘" class="headerlink" title="configè·¯å¾‘"></a>configè·¯å¾‘</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥è©¢configè·¯å¾‘</span></span><br><span class="line">$ nginx -t</span><br><span class="line"><span class="comment"># ubuntué è¨­æœƒåœ¨/etc/nginxåº•ä¸‹</span></span><br></pre></td></tr></table></figure><h2 id="åŸºæœ¬æŒ‡ä»¤"><a href="#åŸºæœ¬æŒ‡ä»¤" class="headerlink" title="åŸºæœ¬æŒ‡ä»¤"></a>åŸºæœ¬æŒ‡ä»¤</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å•Ÿå‹•nginx</span></span><br><span class="line">$ systemctl start nginx</span><br><span class="line"><span class="comment"># åœæ­¢ngnix</span></span><br><span class="line">$ systemctl stop nginx</span><br><span class="line"><span class="comment"># é‡è¼‰ngnix</span></span><br><span class="line">$ systemctl reload nginx</span><br></pre></td></tr></table></figure><span id="more"></span><h2 id="é é¢æ¸¬è©¦-http-127-0-0-1"><a href="#é é¢æ¸¬è©¦-http-127-0-0-1" class="headerlink" title="é é¢æ¸¬è©¦ http://127.0.0.1"></a>é é¢æ¸¬è©¦ <a href="http://127.0.0.1/">http://127.0.0.1</a></h2><img src="/2020/11/14/nginx-install/nginx1.png" class="" title="å®‰è£å®Œæˆ"><p>ä»¥ä¸‹å…§å®¹åå‘å¿ƒå¾—ç­†è¨˜</p><h2 id="è¨­å®šproxy"><a href="#è¨­å®šproxy" class="headerlink" title="è¨­å®šproxy"></a>è¨­å®šproxy</h2><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line"><span class="comment"># ç›£è½ 80 port</span></span><br><span class="line">    <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">listen</span> [::]:<span class="number">80</span>;</span><br><span class="line">    <span class="comment"># è¨­ç½®é€²ä¾†çš„domainnameæˆ–ip</span></span><br><span class="line">    <span class="attribute">server_name</span> localhost;</span><br><span class="line">    <span class="comment"># è¨­ç½®routing</span></span><br><span class="line">    <span class="section">location</span> / &#123;</span><br><span class="line">    <span class="comment"># è½‰ç™¼</span></span><br><span class="line">        <span class="attribute">proxy_pass</span> http://localhost:9001;</span><br><span class="line">        <span class="comment"># è½‰ç™¼requestçš„headerå…§å®¹</span></span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarded-Proto <span class="variable">$http_x_forwarded_proto</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è¨­å®šloadbalance"><a href="#è¨­å®šloadbalance" class="headerlink" title="è¨­å®šloadbalance"></a>è¨­å®šloadbalance</h2><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¨­ç½®è¼ªå·¡ç¯€é»</span></span><br><span class="line"><span class="section">upstream</span> servicemapping &#123;</span><br><span class="line">    <span class="attribute">server</span> <span class="number">127.0.0.1:9001</span> weight=<span class="number">3</span>;</span><br><span class="line">    <span class="attribute">server</span> <span class="number">127.0.0.1:9002</span> weight=<span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line"><span class="comment"># ç›£è½ 80 port</span></span><br><span class="line">    <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">listen</span> [::]:<span class="number">80</span>;</span><br><span class="line">    <span class="comment"># è¨­ç½®é€²ä¾†çš„domainnameæˆ–ip</span></span><br><span class="line">    <span class="attribute">server_name</span> my.app.test;</span><br><span class="line"><span class="comment"># è¨­ç½®routing</span></span><br><span class="line">    <span class="section">location</span> / &#123;</span><br><span class="line">    <span class="comment"># è½‰ç™¼</span></span><br><span class="line">        <span class="attribute">proxy_pass</span> http://servicemapping;</span><br><span class="line">        <span class="comment"># è½‰ç™¼requestçš„headerå…§å®¹</span></span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarded-Proto <span class="variable">$http_x_forwarded_proto</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å…©æ¬¡è«‹æ±‚çµæœ"><a href="#å…©æ¬¡è«‹æ±‚çµæœ" class="headerlink" title="å…©æ¬¡è«‹æ±‚çµæœ"></a>å…©æ¬¡è«‹æ±‚çµæœ</h2><img src="/2020/11/14/nginx-install/nginx2.png" class=""><img src="/2020/11/14/nginx-install/nginx3.png" class="">]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;å®‰è£Nginx&quot;&gt;&lt;a href=&quot;#å®‰è£Nginx&quot; class=&quot;headerlink&quot; title=&quot;å®‰è£Nginx&quot;&gt;&lt;/a&gt;å®‰è£Nginx&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ apt install nginx&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&quot;configè·¯å¾‘&quot;&gt;&lt;a href=&quot;#configè·¯å¾‘&quot; class=&quot;headerlink&quot; title=&quot;configè·¯å¾‘&quot;&gt;&lt;/a&gt;configè·¯å¾‘&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# æŸ¥è©¢configè·¯å¾‘&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ nginx -t&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# ubuntué è¨­æœƒåœ¨/etc/nginxåº•ä¸‹&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&quot;åŸºæœ¬æŒ‡ä»¤&quot;&gt;&lt;a href=&quot;#åŸºæœ¬æŒ‡ä»¤&quot; class=&quot;headerlink&quot; title=&quot;åŸºæœ¬æŒ‡ä»¤&quot;&gt;&lt;/a&gt;åŸºæœ¬æŒ‡ä»¤&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# å•Ÿå‹•nginx&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ systemctl start nginx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# åœæ­¢ngnix&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ systemctl stop nginx&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# é‡è¼‰ngnix&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ systemctl reload nginx&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="nginx" scheme="https://pcion123.github.io/categories/nginx/"/>
    
    
      <category term="linux" scheme="https://pcion123.github.io/tags/linux/"/>
    
      <category term="nginx" scheme="https://pcion123.github.io/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntuå®‰è£Codimd</title>
    <link href="https://pcion123.github.io/2020/07/05/codimd-install/"/>
    <id>https://pcion123.github.io/2020/07/05/codimd-install/</id>
    <published>2020-07-05T08:21:25.000Z</published>
    <updated>2025-08-13T14:31:49.372Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç›¸é—œä»‹ç´¹"><a href="#ç›¸é—œä»‹ç´¹" class="headerlink" title="ç›¸é—œä»‹ç´¹"></a>ç›¸é—œä»‹ç´¹</h2><p><a href="https://github.com/hackmdio/codimd">github</a><br><a href="https://hackmd.io/c/codimd-documentation/%2Fs%2Fcodimd-manual-deployment">manual-deployment</a></p><h2 id="å®‰è£nodejs"><a href="#å®‰è£nodejs" class="headerlink" title="å®‰è£nodejs"></a>å®‰è£nodejs</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£ç‰ˆæœ¬åº«</span></span><br><span class="line">$ curl -sL https://deb.nodesource.com/setup_10.x | <span class="built_in">sudo</span> -E bash -</span><br><span class="line"><span class="comment"># å®‰è£nodejs</span></span><br><span class="line">$ apt install -y nodejs</span><br><span class="line"><span class="comment"># æŸ¥çœ‹nodejsç‰ˆæœ¬</span></span><br><span class="line">$ node -v</span><br><span class="line"><span class="comment"># æŸ¥çœ‹npmç‰ˆæœ¬</span></span><br><span class="line">$ npm -v</span><br></pre></td></tr></table></figure><h2 id="å®‰è£ç›¸é—œä¾è³´"><a href="#å®‰è£ç›¸é—œä¾è³´" class="headerlink" title="å®‰è£ç›¸é—œä¾è³´"></a>å®‰è£ç›¸é—œä¾è³´</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g yarn</span><br><span class="line">$ npm install -g node-gyp</span><br><span class="line">$ npm install -g sqlite3</span><br><span class="line">$ npm install -g webpack</span><br></pre></td></tr></table></figure><h2 id="å®‰è£codimd"><a href="#å®‰è£codimd" class="headerlink" title="å®‰è£codimd"></a>å®‰è£codimd</h2><h3 id="è¨­ç½®ç’°å¢ƒè®Šæ•¸"><a href="#è¨­ç½®ç’°å¢ƒè®Šæ•¸" class="headerlink" title="è¨­ç½®ç’°å¢ƒè®Šæ•¸"></a>è¨­ç½®ç’°å¢ƒè®Šæ•¸</h3><p>æ‰“é–‹&#x2F;etc&#x2F;profileé€™å€‹æª”æ¡ˆä¸¦ä¸”åœ¨æœ«å°¾åŠ å…¥ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:NODE_ENV=production</span><br></pre></td></tr></table></figure><h3 id="æŠ“å–é …ç›®-opt"><a href="#æŠ“å–é …ç›®-opt" class="headerlink" title="æŠ“å–é …ç›®(&#x2F;opt)"></a>æŠ“å–é …ç›®(&#x2F;opt)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> https://github.com/hackmdio/codimd.git</span><br></pre></td></tr></table></figure><span id="more"></span><h3 id="åˆå§‹åŒ–é…ç½®"><a href="#åˆå§‹åŒ–é…ç½®" class="headerlink" title="åˆå§‹åŒ–é…ç½®"></a>åˆå§‹åŒ–é…ç½®</h3><h4 id="å…ˆä¿®æ”¹å®‰è£é…ç½®bin-setup"><a href="#å…ˆä¿®æ”¹å®‰è£é…ç½®bin-setup" class="headerlink" title="å…ˆä¿®æ”¹å®‰è£é…ç½®bin&#x2F;setup"></a>å…ˆä¿®æ”¹å®‰è£é…ç½®bin&#x2F;setup</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;install packages&quot;</span></span><br><span class="line">npm install --production --unsafe-perm=<span class="literal">true</span> --allow-root</span><br><span class="line"></span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">.</span><br></pre></td></tr></table></figure><h4 id="åŸ·è¡Œå®‰è£é…ç½®"><a href="#åŸ·è¡Œå®‰è£é…ç½®" class="headerlink" title="åŸ·è¡Œå®‰è£é…ç½®"></a>åŸ·è¡Œå®‰è£é…ç½®</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">sudo</span> bash bin/setup</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹ç’°å¢ƒé…ç½®"><a href="#ä¿®æ”¹ç’°å¢ƒé…ç½®" class="headerlink" title="ä¿®æ”¹ç’°å¢ƒé…ç½®"></a>ä¿®æ”¹ç’°å¢ƒé…ç½®</h3><p>ç·¨è¼¯config.json</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line"></span><br><span class="line">    &quot;production&quot;: &#123;</span><br><span class="line">        &quot;host&quot;: &quot;0.0.0.0&quot;, // è¨­ç½®ä¾†æº</span><br><span class="line">        &quot;port&quot;: 3000, // è¨­ç½®port</span><br><span class="line">        &quot;loglevel&quot;: &quot;info&quot;,</span><br><span class="line">        &quot;hsts&quot;: &#123;</span><br><span class="line">            &quot;enable&quot;: true,</span><br><span class="line">            &quot;maxAgeSeconds&quot;: 31536000,</span><br><span class="line">            &quot;includeSubdomains&quot;: true,</span><br><span class="line">            &quot;preload&quot;: true</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;csp&quot;: &#123;</span><br><span class="line">            &quot;enable&quot;: true,</span><br><span class="line">            &quot;directives&quot;: &#123;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;upgradeInsecureRequests&quot;: &quot;auto&quot;,</span><br><span class="line">            &quot;addDefaults&quot;: true,</span><br><span class="line">            &quot;addDisqus&quot;: true,</span><br><span class="line">            &quot;addGoogleAnalytics&quot;: true</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;db&quot;: &#123;</span><br><span class="line">            &quot;username&quot;: &quot;å¸³è™Ÿ&quot;, // è¨­ç½®dbå¸³è™Ÿ</span><br><span class="line">            &quot;password&quot;: &quot;å¯†ç¢¼&quot;, // è¨­ç½®dbå¯†ç¢¼</span><br><span class="line">            &quot;database&quot;: &quot;è³‡æ–™åº«&quot;, // è¨­ç½®è³‡æ–™åº«åç¨±</span><br><span class="line">            &quot;host&quot;: &quot;localhost&quot;,</span><br><span class="line">            &quot;port&quot;: &quot;3306&quot;,</span><br><span class="line">            &quot;dialect&quot;: &quot;mysql&quot;</span><br><span class="line">        &#125;</span><br><span class="line">        &quot;linkifyHeaderStyle&quot;: &quot;gfm&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç·¨è¼¯.sequelizerc</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var path = require(&#x27;path&#x27;);</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">    &#x27;config&#x27;:          path.resolve(&#x27;config.json&#x27;),</span><br><span class="line">    &#x27;migrations-path&#x27;: path.resolve(&#x27;lib&#x27;, &#x27;migrations&#x27;),</span><br><span class="line">    &#x27;models-path&#x27;:     path.resolve(&#x27;lib&#x27;, &#x27;models&#x27;),</span><br><span class="line">    &#x27;url&#x27;:             &#x27;mysql://&#123;dbå¸³è™Ÿ&#125;:&#123;dbå¯†ç¢¼&#125;@localhost:3306/codimd&#x27;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç·¨è¼¯lib&#x2F;config&#x2F;default.js</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line"></span><br><span class="line"> allowAnonymous: false, // é—œé–‰åŒ¿åç™»å…¥</span><br><span class="line"> allowAnonymousEdits: false, // é—œé–‰åŒ¿åç·¨è¼¯</span><br><span class="line"></span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line"></span><br><span class="line"> email: true, // é–‹å•Ÿemailä½¿ç”¨</span><br><span class="line"> allowEmailRegister: true, // å…è¨±emailè¨»å†Š</span><br><span class="line"></span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">.</span><br></pre></td></tr></table></figure><h2 id="å•Ÿå‹•"><a href="#å•Ÿå‹•" class="headerlink" title="å•Ÿå‹•"></a>å•Ÿå‹•</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npm run build // é‡æ–°ç·¨è¼¯å‰ç«¯é é¢</span><br><span class="line">$ node app.js // å•Ÿå‹•æœå‹™</span><br></pre></td></tr></table></figure><img src="/2020/07/05/codimd-install/codimd1.png" class=""><img src="/2020/07/05/codimd-install/codimd2.png" class=""><img src="/2020/07/05/codimd-install/codimd3.png" class="">]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;ç›¸é—œä»‹ç´¹&quot;&gt;&lt;a href=&quot;#ç›¸é—œä»‹ç´¹&quot; class=&quot;headerlink&quot; title=&quot;ç›¸é—œä»‹ç´¹&quot;&gt;&lt;/a&gt;ç›¸é—œä»‹ç´¹&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/hackmdio/codimd&quot;&gt;github&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://hackmd.io/c/codimd-documentation/%2Fs%2Fcodimd-manual-deployment&quot;&gt;manual-deployment&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;å®‰è£nodejs&quot;&gt;&lt;a href=&quot;#å®‰è£nodejs&quot; class=&quot;headerlink&quot; title=&quot;å®‰è£nodejs&quot;&gt;&lt;/a&gt;å®‰è£nodejs&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# å®‰è£ç‰ˆæœ¬åº«&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ curl -sL https://deb.nodesource.com/setup_10.x | &lt;span class=&quot;built_in&quot;&gt;sudo&lt;/span&gt; -E bash -&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# å®‰è£nodejs&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ apt install -y nodejs&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# æŸ¥çœ‹nodejsç‰ˆæœ¬&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ node -v&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# æŸ¥çœ‹npmç‰ˆæœ¬&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ npm -v&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&quot;å®‰è£ç›¸é—œä¾è³´&quot;&gt;&lt;a href=&quot;#å®‰è£ç›¸é—œä¾è³´&quot; class=&quot;headerlink&quot; title=&quot;å®‰è£ç›¸é—œä¾è³´&quot;&gt;&lt;/a&gt;å®‰è£ç›¸é—œä¾è³´&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ npm install -g yarn&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ npm install -g node-gyp&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ npm install -g sqlite3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ npm install -g webpack&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&quot;å®‰è£codimd&quot;&gt;&lt;a href=&quot;#å®‰è£codimd&quot; class=&quot;headerlink&quot; title=&quot;å®‰è£codimd&quot;&gt;&lt;/a&gt;å®‰è£codimd&lt;/h2&gt;&lt;h3 id=&quot;è¨­ç½®ç’°å¢ƒè®Šæ•¸&quot;&gt;&lt;a href=&quot;#è¨­ç½®ç’°å¢ƒè®Šæ•¸&quot; class=&quot;headerlink&quot; title=&quot;è¨­ç½®ç’°å¢ƒè®Šæ•¸&quot;&gt;&lt;/a&gt;è¨­ç½®ç’°å¢ƒè®Šæ•¸&lt;/h3&gt;&lt;p&gt;æ‰“é–‹&amp;#x2F;etc&amp;#x2F;profileé€™å€‹æª”æ¡ˆä¸¦ä¸”åœ¨æœ«å°¾åŠ å…¥ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;export&lt;/span&gt; PATH=&lt;span class=&quot;variable&quot;&gt;$PATH&lt;/span&gt;:NODE_ENV=production&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h3 id=&quot;æŠ“å–é …ç›®-opt&quot;&gt;&lt;a href=&quot;#æŠ“å–é …ç›®-opt&quot; class=&quot;headerlink&quot; title=&quot;æŠ“å–é …ç›®(&amp;#x2F;opt)&quot;&gt;&lt;/a&gt;æŠ“å–é …ç›®(&amp;#x2F;opt)&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ git &lt;span class=&quot;built_in&quot;&gt;clone&lt;/span&gt; https://github.com/hackmdio/codimd.git&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="linux" scheme="https://pcion123.github.io/categories/linux/"/>
    
    
      <category term="linux" scheme="https://pcion123.github.io/tags/linux/"/>
    
      <category term="ubuntu" scheme="https://pcion123.github.io/tags/ubuntu/"/>
    
      <category term="codimd" scheme="https://pcion123.github.io/tags/codimd/"/>
    
      <category term="hackmd" scheme="https://pcion123.github.io/tags/hackmd/"/>
    
  </entry>
  
</feed>
