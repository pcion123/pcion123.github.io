[{"title":"Ubuntuå®‰è£Codimd","url":"/2020/07/05/codimd-install/","content":"ç›¸é—œä»‹ç´¹githubmanual-deployment\nå®‰è£nodejs# å®‰è£ç‰ˆæœ¬åº«$ curl -sL https://deb.nodesource.com/setup_10.x | sudo -E bash -# å®‰è£nodejs$ apt install -y nodejs# æŸ¥çœ‹nodejsç‰ˆæœ¬$ node -v# æŸ¥çœ‹npmç‰ˆæœ¬$ npm -v\n\nå®‰è£ç›¸é—œä¾è³´$ npm install -g yarn$ npm install -g node-gyp$ npm install -g sqlite3$ npm install -g webpack\n\nå®‰è£codimdè¨­ç½®ç’°å¢ƒè®Šæ•¸æ‰“é–‹&#x2F;etc&#x2F;profileé€™å€‹æª”æ¡ˆä¸¦ä¸”åœ¨æœ«å°¾åŠ å…¥ï¼š\nexport PATH=$PATH:NODE_ENV=production\n\næŠ“å–é …ç›®(&#x2F;opt)$ git clone https://github.com/hackmdio/codimd.git\n\n\n\nåˆå§‹åŒ–é…ç½®å…ˆä¿®æ”¹å®‰è£é…ç½®bin&#x2F;setup\t.\t.\t.echo &quot;install packages&quot;npm install --production --unsafe-perm=true --allow-root\t.\t.\t.\nåŸ·è¡Œå®‰è£é…ç½®$ sudo bash bin/setup\n\nä¿®æ”¹ç’°å¢ƒé…ç½®ç·¨è¼¯config.json\n&#123;\t.\t.\t.    &quot;production&quot;: &#123;        &quot;host&quot;: &quot;0.0.0.0&quot;, // è¨­ç½®ä¾†æº        &quot;port&quot;: 3000, // è¨­ç½®port        &quot;loglevel&quot;: &quot;info&quot;,        &quot;hsts&quot;: &#123;            &quot;enable&quot;: true,            &quot;maxAgeSeconds&quot;: 31536000,            &quot;includeSubdomains&quot;: true,            &quot;preload&quot;: true        &#125;,        &quot;csp&quot;: &#123;            &quot;enable&quot;: true,            &quot;directives&quot;: &#123;            &#125;,            &quot;upgradeInsecureRequests&quot;: &quot;auto&quot;,            &quot;addDefaults&quot;: true,            &quot;addDisqus&quot;: true,            &quot;addGoogleAnalytics&quot;: true        &#125;,        &quot;db&quot;: &#123;            &quot;username&quot;: &quot;å¸³è™Ÿ&quot;, // è¨­ç½®dbå¸³è™Ÿ            &quot;password&quot;: &quot;å¯†ç¢¼&quot;, // è¨­ç½®dbå¯†ç¢¼            &quot;database&quot;: &quot;è³‡æ–™åº«&quot;, // è¨­ç½®è³‡æ–™åº«åç¨±            &quot;host&quot;: &quot;localhost&quot;,            &quot;port&quot;: &quot;3306&quot;,            &quot;dialect&quot;: &quot;mysql&quot;        &#125;        &quot;linkifyHeaderStyle&quot;: &quot;gfm&quot;    &#125;&#125;\n\nç·¨è¼¯.sequelizerc\nvar path = require(&#x27;path&#x27;);module.exports = &#123;    &#x27;config&#x27;:          path.resolve(&#x27;config.json&#x27;),    &#x27;migrations-path&#x27;: path.resolve(&#x27;lib&#x27;, &#x27;migrations&#x27;),    &#x27;models-path&#x27;:     path.resolve(&#x27;lib&#x27;, &#x27;models&#x27;),    &#x27;url&#x27;:             &#x27;mysql://&#123;dbå¸³è™Ÿ&#125;:&#123;dbå¯†ç¢¼&#125;@localhost:3306/codimd&#x27;&#125;\n\nç·¨è¼¯lib&#x2F;config&#x2F;default.js\n... allowAnonymous: false, // é—œé–‰åŒ¿åç™»å…¥ allowAnonymousEdits: false, // é—œé–‰åŒ¿åç·¨è¼¯... email: true, // é–‹å•Ÿemailä½¿ç”¨ allowEmailRegister: true, // å…è¨±emailè¨»å†Š...\n\nå•Ÿå‹•$ npm run build // é‡æ–°ç·¨è¼¯å‰ç«¯é é¢$ node app.js // å•Ÿå‹•æœå‹™\n\n\n\n","categories":["linux"],"tags":["linux","ubuntu","codimd","hackmd"]},{"title":"Docker Compose ç·¨å¯«æŒ‡å—","url":"/2025/11/29/docker-compose-intro/","content":"Docker Compose ç·¨å¯«æŒ‡å—ä»€éº¼æ˜¯ Docker Composeï¼ŸDocker Compose æ˜¯ä¸€å€‹ç”¨æ–¼å®šç¾©å’Œç®¡ç†å¤šå®¹å™¨ Docker æ‡‰ç”¨ç¨‹å¼çš„å·¥å…·ã€‚é€é YAML æª”æ¡ˆä¾†é…ç½®æ‡‰ç”¨ç¨‹å¼çš„æœå‹™ã€ç¶²è·¯å’Œè³‡æ–™å·ï¼Œè®“æ‚¨å¯ä»¥ç”¨å–®ä¸€å‘½ä»¤ä¾†å»ºç«‹å’Œå•Ÿå‹•æ‰€æœ‰ç›¸é—œçš„æœå‹™ã€‚\nDocker Compose çš„å„ªå‹¢\nç°¡åŒ–å¤šå®¹å™¨ç®¡ç†ï¼šç”¨ä¸€å€‹æª”æ¡ˆå®šç¾©æ•´å€‹æ‡‰ç”¨ç¨‹å¼æ¶æ§‹\nç’°å¢ƒä¸€è‡´æ€§ï¼šç¢ºä¿é–‹ç™¼ã€æ¸¬è©¦ã€ç”Ÿç”¢ç’°å¢ƒçš„ä¸€è‡´æ€§\nå¿«é€Ÿéƒ¨ç½²ï¼šä¸€éµå•Ÿå‹•æ•´å€‹æ‡‰ç”¨ç¨‹å¼å †ç–Š\næœå‹™ç·¨æ’ï¼šè¼•é¬†ç®¡ç†æœå‹™é–“çš„ä¾è³´é—œä¿‚\nå¯é‡ç¾æ€§ï¼šç‰ˆæœ¬æ§åˆ¶å‹å¥½ï¼Œä¾¿æ–¼åœ˜éšŠå”ä½œ\n\nä½¿ç”¨å ´æ™¯\nå¾®æœå‹™æ¶æ§‹ï¼šç®¡ç†å¤šå€‹ç›¸äº’ä¾è³´çš„æœå‹™\né–‹ç™¼ç’°å¢ƒï¼šå¿«é€Ÿæ­å»ºå®Œæ•´çš„é–‹ç™¼ç’°å¢ƒ\næ¸¬è©¦ç’°å¢ƒï¼šå‰µå»ºéš”é›¢çš„æ¸¬è©¦ç’°å¢ƒ\nCI&#x2F;CD æµç¨‹ï¼šè‡ªå‹•åŒ–éƒ¨ç½²å’Œæ¸¬è©¦\n\n\n\n\nåŸºæœ¬æ¦‚å¿µæ ¸å¿ƒçµ„ä»¶\nServicesï¼ˆæœå‹™ï¼‰ï¼šå®šç¾©å®¹å™¨çš„é…ç½®ï¼ŒåŒ…æ‹¬æ˜ åƒæª”ã€ç«¯å£ã€ç’°å¢ƒè®Šæ•¸ç­‰\nNetworksï¼ˆç¶²è·¯ï¼‰ï¼šç®¡ç†å®¹å™¨é–“çš„ç¶²è·¯é€šè¨Š\nVolumesï¼ˆè³‡æ–™å·ï¼‰ï¼šè™•ç†è³‡æ–™æŒä¹…åŒ–å’Œå…±äº«\n\næª”æ¡ˆçµæ§‹version: &#x27;3.8&#x27;      # Compose æª”æ¡ˆç‰ˆæœ¬services:           # æœå‹™å®šç¾©  service1:    # æœå‹™é…ç½®networks:           # ç¶²è·¯å®šç¾©ï¼ˆå¯é¸ï¼‰  # ç¶²è·¯é…ç½®volumes:            # è³‡æ–™å·å®šç¾©ï¼ˆå¯é¸ï¼‰  # è³‡æ–™å·é…ç½®\n\n\nå®Œæ•´ç¯„ä¾‹ï¼šSpring Boot æ‡‰ç”¨ç¨‹å¼ä»¥ä¸‹æ˜¯ä¸€å€‹ Spring Boot æ‡‰ç”¨ç¨‹å¼çš„ Docker Compose é…ç½®ç¯„ä¾‹ï¼š\nversion: &#x27;3.8&#x27;services:  dockertest:    build:      context: .      dockerfile: Dockerfile      args:        MAVEN_PROFILE: dev        SPRING_PROFILE: dev    image: dockertest:latest    container_name: dockertest-dev    ports:      - &quot;80:8080&quot;    environment:      - SPRING_PROFILES_ACTIVE=dev      - JAVA_OPTS=-Xmx512m -Xms256m -Dspring.profiles.active=dev    volumes:      # ä½¿ç”¨ named volume é¿å…æ¬Šé™å•é¡Œ      - dev-logs:/app/logs    healthcheck:      test: [&quot;CMD&quot;, &quot;curl&quot;, &quot;-f&quot;, &quot;http://localhost:8080/actuator/health&quot;]      interval: 30s      timeout: 10s      retries: 3      start_period: 60s    restart: unless-stopped    networks:      - app-networknetworks:  app-network:    driver: bridge# Named volume for development logsvolumes:  dev-logs:    driver: local\n\né…ç½®è©³è§£1. ç‰ˆæœ¬è²æ˜version: &#x27;3.8&#x27;\n\nç›®çš„ï¼šæŒ‡å®š Docker Compose æª”æ¡ˆæ ¼å¼ç‰ˆæœ¬\nå»ºè­°ï¼šä½¿ç”¨ 3.8 æˆ–æ›´æ–°ç‰ˆæœ¬ä»¥æ”¯æ´æœ€æ–°åŠŸèƒ½\n\n2. æœå‹™æ§‹å»ºé…ç½®build:  context: .  dockerfile: Dockerfile  args:    MAVEN_PROFILE: dev    SPRING_PROFILE: dev\n\ncontextï¼šå»ºæ§‹ä¸Šä¸‹æ–‡è·¯å¾‘\ndockerfileï¼šæŒ‡å®š Dockerfile æª”æ¡ˆ\nargsï¼šå‚³éå»ºæ§‹åƒæ•¸\n\n3. ç«¯å£æ˜ å°„ports:  - &quot;80:8080&quot;\n\næ ¼å¼ï¼š&quot;ä¸»æ©Ÿç«¯å£:å®¹å™¨ç«¯å£&quot;\nç”¨é€”ï¼šè®“å¤–éƒ¨å¯ä»¥å­˜å–å®¹å™¨å…§çš„æœå‹™\n\n4. ç’°å¢ƒè®Šæ•¸environment:  - SPRING_PROFILES_ACTIVE=dev  - JAVA_OPTS=-Xmx512m -Xms256m\n\næ ¼å¼ä¸€ï¼šåˆ—è¡¨æ ¼å¼ - KEY=VALUE\næ ¼å¼äºŒï¼šå­—å…¸æ ¼å¼ KEY: VALUE\n\n5. è³‡æ–™å·æ›è¼‰volumes:  - dev-logs:/app/logs                    # Named volume  - ./config:/app/config:ro               # Bind mount (å”¯è®€)  - /var/run/docker.sock:/var/run/docker.sock  # Socket æ›è¼‰\n\n6. å¥åº·æª¢æŸ¥healthcheck:  test: [&quot;CMD&quot;, &quot;curl&quot;, &quot;-f&quot;, &quot;http://localhost:8080/actuator/health&quot;]  interval: 30s  timeout: 10s  retries: 3  start_period: 60s\n\n7. é‡å•Ÿç­–ç•¥restart: unless-stopped\n\nnoï¼šä¸è‡ªå‹•é‡å•Ÿï¼ˆé è¨­ï¼‰\nalwaysï¼šç¸½æ˜¯é‡å•Ÿ\non-failureï¼šå¤±æ•—æ™‚é‡å•Ÿ\nunless-stoppedï¼šé™¤éæ‰‹å‹•åœæ­¢ï¼Œå¦å‰‡ç¸½æ˜¯é‡å•Ÿ\n\n8. ç¶²è·¯é…ç½®networks:  - app-network\n\nåŠŸèƒ½ï¼šå°‡æœå‹™åŠ å…¥æŒ‡å®šç¶²è·¯\nç”¨é€”ï¼šå¯¦ç¾æœå‹™é–“çš„ç¶²è·¯éš”é›¢å’Œé€šè¨Šç®¡ç†\n\n\nå¸¸ç”¨é…ç½®é¸é …æœå‹™é…ç½®\n\n\né¸é …\nåŠŸèƒ½\nç¯„ä¾‹\n\n\n\nimage\næŒ‡å®šæ˜ åƒæª”\nimage: nginx:latest\n\n\nbuild\nå»ºæ§‹é…ç½®\nbuild: .\n\n\nports\nç«¯å£æ˜ å°„\nports: [&quot;80:8080&quot;]\n\n\nenvironment\nç’°å¢ƒè®Šæ•¸\nenvironment: NODE_ENV=production\n\n\nvolumes\nè³‡æ–™å·æ›è¼‰\nvolumes: [&quot;./data:/app/data&quot;]\n\n\nnetworks\nç¶²è·¯é…ç½®\nnetworks: [&quot;app-net&quot;]\n\n\ndepends_on\næœå‹™ä¾è³´\ndepends_on: [&quot;db&quot;]\n\n\nrestart\né‡å•Ÿç­–ç•¥\nrestart: always\n\n\ncommand\nè¦†å¯«å‘½ä»¤\ncommand: nginx -g &#39;daemon off;&#39;\n\n\nentrypoint\nè¦†å¯«å…¥å£é»\nentrypoint: /app/start.sh\n\n\nç¶²è·¯é¡å‹networks:  frontend:    driver: bridge  backend:    driver: bridge    internal: true  # å…§éƒ¨ç¶²è·¯ï¼Œç„¡æ³•å­˜å–å¤–éƒ¨  overlay-net:    driver: overlay  # ç”¨æ–¼ Swarm æ¨¡å¼\n\nè³‡æ–™å·é¡å‹volumes:  # Named volume  mysql-data:    driver: local  # NFS volume  nfs-data:    driver: local    driver_opts:      type: nfs      o: addr=192.168.1.100,rw      device: &quot;:/path/to/dir&quot;\n\n\nå¸¸ç”¨å‘½ä»¤åŸºæœ¬æ“ä½œ# å•Ÿå‹•æœå‹™ï¼ˆèƒŒæ™¯åŸ·è¡Œï¼‰docker-compose up -d# æŸ¥çœ‹æœå‹™ç‹€æ…‹docker-compose ps# æŸ¥çœ‹æœå‹™æ—¥èªŒdocker-compose logs# æŸ¥çœ‹ç‰¹å®šæœå‹™æ—¥èªŒdocker-compose logs dockertest# åœæ­¢æœå‹™docker-compose stop# åœæ­¢ä¸¦åˆªé™¤å®¹å™¨docker-compose down# åœæ­¢ä¸¦åˆªé™¤å®¹å™¨ã€ç¶²è·¯ã€è³‡æ–™å·docker-compose down -v\n\nå»ºæ§‹å’Œæ›´æ–°# å»ºæ§‹æ˜ åƒæª”docker-compose build# å»ºæ§‹ç‰¹å®šæœå‹™docker-compose build dockertest# å¼·åˆ¶é‡æ–°å»ºæ§‹docker-compose build --no-cache# æ‹‰å–æœ€æ–°æ˜ åƒæª”docker-compose pull# é‡å•Ÿæœå‹™docker-compose restart dockertest\n\næ“´å±•å’Œç®¡ç†# æ“´å±•æœå‹™å¯¦ä¾‹docker-compose up -d --scale web=3# åŸ·è¡Œä¸€æ¬¡æ€§å‘½ä»¤docker-compose exec dockertest bash# åœ¨æ–°å®¹å™¨ä¸­åŸ·è¡Œå‘½ä»¤docker-compose run dockertest python manage.py migrate# æŸ¥çœ‹é…ç½®docker-compose config# é©—è­‰é…ç½®æª”æ¡ˆdocker-compose config --quiet\n\n\nç’°å¢ƒç®¡ç†å¤šç’°å¢ƒé…ç½®åŸºç¤é…ç½®ï¼šdocker-compose.yml\nversion: &#x27;3.8&#x27;services:  app:    build: .    environment:      - NODE_ENV=$&#123;NODE_ENV:-development&#125;\n\né–‹ç™¼ç’°å¢ƒï¼šdocker-compose.override.yml\nversion: &#x27;3.8&#x27;services:  app:    volumes:      - .:/app    ports:      - &quot;3000:3000&quot;    environment:      - DEBUG=true\n\nç”Ÿç”¢ç’°å¢ƒï¼šdocker-compose.prod.yml\nversion: &#x27;3.8&#x27;services:  app:    restart: always    environment:      - NODE_ENV=production\n\nä½¿ç”¨ç‰¹å®šé…ç½®æª”æ¡ˆ# ä½¿ç”¨ç”Ÿç”¢ç’°å¢ƒé…ç½®docker-compose -f docker-compose.yml -f docker-compose.prod.yml up -d# ä½¿ç”¨é–‹ç™¼ç’°å¢ƒé…ç½®ï¼ˆå•Ÿå‹•æœå‹™ï¼‰docker compose -f docker-compose.dev.yml up -d# ä½¿ç”¨é–‹ç™¼ç’°å¢ƒé…ç½®ï¼ˆåœæ­¢ä¸¦æ¸…ç†ï¼‰docker compose -f docker-compose.dev.yml down -v# ä½¿ç”¨ç’°å¢ƒè®Šæ•¸æª”æ¡ˆdocker-compose --env-file .env.prod up -d\n\nå‘½ä»¤èªªæ˜ï¼š\n\n-fï¼šæŒ‡å®šä½¿ç”¨çš„ Docker Compose æª”æ¡ˆ\nup -dï¼šèƒŒæ™¯å•Ÿå‹•æœå‹™\ndown -vï¼šåœæ­¢æœå‹™ä¸¦åˆªé™¤ç›¸é—œçš„è³‡æ–™å·\nå¯ä»¥åŒæ™‚æŒ‡å®šå¤šå€‹é…ç½®æª”æ¡ˆï¼Œå¾Œé¢çš„æœƒè¦†è“‹å‰é¢çš„è¨­å®š\n\nç’°å¢ƒè®Šæ•¸æª”æ¡ˆ (.env)# .envCOMPOSE_PROJECT_NAME=myappPOSTGRES_PASSWORD=secretpasswordAPP_VERSION=1.0.0\n\n\næœ€ä½³å¯¦è¸1. æª”æ¡ˆçµ„ç¹”project/â”œâ”€â”€ docker-compose.yml          # åŸºç¤é…ç½®â”œâ”€â”€ docker-compose.override.yml # é–‹ç™¼ç’°å¢ƒè¦†è“‹â”œâ”€â”€ docker-compose.prod.yml     # ç”Ÿç”¢ç’°å¢ƒé…ç½®â”œâ”€â”€ docker-compose.test.yml     # æ¸¬è©¦ç’°å¢ƒé…ç½®â”œâ”€â”€ .env                        # ç’°å¢ƒè®Šæ•¸â”œâ”€â”€ .env.example               # ç’°å¢ƒè®Šæ•¸ç¯„ä¾‹â””â”€â”€ dockerfiles/               # è‡ªå®šç¾© Dockerfile    â”œâ”€â”€ app.Dockerfile    â””â”€â”€ nginx.Dockerfile\n\n2. å®‰å…¨æ€§è€ƒé‡# ä½¿ç”¨é root ä½¿ç”¨è€…services:  app:    user: &quot;1001:1001&quot;    # é™åˆ¶å®¹å™¨æ¬Šé™    cap_drop:      - ALL    cap_add:      - NET_BIND_SERVICE# ä½¿ç”¨ secrets ç®¡ç†æ•æ„Ÿè³‡æ–™secrets:  db_password:    file: ./secrets/db_password.txtservices:  app:    secrets:      - db_password\n\n3. è³‡æºé™åˆ¶services:  app:    deploy:      resources:        limits:          memory: 512M          cpus: &#x27;0.5&#x27;        reservations:          memory: 256M          cpus: &#x27;0.25&#x27;\n\n4. å¥åº·æª¢æŸ¥services:  web:    healthcheck:      test: [&quot;CMD&quot;, &quot;curl&quot;, &quot;-f&quot;, &quot;http://localhost:8080/health&quot;]      interval: 1m30s      timeout: 10s      retries: 3      start_period: 40s\n\n\næ•…éšœæ’é™¤å¸¸è¦‹å•é¡ŒQ1: æœå‹™ç„¡æ³•å•Ÿå‹•ï¼Ÿ\n# æª¢æŸ¥é…ç½®èªæ³•docker-compose config# æŸ¥çœ‹è©³ç´°éŒ¯èª¤ä¿¡æ¯docker-compose up --no-deps service-name# æª¢æŸ¥æœå‹™æ—¥èªŒdocker-compose logs service-name\n\nQ2: ç«¯å£è¡çªï¼Ÿ\n# æŸ¥çœ‹ç«¯å£ä½¿ç”¨æƒ…æ³netstat -tulpn | grep :8080# ä¿®æ”¹ç«¯å£æ˜ å°„ports:  - &quot;8081:8080&quot;  # æ”¹ç”¨å…¶ä»–ä¸»æ©Ÿç«¯å£\n\nQ3: è³‡æ–™éºå¤±ï¼Ÿ\n# ä½¿ç”¨ named volumes ç¢ºä¿è³‡æ–™æŒä¹…åŒ–volumes:  postgres-data:    driver: localservices:  db:    volumes:      - postgres-data:/var/lib/postgresql/data\n\né™¤éŒ¯æŠ€å·§# é€²å…¥å®¹å™¨é€²è¡Œé™¤éŒ¯docker-compose exec service-name bash# æŸ¥çœ‹å®¹å™¨å…§ç¨‹åºdocker-compose exec service-name ps aux# æª¢æŸ¥ç¶²è·¯é€£æ¥docker-compose exec service-name ping other-service# æŸ¥çœ‹ç’°å¢ƒè®Šæ•¸docker-compose exec service-name env\n\n\né€²éšé…ç½®æ—¥èªŒç®¡ç†version: &#x27;3.8&#x27;services:  dockertest:    build: .    logging:      driver: &quot;json-file&quot;      options:        max-size: &quot;10m&quot;        max-file: &quot;3&quot;    volumes:      - ./logs:/app/logs\n\nè³‡æºé™åˆ¶version: &#x27;3.8&#x27;services:  dockertest:    build: .    deploy:      resources:        limits:          memory: 512M          cpus: &#x27;0.5&#x27;        reservations:          memory: 256M          cpus: &#x27;0.25&#x27;\n\n\næç¤ºå»ºè­°åœ¨é–‹ç™¼ç’°å¢ƒä½¿ç”¨ docker-compose.override.yml ä¾†è¦†è“‹ç”Ÿç”¢ç’°å¢ƒé…ç½®\n\n\né‡è¦æç¤ºåœ¨ç”Ÿç”¢ç’°å¢ƒä¸­ï¼Œè«‹å‹™å¿…è¨­å®šé©ç•¶çš„è³‡æºé™åˆ¶ã€å¥åº·æª¢æŸ¥å’Œé‡å•Ÿç­–ç•¥\n\n\nå®‰å…¨æé†’é¿å…åœ¨ Docker Compose æª”æ¡ˆä¸­ç¡¬ç·¨ç¢¼æ•æ„Ÿè³‡æ–™ï¼Œä½¿ç”¨ç’°å¢ƒè®Šæ•¸æˆ– Docker Secrets\n\nğŸ“º å¯¦æˆ°æ•™å­¸å½±ç‰‡ï¼šç·¨å¯«docker-composeå¿«é€Ÿéƒ¨å±¬ç’°å¢ƒ\n\n  \n    \n    \n  \n","categories":["docker"],"tags":["docker"]},{"title":"Docker Dockerfile ç·¨å¯«æŒ‡å—","url":"/2025/11/23/docker-file-intro/","content":"Docker Dockerfile ç·¨å¯«æŒ‡å—ä»€éº¼æ˜¯ Dockerfileï¼ŸDockerfile æ˜¯ä¸€å€‹æ–‡å­—æª”æ¡ˆï¼ŒåŒ…å«äº†ä¸€ç³»åˆ—æŒ‡ä»¤ç”¨ä¾†è‡ªå‹•åŒ–å»ºæ§‹ Docker æ˜ åƒæª”ã€‚é€é Dockerfileï¼Œæˆ‘å€‘å¯ä»¥å°‡æ‡‰ç”¨ç¨‹å¼åŠå…¶é‹è¡Œç’°å¢ƒå°è£æˆä¸€å€‹å¯ç§»æ¤çš„æ˜ åƒæª”ï¼Œå¯¦ç¾ã€Œä¸€æ¬¡å»ºæ§‹ï¼Œåˆ°è™•é‹è¡Œã€çš„ç›®æ¨™ã€‚\nDockerfile çš„å„ªå‹¢\nå¯é‡ç¾æ€§ï¼šç¢ºä¿åœ¨ä¸åŒç’°å¢ƒä¸­å»ºæ§‹å‡ºç›¸åŒçš„æ˜ åƒæª”\nç‰ˆæœ¬æ§åˆ¶ï¼šå¯ä»¥åƒç¨‹å¼ç¢¼ä¸€æ¨£é€²è¡Œç‰ˆæœ¬ç®¡ç†\nè‡ªå‹•åŒ–ï¼šæ¸›å°‘æ‰‹å‹•é…ç½®ï¼Œé™ä½äººç‚ºéŒ¯èª¤\næ¨™æº–åŒ–ï¼šçµ±ä¸€çš„å»ºæ§‹æµç¨‹å’Œç’°å¢ƒé…ç½®\n\n\n\n\nåŸºæœ¬æŒ‡ä»¤ä»‹ç´¹æ ¸å¿ƒæŒ‡ä»¤\n\n\næŒ‡ä»¤\nåŠŸèƒ½\nç¯„ä¾‹\n\n\n\nFROM\næŒ‡å®šåŸºç¤æ˜ åƒæª”\nFROM openjdk:21-jre\n\n\nWORKDIR\nè¨­å®šå·¥ä½œç›®éŒ„\nWORKDIR /app\n\n\nCOPY\nè¤‡è£½æª”æ¡ˆåˆ°æ˜ åƒæª”\nCOPY . /app\n\n\nRUN\nåŸ·è¡Œå‘½ä»¤\nRUN apt-get update\n\n\nEXPOSE\nè²æ˜å®¹å™¨ç«¯å£\nEXPOSE 8080\n\n\nCMD\nå®¹å™¨å•Ÿå‹•æ™‚çš„é è¨­å‘½ä»¤\nCMD [&quot;java&quot;, &quot;-jar&quot;, &quot;app.jar&quot;]\n\n\nENTRYPOINT\nå®¹å™¨å•Ÿå‹•é»\nENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;]\n\n\né€²éšæŒ‡ä»¤\n\n\næŒ‡ä»¤\nåŠŸèƒ½\nç¯„ä¾‹\n\n\n\nARG\nå»ºæ§‹æ™‚åƒæ•¸\nARG JAVA_VERSION=21\n\n\nENV\nç’°å¢ƒè®Šæ•¸\nENV NODE_ENV=production\n\n\nVOLUME\nè²æ˜å·æ›è¼‰é»\nVOLUME [&quot;/data&quot;]\n\n\nUSER\nåˆ‡æ›ä½¿ç”¨è€…\nUSER app\n\n\nHEALTHCHECK\nå¥åº·æª¢æŸ¥\nHEALTHCHECK CMD curl -f http://localhost:8080/health\n\n\nLABEL\næ·»åŠ å…ƒæ•¸æ“š\nLABEL version=&quot;1.0&quot;\n\n\n\nå®Œæ•´ç¯„ä¾‹ï¼šSpring Boot æ‡‰ç”¨ç¨‹å¼ä»¥ä¸‹æ˜¯ä¸€å€‹ç”Ÿç”¢ç´šåˆ¥çš„ Spring Boot æ‡‰ç”¨ç¨‹å¼ Dockerfile ç¯„ä¾‹ï¼š\n# Dockerfile for Spring Boot Application with Java 21# Multi-stage build for optimized image size# Global build arguments (available to all stages)ARG MAVEN_PROFILE=devARG SPRING_PROFILE=dev# Build stageFROM maven:3.9.9-eclipse-temurin-21 AS build# Re-declare args to make them available in this stageARG MAVEN_PROFILE# Set working directoryWORKDIR /app# Copy Maven configuration files first for better layer cachingCOPY pom.xml ./COPY mvnw ./COPY mvnw.cmd ./COPY .mvn ./.mvn# Download dependencies (this layer will be cached unless pom.xml changes)RUN mvn dependency:go-offline -B# Copy source codeCOPY src ./src# Build the application# Using the specified profile and skipping tests for faster buildRUN mvn clean package -DskipTests -P$&#123;MAVEN_PROFILE&#125; -B# Runtime stageFROM eclipse-temurin:21-jre AS runtime# Re-declare args to make them available in this stageARG SPRING_PROFILE# Install necessary packages and create non-root userRUN apt-get update &amp;&amp; apt-get install -y --no-install-recommends \\    curl \\    tzdata \\    &amp;&amp; rm -rf /var/lib/apt/lists/* \\    &amp;&amp; groupadd -g 1001 dockertest \\    &amp;&amp; useradd -u 1001 -g dockertest -s /bin/bash -m dockertest# Set timezone (optional, adjust as needed)ENV TZ=Asia/Taipei# Create log directories with proper permissionsRUN mkdir -p /var/log/dockertest /app/logs \\    &amp;&amp; chown -R dockertest:dockertest /var/log/dockertest /app/logs# Set working directoryWORKDIR /app# Copy the built jar from build stageCOPY --from=build /app/target/dockertest-0.0.1-SNAPSHOT-boot.jar app.jar# Change ownership to non-root userRUN chown -R dockertest:dockertest /app# Create volume mount points for logsVOLUME [&quot;/app/logs&quot;, &quot;/var/log/dockertest&quot;]# Switch to non-root userUSER dockertest# Expose portEXPOSE 8080# Health checkHEALTHCHECK --interval=30s --timeout=10s --start-period=60s --retries=3 \\    CMD curl -f http://localhost:8080/actuator/health || exit 1# Environment variablesENV JAVA_OPTS=&quot;-Djava.awt.headless=true -Djava.security.egd=file:/dev/./urandom&quot; \\    SPRING_PROFILES_ACTIVE=$&#123;SPRING_PROFILE&#125;# Run the applicationENTRYPOINT [&quot;sh&quot;, &quot;-c&quot;, &quot;java $JAVA_OPTS -jar app.jar&quot;]# Labels for better container managementLABEL maintainer=&quot;vscodelife&quot; \\      version=&quot;0.0.1-SNAPSHOT&quot; \\      description=&quot;Spring Boot Docker Test Application&quot; \\      org.opencontainers.image.title=&quot;dockertest&quot; \\      org.opencontainers.image.description=&quot;Demo project for Spring Boot with Docker&quot; \\      org.opencontainers.image.version=&quot;0.0.1-SNAPSHOT&quot; \\      org.opencontainers.image.vendor=&quot;vscodelife&quot;\n\nç¯„ä¾‹è§£æ1. å¤šéšæ®µå»ºæ§‹ (Multi-stage Build)FROM maven:3.9.9-eclipse-temurin-21 AS build# ... å»ºæ§‹éšæ®µFROM eclipse-temurin:21-jre AS runtime# ... é‹è¡Œéšæ®µ\n\nç›®çš„ï¼šåˆ†é›¢å»ºæ§‹ç’°å¢ƒå’Œé‹è¡Œç’°å¢ƒï¼Œæ¸›å°‘æœ€çµ‚æ˜ åƒæª”å¤§å°\nå„ªå‹¢ï¼šå»ºæ§‹å·¥å…·ä¸æœƒåŒ…å«åœ¨æœ€çµ‚æ˜ åƒæª”ä¸­\n\n2. å»ºæ§‹åƒæ•¸ (Build Arguments)ARG MAVEN_PROFILE=devARG SPRING_PROFILE=dev\n\nç”¨é€”ï¼šåœ¨å»ºæ§‹æ™‚å‹•æ…‹é…ç½®åƒæ•¸\nä½¿ç”¨ï¼šdocker build --build-arg MAVEN_PROFILE=prod .\n\n3. å±¤ç´šå¿«å–å„ªåŒ–COPY pom.xml ./RUN mvn dependency:go-offline -BCOPY src ./src\n\nç­–ç•¥ï¼šå…ˆè¤‡è£½ä¾è³´é…ç½®ï¼Œå†è¤‡è£½åŸå§‹ç¢¼\næ•ˆæœï¼šä¾è³´ä¸‹è¼‰å±¤å¯ä»¥è¢«å¿«å–ï¼ŒåŠ é€Ÿå¾ŒçºŒå»ºæ§‹\n\n4. å®‰å…¨æ€§é…ç½®RUN groupadd -g 1001 dockertest \\    &amp;&amp; useradd -u 1001 -g dockertest -s /bin/bash -m dockertestUSER dockertest\n\nç›®çš„ï¼šé¿å…ä½¿ç”¨ root ä½¿ç”¨è€…é‹è¡Œæ‡‰ç”¨ç¨‹å¼\nå¥½è™•ï¼šæ¸›å°‘å®‰å…¨é¢¨éšªï¼Œç¬¦åˆæœ€å°æ¬Šé™åŸå‰‡\n\n5. å¥åº·æª¢æŸ¥HEALTHCHECK --interval=30s --timeout=10s --start-period=60s --retries=3 \\    CMD curl -f http://localhost:8080/actuator/health || exit 1\n\nåŠŸèƒ½ï¼šå®šæœŸæª¢æŸ¥å®¹å™¨å¥åº·ç‹€æ…‹\nåƒæ•¸èªªæ˜ï¼š\nintervalï¼šæª¢æŸ¥é–“éš”\ntimeoutï¼šæª¢æŸ¥è¶…æ™‚æ™‚é–“\nstart-periodï¼šå®¹å™¨å•Ÿå‹•å¾Œç­‰å¾…æ™‚é–“\nretriesï¼šå¤±æ•—é‡è©¦æ¬¡æ•¸\n\n\n\n\næœ€ä½³å¯¦è¸å»ºè­°1. æ˜ åƒæª”å¤§å°å„ªåŒ–ä½¿ç”¨å¤šéšæ®µå»ºæ§‹\n# å»ºæ§‹éšæ®µ - åŒ…å«ç·¨è­¯å·¥å…·FROM node:18 AS buildCOPY package*.json ./RUN npm ci --only=production# é‹è¡Œéšæ®µ - åªåŒ…å«é‹è¡Œæ™‚FROM node:18-alpineCOPY --from=build /app/node_modules ./node_modules\n\né¸æ“‡åˆé©çš„åŸºç¤æ˜ åƒæª”\n# ä¸€èˆ¬ç”¨é€”FROM ubuntu:22.04# æœ€å°åŒ– (æ¨è–¦)FROM alpine:3.18# ç‰¹å®šæ‡‰ç”¨ (æ¨è–¦)FROM openjdk:21-jre-slim\n\n2. å±¤ç´šå¿«å–ç­–ç•¥æ­£ç¢ºçš„æª”æ¡ˆè¤‡è£½é †åº\n# éŒ¯èª¤ - ä»»ä½•æª”æ¡ˆè®Šæ›´éƒ½æœƒé‡æ–°åŸ·è¡Œå®‰è£COPY . /appRUN npm install# æ­£ç¢º - ä¾è³´é…ç½®è®Šæ›´æ‰é‡æ–°å®‰è£COPY package*.json /app/RUN npm installCOPY . /app\n\n3. å®‰å…¨æ€§æœ€ä½³å¯¦è¸ä½¿ç”¨é root ä½¿ç”¨è€…\nRUN addgroup -g 1001 -S appgroup &amp;&amp; \\    adduser -u 1001 -S appuser -G appgroupUSER appuser\n\næ¸›å°‘æ”»æ“Šé¢\n# æ¸…ç†ä¸å¿…è¦çš„å¥—ä»¶RUN apt-get update &amp;&amp; apt-get install -y package \\    &amp;&amp; apt-get clean \\    &amp;&amp; rm -rf /var/lib/apt/lists/*# åªè¤‡è£½å¿…è¦çš„æª”æ¡ˆCOPY --chown=appuser:appgroup app.jar /app/\n\n4. ç’°å¢ƒé…ç½®ä½¿ç”¨ç’°å¢ƒè®Šæ•¸\nENV NODE_ENV=production \\    PORT=3000 \\    LOG_LEVEL=info\n\næ”¯æ´é…ç½®è¦†å¯«\n# å…è¨±é‹è¡Œæ™‚è¦†å¯«ENV JAVA_OPTS=&quot;-Xmx512m&quot; \\    SERVER_PORT=8080\n\n\nå¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆQ1: æ˜ åƒæª”å¤ªå¤§æ€éº¼è¾¦ï¼Ÿè§£æ±ºæ–¹æ¡ˆï¼š\n\nä½¿ç”¨ Alpine åŸºç¤æ˜ åƒæª”\nå¯¦æ–½å¤šéšæ®µå»ºæ§‹\næ¸…ç†æš«å­˜æª”æ¡ˆå’Œå¿«å–\nä½¿ç”¨ .dockerignore æ’é™¤ä¸å¿…è¦æª”æ¡ˆ\n\n# .dockerignorenode_modules*.log.gitDockerfileREADME.md\n\nQ2: å»ºæ§‹é€Ÿåº¦å¤ªæ…¢ï¼Ÿè§£æ±ºæ–¹æ¡ˆï¼š\n\nå„ªåŒ–å±¤ç´šé †åºï¼Œå–„ç”¨å¿«å–\nä½¿ç”¨ BuildKit\nä¸¦è¡ŒåŒ–å»ºæ§‹æ­¥é©Ÿ\n\n# å•Ÿç”¨ BuildKitexport DOCKER_BUILDKIT=1docker build --progress=plain .\n\nQ3: å®¹å™¨å•Ÿå‹•å¤±æ•—ï¼Ÿé™¤éŒ¯æ­¥é©Ÿï¼š\n# æª¢æŸ¥æ˜ åƒæª”docker images# äº’å‹•å¼åŸ·è¡Œdocker run -it --entrypoint /bin/bash your-image# æª¢æŸ¥æ—¥èªŒdocker logs container-name\n\n\né€²éšæŠ€å·§1. ä½¿ç”¨ BuildKit åŠŸèƒ½å¿«å–æ›è¼‰\n# ä½¿ç”¨å¿«å–æ›è¼‰åŠ é€Ÿå¥—ä»¶å®‰è£RUN --mount=type=cache,target=/var/cache/apt \\    apt-get update &amp;&amp; apt-get install -y package\n\nå¯†é‘°æ›è¼‰\n# å®‰å…¨åœ°ä½¿ç”¨å¯†é‘°RUN --mount=type=secret,id=api_key \\    curl -H &quot;Authorization: $(cat /run/secrets/api_key)&quot; api.example.com\n\n2. æ¢ä»¶å»ºæ§‹ARG BUILD_ENV=development# æ ¹æ“šç’°å¢ƒå®‰è£ä¸åŒå¥—ä»¶RUN if [ &quot;$BUILD_ENV&quot; = &quot;development&quot; ] ; then \\        npm install --include=dev ; \\    else \\        npm install --omit=dev ; \\    fi\n\n3. å¥åº·æª¢æŸ¥æœ€ä½³å¯¦è¸# è‡ªå®šç¾©å¥åº·æª¢æŸ¥è…³æœ¬COPY healthcheck.sh /usr/local/bin/RUN chmod +x /usr/local/bin/healthcheck.shHEALTHCHECK --interval=30s --timeout=3s --start-period=60s --retries=3 \\    CMD /usr/local/bin/healthcheck.sh\n\n\nå»ºæ§‹å’Œéƒ¨ç½²å»ºæ§‹æ˜ åƒæª”# åŸºæœ¬å»ºæ§‹docker build -t myapp:latest .# æŒ‡å®šå»ºæ§‹åƒæ•¸docker build --build-arg MAVEN_PROFILE=prod -t myapp:prod .# ä½¿ç”¨ç‰¹å®š Dockerfiledocker build -f Dockerfile.prod -t myapp:prod .\n\næ¨é€åˆ° Registry# æ¨™è¨˜æ˜ åƒæª”docker tag myapp:latest registry.example.com/myapp:latest# æ¨é€docker push registry.example.com/myapp:latest\n\né‹è¡Œå®¹å™¨# åŸºæœ¬é‹è¡Œï¼ˆèƒŒæ™¯åŸ·è¡Œï¼‰docker run -d -p 8080:8080 myapp:latest# è‡¨æ™‚é‹è¡Œï¼ˆå®¹å™¨åœæ­¢å¾Œè‡ªå‹•åˆªé™¤ï¼‰docker run --rm -p 8080:8080 myapp:latest\n\nåƒæ•¸èªªæ˜ï¼š\n\n-dï¼šåœ¨èƒŒæ™¯åŸ·è¡Œå®¹å™¨\n--rmï¼šå®¹å™¨åœæ­¢å¾Œè‡ªå‹•åˆªé™¤ï¼Œé©ç”¨æ–¼æ¸¬è©¦æˆ–è‡¨æ™‚åŸ·è¡Œ\n-p 8080:8080ï¼šå°‡ä¸»æ©Ÿçš„ 8080 ç«¯å£æ˜ å°„åˆ°å®¹å™¨çš„ 8080 ç«¯å£\n\n\næç¤ºå»ºè­°ä½¿ç”¨ Docker Compose ä¾†ç®¡ç†è¤‡é›œçš„å¤šå®¹å™¨æ‡‰ç”¨ç¨‹å¼\n\n\né‡è¦æç¤ºåœ¨ç”Ÿç”¢ç’°å¢ƒä¸­ï¼Œå‹™å¿…éµå¾ªå®‰å…¨æœ€ä½³å¯¦è¸ï¼Œå®šæœŸæ›´æ–°åŸºç¤æ˜ åƒæª”ï¼Œä¸¦é€²è¡Œå®‰å…¨æƒæ\n\nğŸ“º å¯¦æˆ°æ•™å­¸å½±ç‰‡ï¼šç·¨å¯«dockerfileå»ºç«‹imageå¿«é€Ÿéƒ¨å±¬ç’°å¢ƒ\n\n  \n    \n    \n  \n","categories":["docker"],"tags":["docker"]},{"title":"Docker Hub PAT ç”³è«‹æŒ‡å—","url":"/2025/10/11/docker-hub-pat-guide/","content":"Docker Hub PAT ç”³è«‹æŒ‡å—ä»€éº¼æ˜¯ Docker Hub PATï¼ŸDocker Hub Personal Access Token (PAT) æ˜¯ Docker Hub æä¾›çš„èº«ä»½é©—è­‰æ©Ÿåˆ¶ï¼Œç”¨æ–¼æ›¿ä»£å‚³çµ±çš„ä½¿ç”¨è€…åç¨±å’Œå¯†ç¢¼çµ„åˆã€‚PAT æä¾›äº†æ›´å®‰å…¨çš„æ–¹å¼ä¾†å­˜å– Docker Hub çš„ API å’Œæ˜ åƒå€‰åº«ã€‚\nPAT çš„ä¸»è¦å„ªå‹¢ï¼š\nå®‰å…¨æ€§ï¼šé¿å…åœ¨è…³æœ¬æˆ–é…ç½®ä¸­ä½¿ç”¨æ˜æ–‡å¯†ç¢¼\næ¬Šé™æ§åˆ¶ï¼šå¯ä»¥è¨­å®šç‰¹å®šçš„æ¬Šé™ç¯„åœ\næ˜“æ–¼ç®¡ç†ï¼šå¯ä»¥ç¨ç«‹æ’¤éŠ·å’Œæ›´æ–°ï¼Œä¸å½±éŸ¿å¸³æˆ¶å¯†ç¢¼\nå¯©è¨ˆè¿½è¹¤ï¼šæä¾›æ›´å¥½çš„å­˜å–è¨˜éŒ„å’Œç›£æ§\n\nç‚ºä»€éº¼éœ€è¦ä½¿ç”¨ PATï¼Ÿåœ¨ä»¥ä¸‹æƒ…æ³ä¸‹ï¼Œå»ºè­°ä½¿ç”¨ PAT æ›¿ä»£å¯†ç¢¼ï¼š\n\nCI&#x2F;CD æµç¨‹ï¼šåœ¨è‡ªå‹•åŒ–éƒ¨ç½²ä¸­é€²è¡Œæ˜ åƒæ¨é€å’Œæ‹‰å–\næœ¬åœ°é–‹ç™¼ï¼šåœ¨ Minikube æˆ–å…¶ä»–æœ¬åœ°ç’°å¢ƒä¸­æ‹‰å–ç§æœ‰æ˜ åƒ\nè…³æœ¬è‡ªå‹•åŒ–ï¼šéœ€è¦ç¨‹å¼åŒ–å­˜å– Docker Hub API\nä¼æ¥­ç’°å¢ƒï¼šç¬¦åˆä¼æ¥­å®‰å…¨æ”¿ç­–å’Œæœ€ä½³å¯¦å‹™\n\n\n\n\nPAT ç”³è«‹æ­¥é©Ÿæ­¥é©Ÿ 1ï¼šç™»å…¥ Docker Hub\né–‹å•Ÿç€è¦½å™¨ï¼Œå‰å¾€ Docker Hub\né»é¸å³ä¸Šè§’çš„ Sign In æŒ‰éˆ•\nè¼¸å…¥æ‚¨çš„ Docker Hub å¸³è™Ÿå’Œå¯†ç¢¼é€²è¡Œç™»å…¥\n\næ­¥é©Ÿ 2ï¼šé€²å…¥å¸³æˆ¶è¨­å®š\nç™»å…¥å¾Œï¼Œé»é¸å³ä¸Šè§’çš„å¸³æˆ¶é ­åƒ\nå¾ä¸‹æ‹‰é¸å–®ä¸­é¸æ“‡ Account Settings\n\næ­¥é©Ÿ 3ï¼šé€²å…¥ Personal Access Tokens\nåœ¨å·¦å´å°èˆªé¸å–®ä¸­é»é¸ Settings\nå±•é–‹ Settings é¸å–®ï¼Œé¸æ“‡ Personal access tokens\næ‚¨æœƒçœ‹åˆ° Personal access tokens é é¢ï¼Œé¡¯ç¤ºç¾æœ‰çš„æ¬Šæ–åˆ—è¡¨\n\n\n\næ­¥é©Ÿ 4ï¼šå»ºç«‹æ–°çš„å­˜å–æ¬Šæ–\né»é¸å³ä¸Šè§’çš„ Generate new token æŒ‰éˆ•\né€²å…¥ Create access token é é¢\n\n\n\næ­¥é©Ÿ 5ï¼šé…ç½®æ¬Šæ–è¨­å®š\nAccess token descriptionï¼šè¼¸å…¥æœ‰æ„ç¾©çš„æè¿°åç¨±\n\nç¯„ä¾‹ï¼šminikube-pullã€ci-cd-pipelineã€local-development\n\n\nExpiration dateï¼šé¸æ“‡æ¬Šæ–çš„éæœŸæ™‚é–“\n\nNoneï¼šæ°¸ä¸éæœŸï¼ˆä¸å»ºè­°ç”¨æ–¼ç”Ÿç”¢ç’°å¢ƒï¼‰\n30 daysï¼š30 å¤©å¾ŒéæœŸ\n90 daysï¼š90 å¤©å¾ŒéæœŸ\nCustomï¼šè‡ªè¨‚éæœŸæ—¥æœŸ\n\n\nAccess permissionsï¼šé¸æ“‡é©ç•¶çš„æ¬Šé™ç´šåˆ¥\n\nPublic Repo Read-onlyï¼šåªèƒ½è®€å–å…¬é–‹å€‰åº«ï¼ˆé è¨­é¸é …ï¼Œæ¨è–¦ç”¨æ–¼æ‹‰å–ï¼‰\nRead-onlyï¼šåªèƒ½è®€å–æ‰€æœ‰å¯å­˜å–çš„å€‰åº«\nRead &amp; Writeï¼šå¯ä»¥è®€å–å’Œå¯«å…¥å€‰åº«\nRead, Write, Deleteï¼šå®Œæ•´æ¬Šé™ï¼ˆè¬¹æ…ä½¿ç”¨ï¼‰\n\n\né»é¸ Generate æŒ‰éˆ•å»ºç«‹æ¬Šæ–\n\n\næ­¥é©Ÿ 6ï¼šè¤‡è£½å’Œä¿å­˜æ¬Šæ–æ¬Šæ–å»ºç«‹æˆåŠŸå¾Œï¼Œæ‚¨æœƒçœ‹åˆ° Copy access token é é¢ï¼š\nâš ï¸ é‡è¦æé†’ï¼šå€‹äººå­˜å–æ¬Šæ–åªæœƒé¡¯ç¤ºä¸€æ¬¡ï¼Œç„¡æ³•å„²å­˜ä¸”ä¹‹å¾Œç„¡æ³•å†æª¢ç´¢\n\næ¬Šæ–è³‡è¨Šç¢ºèªï¼š\n\nAccess token descriptionï¼šæ‚¨è¨­å®šçš„æè¿°åç¨±ï¼ˆå¦‚ï¼štestï¼‰\nExpires onï¼šéæœŸæ™‚é–“ï¼ˆå¦‚ï¼šNever è¡¨ç¤ºæ°¸ä¸éæœŸï¼‰\nAccess permissionsï¼šæ¬Šé™ç´šåˆ¥ï¼ˆå¦‚ï¼šPublic Repo Read-onlyï¼‰\n\n\nè¤‡è£½æ¬Šæ–ï¼š\n\nåœ¨æ­¥é©Ÿ 1 ä¸­ï¼Œè¤‡è£½ Docker CLI ç™»å…¥æŒ‡ä»¤ï¼šdocker login -u &lt;username&gt;\né»é¸å³å´çš„ Copy æŒ‰éˆ•è¤‡è£½æŒ‡ä»¤\n\n\nè¤‡è£½å€‹äººå­˜å–æ¬Šæ–ï¼š\n\nåœ¨æ­¥é©Ÿ 2 ä¸­ï¼Œé¡¯ç¤ºå®Œæ•´çš„å€‹äººå­˜å–æ¬Šæ–å­—ä¸²\næ¬Šæ–æ ¼å¼é¡ä¼¼ï¼šdckr_pat_abcdefghijk00000\né»é¸å³å´çš„ Copy æŒ‰éˆ•è¤‡è£½æ¬Šæ–\n\n\nå®‰å…¨ä¿å­˜ï¼š\n\nç«‹å³å°‡æ¬Šæ–ä¿å­˜åœ¨å®‰å…¨çš„ä½ç½®ï¼ˆå¦‚å¯†ç¢¼ç®¡ç†å™¨ï¼‰\nè¨˜éŒ„æ¬Šæ–çš„ç”¨é€”å’Œå»ºç«‹æ—¥æœŸ\n\n\nå®Œæˆç”³è«‹ï¼š\n\né»é¸ Back to access tokens æŒ‰éˆ•è¿”å›æ¬Šæ–ç®¡ç†é é¢\n\n\n\n\n\nä½¿ç”¨èªªæ˜æ ¹æ“šé é¢æç¤ºï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æ­¤æ¬Šæ–ä½œç‚ºå¯†ç¢¼ï¼Œé€é Docker CLI å®¢æˆ¶ç«¯ç™»å…¥ï¼š\n\nåŸ·è¡Œç™»å…¥æŒ‡ä»¤ï¼š\ndocker login -u &lt;username&gt;\n\nåœ¨å¯†ç¢¼æç¤ºæ™‚è¼¸å…¥å€‹äººå­˜å–æ¬Šæ–ï¼š\nPassword: &lt;password&gt;\n\næ¬Šæ–ç®¡ç†ä»‹é¢èªªæ˜åœ¨ Personal access tokens é é¢ä¸­ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°ï¼š\n\nDescriptionï¼šæ¬Šæ–çš„æè¿°åç¨±\nScopeï¼šæ¬Šæ–çš„æ¬Šé™ç¯„åœ\nStatusï¼šæ¬Šæ–ç‹€æ…‹ï¼ˆActive&#x2F;Inactiveï¼‰\nSourceï¼šå»ºç«‹æ–¹å¼ï¼ˆManual&#x2F;Auto-generatedï¼‰\nCreatedï¼šå»ºç«‹æ™‚é–“\nLast usedï¼šæœ€å¾Œä½¿ç”¨æ™‚é–“\nExpiration dateï¼šéæœŸæ—¥æœŸ\n\næ‚¨å¯ä»¥é€éå³å´çš„æ“ä½œé¸å–®ä¾†ç®¡ç†ç¾æœ‰çš„æ¬Šæ–ï¼ŒåŒ…æ‹¬æŸ¥çœ‹è©³ç´°è³‡è¨Šã€åœç”¨æˆ–åˆªé™¤æ¬Šæ–ã€‚\nä½¿ç”¨ PAT é€²è¡Œèº«ä»½é©—è­‰åœ¨å‘½ä»¤åˆ—ä¸­ä½¿ç”¨æ ¹æ“š Docker Hub æä¾›çš„æŒ‡å¼•ï¼Œæ¨è–¦ä½¿ç”¨ä»¥ä¸‹æ–¹å¼ï¼š\n# æ–¹æ³•ä¸€ï¼šä½¿ç”¨ Docker Hub æä¾›çš„ç™»å…¥æŒ‡ä»¤docker login -u &lt;username&gt;# åœ¨å¯†ç¢¼æç¤ºæ™‚è¼¸å…¥ PATï¼Œä¾‹å¦‚ï¼š# Password: dckr_pat_abcdefghijk00000# æ–¹æ³•äºŒï¼šç›´æ¥åœ¨æŒ‡ä»¤ä¸­æŒ‡å®šï¼ˆè¼ƒä¸å®‰å…¨ï¼Œæœƒåœ¨å‘½ä»¤æ­·å²ä¸­ç•™ä¸‹è¨˜éŒ„ï¼‰docker login -u &lt;username&gt; -p &lt;password&gt;# æ–¹æ³•ä¸‰ï¼šäº’å‹•å¼ç™»å…¥ï¼ˆæœ€å®‰å…¨ï¼‰docker login# Username: &lt;username&gt;# Password: &lt;password&gt;\n\næœ€ä½³å¯¦å‹™ï¼šå»ºè­°ä½¿ç”¨æ–¹æ³•ä¸€æˆ–æ–¹æ³•ä¸‰ï¼Œé¿å…åœ¨æŒ‡ä»¤è¡Œä¸­ç›´æ¥æš´éœ² PATã€‚\nåœ¨ Kubernetes ä¸­ä½¿ç”¨# å»ºç«‹ Docker Registry Secretkubectl create secret docker-registry regcred \\  --docker-server=https://index.docker.io/v1/ \\  --docker-username=&lt;username&gt; \\  --docker-password=&lt;password&gt; \\  --docker-email=&lt;email&gt;\n\nåœ¨ CI&#x2F;CD ä¸­ä½¿ç”¨# GitHub Actions ç¯„ä¾‹- name: Login to Docker Hub  uses: docker/login-action@v2  with:    username: $&#123;&#123; secrets.DOCKERHUB_USERNAME &#125;&#125;    password: $&#123;&#123; secrets.DOCKERHUB_TOKEN &#125;&#125;\n\nPAT ç®¡ç†æœ€ä½³å¯¦å‹™æ¬Šé™è¨­å®šå»ºè­°\næœ€å°æ¬Šé™åŸå‰‡ï¼šåªæˆäºˆå¿…è¦çš„æ¬Šé™\n\nåƒ…æ‹‰å–æ˜ åƒï¼šä½¿ç”¨ Public Repo Read-only æˆ– Read-only\néœ€è¦æ¨é€æ˜ åƒï¼šä½¿ç”¨ Read &amp; Write\né¿å…ä½¿ç”¨ Read, Write, Delete æ¬Šé™ï¼Œé™¤éçµ•å°å¿…è¦\n\n\nå°ˆç”¨æ¬Šæ–ï¼šç‚ºä¸åŒç”¨é€”å»ºç«‹å°ˆç”¨çš„ PAT\n\né–‹ç™¼ç’°å¢ƒï¼šdev-environment-pat\nç”Ÿç”¢ CI&#x2F;CDï¼šprod-pipeline-pat\nå€‹äººä½¿ç”¨ï¼špersonal-tools-pat\n\n\néæœŸæ™‚é–“è¨­å®šï¼š\n\né–‹ç™¼æ¸¬è©¦ï¼šå»ºè­°è¨­å®š 30-90 å¤©\nç”Ÿç”¢ç’°å¢ƒï¼šå»ºè­°è¨­å®š 90 å¤©ä¸¦å®šæœŸè¼ªæ›\né¿å…ä½¿ç”¨ Noneï¼ˆæ°¸ä¸éæœŸï¼‰é¸é …\n\n\n\nå®‰å…¨æ€§è€ƒé‡\nå®šæœŸè¼ªæ›ï¼šå»ºè­°æ¯ 3-6 å€‹æœˆæ›´æ–°ä¸€æ¬¡ PAT\nå®‰å…¨å­˜å„²ï¼š\nä½¿ç”¨ç’°å¢ƒè®Šæ•¸è€Œéç¡¬ç·¨ç¢¼\nå­˜å„²åœ¨å¯†ç¢¼ç®¡ç†å™¨ä¸­\nåœ¨ CI&#x2F;CD ä¸­ä½¿ç”¨ Secrets ç®¡ç†\n\n\nç›£æ§ä½¿ç”¨ï¼šå®šæœŸæª¢æŸ¥ PAT çš„ä½¿ç”¨æƒ…æ³å’Œå­˜å–è¨˜éŒ„\n\næ¬Šæ–ç®¡ç†åœ¨ Docker Hub çš„ Personal access tokens é é¢ä¸­ï¼Œæ‚¨å¯ä»¥ï¼š\n# æŸ¥çœ‹ç•¶å‰çš„ PAT è³‡è¨Š# åŒ…å«ï¼šDescriptionã€Scopeã€Statusã€Sourceã€Createdã€Last usedã€Expiration date# ç®¡ç†ç¾æœ‰æ¬Šæ–# - é»é¸æ¬Šæ–å³å´çš„ä¸‰é»é¸å–®# - é¸æ“‡ &quot;View details&quot;ã€&quot;Deactivate&quot; æˆ– &quot;Delete&quot;# - å»ºè­°å®šæœŸæ¸…ç†ä¸å†ä½¿ç”¨çš„æ¬Šæ–\n\næ¬Šæ–ç‹€æ…‹èªªæ˜ï¼š\n\nActiveï¼šæ¬Šæ–æ­£å¸¸å¯ç”¨\nInactiveï¼šæ¬Šæ–å·²åœç”¨\nManualï¼šæ‰‹å‹•å»ºç«‹çš„æ¬Šæ–\nAuto-generatedï¼šç³»çµ±è‡ªå‹•ç”Ÿæˆçš„æ¬Šæ–ï¼ˆå¦‚é€é Docker Desktopï¼‰\n\nç–‘é›£æ’è§£å¸¸è¦‹å•é¡Œ1. æ¬Šæ–é©—è­‰å¤±æ•—å¯èƒ½åŸå› ï¼š\n\næ¬Šæ–å·²éæœŸæˆ–è¢«æ’¤éŠ·\næ¬Šé™ä¸è¶³\nä½¿ç”¨è€…åç¨±éŒ¯èª¤\n\nè§£æ±ºæ–¹æ³•ï¼š\n# æª¢æŸ¥ç™»å…¥ç‹€æ…‹docker info# é‡æ–°ç™»å…¥docker logoutdocker login# ç¢ºèªæ¬Šæ–æ¬Šé™æ˜¯å¦è¶³å¤ \n\n2. ç„¡æ³•æ‹‰å–ç§æœ‰æ˜ åƒæª¢æŸ¥é …ç›®ï¼š\n\nPAT æ˜¯å¦å…·æœ‰ç§æœ‰å€‰åº«è®€å–æ¬Šé™\næ˜ åƒåç¨±å’Œæ¨™ç±¤æ˜¯å¦æ­£ç¢º\nç¶²è·¯é€£ç·šæ˜¯å¦æ­£å¸¸\n\n# æ¸¬è©¦æ‹‰å–å…¬é–‹æ˜ åƒdocker pull hello-world# æª¢æŸ¥æ˜ åƒå€‰åº«ç‹€æ…‹docker search &lt;your-image-name&gt;\n\n3. Kubernetes ä¸­ç„¡æ³•ä½¿ç”¨ Image Pull Secret# æª¢æŸ¥ Secret æ˜¯å¦æ­£ç¢ºå»ºç«‹kubectl get secrets# æŸ¥çœ‹ Secret è©³ç´°è³‡è¨Škubectl describe secret regcred# æ¸¬è©¦ Pod ä¸­çš„æ˜ åƒæ‹‰å–kubectl run test-pod --image=&lt;your-private-image&gt; --dry-run=client -o yaml\n\næ¬Šæ–çºŒæœŸå’Œæ›´æ–°å®šæœŸæª¢æŸ¥\nç™»å…¥ Docker Hub\nå‰å¾€å·¦å´é¸å–®çš„ Settings &gt; Personal access tokens\næª¢æŸ¥æ¬Šæ–åˆ—è¡¨ä¸­çš„ Last used æ™‚é–“å’Œ Expiration date\né€éå³å´é¸å–®ç§»é™¤ä¸å†ä½¿ç”¨çš„æ¬Šæ–\n\næ›´æ–°æµç¨‹\nåœ¨ Personal access tokens é é¢é»é¸ Generate new token\nå»ºç«‹æ–°çš„ PAT ä¸¦è¨­å®šé©ç•¶çš„éæœŸæ™‚é–“\nåœ¨æ‰€æœ‰ä½¿ç”¨èˆŠ PAT çš„åœ°æ–¹æ›´æ–°ç‚ºæ–° PAT\næ¸¬è©¦æ–° PAT æ˜¯å¦æ­£å¸¸é‹ä½œ\nåœ¨èˆŠæ¬Šæ–çš„å³å´é¸å–®ä¸­é¸æ“‡ Delete ä¾†æ’¤éŠ·èˆŠçš„ PAT\n\nè‡ªå‹•åŒ–æ›´æ–°æé†’å»ºè­°è¨­å®šæ—¥æ›†æé†’æˆ–ä½¿ç”¨ç›£æ§å·¥å…·ï¼Œå®šæœŸæª¢æŸ¥å’Œæ›´æ–° PATï¼Œç¢ºä¿æœå‹™çš„æŒçºŒå¯ç”¨æ€§ã€‚\né€éæ­£ç¢ºç”³è«‹å’Œç®¡ç† Docker Hub PATï¼Œæ‚¨å¯ä»¥æé«˜ Docker æ˜ åƒç®¡ç†çš„å®‰å…¨æ€§ï¼ŒåŒæ™‚ä¿æŒé–‹ç™¼å’Œéƒ¨ç½²æµç¨‹çš„é †æš¢é‹è¡Œã€‚\n","categories":["docker","docker-hub"],"tags":["docker"]},{"title":"Ubuntuå®‰è£Docker","url":"/2021/08/21/docker-install/","content":"dockeræ˜¯ç›®å‰å®¹å™¨åŒ–éƒ¨å±¬æœ€ç«ç´…çš„æ–¹æ¡ˆå»¢è©±ä¸å¤šèªªç¾åœ¨è¶•å¿«ä¾†çœ‹çœ‹æ€éº¼å®‰è£å§!\nå®‰è£$ sudo apt update$ sudo install docker.io\n\n\n\næŸ¥çœ‹ç‰ˆæœ¬# æŸ¥çœ‹ç‰ˆæœ¬$ docker versionClient: Version:           20.10.7 API version:       1.41 Go version:        go1.13.8 Git commit:        20.10.7-0ubuntu1~20.04.1 Built:             Wed Aug  4 22:52:25 2021 OS/Arch:           linux/amd64 Context:           default Experimental:      trueServer: Engine:  Version:          20.10.7  API version:      1.41 (minimum version 1.12)  Go version:       go1.13.8  Git commit:       20.10.7-0ubuntu1~20.04.1  Built:            Wed Aug  4 19:07:47 2021  OS/Arch:          linux/amd64  Experimental:     false containerd:  Version:          1.5.2-0ubuntu1~20.04.2  GitCommit: runc:  Version:          1.0.0~rc95-0ubuntu1~20.04.2  GitCommit: docker-init:  Version:          0.19.0  GitCommit:\n\næ¸¬è©¦$ docker run hello-worldHello from Docker!This message shows that your installation appears to be working correctly.To generate this message, Docker took the following steps: 1. The Docker client contacted the Docker daemon. 2. The Docker daemon pulled the &quot;hello-world&quot; image from the Docker Hub.    (amd64) 3. The Docker daemon created a new container from that image which runs the    executable that produces the output you are currently reading. 4. The Docker daemon streamed that output to the Docker client, which sent it    to your terminal.To try something more ambitious, you can run an Ubuntu container with: $ docker run -it ubuntu bashShare images, automate workflows, and more with a free Docker ID: https://hub.docker.com/For more examples and ideas, visit: https://docs.docker.com/get-started/\n\nè£œå……å¦‚æœæˆ‘å€‘å¸Œæœ›dockerå¯ä»¥ç”¨ç‰¹å®šçš„useråŸ·è¡Œçš„è©±å¯ä»¥åƒç…§ä»¥ä¸‹\n# å°‡ç”¨æˆ¶åŠ å…¥dockerç¾¤çµ„ä¸­$ sudo usermod -aG docker $USER# å¥—ç”¨æ–°çš„ç¾¤çµ„è¨­å®š$ sudo newgrp docker","categories":["docker"],"tags":["linux","ubuntu","docker"]},{"title":"Docker åŸºæœ¬ä»‹ç´¹","url":"/2025/11/16/docker-intro/","content":"Docker åŸºæœ¬ä»‹ç´¹æ¶æ§‹ç¸½è¦½\n\nä¸Šåœ–å±•ç¤ºäº† Docker å®Œæ•´æ¶æ§‹ï¼ŒåŒ…å« Docker å®¢æˆ¶ç«¯ã€Docker å®ˆè­·ç¨‹åºã€å®¹å™¨é‹è¡Œæ™‚ã€æ˜ åƒæª”å€‰åº«ç­‰æ ¸å¿ƒå…ƒä»¶åŠå…¶äº’å‹•é—œä¿‚\nDocker å¦‚ä½•é‹ä½œï¼ŸDocker é‡‡ç”¨å®¢æˆ¶ç«¯-ä¼ºæœå™¨æ¶æ§‹ï¼Œä¸»è¦åŒ…å«ä»¥ä¸‹å·¥ä½œæµç¨‹ï¼š\n\né–‹ç™¼éšæ®µï¼šä½¿ç”¨ Dockerfile å®šç¾©æ‡‰ç”¨ç¨‹å¼ç’°å¢ƒ\nå»ºæ§‹éšæ®µï¼šé€é docker build å°‡ Dockerfile è½‰æ›ç‚ºæ˜ åƒæª”\nåˆ†äº«éšæ®µï¼šå°‡æ˜ åƒæª”æ¨é€åˆ° Docker Registry é€²è¡Œåˆ†äº«\néƒ¨ç½²éšæ®µï¼šåœ¨ä»»ä½•æ”¯æ´ Docker çš„ç’°å¢ƒä¸­é‹è¡Œå®¹å™¨\n\né€™å€‹æµç¨‹ç¢ºä¿äº†ã€Œä¸€æ¬¡å»ºæ§‹ï¼Œåˆ°è™•é‹è¡Œã€çš„ç›®æ¨™ã€‚\n\n\n\nDocker EngineDocker çš„æ ¸å¿ƒé‹è¡Œå¼•æ“\n\nè² è²¬ç®¡ç†å®¹å™¨çš„æ•´å€‹ç”Ÿå‘½é€±æœŸ\nåŒ…å« Docker å®ˆè­·ç¨‹åºï¼ˆdockerdï¼‰å’Œ REST API\næä¾›å®¹å™¨çš„å»ºç«‹ã€å•Ÿå‹•ã€åœæ­¢å’Œåˆªé™¤ç­‰åŠŸèƒ½\n\nContainerï¼ˆå®¹å™¨ï¼‰æ‡‰ç”¨ç¨‹å¼çš„è¼•é‡åŒ–é‹è¡Œç’°å¢ƒ\n\nåŸºæ–¼æ˜ åƒæª”å»ºç«‹çš„å¯åŸ·è¡Œå¯¦ä¾‹\næä¾›éš”é›¢çš„é‹è¡Œç’°å¢ƒï¼ŒåŒ…å«æ‡‰ç”¨ç¨‹å¼åŠå…¶æ‰€æœ‰ä¾è³´\nç›¸è¼ƒæ–¼è™›æ“¬æ©Ÿå™¨ï¼Œå…·æœ‰æ›´å¿«çš„å•Ÿå‹•é€Ÿåº¦å’Œæ›´ä½çš„è³‡æºæ¶ˆè€—\næ¯å€‹å®¹å™¨éƒ½æœ‰ç¨ç«‹çš„æª”æ¡ˆç³»çµ±ã€ç¶²è·¯å’Œç¨‹åºç©ºé–“\n\nImageï¼ˆæ˜ åƒæª”ï¼‰å®¹å™¨çš„å”¯è®€æ¨¡æ¿\n\nåŒ…å«åŸ·è¡Œæ‡‰ç”¨ç¨‹å¼æ‰€éœ€çš„æ‰€æœ‰æª”æ¡ˆã€å‡½å¼åº«å’Œè¨­å®š\næ¡ç”¨åˆ†å±¤æ¶æ§‹ï¼Œæ”¯æ´å¢é‡æ›´æ–°å’Œå¿«é€Ÿéƒ¨ç½²\nå…·æœ‰ä¸å¯è®Šæ€§ï¼Œç¢ºä¿ç’°å¢ƒä¸€è‡´æ€§\nå¯ä»¥é€é Dockerfile è‡ªå‹•åŒ–å»ºæ§‹\n\nDockerfileæ˜ åƒæª”çš„å»ºæ§‹è…³æœ¬\n\nå®šç¾©æ˜ åƒæª”å»ºæ§‹éç¨‹çš„æ–‡å­—æª”æ¡ˆ\nåŒ…å«ä¸€ç³»åˆ—æŒ‡ä»¤ï¼Œå¦‚ FROMã€RUNã€COPYã€CMD ç­‰\nå¯¦ç¾åŸºç¤è¨­æ–½å³ç¨‹å¼ç¢¼ï¼ˆInfrastructure as Codeï¼‰\næ”¯æ´ç‰ˆæœ¬æ§åˆ¶å’Œè‡ªå‹•åŒ–å»ºæ§‹\n\n\næç¤ºDockerfile æ˜¯å¯¦ç¾å¯é‡ç¾éƒ¨ç½²çš„é—œéµï¼Œå»ºè­°éµå¾ªæœ€ä½³å¯¦è¸ä¾†å„ªåŒ–æ˜ åƒæª”å¤§å°å’Œå®‰å…¨æ€§\n\nDocker Registryæ˜ åƒæª”çš„å„²å­˜å’Œåˆ†ç™¼ä¸­å¿ƒ\n\næä¾›æ˜ åƒæª”çš„ä¸Šå‚³ã€ä¸‹è¼‰å’Œç‰ˆæœ¬ç®¡ç†\nDocker Hub æ˜¯å®˜æ–¹çš„å…¬å…±è¨»å†Šä¸­å¿ƒ\næ”¯æ´ç§æœ‰è¨»å†Šä¸­å¿ƒï¼Œæ»¿è¶³ä¼æ¥­å®‰å…¨éœ€æ±‚\nå¯¦ç¾æ˜ åƒæª”çš„é›†ä¸­ç®¡ç†å’Œåœ˜éšŠå”ä½œ\n\nVolumeï¼ˆè³‡æ–™å·ï¼‰æŒä¹…åŒ–è³‡æ–™å„²å­˜\n\nè§£æ±ºå®¹å™¨é‡å•Ÿæ™‚è³‡æ–™éºå¤±çš„å•é¡Œ\næä¾›å®¹å™¨é–“çš„è³‡æ–™å…±äº«æ©Ÿåˆ¶\næ”¯æ´å¤šç¨®å„²å­˜é©…å‹•ï¼Œå¦‚æœ¬æ©Ÿå„²å­˜ã€ç¶²è·¯å„²å­˜ç­‰\nè³‡æ–™ç”Ÿå‘½é€±æœŸç¨ç«‹æ–¼å®¹å™¨ç”Ÿå‘½é€±æœŸ\n\nNetworkï¼ˆç¶²è·¯ï¼‰å®¹å™¨é–“çš„é€šè¨Šç®¡ç†\n\næä¾›å®¹å™¨èˆ‡å¤–éƒ¨ä¸–ç•Œçš„ç¶²è·¯é€£æ¥\næ”¯æ´å¤šç¨®ç¶²è·¯é©…å‹•æ¨¡å¼ï¼š\nbridge: é è¨­ç¶²è·¯æ¨¡å¼ï¼Œé©ç”¨æ–¼å–®æ©Ÿå®¹å™¨é€šè¨Š\nhost: ç›´æ¥ä½¿ç”¨ä¸»æ©Ÿç¶²è·¯ï¼Œæä¾›æœ€ä½³æ€§èƒ½\noverlay: è·¨ä¸»æ©Ÿå®¹å™¨é€šè¨Šï¼Œé©ç”¨æ–¼å¢é›†ç’°å¢ƒ\nnone: ç„¡ç¶²è·¯å­˜å–ï¼Œé©ç”¨æ–¼å®‰å…¨è¦æ±‚è¼ƒé«˜çš„å ´æ™¯\n\n\n\n\nè¨»è§£é©ç•¶çš„ç¶²è·¯é…ç½®å°æ–¼å®¹å™¨å®‰å…¨æ€§å’Œæ€§èƒ½è‡³é—œé‡è¦\n\nDocker Composeå¤šå®¹å™¨æ‡‰ç”¨ç¨‹å¼çš„ç·¨æ’å·¥å…·\n\né€é YAML æª”æ¡ˆå®šç¾©å’Œç®¡ç†å¤šå®¹å™¨æ‡‰ç”¨ç¨‹å¼\nç°¡åŒ–è¤‡é›œæ‡‰ç”¨ç¨‹å¼çš„éƒ¨ç½²å’Œç®¡ç†\næ”¯æ´æœå‹™ä¾è³´é—œä¿‚å’Œå•Ÿå‹•é †åºæ§åˆ¶\næä¾›é–‹ç™¼ã€æ¸¬è©¦å’Œç”Ÿç”¢ç’°å¢ƒçš„ä¸€è‡´æ€§\n\n\né‡è¦æç¤ºDocker Compose éå¸¸é©åˆé–‹ç™¼ç’°å¢ƒå’Œå°è¦æ¨¡éƒ¨ç½²ï¼Œå°æ–¼å¤§è¦æ¨¡ç”Ÿç”¢ç’°å¢ƒå»ºè­°ä½¿ç”¨ Kubernetes ç­‰ç·¨æ’å·¥å…·\n\nå®‰è£ DockerDocker æä¾›äº†è·¨å¹³å°çš„å®‰è£æ”¯æ´ã€‚ä»¥ä¸‹å°‡ä»‹ç´¹æœ€å¸¸ç”¨çš„å®‰è£æ–¹å¼å’Œæ³¨æ„äº‹é …ã€‚\næ¨è–¦å®‰è£æ–¹å¼Windows&#x2F;macOS ä½¿ç”¨è€…ï¼šç›´æ¥ä¸‹è¼‰ Docker Desktopï¼Œé€™æ˜¯æœ€ç°¡å–®ä¸”å®Œæ•´çš„è§£æ±ºæ–¹æ¡ˆã€‚\nLinux ä½¿ç”¨è€…ï¼šä½¿ç”¨ä»¥ä¸‹æ–¹å¼ä¹‹ä¸€ï¼š\n\næ¨è–¦ï¼šå®˜æ–¹å®‰è£è…³æœ¬ï¼ˆæœ€æ–°ç‰ˆæœ¬ï¼‰\næ›¿ä»£ï¼šå¥—ä»¶ç®¡ç†å™¨å®‰è£ï¼ˆç°¡å–®å¿«é€Ÿï¼‰\n\nç³»çµ±éœ€æ±‚\n\n\nå¹³å°\næœ€ä½éœ€æ±‚\nå»ºè­°é…ç½®\n\n\n\nLinux\n64ä½å…ƒã€Kernel 3.10+\nUbuntu 20.04+ã€Debian 10+ã€CentOS 8+\n\n\nWindows\nWindows 10 Pro 64ä½å…ƒ\nWindows 11 + WSL 2\n\n\nmacOS\nmacOS 10.15+\nmacOS 12+ å« Apple Silicon æ”¯æ´\n\n\næ–¹æ³•ä¸€ï¼šå®˜æ–¹ä¸€éµå®‰è£è…³æœ¬ï¼ˆæ¨è–¦ï¼‰é€™æ˜¯ Docker å®˜æ–¹æä¾›çš„æœ€ç°¡å–®å®‰è£æ–¹å¼ï¼š\n# ä¸‹è¼‰ä¸¦åŸ·è¡Œå®˜æ–¹å®‰è£è…³æœ¬curl -fsSL https://get.docker.com -o get-docker.shsudo sh get-docker.sh# å•Ÿå‹• Docker æœå‹™sudo systemctl enable --now docker# å°‡ä½¿ç”¨è€…åŠ å…¥ docker ç¾¤çµ„sudo usermod -aG docker $USER# é‡æ–°è¼‰å…¥ç¾¤çµ„è¨­å®šnewgrp docker\n\næ–¹æ³•äºŒï¼šæ‰‹å‹•å®‰è£ï¼ˆUbuntu&#x2F;Debianï¼‰å¦‚æœæ‚¨éœ€è¦æ›´ç²¾ç¢ºçš„æ§åˆ¶ï¼Œå¯ä»¥ä½¿ç”¨æ‰‹å‹•å®‰è£ï¼š\n# æ›´æ–°å¥—ä»¶ç´¢å¼•sudo apt update# å®‰è£å¿…è¦çš„å¥—ä»¶sudo apt install -y apt-transport-https ca-certificates curl gnupg lsb-release# æ·»åŠ  Docker å®˜æ–¹ GPG é‡‘é‘°curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg# æ·»åŠ  Docker è»Ÿé«”æºecho &quot;deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable&quot; | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null# æ›´æ–°å¥—ä»¶ç´¢å¼•ä¸¦å®‰è£ Dockersudo apt updatesudo apt install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin# å•Ÿå‹• Docker æœå‹™ä¸¦è¨­å®šç‚ºé–‹æ©Ÿè‡ªå‹•å•Ÿå‹•sudo systemctl enable --now docker# å°‡ç›®å‰ä½¿ç”¨è€…åŠ å…¥ docker ç¾¤çµ„ï¼Œé¿å…æ¯æ¬¡éƒ½éœ€è¦ sudosudo usermod -aG docker $USER\n\næ–¹æ³•ä¸‰ï¼šå¥—ä»¶ç®¡ç†å™¨å®‰è£ï¼ˆç°¡å–®å¿«é€Ÿï¼‰é©ç”¨æ–¼å¿«é€Ÿæ¸¬è©¦æˆ–å­¸ç¿’ç’°å¢ƒï¼š\n# Ubuntu/Debiansudo apt update &amp;&amp; sudo apt install -y docker.io docker-compose-plugin# CentOS/RHELsudo yum install -y docker docker-compose-plugin# å•Ÿå‹•æœå‹™ä¸¦è¨­å®šé–‹æ©Ÿè‡ªå•Ÿsudo systemctl enable --now dockersudo usermod -aG docker $USERnewgrp docker\n\nå®‰è£å¾Œå¿…è¦æ­¥é©Ÿç„¡è«–ä½¿ç”¨å“ªç¨®å®‰è£æ–¹å¼ï¼Œéƒ½éœ€è¦å®Œæˆä»¥ä¸‹æ­¥é©Ÿï¼š\n1. é©—è­‰å®‰è£# æª¢æŸ¥ Docker ç‰ˆæœ¬docker --version# æª¢æŸ¥ Docker ç‹€æ…‹docker info# åŸ·è¡Œæ¸¬è©¦å®¹å™¨docker run --rm hello-world\n\n2. ç¢ºèªæ¬Šé™è¨­å®š# ç¢ºèªä½¿ç”¨è€…åœ¨ docker ç¾¤çµ„ä¸­groups $USER | grep docker# å¦‚æœæ²’æœ‰ï¼ŒåŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼šsudo usermod -aG docker $USERnewgrp docker\n\n\nå®‰å…¨æé†’ï¼šå°‡ä½¿ç”¨è€…åŠ å…¥ docker ç¾¤çµ„æœƒçµ¦äºˆè©²ä½¿ç”¨è€…ç­‰åŒ root çš„ Docker æ“ä½œæ¬Šé™ã€‚åœ¨ç”Ÿç”¢ç’°å¢ƒä¸­è«‹è¬¹æ…è€ƒæ…®å®‰å…¨æ€§ã€‚\n\nWindows å’Œ macOS å®‰è£é€™å…©å€‹å¹³å°çš„å®‰è£éå¸¸ç°¡å–®ï¼š\n\nä¸‹è¼‰ Docker Desktop\nåŸ·è¡Œå®‰è£æª”ä¸¦éµå¾ªå®‰è£ç²¾éˆ\nå®‰è£å®Œæˆå¾Œé‡æ–°å•Ÿå‹•é›»è…¦ï¼ˆWindowsï¼‰æˆ–å•Ÿå‹•æ‡‰ç”¨ç¨‹å¼ï¼ˆmacOSï¼‰\nç­‰å¾… Docker æœå‹™å•Ÿå‹•å®Œæˆ\nä½¿ç”¨ä¸Šè¿°é©—è­‰æ­¥é©Ÿç¢ºèªå®‰è£æˆåŠŸ\n\nå®‰è£ Docker ComposeDocker Compose æ˜¯ç”¨æ–¼å®šç¾©å’Œç®¡ç†å¤šå®¹å™¨ Docker æ‡‰ç”¨ç¨‹å¼çš„å·¥å…·ã€‚ç¾ä»£ç‰ˆæœ¬çš„ Docker å·²ç¶“å…§å»º Compose åŠŸèƒ½ï¼Œä½†æ‚¨ä¹Ÿå¯ä»¥å–®ç¨å®‰è£ Docker Composeã€‚\næª¢æŸ¥æ˜¯å¦å·²å®‰è£ç¾ä»£ç‰ˆæœ¬çš„ Docker Desktop å’Œ Docker Engine å·²ç¶“å…§å»ºäº† Docker Composeï¼š\n# æª¢æŸ¥ Docker Compose ç‰ˆæœ¬ï¼ˆæ–°ç‰ˆèªæ³•ï¼‰docker compose version# æª¢æŸ¥ Docker Compose ç‰ˆæœ¬ï¼ˆèˆŠç‰ˆèªæ³•ï¼‰docker-compose --version\n\nLinux æ‰‹å‹•å®‰è£ Docker Composeå¦‚æœæ‚¨çš„ç³»çµ±æ²’æœ‰å…§å»º Docker Composeï¼Œå¯ä»¥æ‰‹å‹•å®‰è£ã€‚æœ‰å…©ç¨®ä¸»è¦çš„å®‰è£æ–¹å¼ï¼š\næ–¹æ³•ä¸€ï¼šä½œç‚º Docker CLI æ’ä»¶å®‰è£ï¼ˆæ¨è–¦ï¼‰# è¨­å®š Docker é…ç½®ç›®éŒ„DOCKER_CONFIG=$&#123;DOCKER_CONFIG:-$HOME/.docker&#125;mkdir -p $DOCKER_CONFIG/cli-plugins# ä¸‹è¼‰ Docker Compose æ’ä»¶curl -SL https://github.com/docker/compose/releases/download/v2.24.5/docker-compose-linux-x86_64 \\  -o $DOCKER_CONFIG/cli-plugins/docker-compose# çµ¦äºˆåŸ·è¡Œæ¬Šé™chmod +x $DOCKER_CONFIG/cli-plugins/docker-compose\n\næ–¹æ³•äºŒï¼šä½œç‚ºç¨ç«‹åŸ·è¡Œæª”å®‰è£# ä¸‹è¼‰æœ€æ–°ç‰ˆæœ¬çš„ Docker Composesudo curl -L &quot;https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose# çµ¦äºˆåŸ·è¡Œæ¬Šé™sudo chmod +x /usr/local/bin/docker-compose# å»ºç«‹è»Ÿé€£çµï¼ˆå¯é¸ï¼‰sudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose\n\nå…©ç¨®å®‰è£æ–¹å¼çš„å€åˆ¥\n\n\nç‰¹æ€§\næ’ä»¶å®‰è£ï¼ˆæ–¹æ³•ä¸€ï¼‰\nç¨ç«‹å®‰è£ï¼ˆæ–¹æ³•äºŒï¼‰\n\n\n\nå®‰è£ä½ç½®\n~/.docker/cli-plugins/\n/usr/local/bin/\n\n\næ¬Šé™éœ€æ±‚\nç”¨æˆ¶æ¬Šé™å³å¯\néœ€è¦ sudo æ¬Šé™\n\n\nä½¿ç”¨èªæ³•\ndocker compose\ndocker-compose\n\n\næ•´åˆæ€§\nèˆ‡ Docker CLI æ·±åº¦æ•´åˆ\nç¨ç«‹é‹è¡Œ\n\n\næ›´æ–°æ–¹å¼\næ›¿æ›æ’ä»¶æª”æ¡ˆ\né‡æ–°ä¸‹è¼‰åŸ·è¡Œæª”\n\n\nç³»çµ±å½±éŸ¿\nåƒ…å½±éŸ¿ç•¶å‰ç”¨æˆ¶\nå…¨ç³»çµ±å¯ç”¨\n\n\nDocker ç‰ˆæœ¬\néœ€è¦ Docker 20.10+\næ”¯æ´è¼ƒèˆŠç‰ˆæœ¬\n\n\næ¨è–¦ä½¿ç”¨æ’ä»¶å®‰è£çš„åŸå› ï¼š\n\nä¸éœ€è¦ sudo æ¬Šé™ï¼Œæ›´å®‰å…¨\nèˆ‡ Docker CLI æ›´å¥½çš„æ•´åˆ\næ”¯æ´æ–°çš„ docker compose èªæ³•\næ›´å®¹æ˜“ç®¡ç†å’Œæ›´æ–°\n\nä½¿ç”¨å¥—ä»¶ç®¡ç†å™¨å®‰è£Ubuntu&#x2F;Debianï¼š\nsudo apt install -y docker-compose-plugin\n\nCentOS&#x2F;RHELï¼š\nsudo yum install -y docker-compose-plugin\n\né©—è­‰å®‰è£# é©—è­‰ Docker Compose å®‰è£docker compose version# æŸ¥çœ‹å¹«åŠ©è³‡è¨Šdocker compose --help\n\næ–°èˆŠèªæ³•å·®ç•°\næ–°ç‰ˆèªæ³•ï¼šdocker compose ï¼ˆæ¨è–¦ä½¿ç”¨ï¼‰\nèˆŠç‰ˆèªæ³•ï¼šdocker-compose\n\næ–°ç‰ˆ Docker Compose ä½œç‚º Docker CLI çš„æ’ä»¶ï¼Œæä¾›æ›´å¥½çš„æ•´åˆæ€§å’Œæ€§èƒ½ã€‚\n\nå®Œæ•´ç’°å¢ƒé©—è­‰å®Œæˆ Docker å’Œ Docker Compose å®‰è£å¾Œï¼Œä½¿ç”¨ä»¥ä¸‹æ­¥é©Ÿé©—è­‰æ•´å€‹ç’°å¢ƒï¼š\n# 1. æª¢æŸ¥ Docker åŸºæœ¬ç‹€æ…‹docker --version &amp;&amp; docker compose version# 2. æª¢æŸ¥ Docker æœå‹™ç‹€æ…‹docker info | grep -E &quot;Server Version|Storage Driver|Cgroup Driver&quot;# 3. åŸ·è¡Œç°¡å–®çš„å®¹å™¨æ¸¬è©¦docker run --rm hello-world# 4. æ¸¬è©¦ Docker Compose åŠŸèƒ½echo &#x27;version: &quot;3.8&quot;services:  test:    image: hello-world&#x27; &gt; docker-compose.ymldocker compose updocker compose downrm docker-compose.yml# 5. æ¸…ç†æ¸¬è©¦è³‡æºdocker system prune -f\n\nå¦‚æœä»¥ä¸Šæ‰€æœ‰æ­¥é©Ÿéƒ½æˆåŠŸåŸ·è¡Œï¼Œæ°å–œæ‚¨ï¼Docker ç’°å¢ƒå·²ç¶“æº–å‚™å°±ç·’ï¼Œå¯ä»¥é–‹å§‹æ‚¨çš„å®¹å™¨åŒ–ä¹‹æ—…äº†ï¼\n\nä¸‹ä¸€æ­¥å­¸ç¿’å»ºè­°ç¾åœ¨æ‚¨å·²ç¶“äº†è§£äº† Docker çš„æ ¸å¿ƒæ¦‚å¿µä¸¦å®Œæˆäº†å®‰è£ï¼Œæ¥ä¸‹ä¾†å»ºè­°ï¼š\n\nå­¸ç¿’åŸºæœ¬æŒ‡ä»¤ï¼šç†Ÿæ‚‰ docker runã€docker buildã€docker ps ç­‰å¸¸ç”¨æŒ‡ä»¤\nç·¨å¯« Dockerfileï¼šå­¸ç¿’å¦‚ä½•å»ºç«‹è‡ªå·±çš„æ˜ åƒæª”\nä½¿ç”¨ Docker Composeï¼šç®¡ç†å¤šå®¹å™¨æ‡‰ç”¨ç¨‹å¼\næ¢ç´¢å¯¦éš›å°ˆæ¡ˆï¼šå°‡ç¾æœ‰æ‡‰ç”¨ç¨‹å¼å®¹å™¨åŒ–\n\n","categories":["docker"],"tags":["docker"]},{"title":"Elasticsearch+Kibana+Logstashç’°å¢ƒå®‰è£","url":"/2019/10/20/elk-install/","content":"åœ¨åˆ†æ•£å¼ç³»çµ±åº•ä¸‹æˆ‘å€‘éœ€è¦æŸ¥è©¢logç´€éŒ„ç¸½ä¸å¯èƒ½éœ€è¦ä¸€å°ä¸€å°æ©Ÿå™¨ä¸Šå»æŸ¥çœ‹ç´€éŒ„é€™å€‹æ™‚å€™æˆ‘å€‘å°±æœƒéœ€è¦æœ‰å€‹æœå‹™å¹«æˆ‘å€‘é”æˆé€™å€‹ç›®çš„\nelasticsearchå°±å¾ˆé©åˆä¾†å¹«æˆ‘å€‘å®Œæˆé€™å€‹ä»»å‹™\nelasticsearchå®˜ç¶²\n\n\nå®‰è£JDKè«‹åƒè€ƒä¹‹å‰çš„æ–‡ç« \n\nelasticsearchä½ˆç½²elasticsearchæ˜¯ä¸€å€‹åˆ†æ•£å¼çš„å„²å­˜ç³»çµ±ï¼Œå±¬æ–¼NoSQLè³‡æ–™åº«çš„ä¸€ç¨®elasticsearchä»‹ç´¹\n#ä¸‹è¼‰å®‰è£æª”$ wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-7.4.0-amd64.deb#ä¸‹è¼‰é©—è­‰æª”$ wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-7.4.0-amd64.deb.sha512#æª¢æŸ¥æª”æ¡ˆ$ shasum -a 512 -c elasticsearch-7.4.0-amd64.deb.sha512#åŸ·è¡Œå®‰è£$ sudo dpkg -i elasticsearch-7.4.0-amd64.deb\n\nä¿®æ”¹é…ç½®æª”æ¡ˆé¦–å…ˆæˆ‘å€‘è¦å…ˆä¿®æ”¹elasticsearchè¨˜æ†¶é«”çš„ä½¿ç”¨é‡ä¿®æ”¹elasticsearchä½¿ç”¨çš„è¨˜æ†¶é«”ï¼Œè¨­å®šç‚ºä¸»æ©Ÿçš„50%è¨˜æ†¶é«”\n#/etc/elasticsearch/jvm.options-Xms1g  # Xms è¨˜æ†¶é«”ä½¿ç”¨ä¸‹é™-Xmx1g  # Xmx è¨˜æ†¶é«”ä½¿ç”¨ä¸Šé™\n\nä¿®æ”¹è¨­å®šæª”#/etc/elasticsearch/elasticsearch.yml#è¨­ç½®æœå‹™åç¨±cluster.name: elk_elasticsearch#è¨­ç½®ç¯€é»åç¨±node.name: elk_node#è¨­ç½®ç‚ºä¸»è¦çµé»node.master: true#å…è¨±ç¯€é»å„²å­˜æ•¸æ“šnode.data: true#path.data: /var/lib/elasticsearch#path.logs: /var/log/elasticsearch#ç¶å®šä¾†æºnetwork.bind_host: 0.0.0.0#ç¶å®šå°å¤–æœå‹™ç«¯å£http.port: 9200#ç¶å®šç¯€é»é€šä¿¡ç«¯å£transport.tcp.port: 9300#å•Ÿç”¨è³‡æ–™å£“ç¸®transport.tcp.compress: true#é›†ç¾¤ç™¼ç¾ç¯€é»åˆ—è¡¨discovery.seed_hosts: [&quot;127.0.0.1:9300&quot;]#è¨­ç½®ä¸»è¦ç¯€é»åˆ—è¡¨cluster.initial_master_nodes: [&quot;127.0.0.1&quot;]\n\næ¸¬è©¦#å•Ÿå‹•æœå‹™$ service elasticsearch start#æ¸¬è©¦$ curl http://127.0.0.1:9200&#123;  &quot;name&quot; : &quot;elk_node&quot;,  &quot;cluster_name&quot; : &quot;elk_service&quot;,  &quot;cluster_uuid&quot; : &quot;SRb6b1RaTaewA_OK2C7fMA&quot;,  &quot;version&quot; : &#123;    &quot;number&quot; : &quot;7.4.0&quot;,    &quot;build_flavor&quot; : &quot;default&quot;,    &quot;build_type&quot; : &quot;deb&quot;,    &quot;build_hash&quot; : &quot;22e1767283e61a198cb4db791ea66e3f11ab9910&quot;,    &quot;build_date&quot; : &quot;2019-09-27T08:36:48.569419Z&quot;,    &quot;build_snapshot&quot; : false,    &quot;lucene_version&quot; : &quot;8.2.0&quot;,    &quot;minimum_wire_compatibility_version&quot; : &quot;6.8.0&quot;,    &quot;minimum_index_compatibility_version&quot; : &quot;6.0.0-beta1&quot;  &#125;,  &quot;tagline&quot; : &quot;You Know, for Search&quot;&#125;\n\nkibanaä½ˆç½²kibanaæ˜¯elasticsearchå¯è¦–åŒ–çš„é‡è¦å…ƒä»¶kibanaä»‹ç´¹\n#ä¸‹è¼‰å®‰è£æª”$ wget https://artifacts.elastic.co/downloads/kibana/kibana-7.4.0-amd64.deb#ä¸‹è¼‰é©—è­‰æª”$ wget https://artifacts.elastic.co/downloads/kibana/kibana-7.4.0-amd64.deb.sha512#æª¢æŸ¥æª”æ¡ˆ$ shasum -a 512 -c kibana-7.4.0-amd64.deb.sha512#åŸ·è¡Œå®‰è£$ sudo dpkg -i kibana-7.4.0-amd64.deb\n\nä¿®æ”¹é…ç½®æª”æ¡ˆ#/etc/kibana/kibana.yml#ç¶å®šå°å¤–æœå‹™ç«¯å£server.port: 5601#ç¶å®šä¾†æºserver.host: &quot;0.0.0.0&quot;#è¨­ç½®æœå‹™åç¨±server.name: &quot;elk_kibana&quot;#è¨­ç½®elasticsearchç¯€é»åˆ—è¡¨elasticsearch.hosts: [&quot;http://127.0.0.1:9200&quot;]#è¨­ç½®ç´¢å¼•kibana.index: &quot;.kibana&quot;è¨­ç½®logè·¯å¾‘logging.dest: /var/log/kibana/kibana.logè¨­ç½®ä¸­æ–‡åŒ–i18n.locale: &quot;zh-CN&quot;\n\nå»ºç«‹logç›®éŒ„#å»ºç«‹ç›®éŒ„$ mkdir /var/log/kibana#ä¿®æ”¹ä½¿ç”¨è€…æ¬Šé™$ chown kibana:kibana /var/log/kibana\n\næ¸¬è©¦#å•Ÿå‹•æœå‹™$ service kibana start\næ¸¬è©¦ç¶²å€http://127.0.0.1:5601\n\n\n\n\nlogstashä½ˆç½²logstashæ˜¯è² è²¬å¹«æˆ‘å€‘æ”¶é›†å„ç¨®logè³‡æ–™çš„æ”¶é›†å™¨logstashä»‹ç´¹\n#ä¸‹è¼‰å®‰è£æª”$ wget https://artifacts.elastic.co/downloads/logstash/logstash-7.4.0.deb#ä¸‹è¼‰é©—è­‰æª”$ wget https://artifacts.elastic.co/downloads/logstash/logstash-7.4.0.deb.sha512#æª¢æŸ¥æª”æ¡ˆ$ shasum -a 512 -c logstash-7.4.0.deb.sha512#åŸ·è¡Œå®‰è£$ sudo dpkg -i logstash-7.4.0.deb\n\nä¿®æ”¹é…ç½®æª”æ¡ˆ#/etc/logstash/conf.d/30-log.conf# Sample Logstash configuration for creating a simple# Beats -&gt; Logstash -&gt; Elasticsearch pipeline.input &#123;  beats &#123;    port =&gt; 5044  &#125;&#125;output &#123;  elasticsearch &#123;    hosts =&gt; [&quot;http://localhost:9200&quot;]    index =&gt; &quot;%&#123;[@metadata][beat]&#125;-%&#123;[@metadata][version]&#125;-%&#123;+YYYY.MM.dd&#125;&quot;    #user =&gt; &quot;elastic&quot;    #password =&gt; &quot;changeme&quot;  &#125;&#125;\n\næª¢æŸ¥è¨­å®šæª”$ /usr/share/logstash/bin/logstash --config.test_and_exit -f /etc/logstash/conf.d/30-log.conf...Configuration OK\n\nå•Ÿå‹•æœå‹™#å•Ÿå‹•æœå‹™$ service logstash start\n\nåŸºæœ¬ä¸Šelkç’°å¢ƒå®‰è£å°±åˆ°é€™è£¡ä¹‹å¾Œæœ‰ç©ºå†è£œä¸Šlog serverä½¿ç”¨æ–¹å¼\n","categories":["elasticsearch"],"tags":["elasticsearch","kibana","logstash","ä½ˆç½²"]},{"title":"GitLabæ­å»ºèˆ‡ä¸­æ–‡åŒ–","url":"/2018/03/23/gitlab-install/","content":"ç¶²è·¯ä¸Šå·²æœ‰è »å¤šé¡ä¼¼çš„æ–‡ç« ï¼Œæˆ‘å°±ä¸å†éå¤šçš„è«–è¿°äº†å°±å¯«å¯«ä½ˆç½²çš„æ™‚ä¸€äº›å•é¡Œå°±å¥½\ngitlabä½ˆç½²ç›´æ¥ä¸Šå®˜ç¶²gitlabå®˜ç¶²gitlabä¸­æ–‡ç¤¾ç¾¤\næˆ‘ä½ˆç½²çš„ç’°å¢ƒæ˜¯virtualbox+ubuntuåŸºæœ¬ä¸Šç…§è‘—å®˜ç¶²çš„installæŒ‡ä»¤å»ä½ˆç½²å°±èƒ½æˆåŠŸä½ˆç½²æœ€æ–°ç‰ˆæœ¬\nå¦‚æœæ˜¯è¦å¦å¤–é€²è¡Œä¸­æ–‡åŒ–çš„ä½ˆç½²å°±å¿…éœ€å»ä¸­æ–‡ç¤¾ç¾¤çœ‹çœ‹æœ‰æ²’æœ‰å°æ‡‰çš„ç‰ˆæœ¬ä¸­æ–‡åŒ–ç¤¾ç¾¤\nä¾‹å¦‚æˆ‘ä½ˆç½²çš„gitlabç‰ˆæœ¬æ˜¯8.8.9é‚£æˆ‘å°±éœ€è¦æ‰¾åˆ°ä¸­æ–‡åŒ–å°æ‡‰çš„ç‰ˆæœ¬p.s ç‰ˆè™Ÿåªéœ€è¦å°æ‡‰å‰å…©å€‹ç‰ˆè™Ÿå°±å¯ä»¥äº†\né‚£è©²å¦‚ä½•æŒ‡å®šå®‰è£æŒ‡å®šçš„ç‰ˆè™Ÿ\nå®˜ç¶²æä¾›çš„å®‰è£æŒ‡ä»¤æ‡‰è©²å¦‚ä¸‹ï¼š\n$ sudo EXTERNAL_URL=&quot;http://gitlab.example.com&quot; apt-get install gitlab-ee\nä¸Šé¢çš„æŒ‡ä»¤å…¶å¯¦æ˜¯é å…ˆè¨­å®šå¥½gitlabæŒ‡å®šçš„ç¶²å€èˆ‡å®‰è£æœ€æ–°çš„ç‰ˆæœ¬ä¸éæˆ‘é€šå¸¸éƒ½æŠŠé€£ç·šçš„ç¶²å€éƒ½åœ¨ä½ˆç½²å®Œæˆä¹‹å¾Œå†å¦å¤–è¨­å®šæ‰€ä»¥æˆ‘å¦‚æœè¦å®‰è£8.8.9çš„ç‰ˆæœ¬ï¼Œé‚£æŒ‡ä»¤æ‡‰è©²å¦‚ä¸‹ï¼š\n$ sudo apt-get install gitlab-ee=8.8.9-ee.0\nå®‰è£å®Œæˆå¾Œå†å»æ›´æ”¹external_urlå°±å¥½ï¼Œæ›´æ”¹è·¯å¾‘å¦‚ä¸‹ï¼š\n/etc/gitlab/gitlab.rb\nè¨­ç½®é€£ç·šé…ç½®\nexternal_url &#x27;http://127.0.0.1&#x27;\næœ€å¾Œå†é‡æ–°è¨­å®šé…ç½®å°±å®Œæˆäº†\n$ sudo gitlab-ctl reconfigure\né€šå¸¸ç¬¬ä¸€æ¬¡ç™»å…¥æœƒè®“ä½ é‡æ–°è¨­ç½®rootçš„å¯†ç¢¼ä¿®æ”¹å®Œå†ç™»å…¥ä½ å°±å¯ä»¥çœ‹åˆ°gitlabçš„æ­¡è¿ç•«é¢äº†\n\n\nå¦‚æœåªéœ€è¦è‹±æ–‡ç‰ˆæœ¬çš„é‚£ä½ çœ‹åˆ°é€™è£¡å°±è¡Œäº†æ¥ä¸‹ä¾†è¬›è¬›å¦‚ä½•ä½ˆç½²æˆä¸­æ–‡\ngitlabä¸­æ–‡åŒ–ç¬¬ä¸€æ­¥å…ˆç”¨git cloneæ•´å€‹ä¸­æ–‡é–‹ç™¼é …ç›®\n$ git clone https://gitlab.com/larryli/gitlab.git\ncloneä¸‹ä¾†ä¹‹å¾Œå°±å¯ä»¥é–‹å§‹æˆ‘å€‘çš„ä¸­æ–‡åŒ–å¤§æ¥­äº†\n# å…ˆé€²å…¥cloneä¸‹ä¾†çš„é …ç›®ä¸­$ cd gitlab# å¯ä»¥å…ˆçœ‹çœ‹æ‰€æœ‰ç‰ˆæœ¬çš„é–‹ç™¼åˆ†æ”¯# git tag\næ¯”å°æ‰€æœ‰å°æ‡‰çš„æœ¬ç‰ˆåˆ†æ”¯\n$ sudo git diff v8.8.0..8.8.5.zh1 &gt; /tmp/8.8.diff\nåœæ‰gitlabé‹è¡Œ\n$ sudo gitlab-ctl stop\næ‡‰ç”¨ä¸­æ–‡åŒ–è£œä¸\n$ sudo patch -d /opt/gitlab/embedded/service/gitlab-rails -p1 &lt; /tmp/8.8.diff\næ¥ä¸‹ä¾†å°±ä¸€ç›´ä¸æ–·enteråˆ°è£œä¸å®Œæˆï¼Œé‡æ–°å•Ÿå‹•gitlab\n$ sudo gitlab-ctl start\né‡æ–°ç™»å…¥ä¹‹å¾Œå°±å¯çœ‹åˆ°ç†Ÿæ‚‰çš„ä¸­æ–‡åŒ–ä»‹é¢\n","categories":["gitlab"],"tags":["ä½ˆç½²","gitlab","ä¸­æ–‡åŒ–"]},{"title":"Hello World","url":"/2018/03/01/hello-world/","content":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub.\nQuick StartCreate a new post$ hexo new &quot;My New Post&quot;\n\nMore info: Writing\nRun server$ hexo server\n\nMore info: Server\nGenerate static files$ hexo generate\n\nMore info: Generating\nDeploy to remote sites$ hexo deploy\n\nMore info: Deployment\n"},{"title":"å®‰è£OpenJDK","url":"/2019/03/10/java-installopenjdk/","content":"å®‰è£OpenJDKå®‰è£é è¨­ç‰ˆæœ¬OpenJDK\n$ sudo apt-get update$ sudo apt-get install default-jdk\nå®‰è£æŒ‡å®šç‰ˆæœ¬OpenJDK\n$ sudo apt-get update$ sudo apt-get install openjdk-8-jdk\nå®‰è£æŒ‡å®šç‰ˆæœ¬OpenJRE\n$ sudo apt-get update$ sudo apt-get install openjdk-8-jre\n\nè¨­å®šç³»çµ± Java ç‰ˆæœ¬å…ˆæŸ¥çœ‹ç•¶å‰æœ‰å“ªäº›ç‰ˆæœ¬å¯ä¾›è¨­å®š\n$ update-alternatives --query java#æˆ–è€…$ update-alternatives --display java\nè¨­å®šç‰ˆæœ¬\n$ sudo update-alternatives --config java\n\nè¨­ç½®Javaç’°å¢ƒè®Šæ•¸æ‰“é–‹&#x2F;etc&#x2F;profileé€™å€‹æª”æ¡ˆä¸¦ä¸”åœ¨æœ«å°¾åŠ å…¥ï¼š\nexport JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64export PATH=$PATH:$JAVA_HOME/bin","categories":["java"],"tags":["java","jdk"]},{"title":"Jenkinsæ­å»º","url":"/2018/03/24/jenkins-install/","content":"è¦æ­å»ºjenkinséœ€è¦å®‰è£JDKï¼Œä»¥ä¸‹æä¾›ç°¡æ˜“å®‰è£æ–¹å¼\nå®‰è£OpenJDKå®‰è£OpenJDK\n$ sudo apt-get update$ sudo apt-get install default-jdk\n\n\n\njenkinsä½ˆç½²jenkinså®˜ç¶²\nåŸºæœ¬ä¸ŠæŒ‰ç…§å®˜æ–¹æä¾›çš„æ–¹å¼å®‰è£å³å¯ï¼Œé¦–å…ˆæ·»åŠ å¥—ä»¶é‡‘é‘°\n$ wget -q -O - https://pkg.jenkins.io/debian-stable/jenkins.io.key | sudo apt-key add -\næ·»åŠ å¥—ä»¶ä¾†æºåˆ—è¡¨\n$ sudo sh -c &#x27;echo deb http://pkg.jenkins-ci.org/debian binary/ &gt; /etc/apt/sources.list.d/jenkins.list&#x27;\næœ€å¾Œé€²è¡Œå®‰è£\n$ sudo apt-get update$ sudo apt-get install jenkins\nä¿®æ”¹é€£ç·šé…ç½®(&#x2F;etc&#x2F;default&#x2F;jenkins)ï¼ŒåŸºæœ¬ä¸Šé»˜èªç«¯å£ç‚º8080\nHTTP_PORT=8080\nå•Ÿå‹•è…³æœ¬è·¯å¾‘(&#x2F;etc&#x2F;init.d&#x2F;jenkins)\n$ sudo bash /etc/init.d/jenkins  &#123;start|stop|status|restart|force-reload&#125;\nå¦å¤–ä¹Ÿå¯ä»¥é€™æ¨£\n$ sudo service jenkins  &#123;start|stop|status|restart|force-reload&#125;\nå•Ÿå‹•ä¹‹å¾Œéœ€è¦è¨­ç½®åˆå§‹å¯†ç¢¼\n$ sudo cat /var/lib/jenkins/secrets/initialAdminPassword9b4e46e0c33e4e99b9bbc916a7adccac\nè¼¸å…¥åˆå§‹å¯†ç¢¼\n\né¸æ“‡é è¨­æ’ä»¶é›†åˆ\n\nç­‰å¾…åˆå§‹åŒ–å®Œæˆ\n\næœ€å¾Œå†å»ºç«‹ç®¡ç†è€…å¸³è™Ÿå°±å¤§åŠŸå‘Šæˆäº†\n","categories":["jenkins"],"tags":["ä½ˆç½²","jenkins"]},{"title":"Jenkins + Gitlab + Maven + JDK è¨­å®š","url":"/2018/03/29/jenkins-setting/","content":"åœ¨jenkinså®‰è£å¥½å¾Œé‚„éœ€è¦ä¸€äº›é€²ä¸€æ­¥çš„è¨­å®šï¼Œæ‰èƒ½è®“å…¶ä»–å·¥å…·å¥½å¥½é‹ä½œï¼Œä¸‹é¢æˆ‘å€‘å°±é–‹å§‹åšå®Œé€™äº›è¨­å®š\n\n\né€²å…¥jenkinsè¨­å®š\n\n\né€²å…¥Global Tool Configuration\n\n\nè¨­ç½®ä½ çš„JDKå®‰è£è·¯å¾‘\n\n\nè¨­ç½®ä½ çš„GITå®‰è£è·¯å¾‘\n\n\nè¨­ç½®ä½ çš„MAVENå®‰è£è·¯å¾‘\n\n\næ¥ä¸‹ä¾†ç”ŸæˆSSLé‡‘é‘°ï¼Œå¦‚æœå·²ç¶“æœ‰äº†å¯ä»¥è·³éé€™ä¸€æ­¥\n$ ssh-keygen -t rsa -C\næ¥ä¸‹ä¾†å»Credentialsè¨­ç½®SSLé€£ç·šé…ç½®\n\n\næœ€å¾Œæˆ‘å€‘è¦å»æŠŠjenkinsçš„ç³»çµ±æ¬Šé™åŠ å…¥åˆ°rootè£¡é¢ï¼Œä¸ç„¶ä»–åœ¨è·‘shellæœƒæœ‰æ¬Šé™å•é¡Œ\nå°‡jenkinså¸³è™ŸåŠ å…¥rootç¾¤çµ„ä¸­\n$ sudo gpasswd -a root jenkins\nä¿®æ”¹jenkinsæ–‡ä»¶\n$ sudo nano /etc/default/jenkins\nä¿®æ”¹æ–‡ä»¶ä¸­é€™å…©è¡Œ\nJENKINS_USER=rootJENKINS_GROUP=root\nå®Œæˆé€™äº›è¨­å®šå°±å¤§åŠŸå‘Šæˆå•¦!\n","categories":["jenkins"],"tags":["gitlab","jdk","jenkins","maven"]},{"title":"è§£æ±ºJenkinsåŸ·è¡Œsudoå‘½ä»¤å‡ºç¾éŒ¯èª¤","url":"/2019/03/10/jenkins-sudoerror/","content":"æˆ‘å€‘åœ¨ä½¿ç”¨jenkinséƒ¨å±¬ä»»å‹™çš„æ™‚å€™å¸¸å¸¸éœ€è¦ä½¿ç”¨åˆ°è…³æœ¬ï¼Œå¦‚æœåœ¨è…³æœ¬ä¸­ä½¿ç”¨åˆ°äº†sudoé€™å€‹ä»¤å‘½æ™‚ï¼Œæœ‰å¯èƒ½æœƒç”¢ç”Ÿä»¥ä¸‹éŒ¯èª¤ï¼š\nsudo: no tty present and no askpass program specified\n\nè§£å†³æ–¹å¼ï¼šåœ¨jenkins host serverä¸ŠåŸ·è¡Œä»¥ä¸‹å‘½ä»¤ï¼š\n$ sudo visudo\nåœ¨æœ«å°¾åŠ å…¥ï¼š\njenkins ALL=(ALL) NOPASSWD: ALL\nCtrl+O å­˜æª”(ps.å­˜æª”çš„æ™‚å€™å‰¯æª”åä¸è¦åŠ å…¥.tmpï¼Œé€™æ¨£å³å¯è¦†è“‹åŸä¾†çš„æª”æ¡ˆ)Ctrl+X é›¢é–‹\næœ€å¾Œé‡å•Ÿjenkins\n$ sudo bash /etc/init.d/jenkins restart#å¦å¤–ä¹Ÿå¯ä»¥é€™æ¨£$ sudo service jenkins restart\n\næœ€å¾Œå†é‡æ–°å»ºæ§‹ä¸€æ¬¡ä»»å‹™å³å¯\n","categories":["jenkins"],"tags":["jenkins","error"]},{"title":"Jenkins + Gitlab + Tomcat è‡ªå‹•åŒ–éƒ¨ç½²","url":"/2018/03/29/jenkins-work/","content":"å‰é¢åšé€™éº¼å¤šéƒ½æ˜¯ç‚ºäº†ç¾åœ¨åšæº–å‚™ï¼Œå‡è¨­æˆ‘å€‘çš„workflow\nç¨‹å¼æ›´æ–°ä»£ç¢¼è‡³gitlab -&gt; ä¼åŠƒæˆ–è€…anyoneæŒ‰å€‹æŒ‰éµ -&gt; jenkinsè‡ªå‹•å¹«ä½ å®Œæˆå°ˆæ¡ˆæ›´æ–°ä»£ç¢¼ä¸¦é‡æ–°ä½ˆç½²\né€™æ¨£æˆ‘å€‘å¯ä»¥æ¸›å°‘äººåŠ›å»è™•ç†é€™äº›é›œäº‹æ›´èƒ½å°ˆå¿ƒå†æ¥­å‹™è™•ç†çš„éœ€æ±‚ä¸Šä¸‹é¢å°±ä¾†çœ‹çœ‹æ€éº¼å®Œæˆé€™äº›è¨­å®š\n\n\næ–°å¢ä½œæ¥­\n\n\nå¡«å¥½é …ç›®åç¨±ä¸¦é¸æ“‡free-style\n\n\né€™æ­¥é©Ÿæ˜¯è®“ä½ è‡ªè¨‚workspaceè·¯å¾‘ï¼Œä¸è¨­å®šå°±æœƒæ˜¯é è¨­é …ç›®è·¯å¾‘\n\n\nå¡«å…¥ä½ çš„é …ç›®gitä¾†æºï¼Œä¸¦ä½¿ç”¨ä¹‹å‰è¨­å®šå¥½çš„sslé€£ç·šæ†‘è­‰\n\n\né¸æ“‡mavenä½œç‚ºé …ç›®æ‰“åŒ…å·¥å…·ä¸¦å¡«å…¥ç›¸é—œè…³æœ¬æŒ‡ä»¤ä¹‹å¾Œåœ¨åŸ·è¡Œshell scriptæŠŠmavenæ‰“åŒ…å¥½çš„æª”æ¡ˆè½‰ç§»è‡³tomcatç›®éŒ„åº•ä¸‹åœ¨å•Ÿå‹•tomcat\n\n\nå„²å­˜å¥½ç›¸é—œè¨­ç½®ä¹‹å¾Œå†åŸ·è¡Œå»ºç½®\n\n\nä¸€åˆ‡å°±è‡ªå‹•åŒ–éƒ¨ç½²å®Œæˆäº†!\n","categories":["jenkins"],"tags":["gitlab","jenkins","tomcat"]},{"title":"Kubernetes ConfigMap ä½¿ç”¨æŒ‡å—","url":"/2025/10/25/kubernetes-configmap-intro/","content":"Kubernetes ConfigMap ä½¿ç”¨æŒ‡å—ä»€éº¼æ˜¯ ConfigMapï¼ŸKubernetes ConfigMap æ˜¯ä¸€å€‹ API ç‰©ä»¶ï¼Œç”¨æ–¼å­˜å„²éæ•æ„Ÿçš„é…ç½®è³‡æ–™ï¼Œä»¥éµå€¼å°çš„å½¢å¼å­˜åœ¨ã€‚ConfigMap å…è¨±æ‚¨å°‡é…ç½®å¾å®¹å™¨æ˜ åƒä¸­åˆ†é›¢å‡ºä¾†ï¼Œä½¿æ‡‰ç”¨ç¨‹å¼æ›´å…·å¯ç§»æ¤æ€§å’Œéˆæ´»æ€§ã€‚\nConfigMap çš„ä¸»è¦åŠŸèƒ½ï¼š\né…ç½®åˆ†é›¢ï¼šå°‡æ‡‰ç”¨ç¨‹å¼é…ç½®èˆ‡ç¨‹å¼ç¢¼åˆ†é›¢\nç’°å¢ƒç®¡ç†ï¼šæ”¯æ´ä¸åŒç’°å¢ƒçš„é…ç½®ç®¡ç†\nå‹•æ…‹æ›´æ–°ï¼šæ”¯æ´é‹è¡Œæ™‚é…ç½®æ›´æ–°\nå¤šç¨®æ›è¼‰æ–¹å¼ï¼šå¯ä½œç‚ºç’°å¢ƒè®Šæ•¸ã€æª”æ¡ˆæˆ–ç›®éŒ„æ›è¼‰\n\nç‚ºä»€éº¼ä½¿ç”¨ ConfigMapï¼Ÿç›¸è¼ƒæ–¼å°‡é…ç½®ç¡¬ç·¨ç¢¼åœ¨æ‡‰ç”¨ç¨‹å¼ä¸­ï¼ŒConfigMap æä¾›äº†æ›´å¥½çš„é…ç½®ç®¡ç†æ–¹å¼ï¼š\n\néˆæ´»æ€§ï¼šç„¡éœ€é‡æ–°æ§‹å»ºæ˜ åƒå°±èƒ½æ”¹è®Šé…ç½®\nå¯é‡ç”¨æ€§ï¼šåŒä¸€å€‹ ConfigMap å¯è¢«å¤šå€‹ Pod ä½¿ç”¨\nç‰ˆæœ¬æ§åˆ¶ï¼šé…ç½®è®Šæ›´å¯ä»¥è¢«è¿½è¹¤å’Œç®¡ç†\nç’°å¢ƒä¸€è‡´æ€§ï¼šç¢ºä¿ä¸åŒç’°å¢ƒä½¿ç”¨æ­£ç¢ºçš„é…ç½®\n\n\n\n\nConfigMap åŸºæœ¬é…ç½®åŸºæœ¬ ConfigMap ç¯„ä¾‹apiVersion: v1kind: ConfigMapmetadata:  name: dockertest-config  namespace: dockertest-namespace  labels:    app: dockertestdata:  # æ‡‰ç”¨ç¨‹å¼é…ç½®  CUSTOM_VALUE: &quot;configmap_version&quot;  LOG_LEVEL: &quot;INFO&quot;  MAX_CONNECTIONS: &quot;100&quot;  FEATURE_ENABLED: &quot;true&quot;    # è³‡æ–™åº«é…ç½®  DB_HOST: &quot;database.example.com&quot;  DB_PORT: &quot;5432&quot;  DB_NAME: &quot;myapp&quot;    # å¿«å–é…ç½®  REDIS_HOST: &quot;redis.example.com&quot;  REDIS_PORT: &quot;6379&quot;\n\nåŒ…å«æª”æ¡ˆå…§å®¹çš„ ConfigMapapiVersion: v1kind: ConfigMapmetadata:  name: app-config-files  namespace: dockertest-namespacedata:  # é…ç½®æª”æ¡ˆå…§å®¹  application.properties: |    app.name=MyApplication    app.version=1.0.0    server.port=8080    logging.level.root=INFO      nginx.conf: |    server &#123;        listen 80;        server_name localhost;        location / &#123;            root /usr/share/nginx/html;            index index.html;        &#125;    &#125;      # JSON æ ¼å¼é…ç½®  config.json: |    &#123;      &quot;database&quot;: &#123;        &quot;host&quot;: &quot;localhost&quot;,        &quot;port&quot;: 5432,        &quot;name&quot;: &quot;myapp&quot;      &#125;,      &quot;features&quot;: &#123;        &quot;enableLogging&quot;: true,        &quot;maxRetries&quot;: 3      &#125;    &#125;\n\nåœ¨ Pod ä¸­ä½¿ç”¨ ConfigMapæ–¹æ³•ä¸€ï¼šä½œç‚ºç’°å¢ƒè®Šæ•¸apiVersion: apps/v1kind: Deploymentmetadata:  name: dockertest-deployment  namespace: dockertest-namespacespec:  replicas: 1  selector:    matchLabels:      app: dockertest  template:    metadata:      labels:        app: dockertest    spec:      containers:      - name: dockertest        image: docker.io/pcion123/tinydocker:0.0.10        env:        # å¼•ç”¨æ•´å€‹ ConfigMap        - name: CUSTOM_VALUE          valueFrom:            configMapKeyRef:              name: dockertest-config              key: CUSTOM_VALUE        - name: LOG_LEVEL          valueFrom:            configMapKeyRef:              name: dockertest-config              key: LOG_LEVEL        # å¼•ç”¨å¤šå€‹éµå€¼        envFrom:        - configMapRef:            name: dockertest-config\n\n\n\næ–¹æ³•äºŒï¼šä½œç‚ºæª”æ¡ˆæ›è¼‰apiVersion: apps/v1kind: Deploymentmetadata:  name: dockertest-deployment  namespace: dockertest-namespacespec:  replicas: 1  selector:    matchLabels:      app: dockertest  template:    metadata:      labels:        app: dockertest    spec:      containers:      - name: dockertest        image: docker.io/pcion123/tinydocker:0.0.10        volumeMounts:        # æ›è¼‰æ•´å€‹ ConfigMap ç‚ºç›®éŒ„        - name: config-volume          mountPath: /etc/config        # æ›è¼‰ç‰¹å®šæª”æ¡ˆåˆ°æŒ‡å®šä½ç½®        - name: nginx-config          mountPath: /etc/nginx/nginx.conf          subPath: nginx.conf      volumes:      - name: config-volume        configMap:          name: dockertest-config      - name: nginx-config        configMap:          name: dockertest-config          items:          - key: nginx.conf            path: nginx.conf\n\n\n\næ–¹æ³•ä¸‰ï¼šæ··åˆä½¿ç”¨apiVersion: apps/v1kind: Deploymentmetadata:  name: dockertest-deployment  namespace: dockertest-namespacespec:  replicas: 1  selector:    matchLabels:      app: dockertest  template:    metadata:      labels:        app: dockertest    spec:      containers:      - name: dockertest        image: docker.io/pcion123/tinydocker:0.0.10        env:        # å¼•ç”¨æ•´å€‹ ConfigMap        - name: CUSTOM_VALUE          valueFrom:            configMapKeyRef:              name: dockertest-config              key: CUSTOM_VALUE        - name: LOG_LEVEL          valueFrom:            configMapKeyRef:              name: dockertest-config              key: LOG_LEVEL        # å¼•ç”¨å¤šå€‹éµå€¼        envFrom:        - configMapRef:            name: dockertest-config        volumeMounts:        # æ›è¼‰æ•´å€‹ ConfigMap ç‚ºç›®éŒ„        - name: config-volume          mountPath: /etc/config        # æ›è¼‰ç‰¹å®šæª”æ¡ˆåˆ°æŒ‡å®šä½ç½®        - name: nginx-config          mountPath: /etc/nginx/nginx.conf          subPath: nginx.conf      volumes:      - name: config-volume        configMap:          name: dockertest-config      - name: nginx-config        configMap:          name: dockertest-config          items:          - key: nginx.conf            path: nginx.conf\n\nå»ºç«‹å’Œç®¡ç† ConfigMapä½¿ç”¨ kubectl æŒ‡ä»¤å»ºç«‹# å¾å­—é¢å€¼å»ºç«‹kubectl create configmap my-config \\  --from-literal=key1=value1 \\  --from-literal=key2=value2 \\  -n dockertest-namespace# å¾æª”æ¡ˆå»ºç«‹kubectl create configmap file-config \\  --from-file=application.properties \\  --from-file=config.json \\  -n dockertest-namespace# å¾ç›®éŒ„å»ºç«‹kubectl create configmap dir-config \\  --from-file=./config-directory/ \\  -n dockertest-namespace# å¾ç’°å¢ƒæª”æ¡ˆå»ºç«‹kubectl create configmap env-config \\  --from-env-file=.env \\  -n dockertest-namespace\n\nç®¡ç†æŒ‡ä»¤# æŸ¥çœ‹ ConfigMap åˆ—è¡¨kubectl get configmaps -n dockertest-namespace# æŸ¥çœ‹ ConfigMap è©³ç´°å…§å®¹kubectl describe configmap dockertest-config -n dockertest-namespace# æŸ¥çœ‹ ConfigMap çš„ YAML æ ¼å¼kubectl get configmap dockertest-config -n dockertest-namespace -o yaml# ç·¨è¼¯ ConfigMapkubectl edit configmap dockertest-config -n dockertest-namespace# åˆªé™¤ ConfigMapkubectl delete configmap dockertest-config -n dockertest-namespace\n\næ›´æ–° ConfigMap# æ–¹æ³•ä¸€ï¼šé‡æ–°æ‡‰ç”¨ YAML æª”æ¡ˆkubectl apply -f configmap.yaml# æ–¹æ³•äºŒï¼šä½¿ç”¨ patch æ›´æ–°ç‰¹å®šéµå€¼kubectl patch configmap dockertest-config -n dockertest-namespace \\  --type merge -p &#x27;&#123;&quot;data&quot;:&#123;&quot;NEW_KEY&quot;:&quot;new_value&quot;&#125;&#125;&#x27;# æ–¹æ³•ä¸‰ï¼šæ›¿æ›æ•´å€‹ ConfigMapkubectl replace -f updated-configmap.yaml\n\nå¯¦éš›æ‡‰ç”¨ç¯„ä¾‹ç¯„ä¾‹ä¸€ï¼šSpring Boot æ‡‰ç”¨ç¨‹å¼é…ç½®apiVersion: v1kind: ConfigMapmetadata:  name: spring-app-config  namespace: dockertest-namespacedata:  # Spring Boot é…ç½®  SPRING_PROFILES_ACTIVE: &quot;production&quot;  SERVER_PORT: &quot;8080&quot;  LOGGING_LEVEL_ROOT: &quot;INFO&quot;  LOGGING_LEVEL_COM_EXAMPLE: &quot;DEBUG&quot;    # è³‡æ–™åº«é…ç½®  SPRING_DATASOURCE_URL: &quot;jdbc:postgresql://db:5432/myapp&quot;  SPRING_DATASOURCE_USERNAME: &quot;appuser&quot;  SPRING_DATASOURCE_DRIVERCLASSNAME: &quot;org.postgresql.Driver&quot;    # JVM é…ç½®  JAVA_OPTS: &quot;-Xmx512m -Xms256m -Djava.awt.headless=true&quot;---apiVersion: apps/v1kind: Deploymentmetadata:  name: spring-app  namespace: dockertest-namespacespec:  replicas: 2  selector:    matchLabels:      app: spring-app  template:    metadata:      labels:        app: spring-app    spec:      containers:      - name: spring-app        image: docker.io/pcion123/tinydocker:0.0.10        envFrom:        - configMapRef:            name: spring-app-config        ports:        - containerPort: 8080\n\nç¯„ä¾‹äºŒï¼šå¤šç’°å¢ƒé…ç½®ç®¡ç†# é–‹ç™¼ç’°å¢ƒ ConfigMapapiVersion: v1kind: ConfigMapmetadata:  name: app-config-dev  namespace: developmentdata:  ENVIRONMENT: &quot;development&quot;  LOG_LEVEL: &quot;DEBUG&quot;  DB_HOST: &quot;dev-database&quot;  CACHE_ENABLED: &quot;false&quot;---# ç”Ÿç”¢ç’°å¢ƒ ConfigMapapiVersion: v1kind: ConfigMapmetadata:  name: app-config-prod  namespace: productiondata:  ENVIRONMENT: &quot;production&quot;  LOG_LEVEL: &quot;WARN&quot;  DB_HOST: &quot;prod-database&quot;  CACHE_ENABLED: &quot;true&quot;\n\næœ€ä½³å¯¦å‹™å»ºè­°é…ç½®ç®¡ç†\nå‘½åè¦ç¯„ï¼šä½¿ç”¨æ¸…æ™°ã€ä¸€è‡´çš„ ConfigMap å‘½å\nç’°å¢ƒåˆ†é›¢ï¼šç‚ºä¸åŒç’°å¢ƒå»ºç«‹ç¨ç«‹çš„ ConfigMap\nç‰ˆæœ¬æ§åˆ¶ï¼šå°‡ ConfigMap å®šç¾©ç´å…¥ç‰ˆæœ¬æ§åˆ¶ç³»çµ±\næ–‡æª”è¨˜éŒ„ï¼šè©³ç´°è¨˜éŒ„æ¯å€‹é…ç½®é …çš„ç”¨é€”å’Œæ ¼å¼\n\nå®‰å…¨æ€§è€ƒé‡\næ•æ„Ÿè³‡æ–™ï¼šå°‡å¯†ç¢¼ç­‰æ•æ„Ÿè³‡æ–™å­˜å„²åœ¨ Secret ä¸­ï¼Œè€Œé ConfigMap\nå­˜å–æ§åˆ¶ï¼šä½¿ç”¨ RBAC æ§åˆ¶ ConfigMap çš„å­˜å–æ¬Šé™\næœ€å°æ¬Šé™ï¼šåªæˆäºˆæ‡‰ç”¨ç¨‹å¼æ‰€éœ€çš„æœ€å°é…ç½®å­˜å–æ¬Šé™\nå®šæœŸå¯©æ ¸ï¼šå®šæœŸæª¢æŸ¥å’Œæ¸…ç†ä¸å†ä½¿ç”¨çš„ ConfigMap\n\næ•ˆèƒ½å’Œå¯é æ€§\nå¤§å°é™åˆ¶ï¼šå–®å€‹ ConfigMap ä¸æ‡‰è¶…é 1MB\nè®Šæ›´å½±éŸ¿ï¼šäº†è§£ ConfigMap è®Šæ›´å°é‹è¡Œä¸­ Pod çš„å½±éŸ¿\nè‡ªå‹•é‡å•Ÿï¼šè€ƒæ…®ä½¿ç”¨å·¥å…·è‡ªå‹•é‡å•Ÿä½¿ç”¨æ›´æ–°é…ç½®çš„ Pod\né…ç½®é©—è­‰ï¼šåœ¨æ‡‰ç”¨é…ç½®å‰é©—è­‰é…ç½®çš„æ­£ç¢ºæ€§\n\nç›£æ§å’Œç¶­è­·\né…ç½®è¿½è¹¤ï¼šè¿½è¹¤é…ç½®è®Šæ›´çš„æ­·å²å’Œå½±éŸ¿\nå¥åº·æª¢æŸ¥ï¼šç¢ºä¿æ‡‰ç”¨ç¨‹å¼èƒ½æ­£ç¢ºè®€å–å’Œä½¿ç”¨é…ç½®\nå‚™ä»½ç­–ç•¥ï¼šå®šæœŸå‚™ä»½é‡è¦çš„ ConfigMap\næ¸…ç†ç­–ç•¥ï¼šå®šæœŸæ¸…ç†ä¸å†ä½¿ç”¨çš„ ConfigMap\n\nç–‘é›£æ’è§£å¸¸è¦‹å•é¡Œ1. Pod ç„¡æ³•è®€å– ConfigMap# æª¢æŸ¥ ConfigMap æ˜¯å¦å­˜åœ¨kubectl get configmap dockertest-config -n dockertest-namespace# æª¢æŸ¥ Pod é…ç½®kubectl describe pod &lt;pod-name&gt; -n dockertest-namespace# æŸ¥çœ‹ Pod æ—¥èªŒkubectl logs &lt;pod-name&gt; -n dockertest-namespace\n\n2. é…ç½®æ›´æ–°å¾Œ Pod æœªé‡å•Ÿ# æ‰‹å‹•é‡å•Ÿ Deploymentkubectl rollout restart deployment dockertest-deployment -n dockertest-namespace# æŸ¥çœ‹é‡å•Ÿç‹€æ…‹kubectl rollout status deployment dockertest-deployment -n dockertest-namespace\n\n3. ç’°å¢ƒè®Šæ•¸æœªæ­£ç¢ºè¼‰å…¥# é€²å…¥ Pod æª¢æŸ¥ç’°å¢ƒè®Šæ•¸kubectl exec -it &lt;pod-name&gt; -n dockertest-namespace -- env | grep CUSTOM_VALUE# æª¢æŸ¥ ConfigMap å…§å®¹kubectl get configmap dockertest-config -n dockertest-namespace -o yaml\n\né€éæ­£ç¢ºä½¿ç”¨ ConfigMapï¼Œæ‚¨å¯ä»¥å¯¦ç¾éˆæ´»çš„é…ç½®ç®¡ç†ï¼Œè®“æ‡‰ç”¨ç¨‹å¼æ›´å®¹æ˜“åœ¨ä¸åŒç’°å¢ƒé–“ç§»æ¤å’Œéƒ¨ç½²ï¼ŒåŒæ™‚ä¿æŒé…ç½®çš„ä¸€è‡´æ€§å’Œå¯ç¶­è­·æ€§ã€‚\n","categories":["kubernetes"],"tags":["kubernetes"]},{"title":"Kubernetes æ§åˆ¶å…ƒä»¶ä»‹ç´¹","url":"/2025/10/04/kubernetes-controller-intro/","content":"Kubernetes æ§åˆ¶å…ƒä»¶ä»‹ç´¹åœ¨ Kubernetes ä¸­ï¼Œæˆ‘å€‘éœ€è¦æ§åˆ¶å¹³é¢ (Control Plane) ä¾†ç®¡ç† Node çš„é‹è¡Œç‹€æ…‹ã€‚æ¥ä¸‹ä¾†æˆ‘å€‘å°‡ä»‹ç´¹ Node æ˜¯å¦‚ä½•è¢«ç®¡ç†çš„ï¼Œä»¥åŠå„å€‹æ§åˆ¶å…ƒä»¶çš„åŠŸèƒ½ã€‚\næ•´é«”æ¶æ§‹æ¦‚è¿°Kubernetes æ¡ç”¨ Master-Worker æ¶æ§‹æ¨¡å¼ï¼š\n\nControl Plane (Master): è² è²¬ç®¡ç†æ•´å€‹å¢é›†çš„æ±ºç­–å’Œæ§åˆ¶\nWorker Nodes: è² è²¬åŸ·è¡Œå¯¦éš›çš„æ‡‰ç”¨ç¨‹å¼å·¥ä½œè² è¼‰\n\n\n\n\n\n\nNode ComponentsNode Components æ˜¯æ¯å€‹ Worker Node å¿…é ˆå…·å‚™çš„æ ¸å¿ƒå…ƒä»¶ï¼š\n\nContainer Runtime: è² è²¬ç®¡ç†å®¹å™¨çš„ç”Ÿå‘½é€±æœŸï¼ŒåŒ…æ‹¬å®¹å™¨çš„å»ºç«‹ã€åŸ·è¡Œå’ŒéŠ·æ¯€\nkubelet: ä½œç‚º Node çš„ä»£ç†ç¨‹å¼ï¼Œè² è²¬å»ºç«‹ Pod ä¸¦ç¶­è­·å®¹å™¨çš„å¥åº·ç‹€æ…‹\nkube-proxy: è² è²¬è™•ç† Node çš„ç¶²è·¯ä»£ç†åŠŸèƒ½ï¼Œå¯¦ç¾æœå‹™ç™¼ç¾å’Œè² è¼‰å¹³è¡¡\n\nControl Plane Componentsæ§åˆ¶å¹³é¢è² è²¬ç®¡ç†æ•´å€‹ Kubernetes å¢é›†ä¸­æ‰€æœ‰çš„ Node Componentsã€‚ä»¥ä¸‹æ˜¯æ§åˆ¶å¹³é¢çš„æ ¸å¿ƒå…ƒä»¶ï¼š\n\nkube-api-server: ä½œç‚º Kubernetes API çš„å‰ç«¯ï¼Œè² è²¬è™•ç†ä¾†è‡ªå®¢æˆ¶ç«¯çš„è«‹æ±‚ï¼Œç¶“éé©—è­‰å’Œæˆæ¬Šå¾Œï¼Œå°‡è«‹æ±‚è½‰ç™¼çµ¦å°æ‡‰çš„å…ƒä»¶\nkube-scheduler: è² è²¬å°‡ Pod èª¿åº¦åˆ°é©åˆçš„ Node ä¸ŠåŸ·è¡Œï¼Œæœƒæ ¹æ“šè³‡æºå¯ç”¨æ€§ã€ç¡¬é«”éœ€æ±‚ç­‰æ¢ä»¶ä¾†é¸æ“‡æœ€ä½³çš„ Node\nkube-controller-manager: åŸ·è¡Œå„ç¨®æ§åˆ¶å™¨ï¼Œè² è²¬ç›£æ§ Kubernetes å¢é›†çš„ç‹€æ…‹è®ŠåŒ–ä¸¦ç¢ºä¿é”åˆ°æœŸæœ›ç‹€æ…‹\netcd: åˆ†æ•£å¼çš„ key-value å„²å­˜ç³»çµ±ï¼Œç”¨ä¾†å„²å­˜ Kubernetes å¢é›†çš„æ‰€æœ‰é…ç½®è³‡æ–™å’Œç‹€æ…‹è³‡è¨Š\ncloud-controller-manager: è² è²¬èˆ‡é›²ç«¯æœå‹™æä¾›å•†é€²è¡Œæ•´åˆçš„å…ƒä»¶ï¼Œå®ƒå¯ä»¥å¹«åŠ© Kubernetes é€£æ¥å…¬æœ‰é›²å¹³å°ï¼Œä½¿ç”¨é›²ç«¯æœå‹™çš„ API ä¾†ç®¡ç†é›²ç«¯è³‡æº\n\n\næç¤ºetcd æ¡ç”¨åˆ†æ•£å¼æ¶æ§‹è¨­è¨ˆï¼Œå› æ­¤åœ¨ä¸€å€‹ Kubernetes å¢é›†ä¸­å¯ä»¥åŒæ™‚éƒ¨ç½²å¤šå€‹ Control Plane å…ƒä»¶ä¾†å¯¦ç¾é«˜å¯ç”¨æ€§\n\n\næç¤ºcloud-controller-manager åƒ…åœ¨é›²ç«¯ç’°å¢ƒä¸­æ‰æœƒéƒ¨ç½²ï¼Œå¦‚æœ Kubernetes å¢é›†é‹è¡Œåœ¨æœ¬åœ°ç’°å¢ƒå‰‡ä¸æœƒåŒ…å«æ­¤å…ƒä»¶ï¼ˆä¾‹å¦‚ï¼šminikubeï¼‰\n\nç‚ºäº†ç¢ºä¿æœå‹™çš„é«˜å¯ç”¨æ€§ï¼Œç”Ÿç”¢ç’°å¢ƒçš„ Kubernetes é€šå¸¸æœƒéƒ¨ç½²å…©å€‹ä»¥ä¸Šçš„ Control Plane ç¯€é»ã€‚\nå…ƒä»¶é–“çš„é€šè¨Šæ©Ÿåˆ¶æ‰€æœ‰å…ƒä»¶ä¹‹é–“çš„é€šè¨Šéƒ½å¿…é ˆé€é kube-api-server é€²è¡Œï¼Œå®ƒæ˜¯æ•´å€‹ Kubernetes æ¶æ§‹çš„æ ¸å¿ƒé€šè¨Šæ¨ç´ï¼š\n\nkubelet é€é API Server å›å ± Node å’Œ Pod çš„ç‹€æ…‹\nController Manager é€é API Server ç›£æ§å¢é›†ç‹€æ…‹\nScheduler é€é API Server ç²å–èª¿åº¦è³‡è¨Šä¸¦åšå‡ºèª¿åº¦æ±ºç­–\næ‰€æœ‰é…ç½®å’Œç‹€æ…‹è³‡æ–™éƒ½å„²å­˜åœ¨ etcd ä¸­ï¼Œåªæœ‰ API Server èƒ½ç›´æ¥å­˜å–\n\n","categories":["kubernetes"],"tags":["kubernetes"]},{"title":"Kubernetes æ ¸å¿ƒå…ƒä»¶ä»‹ç´¹","url":"/2025/09/28/kubernetes-core-intro/","content":"Kubernetes æ ¸å¿ƒå…ƒä»¶ä»‹ç´¹æ¶æ§‹ç¸½è¦½\n\nä¸Šåœ–å±•ç¤ºäº† Kubernetes å®Œæ•´æ¶æ§‹ï¼ŒåŒ…å«æ§åˆ¶å¹³é¢ã€å·¥ä½œç¯€é»ã€æœå‹™å±¤å’Œé…ç½®ç®¡ç†ç­‰æ ¸å¿ƒå…ƒä»¶åŠå…¶äº’å‹•é—œä¿‚\n\n\n\nPodKubernetes ä¸­çš„æœ€å°é‹è¡Œå–®ä½\n\næ¯å€‹ Pod éƒ½æœƒè¢«åˆ†é…ä¸€å€‹å”¯ä¸€çš„è™›æ“¬ IP ä½å€\nContainer: Pod å…§é‹è¡Œçš„æ‡‰ç”¨ç¨‹å¼å®¹å™¨ï¼Œé›–ç„¶æ¯å€‹ Pod å¯ä»¥é‹è¡Œå¤šå€‹å®¹å™¨ï¼Œä½†é€šå¸¸å»ºè­°åªé‹è¡Œä¸€å€‹ä¸»è¦å®¹å™¨\n\nNodeKubernetes å¢é›†çš„å·¥ä½œç¯€é»\n\nå¯ä»¥æ˜¯å¯¦é«”æ©Ÿå™¨æˆ–è™›æ“¬æ©Ÿå™¨\nå¤šå€‹ Node çµ„æˆ Kubernetes å¢é›†ï¼Œæä¾›é‹ç®—è³‡æº\n\nServiceæä¾›ç©©å®šçš„ç¶²è·¯ç«¯é»\n\nè§£æ±º Pod é‡å•Ÿæ™‚ IP ä½å€è®Šå‹•çš„å•é¡Œ\næä¾›å›ºå®šçš„ IP ä½å€å’Œ DNS åç¨±ï¼Œä½œç‚º Pod ç¾¤çµ„çš„å­˜å–å…¥å£\nåˆ†ç‚ºå…©ç¨®é¡å‹ï¼š\nå…§éƒ¨ Service: åƒ…ä¾›å¢é›†å…§éƒ¨é€šè¨Šä½¿ç”¨\nå¤–éƒ¨ Service: å…è¨±å¤–éƒ¨æµé‡å­˜å–\n\n\n\nIngressHTTP&#x2F;HTTPS è·¯ç”±ç®¡ç†\n\næä¾›åŸŸåå°æ‡‰æœå‹™ï¼Œè®“å¤–éƒ¨ç”¨æˆ¶èƒ½é€éç¶²åŸŸåç¨±å­˜å– Service\næ”¯æ´ SSL&#x2F;TLS æ†‘è­‰ç®¡ç†å’Œè² è¼‰å¹³è¡¡\n\nConfigMapæ‡‰ç”¨ç¨‹å¼é…ç½®ç®¡ç†\n\nå„²å­˜éæ•æ„Ÿçš„é…ç½®è³‡æ–™ï¼ˆå¦‚è¨­å®šæª”ã€ç’°å¢ƒè®Šæ•¸ï¼‰\né¿å…å› é…ç½®è®Šæ›´è€Œé‡æ–°å»ºç½®æ˜ åƒæª”ï¼Œæ¸›å°‘éƒ¨ç½²åœæ©Ÿæ™‚é–“\næ”¯æ´ç†±æ›´æ–°é…ç½®\n\n\nè­¦å‘ŠConfigMap ä»¥æ˜æ–‡æ–¹å¼å„²å­˜å…§å®¹ï¼Œè«‹å‹¿å­˜æ”¾æ•æ„Ÿè³‡æ–™\n\nSecretæ•æ„Ÿè³‡æ–™å®‰å…¨å„²å­˜\n\nå°ˆé–€ç”¨æ–¼å„²å­˜æ©Ÿæ•è³‡æ–™ï¼ˆå¦‚å¯†ç¢¼ã€API é‡‘é‘°ã€æ†‘è­‰ï¼‰\nè³‡æ–™ä»¥ Base64 ç·¨ç¢¼æ ¼å¼å„²å­˜\næä¾›æ¯” ConfigMap æ›´é«˜çš„å®‰å…¨æ€§\n\n\nè¨»è§£Secret ä½¿ç”¨ Base64 ç·¨ç¢¼å„²å­˜è³‡æ–™ï¼Œä¸¦å¯èˆ‡ Pod å®‰å…¨åœ°å…±äº«\n\nVolumesæŒä¹…åŒ–è³‡æ–™å„²å­˜\n\nè§£æ±ºå®¹å™¨é‡å•Ÿæ™‚è³‡æ–™éºå¤±çš„å•é¡Œ\næä¾›å¤šç¨®å„²å­˜é¡å‹ï¼ˆæœ¬æ©Ÿå„²å­˜ã€ç¶²è·¯å„²å­˜ã€é›²ç«¯å„²å­˜ï¼‰\nç¢ºä¿é‡è¦è³‡æ–™åœ¨ Pod ç”Ÿå‘½é€±æœŸå¤–æŒçºŒä¿å­˜\n\nDeploymentç„¡ç‹€æ…‹æ‡‰ç”¨ç¨‹å¼çš„éƒ¨ç½²ç®¡ç†\n\nç®¡ç† Pod çš„éƒ¨ç½²ã€æ›´æ–°å’Œæ“´ç¸®å®¹\næä¾›è²æ˜å¼æ›´æ–°ï¼Œç¢ºä¿æ‡‰ç”¨ç¨‹å¼çš„æœŸæœ›ç‹€æ…‹\næ”¯æ´æ»¾å‹•æ›´æ–°ï¼ˆRolling Updateï¼‰å’Œå›æ»¾åŠŸèƒ½\né©ç”¨æ–¼ç„¡ç‹€æ…‹çš„æ‡‰ç”¨ç¨‹å¼ï¼Œå¦‚ç¶²é ä¼ºæœå™¨ã€API æœå‹™\nä¸»è¦åŠŸèƒ½ï¼š\nå‰¯æœ¬ç®¡ç†: ç¢ºä¿æŒ‡å®šæ•¸é‡çš„ Pod å‰¯æœ¬æ­£å¸¸é‹è¡Œ\nè‡ªå‹•ä¿®å¾©: ç•¶ Pod ç•°å¸¸æ™‚è‡ªå‹•é‡æ–°å»ºç«‹\nç‰ˆæœ¬æ§åˆ¶: è¿½è¹¤éƒ¨ç½²æ­·å²ï¼Œæ”¯æ´å¿«é€Ÿå›æ»¾\né›¶åœæ©Ÿéƒ¨ç½²: é€éæ»¾å‹•æ›´æ–°å¯¦ç¾ç„¡ä¸­æ–·æœå‹™æ›´æ–°\n\n\n\n\næç¤ºDeployment æ˜¯éƒ¨ç½²ç„¡ç‹€æ…‹æ‡‰ç”¨ç¨‹å¼çš„é¦–é¸æ–¹å¼ï¼Œæä¾›äº†å¼·å¤§çš„ç”Ÿå‘½é€±æœŸç®¡ç†åŠŸèƒ½\n\nStatefulSetæœ‰ç‹€æ…‹æ‡‰ç”¨ç¨‹å¼çš„éƒ¨ç½²ç®¡ç†\n\nå°ˆé–€ç”¨æ–¼ç®¡ç†æœ‰ç‹€æ…‹çš„æ‡‰ç”¨ç¨‹å¼ï¼Œå¦‚è³‡æ–™åº«ã€è¨Šæ¯ä½‡åˆ—\nç‚ºæ¯å€‹ Pod æä¾›ç©©å®šä¸”å”¯ä¸€çš„ç¶²è·¯è­˜åˆ¥ç¬¦\nä¿è­‰ Pod çš„æœ‰åºéƒ¨ç½²ã€æ“´ç¸®å®¹å’Œçµ‚æ­¢\næä¾›æŒä¹…åŒ–å„²å­˜èˆ‡ Pod çš„ç©©å®šç¶å®šé—œä¿‚\nä¸»è¦ç‰¹è‰²ï¼š\nç©©å®šçš„ç¶²è·¯è­˜åˆ¥: æ¯å€‹ Pod éƒ½æœ‰å›ºå®šçš„ä¸»æ©Ÿåç¨±ï¼ˆå¦‚ pod-0, pod-1ï¼‰\næœ‰åºéƒ¨ç½²: Pod æŒ‰ç…§é †åºå»ºç«‹ï¼Œç¢ºä¿å‰ä¸€å€‹ Pod å°±ç·’å¾Œæ‰å»ºç«‹ä¸‹ä¸€å€‹\næŒä¹…å„²å­˜: æ¯å€‹ Pod éƒ½æœ‰å°ˆå±¬çš„æŒä¹…åŒ–å„²å­˜å·\næœ‰åºçµ‚æ­¢: åˆªé™¤æ™‚æŒ‰ç…§ç›¸åé †åºé€²è¡Œï¼Œç¢ºä¿è³‡æ–™å®Œæ•´æ€§\n\n\n\n\né‡è¦æç¤ºStatefulSet é©ç”¨æ–¼éœ€è¦ç©©å®šå„²å­˜å’Œç¶²è·¯è­˜åˆ¥çš„æ‡‰ç”¨ç¨‹å¼ï¼Œå¦‚ MySQLã€MongoDBã€Kafka ç­‰\n\n","categories":["kubernetes"],"tags":["kubernetes"]},{"title":"Kubernetes Deployment ä½¿ç”¨æŒ‡å—","url":"/2025/10/11/kubernetes-deployment/","content":"Kubernetes Deployment ä½¿ç”¨æŒ‡å—ä»€éº¼æ˜¯ Deploymentï¼ŸKubernetes Deployment æ˜¯ä¸€å€‹ API ç‰©ä»¶ï¼Œç”¨æ–¼ç®¡ç†æ‡‰ç”¨ç¨‹å¼çš„å®£å‘Šå¼éƒ¨ç½²å’Œæ›´æ–°ã€‚Deployment æä¾›äº†å° Pod å’Œ ReplicaSet çš„ç®¡ç†åŠŸèƒ½ï¼Œç¢ºä¿æ‡‰ç”¨ç¨‹å¼èƒ½å¤ ç©©å®šé‹è¡Œä¸¦æ”¯æ´ç„¡ç¸«æ›´æ–°ã€‚\nDeployment çš„ä¸»è¦åŠŸèƒ½ï¼š\nå‰¯æœ¬ç®¡ç†ï¼šç¶­è­·æŒ‡å®šæ•¸é‡çš„ Pod å‰¯æœ¬ï¼Œç¢ºä¿æœå‹™çš„é«˜å¯ç”¨æ€§\næ»¾å‹•æ›´æ–°ï¼šæ”¯æ´é›¶åœæ©Ÿæ™‚é–“çš„æ‡‰ç”¨ç¨‹å¼æ›´æ–°\nç‰ˆæœ¬å›æ»¾ï¼šå¿«é€Ÿå›æ»¾åˆ°å…ˆå‰çš„æ‡‰ç”¨ç¨‹å¼ç‰ˆæœ¬\næ“´ç¸®å®¹ï¼šæ ¹æ“šéœ€æ±‚å‹•æ…‹èª¿æ•´ Pod çš„æ•¸é‡\n\nç‚ºä»€éº¼ä½¿ç”¨ Deploymentï¼Ÿç›¸è¼ƒæ–¼ç›´æ¥ç®¡ç† Pod æˆ– ReplicaSetï¼ŒDeployment æä¾›äº†æ›´é«˜å±¤æ¬¡çš„ç®¡ç†æŠ½è±¡ï¼š\n\nå®£å‘Šå¼ç®¡ç†ï¼šåªéœ€æè¿°æœŸæœ›ç‹€æ…‹ï¼ŒKubernetes æœƒè‡ªå‹•é”æˆç›®æ¨™\næ›´æ–°ç­–ç•¥ï¼šå…§å»ºæ»¾å‹•æ›´æ–°æ©Ÿåˆ¶ï¼Œé¿å…æœå‹™ä¸­æ–·\nç‰ˆæœ¬æ§åˆ¶ï¼šä¿ç•™éƒ¨ç½²æ­·å²ï¼Œæ”¯æ´å¿«é€Ÿå›æ»¾\n\n\n\n\nDeployment ç¯„ä¾‹é…ç½®ä»¥ä¸‹æ˜¯ä¸€å€‹å®Œæ•´çš„ Deployment é…ç½®ç¯„ä¾‹ï¼Œå±•ç¤ºäº†å¦‚ä½•éƒ¨ç½²ä¸€å€‹ Java Spring Boot æ‡‰ç”¨ç¨‹å¼ï¼š\napiVersion: apps/v1kind: Deploymentmetadata:  name: dockertest-deployment  namespace: dockertest-namespace  labels:    app: dockertest    version: v0.0.8spec:  replicas: 1  selector:    matchLabels:      app: dockertest  template:    metadata:      labels:        app: dockertest        version: v0.0.8    spec:      containers:      - name: dockertest        image: docker.io/pcion123/tinydocker:0.0.8        imagePullPolicy: Always        ports:        - containerPort: 8080        env:        - name: JAVA_OPTS          value: &quot;-Xmx512m -Xms256m -Djava.awt.headless=true -Dspring.profiles.active=dev&quot;        - name: TZ          value: &quot;Asia/Taipei&quot;        livenessProbe:          httpGet:            path: /actuator/health            port: 8080          initialDelaySeconds: 60          periodSeconds: 30          timeoutSeconds: 10          failureThreshold: 3        readinessProbe:          httpGet:            path: /actuator/health/readiness            port: 8080          initialDelaySeconds: 30          periodSeconds: 10          timeoutSeconds: 5          failureThreshold: 3      imagePullSecrets:        - name: regcred\n\né…ç½®è©³è§£Metadata å€æ®µ\nname: Deployment çš„åç¨±ï¼Œåœ¨åŒä¸€å€‹ namespace ä¸­å¿…é ˆå”¯ä¸€\nnamespace: æŒ‡å®šéƒ¨ç½²çš„å‘½åç©ºé–“\nlabels: ç”¨æ–¼è­˜åˆ¥å’Œåˆ†çµ„è³‡æºçš„æ¨™ç±¤\n\nSpec å€æ®µ\nreplicas: æŒ‡å®šè¦é‹è¡Œçš„ Pod å‰¯æœ¬æ•¸é‡\nselector: ç”¨æ–¼é¸æ“‡ç®¡ç†å“ªäº› Pod çš„æ¨™ç±¤é¸æ“‡å™¨\ntemplate: Pod æ¨¡æ¿ï¼Œå®šç¾©äº† Pod çš„è¦æ ¼\n\nContainer é…ç½®\nimage: å®¹å™¨æ˜ åƒæª”ä½ç½®\nimagePullPolicy: æ˜ åƒæª”æ‹‰å–ç­–ç•¥ï¼ŒAlways è¡¨ç¤ºæ¯æ¬¡éƒ½æœƒé‡æ–°æ‹‰å–\nports: å®¹å™¨å°å¤–æš´éœ²çš„é€£æ¥åŸ \nenv: ç’°å¢ƒè®Šæ•¸è¨­å®š\nimagePullSecrets: æŒ‡å®šç”¨æ–¼å¾ç§æœ‰å®¹å™¨è¨»å†Šè¡¨æ‹‰å–æ˜ åƒæª”çš„ Secret è³‡æºã€‚ç•¶å®¹å™¨æ˜ åƒæª”å­˜æ”¾åœ¨éœ€è¦èº«ä»½é©—è­‰çš„ç§æœ‰å€‰åº«æ™‚ï¼ˆå¦‚ Docker Hub ç§æœ‰å€‰åº«ã€Azure Container Registryã€Amazon ECR ç­‰ï¼‰ï¼ŒKubernetes éœ€è¦ç›¸æ‡‰çš„èªè­‰è³‡è¨Šæ‰èƒ½æˆåŠŸæ‹‰å–æ˜ åƒæª”ã€‚æ­¤é…ç½®å¼•ç”¨é å…ˆå»ºç«‹çš„ Kubernetes Secret ç‰©ä»¶ï¼Œè©² Secret åŒ…å«äº†è¨»å†Šè¡¨çš„ç™»å…¥æ†‘è­‰ã€‚\n\n\né—œæ–¼å¦‚ä½•æ‹‰å– image çš„è©³ç´°èªªæ˜ï¼Œè«‹åƒè€ƒä¹‹å‰çš„æ–‡ç« \nå¥åº·æª¢æŸ¥é…ç½®Liveness Probeï¼ˆå­˜æ´»æ¢é‡ï¼‰ç”¨æ–¼æª¢æŸ¥å®¹å™¨æ˜¯å¦ä»åœ¨é‹è¡Œï¼Œå¦‚æœæª¢æŸ¥å¤±æ•—ï¼ŒKubernetes æœƒé‡å•Ÿå®¹å™¨ã€‚\nReadiness Probeï¼ˆå°±ç·’æ¢é‡ï¼‰ç”¨æ–¼æª¢æŸ¥å®¹å™¨æ˜¯å¦æº–å‚™å¥½æ¥æ”¶æµé‡ï¼Œå¦‚æœæª¢æŸ¥å¤±æ•—ï¼Œå®¹å™¨æœƒå¾ Service çš„ç«¯é»ä¸­ç§»é™¤ã€‚\nå¸¸ç”¨æ“ä½œæŒ‡ä»¤éƒ¨ç½²æ‡‰ç”¨ç¨‹å¼kubectl apply -f dockertest-deployment-v0.0.8.yaml\n\n\n\næŸ¥çœ‹ Deployment ç‹€æ…‹kubectl get deployments -n dockertest-namespace\n\n\n\næŸ¥çœ‹ Deployment è©³ç´°è³‡è¨Škubectl describe deployment dockertest-deployment -n dockertest-namespace\n\n\n\næ“´ç¸®å®¹æ“ä½œ# æ“´å±•åˆ° 3 å€‹å‰¯æœ¬kubectl scale deployment dockertest-deployment --replicas=3 -n dockertest-namespace\n\n\n\næ›´æ–°æ‡‰ç”¨ç¨‹å¼# æ›´æ–°æ˜ åƒæª”ç‰ˆæœ¬ï¼ˆå¾ 0.0.10 æ›´æ–°åˆ° 0.0.11ï¼‰kubectl set image deployment/dockertest-deployment dockertest=docker.io/pcion123/tinydocker:0.0.11 -n dockertest-namespace\n\n\n\næŸ¥çœ‹æ›´æ–°ç‹€æ…‹kubectl rollout status deployment/dockertest-deployment -n dockertest-namespace\n\n\n\nå›æ»¾åˆ°ä¸Šä¸€å€‹ç‰ˆæœ¬kubectl rollout undo deployment/dockertest-deployment -n dockertest-namespace\n\n\n\næŸ¥çœ‹éƒ¨ç½²æ­·å²kubectl rollout history deployment/dockertest-deployment -n dockertest-namespace\n\n\n\næŸ¥çœ‹ Pod ç‹€æ…‹kubectl get pods -n dockertest-namespace -l app=dockertest\n\n\n\næœ€ä½³å¯¦å‹™å»ºè­°\nè¨­å®šé©ç•¶çš„è³‡æºé™åˆ¶: ç‚ºå®¹å™¨è¨­å®š CPU å’Œè¨˜æ†¶é«”çš„ requests å’Œ limits\né…ç½®å¥åº·æª¢æŸ¥: å‹™å¿…è¨­å®š liveness å’Œ readiness probe ä»¥ç¢ºä¿æ‡‰ç”¨ç¨‹å¼çš„ç©©å®šæ€§\nä½¿ç”¨æ¨™ç±¤ç®¡ç†: å–„ç”¨æ¨™ç±¤ä¾†çµ„ç¹”å’Œç®¡ç†ä¸åŒçš„è³‡æº\nç‰ˆæœ¬æ§åˆ¶: ä½¿ç”¨å…·é«”çš„æ˜ åƒæª”æ¨™ç±¤è€Œé latest\nå‘½åç©ºé–“éš”é›¢: ä½¿ç”¨ä¸åŒçš„å‘½åç©ºé–“ä¾†éš”é›¢ä¸åŒç’°å¢ƒçš„æ‡‰ç”¨ç¨‹å¼\n\né€éé€™äº›é…ç½®å’Œæ“ä½œï¼Œæ‚¨å¯ä»¥æœ‰æ•ˆåœ°ç®¡ç† Kubernetes ä¸­çš„æ‡‰ç”¨ç¨‹å¼éƒ¨ç½²ï¼Œç¢ºä¿æœå‹™çš„é«˜å¯ç”¨æ€§å’Œç©©å®šæ€§ã€‚\n","categories":["kubernetes"],"tags":["kubernetes"]},{"title":"Kubernetes Image æ‹‰å–æŒ‡å—","url":"/2025/10/11/kubernetes-image-pull/","content":"Kubernetes Image æ‹‰å–æŒ‡å—ä»€éº¼æ˜¯å®¹å™¨æ˜ åƒæ‹‰å–ï¼Ÿåœ¨ Kubernetes ä¸­ï¼ŒPod éœ€è¦ä½¿ç”¨å®¹å™¨æ˜ åƒä¾†å•Ÿå‹•å®¹å™¨ã€‚æ ¹æ“šæ˜ åƒçš„ä¾†æºå’Œå­˜å–æ–¹å¼ä¸åŒï¼ŒKubernetes æä¾›äº†å¤šç¨®æ˜ åƒæ‹‰å–ç­–ç•¥ã€‚äº†è§£é€™äº›ä¸åŒçš„æ‹‰å–æ–¹å¼å°æ–¼æœ‰æ•ˆç®¡ç†æ‡‰ç”¨ç¨‹å¼éƒ¨ç½²è‡³é—œé‡è¦ã€‚\næ˜ åƒæ‹‰å–çš„ä¸»è¦å ´æ™¯ï¼š\næœ¬åœ°æ˜ åƒï¼šä½¿ç”¨æœ¬åœ°æ§‹å»ºä¸¦è¼‰å…¥åˆ°ç¯€é»çš„æ˜ åƒ\nå…¬é–‹å€‰åº«ï¼šå¾ Docker Hub ç­‰å…¬é–‹å€‰åº«æ‹‰å–æ˜ åƒ\nç§æœ‰å€‰åº«ï¼šå¾éœ€è¦èº«ä»½é©—è­‰çš„ç§æœ‰å€‰åº«æ‹‰å–æ˜ åƒ\nä¼æ¥­å€‰åº«ï¼šå¾çµ„ç¹”å…§éƒ¨çš„ç§æœ‰æ˜ åƒå€‰åº«æ‹‰å–æ˜ åƒ\n\nç‚ºä»€éº¼éœ€è¦äº†è§£ä¸åŒçš„æ‹‰å–æ–¹å¼ï¼Ÿæ ¹æ“šä¸åŒçš„ä½¿ç”¨å ´æ™¯ï¼Œé¸æ“‡åˆé©çš„æ˜ åƒæ‹‰å–æ–¹å¼å¯ä»¥ï¼š\n\næå‡æ•ˆç‡ï¼šæ¸›å°‘ä¸å¿…è¦çš„ç¶²è·¯å‚³è¼¸å’Œä¸‹è¼‰æ™‚é–“\nå¢å¼·å®‰å…¨æ€§ï¼šä¿è­·ç§æœ‰æ˜ åƒä¸è¢«æœªæˆæ¬Šå­˜å–\né™ä½æˆæœ¬ï¼šé¿å…é‡è¤‡æ‹‰å–ç›¸åŒçš„æ˜ åƒ\n\n\n\n\næ–¹å¼ä¸€ï¼šæœ¬åœ° Docker æ˜ åƒç›´æ¥å¼•ç”¨æ¦‚è¿°ç•¶æ‚¨åœ¨æœ¬åœ°ç’°å¢ƒï¼ˆå¦‚ Minikubeã€Docker Desktopï¼‰é–‹ç™¼æ™‚ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨æœ¬åœ°æ§‹å»ºçš„ Docker æ˜ åƒï¼Œç„¡éœ€æ¨é€åˆ°é ç«¯å€‰åº«ã€‚\nä½¿ç”¨å ´æ™¯\né–‹ç™¼å’Œæ¸¬è©¦éšæ®µ\næœ¬åœ° Kubernetes ç’°å¢ƒï¼ˆMinikubeã€Kindï¼‰\nä¸å¸Œæœ›å°‡æ˜ åƒæ¨é€åˆ°å¤–éƒ¨å€‰åº«çš„æƒ…æ³\n\nå¯¦ä½œæ­¥é©Ÿ1. ç¢ºä¿ Docker ç’°å¢ƒèˆ‡ Kubernetes å…±äº«åœ¨ Minikube ä¸­ï¼š\n# è¨­å®š Docker ç’°å¢ƒæŒ‡å‘ Minikubeeval $(minikube docker-env)# æˆ–åœ¨ Windows PowerShell ä¸­minikube docker-env | Invoke-Expression# é©—è­‰å·²åˆ‡æ›åˆ° Minikube Docker ç’°å¢ƒdocker context ls# æˆ–è€…æª¢æŸ¥ Docker Hostecho $DOCKER_HOST# Minikube ç’°å¢ƒæœƒé¡¯ç¤ºé¡ä¼¼ï¼štcp://192.168.49.2:2376\n\n\n\nåˆ‡å›åŸæœ¬çš„ Docker ç’°å¢ƒï¼š\n# åœ¨ Linux/macOS ä¸­eval $(minikube docker-env -u)# æˆ–åœ¨ Windows PowerShell ä¸­minikube docker-env -u | Invoke-Expression# æˆ–è€…ç›´æ¥é‡æ–°å•Ÿå‹•çµ‚ç«¯æ©Ÿæœƒè©±# æ–°çš„çµ‚ç«¯æœƒè‡ªå‹•ä½¿ç”¨æœ¬åœ° Docker ç’°å¢ƒ\n\n\n\nåœ¨ Docker Desktop ä¸­ï¼šDocker Desktop çš„ Kubernetes æœƒè‡ªå‹•å…±äº«æœ¬åœ° Docker æ˜ åƒã€‚\n2. æ§‹å»ºæœ¬åœ°æ˜ åƒ# æ§‹å»º Docker æ˜ åƒdocker build -t my-local-app:latest .# é©—è­‰æ˜ åƒå·²å»ºç«‹docker images | grep my-local-app\n\n3. åœ¨ Kubernetes ä¸­ä½¿ç”¨æœ¬åœ°æ˜ åƒapiVersion: apps/v1kind: Deploymentmetadata:  name: local-app-deployment  namespace: defaultspec:  replicas: 1  selector:    matchLabels:      app: local-app  template:    metadata:      labels:        app: local-app    spec:      containers:      - name: app        image: my-local-app:latest        imagePullPolicy: Never  # é—œéµè¨­å®šï¼šä¸å¾é ç«¯æ‹‰å–        ports:        - containerPort: 8080\n\n4. éƒ¨ç½²æ‡‰ç”¨ç¨‹å¼kubectl apply -f local-deployment.yaml\n\né‡è¦æ³¨æ„äº‹é …\nimagePullPolicy: å¿…é ˆè¨­å®šç‚º Never æˆ– IfNotPresent\næ˜ åƒæ¨™ç±¤: å»ºè­°ä½¿ç”¨å…·é«”çš„æ¨™ç±¤è€Œé latest\nç¯€é»é™åˆ¶: æ˜ åƒåªå­˜åœ¨æ–¼ç‰¹å®šç¯€é»ä¸Š\nDocker ç’°å¢ƒåˆ‡æ›: ä½¿ç”¨ minikube docker-env å¾Œè¨˜å¾—åˆ‡å›åŸæœ¬ç’°å¢ƒ\nä½¿ç”¨ eval $(minikube docker-env -u) ä¾†å–æ¶ˆè¨­å®š\næˆ–é‡æ–°å•Ÿå‹•çµ‚ç«¯æ©Ÿæœƒè©±\n\n\n\nDocker ç’°å¢ƒç®¡ç†# æª¢æŸ¥ç•¶å‰ Docker ç’°å¢ƒå’Œä¸»æ©Ÿecho $DOCKER_HOST# æœ¬åœ°ï¼šé€šå¸¸ç‚ºç©ºæˆ–é¡¯ç¤º unix:///var/run/docker.sock# Minikubeï¼šé¡¯ç¤º tcp://192.168.49.2:2376 (æˆ–é¡ä¼¼çš„ IP)# æŸ¥çœ‹ Docker ä¸Šä¸‹æ–‡docker context ls# åˆ—å‡º Docker æ˜ åƒï¼ˆç¢ºèªåœ¨æ­£ç¢ºçš„ç’°å¢ƒä¸­ï¼‰docker images# å¦‚æœéœ€è¦åœ¨ä¸åŒç’°å¢ƒé–“åˆ‡æ›ï¼š# åˆ‡æ›åˆ° Minikubeeval $(minikube docker-env)echo &quot;ç•¶å‰ Docker Host: $DOCKER_HOST&quot;# åˆ‡æ›å›æœ¬åœ°eval $(minikube docker-env -u)echo &quot;ç•¶å‰ Docker Host: $DOCKER_HOST&quot;\n\n\næ–¹å¼äºŒï¼šæ‹‰å– Docker Hub å…¬é–‹å€‰åº«æ˜ åƒæ¦‚è¿°å¾ Docker Hub ç­‰å…¬é–‹å€‰åº«æ‹‰å–æ˜ åƒæ˜¯æœ€å¸¸è¦‹çš„æ–¹å¼ï¼Œé©ç”¨æ–¼ä½¿ç”¨é–‹æºè»Ÿé«”æˆ–å…¬é–‹å¯ç”¨çš„æ‡‰ç”¨ç¨‹å¼æ˜ åƒã€‚\nä½¿ç”¨å ´æ™¯\nä½¿ç”¨å®˜æ–¹æ˜ åƒï¼ˆå¦‚ nginxã€redisã€mysqlï¼‰\nä½¿ç”¨é–‹æºå°ˆæ¡ˆçš„å…¬é–‹æ˜ åƒ\nç”Ÿç”¢ç’°å¢ƒä¸­çš„æ¨™æº–åŒ–æ˜ åƒ\n\nå¯¦ä½œæ­¥é©Ÿ1. åŸºæœ¬å…¬é–‹æ˜ åƒä½¿ç”¨ç¯„ä¾‹apiVersion: apps/v1kind: Deploymentmetadata:  name: nginx-deployment  namespace: defaultspec:  replicas: 3  selector:    matchLabels:      app: nginx  template:    metadata:      labels:        app: nginx    spec:      containers:      - name: nginx        image: nginx:1.21-alpine  # Docker Hub å®˜æ–¹æ˜ åƒ        imagePullPolicy: Always   # ç¸½æ˜¯æ‹‰å–æœ€æ–°ç‰ˆæœ¬        ports:        - containerPort: 80\n\n2. é€²éšå…¬é–‹æ˜ åƒé…ç½®ç¯„ä¾‹apiVersion: apps/v1kind: Deploymentmetadata:  name: tomcat-deployment  namespace: defaultspec:  replicas: 1  selector:    matchLabels:      app: tomcat  template:    metadata:      labels:        app: tomcat    spec:      containers:      - name: tomcat        image: tomcat:10.1-jdk17        imagePullPolicy: IfNotPresent  # å¦‚æœæœ¬åœ°ä¸å­˜åœ¨æ‰æ‹‰å–        ports:        - containerPort: 8080        command: [&quot;/bin/sh&quot;,&quot;-c&quot;]        args:          - cp -r /usr/local/tomcat/webapps.dist/ROOT /usr/local/tomcat/webapps/ &amp;&amp; exec catalina.sh run        readinessProbe:          httpGet:            path: /            port: 8080          initialDelaySeconds: 10          periodSeconds: 5\n\n3. éƒ¨ç½²æ‡‰ç”¨ç¨‹å¼# éƒ¨ç½²åŸºæœ¬çš„ Nginx æ‡‰ç”¨kubectl apply -f nginx-deployment.yaml# éƒ¨ç½²é€²éšçš„ Tomcat æ‡‰ç”¨kubectl apply -f tomcat-deployment.yaml# æŸ¥çœ‹éƒ¨ç½²ç‹€æ…‹kubectl get deploymentskubectl get pods\n\nImagePullPolicy é¸é …èªªæ˜\nAlways: æ¯æ¬¡éƒ½é‡æ–°æ‹‰å–æ˜ åƒ\nIfNotPresent: æœ¬åœ°ä¸å­˜åœ¨æ™‚æ‰æ‹‰å–ï¼ˆé è¨­å€¼ï¼‰\nNever: çµ•ä¸æ‹‰å–ï¼Œåªä½¿ç”¨æœ¬åœ°æ˜ åƒ\n\n\næ–¹å¼ä¸‰ï¼šæ‹‰å– Docker Hub ç§æœ‰å€‰åº«æ˜ åƒæ¦‚è¿°ç•¶ä½¿ç”¨ç§æœ‰å€‰åº«ä¸­çš„æ˜ åƒæ™‚ï¼Œéœ€è¦æä¾›èº«ä»½é©—è­‰è³‡è¨Šã€‚Kubernetes ä½¿ç”¨ Image Pull Secret ä¾†å®‰å…¨åœ°å­˜å„²é€™äº›æ†‘è­‰ã€‚\nä½¿ç”¨å ´æ™¯\nä½¿ç”¨çµ„ç¹”çš„ç§æœ‰æ˜ åƒ\nå•†æ¥­è»Ÿé«”çš„ç§æœ‰æ˜ åƒ\nåŒ…å«æ•æ„Ÿè³‡è¨Šçš„æ‡‰ç”¨ç¨‹å¼æ˜ åƒ\n\nå¯¦ä½œæ­¥é©Ÿ1. å»ºç«‹ Docker Registry Secretç‚ºäº†è®“ Kubernetes èƒ½å¤ å¾ Docker Hub ç§æœ‰å€‰åº«æ‹‰å–æ˜ åƒæª”ï¼Œéœ€è¦å»ºç«‹åŒ…å«èªè­‰è³‡è¨Šçš„ Secret è³‡æºï¼š\nkubectl create secret docker-registry regcred \\  --docker-server=https://index.docker.io/v1/ \\  --docker-username=&lt;username&gt; \\  --docker-password=&lt;password&gt; \\  --docker-email=&lt;mail&gt; \\  --namespace=&lt;namespace&gt;\n\nåƒæ•¸èªªæ˜ï¼š\n\nregcredï¼šSecret çš„åç¨±ï¼Œå¯ä»¥è‡ªè¡Œå®šç¾©\n--docker-serverï¼šDocker Hub çš„ä¼ºæœå™¨åœ°å€ï¼Œå›ºå®šç‚º https://index.docker.io/v1/\n--docker-usernameï¼šæ‚¨çš„ Docker Hub ä½¿ç”¨è€…åç¨±\n--docker-passwordï¼šå»ºè­°ä½¿ç”¨ Personal Access Token (PAT) è€Œéå¯†ç¢¼\n--namespaceï¼šæŒ‡å®š Secret å»ºç«‹çš„å‘½åç©ºé–“\n\n\né—œæ–¼å¦‚ä½•ç²å– Docker Hub Personal Access Token çš„è©³ç´°èªªæ˜ï¼Œè«‹åƒè€ƒä¹‹å‰çš„æ–‡ç« \né‡è¦æé†’ï¼š\n\nå‡ºæ–¼å®‰å…¨è€ƒé‡ï¼Œå¼·çƒˆå»ºè­°ä½¿ç”¨ Personal Access Token (PAT) è€Œéå¸³æˆ¶å¯†ç¢¼\n--docker-email åƒæ•¸ç‚ºå¯é¸ï¼Œç¾ä»£ Docker å€‰åº«é€šå¸¸ä¸éœ€è¦æ­¤åƒæ•¸\nSecret å¿…é ˆå»ºç«‹åœ¨èˆ‡ Pod ç›¸åŒçš„å‘½åç©ºé–“ä¸­æ‰èƒ½ä½¿ç”¨\n\n2. åœ¨ Deployment ä¸­ä½¿ç”¨ç§æœ‰æ˜ åƒapiVersion: apps/v1kind: Deploymentmetadata:  name: k8s-deployment  namespace: k8s-namespacespec:  replicas: 1  selector:    matchLabels:      app: k8s-app  template:    metadata:      labels:        app: k8s-app    spec:      containers:      - name: k8s-app        image: &lt;username&gt;/&lt;repo-name&gt;:latest  # ç§æœ‰å€‰åº«æ˜ åƒ        imagePullPolicy: Always        ports:        - containerPort: 8080      imagePullSecrets:  # æŒ‡å®šç”¨æ–¼èº«ä»½é©—è­‰çš„ Secret      - name: regcred\n\n3. ä½¿ç”¨ ServiceAccount è‡ªå‹•å¥—ç”¨ SecretapiVersion: v1kind: ServiceAccountmetadata:  name: k8s-sa  namespace: k8s-namespaceimagePullSecrets:- name: regcred---apiVersion: apps/v1kind: Deploymentmetadata:  name: k8s-deployment  namespace: k8s-namespacespec:  replicas: 1  selector:    matchLabels:      app: k8s-app  template:    metadata:      labels:        app: k8s-app    spec:      serviceAccountName: k8s-sa  # ä½¿ç”¨ ServiceAccount      containers:      - name: k8s-app        image: &lt;username&gt;/&lt;repo-name&gt;:latest  # ç§æœ‰å€‰åº«æ˜ åƒ        imagePullPolicy: Always        ports:        - containerPort: 8080\n\nä¸åŒç§æœ‰å€‰åº«çš„è¨­å®šAWS ECRkubectl create secret docker-registry ecr-secret \\  --docker-server=&lt;account-id&gt;.dkr.ecr.&lt;region&gt;.amazonaws.com \\  --docker-username=AWS \\  --docker-password=$(aws ecr get-login-password) \\  --namespace=&lt;namespace&gt;\n\nAzure ACRkubectl create secret docker-registry acr-secret \\  --docker-server=&lt;registry-name&gt;.azurecr.io \\  --docker-username=&lt;username&gt; \\  --docker-password=&lt;password&gt; \\  --namespace=&lt;namespace&gt;\n\nGoogle GCRkubectl create secret docker-registry gcr-secret \\  --docker-server=gcr.io \\  --docker-username=_json_key \\  --docker-password=&quot;$(cat key.json)&quot; \\  --namespace=&lt;namespace&gt;\n\nå¸¸ç”¨ç®¡ç†æŒ‡ä»¤æŸ¥çœ‹æ˜ åƒæ‹‰å–ç‹€æ…‹# æŸ¥çœ‹ Pod ç‹€æ…‹kubectl get pods -n &lt;namespace&gt;# æŸ¥çœ‹ Pod è©³ç´°è³‡è¨Šï¼ˆåŒ…å«æ˜ åƒæ‹‰å–äº‹ä»¶ï¼‰kubectl describe pod &lt;pod-name&gt; -n &lt;namespace&gt;# æŸ¥çœ‹æ˜ åƒæ‹‰å–ç›¸é—œçš„äº‹ä»¶kubectl get events --field-selector reason=Pulling -n &lt;namespace&gt;\n\nç®¡ç† Image Pull Secrets# æŸ¥çœ‹ Secret åˆ—è¡¨kubectl get secrets -n &lt;namespace&gt;# æŸ¥çœ‹ Secret è©³ç´°è³‡è¨Škubectl describe secret &lt;secret-name&gt; -n &lt;namespace&gt;# åˆªé™¤ Secretkubectl delete secret &lt;secret-name&gt; -n &lt;namespace&gt;\n\næ‰‹å‹•æ‹‰å–æ˜ åƒé€²è¡Œæ¸¬è©¦# åœ¨ç¯€é»ä¸Šæ‰‹å‹•æ‹‰å–æ˜ åƒdocker pull &lt;image-name&gt;# æª¢æŸ¥æ˜ åƒæ˜¯å¦å­˜åœ¨docker images | grep &lt;image-name&gt;\n\nç–‘é›£æ’è§£å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ1. ImagePullBackOff éŒ¯èª¤# æª¢æŸ¥ Pod äº‹ä»¶kubectl describe pod &lt;pod-name&gt;# å¸¸è¦‹åŸå› ï¼š# - æ˜ åƒåç¨±éŒ¯èª¤# - ç¶²è·¯é€£ç·šå•é¡Œ# - èº«ä»½é©—è­‰å¤±æ•—# - æ˜ åƒä¸å­˜åœ¨\n\n2. æœ¬åœ°æ˜ åƒç„¡æ³•æ‹‰å–\nç¢ºèª imagePullPolicy è¨­å®šç‚º Never æˆ– IfNotPresent\næª¢æŸ¥æ˜ åƒæ˜¯å¦å­˜åœ¨æ–¼æ­£ç¢ºçš„ç¯€é»ä¸Š\nåœ¨ Minikube ä¸­ç¢ºèª Docker ç’°å¢ƒè¨­å®šæ­£ç¢º\nDocker ç’°å¢ƒå•é¡Œï¼šç¢ºèªæ˜¯å¦åœ¨æ­£ç¢ºçš„ Docker ç’°å¢ƒä¸­# æª¢æŸ¥ç•¶å‰ Docker ç’°å¢ƒï¼ˆæ›´æº–ç¢ºçš„æ–¹æ³•ï¼‰echo $DOCKER_HOST# æœ¬åœ°ç’°å¢ƒï¼šé€šå¸¸ç‚ºç©ºæˆ– unix:///var/run/docker.sock# Minikube ç’°å¢ƒï¼štcp://192.168.49.2:2376 æˆ–é¡ä¼¼ IP# æˆ–è€…æª¢æŸ¥ç’°å¢ƒè®Šæ•¸env | grep DOCKER# å¦‚æœåœ¨ Minikube ç’°å¢ƒä¸­æ‰¾ä¸åˆ°æ˜ åƒï¼Œåˆ‡æ›åˆ°æ­£ç¢ºç’°å¢ƒeval $(minikube docker-env)  # åˆ‡æ›åˆ° Minikubedocker images  # ç¢ºèªæ˜ åƒå­˜åœ¨# å¦‚æœéœ€è¦åˆ‡å›æœ¬åœ°ç’°å¢ƒeval $(minikube docker-env -u)\n\n3. ç§æœ‰å€‰åº«èªè­‰å¤±æ•—\né©—è­‰ Secret ä¸­çš„æ†‘è­‰æ˜¯å¦æ­£ç¢º\næª¢æŸ¥ Secret æ˜¯å¦åœ¨æ­£ç¢ºçš„å‘½åç©ºé–“ä¸­\nç¢ºèªå€‰åº«ä¼ºæœå™¨åœ°å€æ ¼å¼æ­£ç¢º\n\n4. æ˜ åƒæ‹‰å–é€Ÿåº¦ç·©æ…¢\nè€ƒæ…®ä½¿ç”¨æ˜ åƒå¿«å–æˆ–æœ¬åœ°å€‰åº«\næª¢æŸ¥ç¶²è·¯é€£ç·šå“è³ª\nä½¿ç”¨è¼ƒå°çš„æ˜ åƒæˆ–å¤šéšæ®µæ§‹å»º\n\næœ€ä½³å¯¦å‹™å»ºè­°æ˜ åƒç®¡ç†\nä½¿ç”¨å…·é«”æ¨™ç±¤ï¼šé¿å…ä½¿ç”¨ latest æ¨™ç±¤\næ˜ åƒæƒæï¼šå®šæœŸæƒææ˜ åƒçš„å®‰å…¨æ¼æ´\næ˜ åƒåˆ†å±¤ï¼šå„ªåŒ– Dockerfile ä»¥æ¸›å°‘æ˜ åƒå¤§å°\nå®šæœŸæ›´æ–°ï¼šä¿æŒæ˜ åƒç‚ºæœ€æ–°ç‰ˆæœ¬\n\nå®‰å…¨æ€§\næœ€å°æ¬Šé™ï¼šä½¿ç”¨æœ€å°æ¬Šé™çš„ ServiceAccount\nSecret ç®¡ç†ï¼šå®šæœŸè¼ªæ› Image Pull Secret\nç¶²è·¯éš”é›¢ï¼šåœ¨é©ç•¶çš„æƒ…æ³ä¸‹ä½¿ç”¨ç¶²è·¯ç­–ç•¥\næ˜ åƒç°½ç« ï¼šè€ƒæ…®ä½¿ç”¨æ˜ åƒç°½ç« é©—è­‰\n\næ•ˆèƒ½å„ªåŒ–\næœ¬åœ°å¿«å–ï¼šåœ¨é–‹ç™¼ç’°å¢ƒä¸­ä½¿ç”¨æœ¬åœ°æ˜ åƒ\nä¸¦è¡Œæ‹‰å–ï¼šåˆç†è¨­å®š Pod çš„ä¸¦è¡Œå•Ÿå‹•æ•¸é‡\næ˜ åƒé æ‹‰å–ï¼šåœ¨ç¯€é»ä¸Šé å…ˆæ‹‰å–å¸¸ç”¨æ˜ åƒ\nè³‡æºé™åˆ¶ï¼šè¨­å®šé©ç•¶çš„è³‡æºé™åˆ¶é¿å…è³‡æºç«¶çˆ­\n\né€éäº†è§£å’Œæ­£ç¢ºä½¿ç”¨é€™ä¸‰ç¨®æ˜ åƒæ‹‰å–æ–¹å¼ï¼Œæ‚¨å¯ä»¥åœ¨ä¸åŒçš„ç’°å¢ƒå’Œå ´æ™¯ä¸­é«˜æ•ˆã€å®‰å…¨åœ°ç®¡ç† Kubernetes æ‡‰ç”¨ç¨‹å¼çš„å®¹å™¨æ˜ åƒã€‚\n","categories":["kubernetes"],"tags":["kubernetes"]},{"title":"Kubernetes Namespace ä½¿ç”¨æŒ‡å—","url":"/2025/10/10/kubernetes-namespace/","content":"Kubernetes Namespace ä½¿ç”¨æŒ‡å—ä»€éº¼æ˜¯ Namespaceï¼ŸKubernetes Namespace æ˜¯ä¸€å€‹ API ç‰©ä»¶ï¼Œç”¨æ–¼åœ¨ Kubernetes å¢é›†ä¸­å‰µå»ºè™›æ“¬çš„è³‡æºéš”é›¢ç’°å¢ƒã€‚Namespace æä¾›äº†ä¸€ç¨®å°‡å¢é›†è³‡æºåŠƒåˆ†ç‚ºå¤šå€‹ç¨ç«‹å€åŸŸçš„æ–¹å¼ï¼Œè®“ä¸åŒçš„åœ˜éšŠã€å°ˆæ¡ˆæˆ–ç’°å¢ƒå¯ä»¥åœ¨åŒä¸€å€‹å¢é›†ä¸­å®‰å…¨åœ°å…±å­˜ã€‚\nNamespace çš„ä¸»è¦åŠŸèƒ½ï¼š\nè³‡æºéš”é›¢ï¼šå°‡ä¸åŒçš„æ‡‰ç”¨ç¨‹å¼æˆ–ç’°å¢ƒåˆ†éš”åœ¨ä¸åŒçš„å‘½åç©ºé–“ä¸­\nå­˜å–æ§åˆ¶ï¼šé€é RBAC å¯¦ç¾ç´°ç²’åº¦çš„æ¬Šé™ç®¡ç†\nè³‡æºé…é¡ç®¡ç†ï¼šé™åˆ¶æ¯å€‹å‘½åç©ºé–“å¯ä½¿ç”¨çš„å¢é›†è³‡æºé‡\nåç¨±ç©ºé–“ç®¡ç†ï¼šé¿å…è³‡æºåç¨±è¡çªï¼Œæ”¯æ´ç›¸åŒåç¨±çš„è³‡æºå­˜åœ¨æ–¼ä¸åŒå‘½åç©ºé–“\n\nç‚ºä»€éº¼ä½¿ç”¨ Namespaceï¼Ÿç›¸è¼ƒæ–¼å°‡æ‰€æœ‰è³‡æºéƒ½æ”¾åœ¨é è¨­å‘½åç©ºé–“ä¸­ï¼ŒNamespace æä¾›äº†æ›´å¥½çš„è³‡æºç®¡ç†æ–¹å¼ï¼š\n\nå¤šç§Ÿæˆ¶æ”¯æ´ï¼šè®“å¤šå€‹åœ˜éšŠæˆ–å°ˆæ¡ˆå®‰å…¨åœ°å…±äº«åŒä¸€å€‹ Kubernetes å¢é›†\nç’°å¢ƒåˆ†é›¢ï¼šæ¸…æ¥šå€åˆ†é–‹ç™¼ã€æ¸¬è©¦ã€ç”Ÿç”¢ç­‰ä¸åŒç’°å¢ƒçš„è³‡æº\nè³‡æºç®¡ç†ï¼šé€éè³‡æºé…é¡æ§åˆ¶æ¯å€‹ç’°å¢ƒçš„è³‡æºä½¿ç”¨é‡\næ¬Šé™æ§åˆ¶ï¼šå¯¦ç¾ç²¾ç´°çš„å­˜å–æ¬Šé™ç®¡ç†ï¼Œæå‡å®‰å…¨æ€§\n\n\n\n\né è¨­ NamespaceKubernetes å¢é›†é è¨­æœƒå‰µå»ºå››å€‹ç³»çµ±å‘½åç©ºé–“ï¼š\n\nkube-system: å­˜æ”¾ Kubernetes ç³»çµ±å…ƒä»¶ï¼Œå¦‚ kube-dnsã€kube-proxyã€etcd ç­‰æ ¸å¿ƒæœå‹™\nkube-public: å…¬é–‹å¯è®€çš„å‘½åç©ºé–“ï¼Œé€šå¸¸ç”¨æ–¼å­˜æ”¾å¢é›†è³‡è¨Šï¼Œæ‰€æœ‰ä½¿ç”¨è€…ï¼ˆåŒ…æ‹¬æœªèªè­‰ä½¿ç”¨è€…ï¼‰éƒ½å¯ä»¥è®€å–\nkube-node-lease: ç”¨æ–¼ Node ç§Ÿç´„ç‰©ä»¶ï¼Œå¹«åŠ©ç¢ºå®š Node çš„å¯ç”¨æ€§å’Œå¥åº·ç‹€æ…‹\ndefault: é è¨­å‘½åç©ºé–“ï¼Œç•¶æ²’æœ‰æŒ‡å®šå‘½åç©ºé–“æ™‚ï¼Œè³‡æºæœƒè¢«å‰µå»ºåœ¨é€™è£¡\n\nå»ºç«‹è‡ªå®šç¾© Namespaceæ–¹æ³•ä¸€ï¼šä½¿ç”¨ YAML æª”æ¡ˆå»ºç«‹å»ºç«‹ dockertest-namespace.yaml æª”æ¡ˆï¼š\napiVersion: v1kind: Namespacemetadata:  name: dockertest-namespace  labels:    name: dockertest-namespace    environment: dev\n\nå¥—ç”¨è¨­å®šæª”ï¼š\nkubectl create -f dockertest-namespace.yaml\n\n\n\næ–¹æ³•äºŒï¼šä½¿ç”¨æŒ‡ä»¤ç›´æ¥å»ºç«‹kubectl create namespace dockertest-namespace\n\næª¢è¦–æ‰€æœ‰ Namespacekubectl get namespaces# æˆ–ä½¿ç”¨ç°¡å¯«kubectl get ns\n\nåœ¨æŒ‡å®š Namespace ä¸­æ“ä½œè³‡æºåœ¨ç‰¹å®š Namespace å»ºç«‹è³‡æº# åœ¨æŒ‡å®šçš„ namespace ä¸­å»ºç«‹ podkubectl run nginx --image=nginx -n dockertest-namespace# ä½¿ç”¨ YAML æª”æ¡ˆå»ºç«‹è³‡æºåˆ°æŒ‡å®š namespacekubectl apply -f dockertest-deployment.yaml -n dockertest-namespace\n\n\n\nè¨­å®šé è¨­ Namespace# è¨­å®šç•¶å‰ context çš„é è¨­ namespacekubectl config set-context --current --namespace=dockertest-namespace# ç¢ºèªç›®å‰çš„ context è¨­å®škubectl config view --minify | grep namespace\n\n\n\næª¢è¦– Namespace ä¸­çš„è³‡æº# æª¢è¦–æŒ‡å®š namespace ä¸­çš„æ‰€æœ‰ podkubectl get pods -n dockertest-namespace# æª¢è¦–æ‰€æœ‰ namespace ä¸­çš„ podkubectl get pods --all-namespaces# æª¢è¦– namespace çš„è©³ç´°è³‡è¨Škubectl describe namespace dockertest-namespace\n\n\n\nåˆªé™¤ Namespaceæ³¨æ„ï¼šåˆªé™¤ Namespace æœƒåŒæ™‚åˆªé™¤è©²å‘½åç©ºé–“å…§çš„æ‰€æœ‰è³‡æºï¼\nkubectl delete namespace dockertest-namespace\n\n\n\nè³‡æºé…é¡ç®¡ç†ç‚º Namespace è¨­å®šè³‡æºé™åˆ¶ï¼Œé¿å…æŸå€‹ç’°å¢ƒæ¶ˆè€—éå¤šå¢é›†è³‡æºï¼š\napiVersion: v1kind: ResourceQuotametadata:  name: compute-quota  namespace: dockertest-namespacespec:  hard:    requests.cpu: &quot;4&quot;    requests.memory: 8Gi    limits.cpu: &quot;8&quot;    limits.memory: 16Gi    persistentvolumeclaims: &quot;10&quot;    pods: &quot;10&quot;\n\næœ€ä½³å¯¦è¸å»ºè­°\nç’°å¢ƒåˆ†é›¢ï¼šç‚ºä¸åŒç’°å¢ƒï¼ˆé–‹ç™¼ã€æ¸¬è©¦ã€ç”Ÿç”¢ï¼‰å»ºç«‹ç¨ç«‹çš„å‘½åç©ºé–“\nåœ˜éšŠéš”é›¢ï¼šç‚ºä¸åŒåœ˜éšŠæˆ–å°ˆæ¡ˆå»ºç«‹å°ˆç”¨çš„å‘½åç©ºé–“\nå‘½åè¦ç¯„ï¼šæ¡ç”¨ä¸€è‡´çš„å‘½åè¦ç¯„ï¼Œå¦‚ team-environment æ ¼å¼\nè³‡æºé…é¡ï¼šç‚ºæ¯å€‹å‘½åç©ºé–“è¨­å®šåˆé©çš„è³‡æºé…é¡\næ¬Šé™æ§åˆ¶ï¼šçµåˆ RBAC å¯¦ç¾ç´°ç²’åº¦çš„æ¬Šé™ç®¡ç†\nç›£æ§æ¨™ç±¤ï¼šç‚ºå‘½åç©ºé–“åŠ ä¸Šæœ‰æ„ç¾©çš„æ¨™ç±¤ï¼Œä¾¿æ–¼ç›£æ§å’Œç®¡ç†\n\nç¯„ä¾‹å‘½åå»ºè­°ï¼š\n\nfrontend-devã€frontend-prod\nbackend-stagingã€backend-prod\nteam-alpha-devã€team-beta-prod\n\n","categories":["kubernetes"],"tags":["kubernetes"]},{"title":"Kubernetes Secret ä½¿ç”¨æŒ‡å—","url":"/2025/11/02/kubernetes-secret-intro/","content":"Kubernetes Secret ä½¿ç”¨æŒ‡å—ä»€éº¼æ˜¯ Secretsï¼ŸKubernetes Secrets æ˜¯ä¸€å€‹ API ç‰©ä»¶ï¼Œç”¨æ–¼å­˜å„²å’Œç®¡ç†æ•æ„Ÿè³‡è¨Šï¼Œå¦‚å¯†ç¢¼ã€OAuth æ¬Šæ–ã€SSH é‡‘é‘°ç­‰ã€‚Secrets é¡ä¼¼æ–¼ ConfigMapï¼Œä½†å°ˆé–€è¨­è¨ˆç”¨æ–¼ä¿å­˜æ©Ÿå¯†è³‡æ–™ï¼Œæä¾›äº†é¡å¤–çš„å®‰å…¨æ€§ä¿è­·ã€‚\nSecrets çš„ä¸»è¦åŠŸèƒ½ï¼š\næ•æ„Ÿè³‡æ–™å­˜å„²ï¼šå®‰å…¨åœ°å­˜å„²å¯†ç¢¼ã€é‡‘é‘°ã€æ†‘è­‰ç­‰æ•æ„Ÿè³‡è¨Š\nè³‡æ–™åŠ å¯†ï¼šåœ¨ etcd ä¸­ä»¥ Base64 ç·¨ç¢¼å­˜å„²ï¼ˆå¯é…ç½®åŠ å¯†ï¼‰\nå­˜å–æ§åˆ¶ï¼šé€é RBAC æ§åˆ¶å°æ•æ„Ÿè³‡æ–™çš„å­˜å–\nå¤šç¨®é¡å‹æ”¯æ´ï¼šæ”¯æ´ä¸åŒé¡å‹çš„æ©Ÿå¯†è³‡æ–™æ ¼å¼\n\nç‚ºä»€éº¼ä½¿ç”¨ Secretsï¼Ÿç›¸è¼ƒæ–¼å°‡æ•æ„Ÿè³‡æ–™ç¡¬ç·¨ç¢¼åœ¨æ‡‰ç”¨ç¨‹å¼æˆ– ConfigMap ä¸­ï¼ŒSecrets æä¾›äº†æ›´å®‰å…¨çš„ç®¡ç†æ–¹å¼ï¼š\n\nå®‰å…¨æ€§ï¼šæ•æ„Ÿè³‡æ–™èˆ‡æ‡‰ç”¨ç¨‹å¼ç¨‹å¼ç¢¼åˆ†é›¢\nå­˜å–æ§åˆ¶ï¼šç²¾ç´°çš„æ¬Šé™ç®¡ç†å’Œå¯©è¨ˆåŠŸèƒ½\néˆæ´»æ€§ï¼šæ”¯æ´å¤šç¨®æ›è¼‰å’Œä½¿ç”¨æ–¹å¼\nåˆè¦æ€§ï¼šç¬¦åˆä¼æ¥­å®‰å…¨å’Œåˆè¦è¦æ±‚\n\n\n\n\nSecrets é¡å‹å’Œé…ç½®Opaque Secretsï¼ˆé€šç”¨å‹ï¼‰æœ€å¸¸ç”¨çš„ Secret é¡å‹ï¼Œç”¨æ–¼å­˜å„²ä»»æ„çš„ä½¿ç”¨è€…å®šç¾©è³‡æ–™ï¼š\napiVersion: v1kind: Secretmetadata:  name: dockertest-secret  namespace: dockertest-namespace  labels:    app: dockertesttype: Opaquedata:  # Base64 ç·¨ç¢¼çš„è³‡æ–™  username: cm9vdA==          # root  password: MTIzNDU2          # 123456  api-key: YWJjZGVmZ2hpams=   # abcdefghijk    # æˆ–ä½¿ç”¨ stringDataï¼ˆè‡ªå‹•ç·¨ç¢¼ï¼‰stringData:  database-url: &quot;postgresql://user:pass@localhost:5432/db&quot;  secret-token: &quot;my-secret-token-value&quot;\n\nDocker Registry Secretsç”¨æ–¼ç§æœ‰æ˜ åƒå€‰åº«çš„èº«ä»½é©—è­‰ï¼š\napiVersion: v1kind: Secretmetadata:  name: docker-registry-secret  namespace: dockertest-namespacetype: kubernetes.io/dockerconfigjsondata:  .dockerconfigjson: eyJhdXRocyI6eyJyZWdpc3RyeS5leGFtcGxlLmNvbSI6eyJ1c2VybmFtZSI6InVzZXIiLCJwYXNzd29yZCI6InBhc3MiLCJhdXRoIjoiZFhObGNqcHdZWE56In19fQ==\n\nTLS Secretsç”¨æ–¼å­˜å„² TLS æ†‘è­‰å’Œç§é‘°ï¼š\napiVersion: v1kind: Secretmetadata:  name: tls-secret  namespace: dockertest-namespacetype: kubernetes.io/tlsdata:  tls.crt: LS0tLS1CRUdJTi... # Base64 ç·¨ç¢¼çš„æ†‘è­‰  tls.key: LS0tLS1CRUdJTi... # Base64 ç·¨ç¢¼çš„ç§é‘°\n\nService Account Token Secretsç”¨æ–¼æœå‹™å¸³æˆ¶æ¬Šæ–ï¼š\napiVersion: v1kind: Secretmetadata:  name: service-account-secret  namespace: dockertest-namespace  annotations:    kubernetes.io/service-account.name: &quot;my-service-account&quot;type: kubernetes.io/service-account-token\n\nåœ¨ Pod ä¸­ä½¿ç”¨ Secretsæ–¹æ³•ä¸€ï¼šä½œç‚ºç’°å¢ƒè®Šæ•¸apiVersion: apps/v1kind: Deploymentmetadata:  name: dockertest-deployment  namespace: dockertest-namespacespec:  replicas: 1  selector:    matchLabels:      app: dockertest  template:    metadata:      labels:        app: dockertest    spec:      containers:      - name: dockertest        image: docker.io/pcion123/tinydocker:0.0.10        env:        # å¼•ç”¨ç‰¹å®šçš„ Secret éµ        - name: DB_USERNAME          valueFrom:            secretKeyRef:              name: dockertest-secret              key: username        - name: DB_PASSWORD          valueFrom:            secretKeyRef:              name: dockertest-secret              key: password        # å¼•ç”¨æ•´å€‹ Secret ä½œç‚ºç’°å¢ƒè®Šæ•¸        envFrom:        - secretRef:            name: dockertest-secret\n\n\n\næ–¹æ³•äºŒï¼šä½œç‚ºæª”æ¡ˆæ›è¼‰apiVersion: apps/v1kind: Deploymentmetadata:  name: app-with-secret-files  namespace: dockertest-namespacespec:  replicas: 1  selector:    matchLabels:      app: app-with-secrets  template:    metadata:      labels:        app: app-with-secrets    spec:      containers:      - name: app        image: nginx:alpine        volumeMounts:        # æ›è¼‰æ•´å€‹ Secret ç‚ºç›®éŒ„        - name: secret-volume          mountPath: /etc/secrets          readOnly: true        # æ›è¼‰ç‰¹å®šæª”æ¡ˆåˆ°æŒ‡å®šä½ç½®        - name: secret-token          mountPath: /etc/token/secret-token          subPath: secret-token          readOnly: true      volumes:      - name: secret-volume        secret:          secretName: dockertest-secret          # è¨­å®šæª”æ¡ˆæ¬Šé™          defaultMode: 0400      - name: secret-token        secret:          secretName: dockertest-secret          items:          - key: secret-token            path: secret-token            mode: 0444\n\n\n\næ–¹æ³•ä¸‰ï¼šç”¨æ–¼ Image Pull SecretsapiVersion: apps/v1kind: Deploymentmetadata:  name: private-image-deployment  namespace: dockertest-namespacespec:  replicas: 1  selector:    matchLabels:      app: private-app  template:    metadata:      labels:        app: private-app    spec:      # ä½¿ç”¨ Image Pull Secret      imagePullSecrets:      - name: docker-registry-secret      containers:      - name: app        image: private-registry.example.com/my-app:latest\n\nå»ºç«‹å’Œç®¡ç† Secretsä½¿ç”¨ kubectl æŒ‡ä»¤å»ºç«‹# å¾å­—é¢å€¼å»ºç«‹kubectl create secret generic my-secret \\  --from-literal=username=admin \\  --from-literal=password=secretpassword \\  -n dockertest-namespace# å¾æª”æ¡ˆå»ºç«‹kubectl create secret generic file-secret \\  --from-file=ssh-privatekey=/path/to/ssh/key \\  --from-file=ssh-publickey=/path/to/ssh/key.pub \\  -n dockertest-namespace# å»ºç«‹ Docker Registry Secretkubectl create secret docker-registry regcred \\  --docker-server=registry.example.com \\  --docker-username=myuser \\  --docker-password=mypassword \\  --docker-email=myemail@example.com \\  -n dockertest-namespace# å»ºç«‹ TLS Secretkubectl create secret tls tls-secret \\  --cert=path/to/tls.crt \\  --key=path/to/tls.key \\  -n dockertest-namespace\n\nç®¡ç†æŒ‡ä»¤# æŸ¥çœ‹ Secret åˆ—è¡¨kubectl get secrets -n dockertest-namespace# æŸ¥çœ‹ Secret è©³ç´°è³‡è¨Šï¼ˆä¸é¡¯ç¤ºæ•æ„Ÿè³‡æ–™ï¼‰kubectl describe secret dockertest-secret -n dockertest-namespace# æŸ¥çœ‹ Secret çš„ YAML æ ¼å¼kubectl get secret dockertest-secret -n dockertest-namespace -o yaml# è§£ç¢¼ Secret è³‡æ–™kubectl get secret dockertest-secret -n dockertest-namespace -o jsonpath=&#x27;&#123;.data.username&#125;&#x27; | base64 -d# ç·¨è¼¯ Secretkubectl edit secret dockertest-secret -n dockertest-namespace# åˆªé™¤ Secretkubectl delete secret dockertest-secret -n dockertest-namespace\n\næ›´æ–° Secrets# æ–¹æ³•ä¸€ï¼šé‡æ–°æ‡‰ç”¨ YAML æª”æ¡ˆkubectl apply -f secret.yaml# æ–¹æ³•äºŒï¼šä½¿ç”¨ patch æ›´æ–°kubectl patch secret dockertest-secret -n dockertest-namespace \\  --type merge -p &#x27;&#123;&quot;stringData&quot;:&#123;&quot;new-key&quot;:&quot;new-value&quot;&#125;&#125;&#x27;# æ–¹æ³•ä¸‰ï¼šæ›¿æ›æ•´å€‹ Secretkubectl replace -f updated-secret.yaml\n\nå¯¦éš›æ‡‰ç”¨ç¯„ä¾‹ç¯„ä¾‹ä¸€ï¼šè³‡æ–™åº«é€£ç·šé…ç½®apiVersion: v1kind: Secretmetadata:  name: database-secret  namespace: dockertest-namespacetype: OpaquestringData:  DB_HOST: &quot;postgresql.example.com&quot;  DB_PORT: &quot;5432&quot;  DB_NAME: &quot;myapp&quot;  DB_USERNAME: &quot;appuser&quot;  DB_PASSWORD: &quot;super-secret-password&quot;  DB_URL: &quot;postgresql://appuser:super-secret-password@postgresql.example.com:5432/myapp&quot;---apiVersion: apps/v1kind: Deploymentmetadata:  name: database-app  namespace: dockertest-namespacespec:  replicas: 1  selector:    matchLabels:      app: database-app  template:    metadata:      labels:        app: database-app    spec:      containers:      - name: app        image: docker.io/pcion123/tinydocker:0.0.10        envFrom:        - secretRef:            name: database-secret\n\nç¯„ä¾‹äºŒï¼šå¤šæœå‹™èªè­‰é…ç½®apiVersion: v1kind: Secretmetadata:  name: service-credentials  namespace: dockertest-namespacetype: OpaquestringData:  # API æœå‹™èªè­‰  API_KEY: &quot;sk-1234567890abcdef&quot;  API_SECRET: &quot;secret-key-abcdef123456&quot;    # OAuth é…ç½®  OAUTH_CLIENT_ID: &quot;my-client-id&quot;  OAUTH_CLIENT_SECRET: &quot;my-client-secret&quot;    # JWT é‡‘é‘°  JWT_SECRET: &quot;jwt-signing-secret-key&quot;    # å¤–éƒ¨æœå‹™ Token  GITHUB_TOKEN: &quot;ghp_1234567890abcdef&quot;  SLACK_WEBHOOK: &quot;https://hooks.slack.com/services/...&quot;\n\nç¯„ä¾‹ä¸‰ï¼šSSL&#x2F;TLS æ†‘è­‰é…ç½®apiVersion: v1kind: Secretmetadata:  name: app-tls-secret  namespace: dockertest-namespacetype: kubernetes.io/tlsdata:  tls.crt: |    LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0t...  tls.key: |    LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0t...---apiVersion: networking.k8s.io/v1kind: Ingressmetadata:  name: app-ingress  namespace: dockertest-namespacespec:  tls:  - hosts:    - app.example.com    secretName: app-tls-secret  rules:  - host: app.example.com    http:      paths:      - path: /        pathType: Prefix        backend:          service:            name: app-service            port:              number: 80\n\nå®‰å…¨æ€§æœ€ä½³å¯¦å‹™Secret ç®¡ç†\næœ€å°æ¬Šé™åŸå‰‡ï¼šåªæˆäºˆå¿…è¦çš„ Secret å­˜å–æ¬Šé™\nå®šæœŸè¼ªæ›ï¼šå®šæœŸæ›´æ–°å¯†ç¢¼å’Œé‡‘é‘°\nç‰ˆæœ¬æ§åˆ¶ï¼šé¿å…å°‡ Secret å…§å®¹æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»çµ±\nç’°å¢ƒåˆ†é›¢ï¼šç‚ºä¸åŒç’°å¢ƒä½¿ç”¨ç¨ç«‹çš„ Secret\n\nå­˜å–æ§åˆ¶\nRBAC é…ç½®ï¼šä½¿ç”¨ Role-Based Access Control é™åˆ¶å­˜å–\nå‘½åç©ºé–“éš”é›¢ï¼šåˆ©ç”¨å‘½åç©ºé–“éš”é›¢ä¸åŒæ‡‰ç”¨çš„ Secret\nServiceAccount ç®¡ç†ï¼šç‚ºä¸åŒæ‡‰ç”¨ä½¿ç”¨å°ˆç”¨çš„ ServiceAccount\nå¯©è¨ˆæ—¥èªŒï¼šå•Ÿç”¨ Secret å­˜å–çš„å¯©è¨ˆè¨˜éŒ„\n\nåŠ å¯†å’Œå­˜å„²\néœæ…‹åŠ å¯†ï¼šå•Ÿç”¨ etcd ä¸­ Secret çš„åŠ å¯†\nå‚³è¼¸åŠ å¯†ï¼šç¢ºä¿ API é€šä¿¡ä½¿ç”¨ TLS\nè¨˜æ†¶é«”ä¿è­·ï¼šé¿å…å°‡ Secret å¯«å…¥ç£ç¢Ÿäº¤æ›å€\nå‚™ä»½å®‰å…¨ï¼šç¢ºä¿å‚™ä»½ä¸­çš„ Secret ä¹Ÿè¢«åŠ å¯†\n\næ‡‰ç”¨ç¨‹å¼æ•´åˆ\nç’°å¢ƒè®Šæ•¸ vs æª”æ¡ˆï¼šæ ¹æ“šå®‰å…¨è¦æ±‚é¸æ“‡é©ç•¶çš„æ›è¼‰æ–¹å¼\næª”æ¡ˆæ¬Šé™ï¼šè¨­å®šé©ç•¶çš„æª”æ¡ˆæ¬Šé™å’Œæ“æœ‰è€…\nç¨‹åºéš”é›¢ï¼šé¿å…åœ¨æ—¥èªŒæˆ–éŒ¯èª¤è¨Šæ¯ä¸­æ´©éœ² Secret\næ¸…ç†ç­–ç•¥ï¼šæ‡‰ç”¨ç¨‹å¼é€€å‡ºæ™‚æ¸…ç†è¨˜æ†¶é«”ä¸­çš„æ•æ„Ÿè³‡æ–™\n\nç–‘é›£æ’è§£å¸¸è¦‹å•é¡Œ1. Pod ç„¡æ³•å­˜å– Secret# æª¢æŸ¥ Secret æ˜¯å¦å­˜åœ¨kubectl get secret dockertest-secret -n dockertest-namespace# æª¢æŸ¥ Pod çš„æœå‹™å¸³æˆ¶æ¬Šé™kubectl describe pod &lt;pod-name&gt; -n dockertest-namespace# æŸ¥çœ‹ RBAC é…ç½®kubectl auth can-i get secrets --as=system:serviceaccount:dockertest-namespace:default\n\n2. Secret è³‡æ–™è§£ç¢¼å•é¡Œ# æª¢æŸ¥ Secret å…§å®¹kubectl get secret dockertest-secret -n dockertest-namespace -o yaml# æ‰‹å‹•è§£ç¢¼ Base64 è³‡æ–™echo &quot;cm9vdA==&quot; | base64 -d# æª¢æŸ¥ç·¨ç¢¼æ ¼å¼æ˜¯å¦æ­£ç¢ºkubectl get secret dockertest-secret -n dockertest-namespace -o jsonpath=&#x27;&#123;.data.username&#125;&#x27; | base64 -d\n\n3. Image Pull Secret å¤±æ•ˆ# æ¸¬è©¦ Docker Registry é€£ç·šdocker login registry.example.com# é‡æ–°å»ºç«‹ Image Pull Secretkubectl delete secret regcred -n dockertest-namespacekubectl create secret docker-registry regcred \\  --docker-server=registry.example.com \\  --docker-username=newuser \\  --docker-password=newpassword \\  -n dockertest-namespace# æª¢æŸ¥ Pod ä½¿ç”¨çš„ Image Pull Secretkubectl describe pod &lt;pod-name&gt; -n dockertest-namespace\n\n4. Secret æ›´æ–°å¾Œ Pod æœªé‡æ–°è¼‰å…¥# é‡å•Ÿ Deployment ä»¥è¼‰å…¥æ–°çš„ Secretkubectl rollout restart deployment dockertest-deployment -n dockertest-namespace# æª¢æŸ¥é‡å•Ÿç‹€æ…‹kubectl rollout status deployment dockertest-deployment -n dockertest-namespace# é©—è­‰æ–° Secret æ˜¯å¦ç”Ÿæ•ˆkubectl exec -it &lt;pod-name&gt; -n dockertest-namespace -- env | grep DB_PASSWORD\n\né€²éšé…ç½®ä½¿ç”¨å¤–éƒ¨ Secret ç®¡ç†å™¨# ä½¿ç”¨ External Secrets OperatorapiVersion: external-secrets.io/v1beta1kind: SecretStoremetadata:  name: vault-backend  namespace: dockertest-namespacespec:  provider:    vault:      server: &quot;https://vault.example.com&quot;      path: &quot;secret&quot;      version: &quot;v2&quot;      auth:        tokenSecretRef:          name: &quot;vault-token&quot;          key: &quot;token&quot;---apiVersion: external-secrets.io/v1beta1kind: ExternalSecretmetadata:  name: vault-secret  namespace: dockertest-namespacespec:  refreshInterval: 15s  secretStoreRef:    name: vault-backend    kind: SecretStore  target:    name: myapp-secret    creationPolicy: Owner  data:  - secretKey: password    remoteRef:      key: secret/myapp      property: password\n\nè‡ªå‹• Secret è¼ªæ›apiVersion: batch/v1kind: CronJobmetadata:  name: secret-rotation  namespace: dockertest-namespacespec:  schedule: &quot;0 2 * * 0&quot;  # æ¯é€±æ—¥å‡Œæ™¨ 2 é»  jobTemplate:    spec:      template:        spec:          containers:          - name: rotate-secrets            image: secret-rotator:latest            command:            - /bin/sh            - -c            - |              # æ›´æ–° Secret çš„è…³æœ¬é‚è¼¯              kubectl patch secret dockertest-secret \\                --type merge \\                -p &#x27;&#123;&quot;stringData&quot;:&#123;&quot;password&quot;:&quot;&#x27;$(generate-new-password)&#x27;&quot;&#125;&#125;&#x27;          restartPolicy: OnFailure\n\né€éæ­£ç¢ºä½¿ç”¨å’Œç®¡ç† Kubernetes Secretsï¼Œæ‚¨å¯ä»¥å®‰å…¨åœ°è™•ç†æ‡‰ç”¨ç¨‹å¼çš„æ•æ„Ÿè³‡æ–™ï¼Œç¢ºä¿ç¬¦åˆä¼æ¥­å®‰å…¨æ¨™æº–ï¼ŒåŒæ™‚ä¿æŒæ‡‰ç”¨ç¨‹å¼çš„éˆæ´»æ€§å’Œå¯ç¶­è­·æ€§ã€‚\n","categories":["kubernetes"],"tags":["kubernetes"]},{"title":"å®‰è£Maven","url":"/2019/03/16/maven-install/","content":"å®‰è£Mavenå…ˆä¸‹è¼‰mavenï¼š\n$ wget https://www-us.apache.org/dist/maven/maven-3/3.6.0/binaries/apache-maven-3.6.0-bin.tar.gz\nè§£é–‹åŒ…:\n$ tar xzvf apache-maven-3.6.0-bin.tar.gz\nç§»å‹•åˆ°&#x2F;opt&#x2F;åº•ä¸‹ï¼š\n$ mv apache-maven-3.6.0-bin /opt\n\nè¨­ç½®Mavenç’°å¢ƒè®Šæ•¸æ‰“é–‹&#x2F;etc&#x2F;profileé€™å€‹æª”æ¡ˆä¸¦ä¸”åœ¨æœ«å°¾åŠ å…¥ï¼š\nexport MAVEN_HOME=/opt/apache-maven-3.6.0export M2_HOME=/opt/apache-maven-3.6.0export PATH=$PATH:$MAVEN_HOME/binexport PATH=$PATH:$M2_HOME/bin","categories":["maven"],"tags":["linux","maven"]},{"title":"è¨­ç½®Linuxç’°å¢ƒè®Šæ•¸","url":"/2019/03/10/linux-environmentvariables/","content":"æˆ‘å€‘åœ¨é€²è¡Œç’°å¢ƒé–‹ç™¼çš„æ™‚å€™å¸¸å¸¸éœ€è¦ç”¨åˆ°ä¸€äº›ç³»çµ±è·¯å¾‘ï¼Œé‚£é€™äº›è·¯å¾‘æˆ‘å€‘å¯ä»¥ç”¨ç³»çµ±çš„ç’°å¢ƒè®Šæ•¸ä¾†è®“ä»–å¤§å¤§ç¸®æ¸›æ‰“å­—çš„é•·åº¦ï¼Œä»¥ä¸‹å°±ä»‹ç´¹æˆ‘å€‘å¦‚ä½•ä¾†å»ºç«‹é€™äº›ç’°å¢ƒè®Šæ•¸\nlinuxæä¾›å…©ç¨®è¨­ç½®ç’°å¢ƒè®Šæ•¸çš„æ–¹å¼ -&gt; ä½¿ç”¨è€…ç’°å¢ƒè®Šæ•¸ &amp; ç³»çµ±ç’°å¢ƒè®Šæ•¸\n\n\nä½¿ç”¨è€…ç’°å¢ƒè®Šæ•¸ä½¿ç”¨è€…ç’°å¢ƒè®Šæ•¸å„²å­˜åœ¨ä»¥ä¸‹æª”æ¡ˆä¸­ï¼š~&#x2F;.profile~&#x2F;.bashrc~&#x2F;.bash_profile~&#x2F;.bash_login\nç³»çµ±ç’°å¢ƒè®Šæ•¸ç³»çµ±ç’°å¢ƒè®Šæ•¸å„²å­˜åœ¨ä»¥ä¸‹æª”æ¡ˆä¸­ï¼š&#x2F;etc&#x2F;profile&#x2F;etc&#x2F;profile.d&#x2F;etc&#x2F;bash.bashrc\nåŠ å…¥ç³»çµ±ç’°å¢ƒè®Šæ•¸æ‰“é–‹&#x2F;etc&#x2F;profileé€™å€‹æª”æ¡ˆä¸¦ä¸”åœ¨æœ«å°¾åŠ å…¥ï¼š\nexport JAVA_HOME=/usr/lib/jvm/jdk1.7.0export PATH=$PATH:$JAVA_HOME/bin\n\nç’°å¢ƒè®Šæ•¸æ›´æ”¹å¾Œ,å°‡åœ¨ä½¿ç”¨è€…ä¸‹æ¬¡ç™»é™¸æ™‚ç”Ÿæ•ˆå¦‚æœæƒ³ç«‹åˆ»ç”Ÿæ•ˆ,å‰‡åŸ·è¡Œä¸‹é¢çš„èªå¥\n$ source /etc/profile\n\nç”Ÿæ•ˆå¾Œæˆ‘å€‘å¯ä»¥é€²è¡Œæ¸¬è©¦\n$ echo $JAVA_HOME\n\næˆåŠŸå¾Œæ‡‰ç•¶çœ‹åˆ°å‰›å‰›æˆ‘å€‘æˆ‘è¨­ç½®çš„è·¯å¾‘å¦å¤–å¦‚æœæƒ³æŸ¥çœ‹ç•¶å‰ç³»çµ±æ‰€è¨­ç½®çš„è·¯å¾‘æœ‰å“ªäº›å¯ä»¥è¼¸å…¥ï¼š\n$ echo $PATH\nä»–æœƒé¡¯ç¤ºç•¶å‰æ‰€æœ‰çš„ç’°å¢ƒè·¯å¾‘æœ‰å“ªäº›\n","categories":["linux"],"tags":["linux","ç’°å¢ƒè®Šæ•¸"]},{"title":"Ubuntuå®‰è£Minikube (2025)","url":"/2025/09/23/minikube-install-2025/","content":"åœ¨ç¾ä»£å®¹å™¨åŒ–é–‹ç™¼ç’°å¢ƒä¸­ï¼ŒMinikube æ˜¯å­¸ç¿’å’Œæ¸¬è©¦ Kubernetes çš„çµ•ä½³å·¥å…·ã€‚æœ¬æ–‡å°‡è©³ç´°ä»‹ç´¹å¦‚ä½•åœ¨ Ubuntu 24.04.3 LTS ä¸Šå®Œæ•´å»ºç½® Minikube ç’°å¢ƒï¼ŒåŒ…å« Docker å®¹å™¨å¼•æ“ã€kubectl å‘½ä»¤åˆ—å·¥å…·ï¼Œä»¥åŠå®Œæ•´çš„ Tomcat æœå‹™éƒ¨ç½²ç¯„ä¾‹ã€‚\nç„¡è«–æ‚¨æ˜¯ Kubernetes åˆå­¸è€…é‚„æ˜¯éœ€è¦æœ¬åœ°é–‹ç™¼ç’°å¢ƒçš„å·¥ç¨‹å¸«ï¼Œé€™ç¯‡æŒ‡å—éƒ½å°‡å”åŠ©æ‚¨å¿«é€Ÿå»ºç«‹ä¸€å€‹åŠŸèƒ½å®Œæ•´çš„æœ¬åœ° Kubernetes é›†ç¾¤ã€‚\nç’°å¢ƒéœ€æ±‚\nä½œæ¥­ç³»çµ±: Ubuntu 24.04.3 LTS\nè¨˜æ†¶é«”: å»ºè­°è‡³å°‘ 4GB RAM\nç¡¬ç¢Ÿç©ºé–“: å»ºè­°è‡³å°‘ 20GB å¯ç”¨ç©ºé–“\nç¶²è·¯: å¯å­˜å–ç¶²éš›ç¶²è·¯é€²è¡Œå¥—ä»¶ä¸‹è¼‰\n\n\n\nç¬¬ä¸€æ­¥ï¼šç³»çµ±å‰ç½®æº–å‚™åœ¨é–‹å§‹å®‰è£ä¹‹å‰ï¼Œæˆ‘å€‘éœ€è¦æ›´æ–°ç³»çµ±å¥—ä»¶ä¸¦å®‰è£å¿…è¦çš„åŸºç¤å·¥å…·ã€‚é€™äº›å·¥å…·å°‡ç‚ºå¾ŒçºŒçš„ Docker å’Œ Kubernetes çµ„ä»¶å®‰è£æä¾›æ”¯æ´ã€‚\n# æ›´æ–°ç³»çµ±å¥—ä»¶è³‡æ–™åº«ä¸¦å‡ç´šç¾æœ‰å¥—ä»¶sudo apt update &amp;&amp; sudo apt upgrade -y# å®‰è£å¿…è¦çš„åŸºç¤å·¥å…·# curl: ç”¨æ–¼ä¸‹è¼‰æª”æ¡ˆ# wget: å¦ä¸€å€‹ä¸‹è¼‰å·¥å…·# apt-transport-https: æ”¯æ´ HTTPS ä¾†æº# ca-certificates: æ†‘è­‰ç®¡ç†# software-properties-common: è»Ÿé«”ä¾†æºç®¡ç†# conntrack: Kubernetes ç¶²è·¯è¿½è¹¤æ‰€éœ€sudo apt install -y curl wget apt-transport-https ca-certificates software-properties-common conntrack\n\nç¬¬äºŒæ­¥ï¼šå®‰è£ Docker å®¹å™¨å¼•æ“Docker æ˜¯ Minikube çš„å®¹å™¨é‹è¡Œæ™‚ç’°å¢ƒã€‚Minikube æ”¯æ´å¤šç¨®å®¹å™¨å¼•æ“ï¼Œä½† Docker æ˜¯æœ€å¸¸ç”¨ä¸”ç©©å®šçš„é¸æ“‡ã€‚\n# å®‰è£ Docker ç¤¾ç¾¤ç‰ˆæœ¬sudo apt install -y docker.io# å•Ÿå‹• Docker æœå‹™ä¸¦è¨­å®šç‚ºé–‹æ©Ÿè‡ªå‹•å•Ÿå‹•sudo systemctl enable --now docker# å°‡ç›®å‰ä½¿ç”¨è€…åŠ å…¥ docker ç¾¤çµ„ï¼Œé¿å…æ¯æ¬¡éƒ½éœ€è¦ sudosudo usermod -aG docker $USER\n\né€™ä¸€æ­¥å®Œæˆå¾Œéœ€è¦ é‡æ–°ç™»å…¥ç³»çµ± æˆ–åŸ·è¡Œ newgrp docker è®“ç¾¤çµ„è®Šæ›´ç”Ÿæ•ˆã€‚\n\né‡è¦æé†’: å°‡ä½¿ç”¨è€…åŠ å…¥ docker ç¾¤çµ„å¯ä»¥é¿å…æ¯æ¬¡åŸ·è¡Œ Docker æŒ‡ä»¤æ™‚éƒ½éœ€è¦ sudo æ¬Šé™ï¼Œä½†è«‹æ³¨æ„é€™æœƒçµ¦äºˆè©²ä½¿ç”¨è€…ç­‰åŒ root çš„æ¬Šé™ä¾†æ“ä½œ Dockerã€‚\n\n# é©—è­‰ Docker å®‰è£æ˜¯å¦æˆåŠŸdocker version\n\nç¬¬ä¸‰æ­¥ï¼šå®‰è£ kubectl å‘½ä»¤åˆ—å·¥å…·kubectl æ˜¯ Kubernetes çš„å®˜æ–¹å‘½ä»¤åˆ—å·¥å…·ï¼Œç”¨æ–¼èˆ‡ Kubernetes é›†ç¾¤é€²è¡Œäº’å‹•ã€‚å®ƒå¯ä»¥è®“æˆ‘å€‘ç®¡ç† Podã€Serviceã€Deployment ç­‰å„ç¨® Kubernetes è³‡æºã€‚\n# å–å¾—æœ€æ–°ç©©å®šç‰ˆæœ¬çš„ç‰ˆæœ¬è™Ÿ$KUBECTL_VER=$(curl -L -s https://dl.k8s.io/release/stable.txt)# ä¸‹è¼‰å°æ‡‰ç‰ˆæœ¬çš„ kubectl åŸ·è¡Œæª”curl -LO &quot;https://dl.k8s.io/release/$KUBECTL_VER/bin/linux/amd64/kubectl&quot;# è³¦äºˆåŸ·è¡Œæ¬Šé™chmod +x kubectl# ç§»å‹•åˆ°ç³»çµ±åŸ·è¡Œè·¯å¾‘sudo mv kubectl /usr/local/bin/# é©—è­‰ kubectl å®‰è£æ˜¯å¦æˆåŠŸkubectl version --client\n\nç¬¬å››æ­¥ï¼šå®‰è£ä¸¦è¨­å®š MinikubeMinikube æ˜¯ä¸€å€‹è¼•é‡ç´šçš„ Kubernetes å¯¦ä½œï¼Œè¨­è¨ˆç”¨æ–¼åœ¨æœ¬åœ°ç’°å¢ƒé‹è¡Œå–®ç¯€é»çš„ Kubernetes é›†ç¾¤ã€‚å®ƒéå¸¸é©åˆé–‹ç™¼ã€æ¸¬è©¦å’Œå­¸ç¿’ Kubernetesã€‚\nåŸºç¤å®‰è£# ä¸‹è¼‰æœ€æ–°ç‰ˆæœ¬çš„ Minikubecurl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64# å®‰è£åˆ°ç³»çµ±åŸ·è¡Œè·¯å¾‘sudo install minikube-linux-amd64 /usr/local/bin/minikube# é©—è­‰ Minikube å®‰è£æ˜¯å¦æˆåŠŸminikube version\n\nä»¥ä¸‹æ˜¯ Minikube çš„å¸¸ç”¨æ“ä½œæŒ‡ä»¤ï¼Œå»ºè­°å…ˆç†Ÿæ‚‰é€™äº›åŸºæœ¬æŒ‡ä»¤ï¼š\n# æŸ¥çœ‹ Minikube ç‰ˆæœ¬è³‡è¨Šminikube version# æŸ¥çœ‹ç›®å‰é›†ç¾¤ç‹€æ…‹minikube status# å•Ÿå‹• Kubernetes é›†ç¾¤minikube start# åœæ­¢é›†ç¾¤ï¼ˆä¿ç•™è³‡æ–™ï¼‰minikube stop\n\nå•Ÿå‹• Minikube é›†ç¾¤åœ¨å®Œæˆå®‰è£å¾Œï¼Œæˆ‘å€‘å¯ä»¥é–‹å§‹å•Ÿå‹•ä¸¦æ¸¬è©¦ Minikube é›†ç¾¤ï¼š\n\nå•Ÿå‹•minikube\n\n# ä½¿ç”¨ Docker ä½œç‚ºå®¹å™¨å¼•æ“å•Ÿå‹•é›†ç¾¤minikube start --driver=docker# å•Ÿå‹•é›†ç¾¤ä¸¦æŒ‡å®šç‰¹å®šçš„ Kubernetes ç‰ˆæœ¬minikube start --driver=docker --kubernetes-version=v1.29.0\n\n\nå»ºç«‹å¤–éƒ¨å­˜å–ä»£ç†\n\n# å»ºç«‹ä»£ç†é€£ç·šï¼Œå…è¨±å¤–éƒ¨å­˜å– Kubernetes APIkubectl proxy --address=&#x27;0.0.0.0&#x27; --disable-filter=true\n\n\næ³¨æ„: æ­¤æŒ‡ä»¤æœƒåœ¨èƒŒæ™¯æŒçºŒé‹è¡Œï¼Œå»ºè­°åœ¨æ–°çš„çµ‚ç«¯è¦–çª—ä¸­åŸ·è¡Œ\n\n\n\n\nå­˜å– Kubernetes Dashboard\n\n# å•Ÿå‹• Web ä»‹é¢å„€è¡¨æ¿ä¸¦å–å¾—å­˜å–ç¶²å€minikube dashboard --url\n\næ­¤æŒ‡ä»¤æœƒè¼¸å‡ºä¸€å€‹ç¶²å€ï¼Œæ‚¨å¯ä»¥åœ¨ç€è¦½å™¨ä¸­é–‹å•Ÿæ­¤ç¶²å€ä¾†å­˜å– Kubernetes çš„è¦–è¦ºåŒ–ç®¡ç†ä»‹é¢ã€‚\n\n\næŸ¥çœ‹dashboardå¯¦éš›é‹è¡Œçµæœ\n\n\nå¯¦æˆ°ç¯„ä¾‹ï¼šéƒ¨ç½² Tomcat æ‡‰ç”¨ç¨‹å¼ç‚ºäº†é©—è­‰ Minikube ç’°å¢ƒé‹ä½œæ­£å¸¸ï¼Œæˆ‘å€‘å°‡éƒ¨ç½²ä¸€å€‹å®Œæ•´çš„ Tomcat Web æ‡‰ç”¨ç¨‹å¼ä½œç‚ºç¤ºç¯„ã€‚\næ­¥é©Ÿä¸€ï¼šå•Ÿç”¨ Ingress æ§åˆ¶å™¨# å•Ÿç”¨ Ingress æ§åˆ¶å™¨é™„åŠ å…ƒä»¶minikube addons enable ingress# ç­‰å¾… Ingress æ§åˆ¶å™¨ Pod æº–å‚™å®Œæˆkubectl -n ingress-nginx get pods -l app.kubernetes.io/component=controller -w\n\n\næç¤º: ä½¿ç”¨ -w åƒæ•¸å¯ä»¥æŒçºŒç›£çœ‹ Pod ç‹€æ…‹è®ŠåŒ–ï¼Œçœ‹åˆ° Running ç‹€æ…‹æ™‚æŒ‰ Ctrl+C é€€å‡º\n\næ­¥é©ŸäºŒï¼šæº–å‚™ Kubernetes YAML é…ç½®æª”ä»¥ä¸‹æ˜¯ä¸€å€‹å®Œæ•´çš„ Tomcat éƒ¨ç½²é…ç½®ï¼ŒåŒ…å« Deploymentã€Service å’Œ Ingress ä¸‰å€‹è³‡æºï¼š\napiVersion: apps/v1kind: Deploymentmetadata:  name: tomcat-deploymentspec:  replicas: 1  selector:    matchLabels:      app: tomcat  template:    metadata:      labels:        app: tomcat    spec:      containers:      - name: tomcat        image: tomcat:10.1-jdk17        ports:        - containerPort: 8080        command: [&quot;/bin/sh&quot;,&quot;-c&quot;]        args:          - cp -r /usr/local/tomcat/webapps.dist/ROOT /usr/local/tomcat/webapps/ &amp;&amp; exec catalina.sh run        readinessProbe:          httpGet:            path: /            port: 8080          initialDelaySeconds: 10          periodSeconds: 5---apiVersion: v1kind: Servicemetadata:  name: tomcat-servicespec:  type: ClusterIP  selector:    app: tomcat  ports:    - name: http      port: 8080      targetPort: 8080---apiVersion: networking.k8s.io/v1kind: Ingressmetadata:  name: tomcat-ingressspec:  ingressClassName: nginx  rules:  - http:      paths:      - path: /        pathType: Prefix        backend:          service:            name: tomcat-service            port:              number: 8080\n\næ­¥é©Ÿä¸‰ï¼šéƒ¨ç½²æœå‹™åˆ°é›†ç¾¤# éƒ¨ç½² YAML é…ç½®åˆ°é›†ç¾¤kubectl apply -f tomcat.yaml# æŸ¥çœ‹ Pod é‹è¡Œç‹€æ…‹kubectl get pods# æŸ¥çœ‹æ‰€æœ‰ç›¸é—œè³‡æºç‹€æ…‹kubectl get deployment,service,ingress\n\né©—è­‰æœå‹™æ˜¯å¦æ­£å¸¸é‹è¡Œï¼š\n# å–å¾— Minikube é›†ç¾¤ IP ä½å€$MINIKUBE_IP=$(minikube ip)# æŸ¥çœ‹ Minikube IPecho &quot;Minikube IP: $MINIKUBE_IP&quot;\n\nç¾åœ¨å¯ä»¥åœ¨ç€è¦½å™¨ä¸­é–‹å•Ÿ http://$MINIKUBE_IP ä¾†æŸ¥çœ‹ Tomcat æ­¡è¿é é¢ã€‚\n\n\nVirtualBox ç’°å¢ƒç‰¹æ®Šè¨­å®šå¦‚æœæ‚¨æ˜¯åœ¨ VirtualBox è™›æ“¬æ©Ÿä¸­é‹è¡Œ Ubuntu Serverï¼Œéœ€è¦é€²è¡Œé¡å¤–çš„ç¶²è·¯è¨­å®šä»¥ä¾¿å¾ä¸»æ©Ÿå­˜å–æœå‹™ã€‚\nSSH éš§é“è¨­å®šç”±æ–¼ VirtualBox NAT ç¶²è·¯çš„é™åˆ¶ï¼Œæˆ‘å€‘éœ€è¦å»ºç«‹ SSH éš§é“ä¾†æ©‹æ¥ä¸»æ©Ÿèˆ‡è™›æ“¬æ©Ÿå…§çš„æœå‹™ï¼š\n# å»ºç«‹ SSH éš§é“ï¼Œå°‡ä¸»æ©Ÿçš„ 18080 åŸ è½‰ç™¼åˆ° Minikube çš„ 80 åŸ # å‡è¨­æ‚¨çš„ SSH æœå‹™é‹è¡Œåœ¨è™›æ“¬æ©Ÿçš„ 2222 åŸ ä¸Šssh -N -L 18080:$MINIKUBE_IP:80 -p 2222 $USER@127.0.0.1\n\nåƒæ•¸èªªæ˜ï¼š\n\n-N: ä¸åŸ·è¡Œé ç«¯æŒ‡ä»¤ï¼Œåƒ…ç”¨æ–¼å»ºç«‹éš§é“\n-L 18080:$MINIKUBE_IP:80: å°‡æœ¬æ©Ÿ 18080 åŸ è½‰ç™¼åˆ°ç›®æ¨™çš„ 80 åŸ \n-p 2222: SSH æœå‹™åŸ è™Ÿ\n$USER@127.0.0.1: ä½¿ç”¨è€…åç¨±å’Œè™›æ“¬æ©Ÿä½å€\n\nè¨­å®šå®Œæˆå¾Œï¼Œæ‚¨å°±å¯ä»¥åœ¨ Windows ä¸»æ©Ÿçš„ç€è¦½å™¨ä¸­è¼¸å…¥ http://localhost:18080 ä¾†å­˜å– Tomcat æœå‹™ã€‚\nVirtualBox NAT è¨­å®šç¢ºä¿æ‚¨çš„ VirtualBox è™›æ“¬æ©Ÿç¶²è·¯è¨­å®šå¦‚ä¸‹ï¼š\n\nç¶²è·¯ä»‹é¢å¡è¨­å®šç‚º NAT æ¨¡å¼\né€²éšè¨­å®šä¸­é–‹å•ŸåŸ è½‰ç™¼è¦å‰‡ï¼š\n\n\n\nç¶²è·¯æ¶æ§‹åœ–ä¸‹åœ–å±•ç¤ºäº†å®Œæ•´çš„ Minikube + Tomcat + Ingress ç¶²è·¯æ¶æ§‹ï¼š\n\n\nç¸½çµæœ¬æ–‡è©³ç´°ä»‹ç´¹äº†åœ¨ Ubuntu 24.04.3 ä¸Šå»ºç½® Minikube é–‹ç™¼ç’°å¢ƒçš„å®Œæ•´æµç¨‹ï¼ŒåŒ…å«ï¼š\nä¸»è¦å®Œæˆé …ç›®\nç³»çµ±ç’°å¢ƒæº–å‚™ - å®‰è£å¿…è¦çš„åŸºç¤å¥—ä»¶å’Œå·¥å…·\nDocker å®¹å™¨å¼•æ“ - ä½œç‚º Minikube çš„å®¹å™¨é‹è¡Œæ™‚\nkubectl å·¥å…· - Kubernetes çš„å‘½ä»¤åˆ—ç®¡ç†ä»‹é¢\nMinikube æœ¬æ©Ÿé›†ç¾¤ - å–®ç¯€é» Kubernetes ç’°å¢ƒ\nå®Œæ•´æ‡‰ç”¨éƒ¨ç½² - Tomcat Web æœå‹™çš„å¯¦éš›ç¯„ä¾‹\nIngress æ§åˆ¶å™¨ - è™•ç†å¤–éƒ¨æµé‡çš„å…¥å£ç®¡ç†\nVirtualBox æ•´åˆ - è™›æ“¬æ©Ÿç’°å¢ƒä¸‹çš„ç¶²è·¯è¨­å®š\n\nä¸‹ä¸€æ­¥å»ºè­°å®Œæˆæœ¬æ•™å­¸å¾Œï¼Œæ‚¨å¯ä»¥ï¼š\n\nå˜—è©¦éƒ¨ç½²å…¶ä»–é¡å‹çš„æ‡‰ç”¨ç¨‹å¼ï¼ˆå¦‚ MySQLã€Redis ç­‰ï¼‰\nå­¸ç¿’ Kubernetes çš„é€²éšæ¦‚å¿µï¼ˆConfigMapã€Secretã€PersistentVolumeï¼‰\næ¢ç´¢ Minikube çš„å…¶ä»–é™„åŠ å…ƒä»¶ï¼ˆMetrics Serverã€Dashboard ç­‰ï¼‰\nå¯¦é©—ä¸åŒçš„éƒ¨ç½²ç­–ç•¥ï¼ˆRolling Updateã€Blue-Green Deploymentï¼‰\n\nå¸¸è¦‹å•é¡Œæ’é™¤\nå¦‚æœé‡åˆ°è³‡æºä¸è¶³çš„å•é¡Œï¼Œå¯ä»¥èª¿æ•´ Minikube çš„è¨˜æ†¶é«”å’Œ CPU é…ç½®\nè‹¥æœå‹™ç„¡æ³•å­˜å–ï¼Œè«‹æª¢æŸ¥é˜²ç«ç‰†è¨­å®šå’Œç¶²è·¯é…ç½®\nDocker æ¬Šé™å•é¡Œè«‹ç¢ºèªä½¿ç”¨è€…æ˜¯å¦å·²åŠ å…¥ docker ç¾¤çµ„\n\né€éé€™å€‹ç’°å¢ƒï¼Œæ‚¨å·²ç¶“å…·å‚™äº†æœ¬åœ° Kubernetes é–‹ç™¼çš„åŸºç¤è¨­æ–½ï¼Œå¯ä»¥é–‹å§‹æ¢ç´¢å®¹å™¨ç·¨æ’å’Œå¾®æœå‹™æ¶æ§‹çš„ç²¾å½©ä¸–ç•Œã€‚\n","categories":["kubernetes"],"tags":["linux","ubuntu","docker","kubernetes","minikube"]},{"title":"Ubuntuå®‰è£Minikube","url":"/2021/08/21/minikube-install/","content":"ç¹¼ä¸Šæ¬¡çš„dockerå®‰è£ä»Šå¤©è¦ç¹¼çºŒéƒ¨å±¬kubernetesçš„å…§å®¹\nç°¡ä»‹minikubeæ˜¯ç”±googleé–‹ç™¼çš„ç²¾ç°¡ç‰ˆkuberneteså·¥å…·å¯ä»¥ç°¡å–®çš„æ¨¡æ“¬k8såº•ä¸‹çš„ç’°å¢ƒé‹ä½œ\n\n\nå®‰è£å®¹å™¨kuberneteseæä¾›å¤šæ¨£çš„å®¹å™¨éƒ¨å±¬ç’°å¢ƒé€™é‚Šæˆ‘å€‘é¸ç”¨dockerç•¶ä½œå®¹å™¨çš„åº•å±¤\nè«‹åƒè€ƒä¹‹å‰çš„æ–‡ç« \n\nå®‰è£kubectlkubectlæ˜¯ä¸€å¥—ç®¡ç†kubernetesçš„å‘½ä»¤å·¥å…·\nå®‰è£# æ›´æ–°å¥—ä»¶ç®¡ç†$ sudo apt update# å®‰è£å¥—ä»¶å€‰åº«$ sudo apt install -y apt-transport-https ca-certificates curl# ä¸‹è¼‰å€‰åº«æ†‘è­‰$ sudo curl -fsSLo /usr/share/keyrings/kubernetes-archive-keyring.gpg https://packages.cloud.google.com/apt/doc/apt-key.gpg# åŠ å…¥æ†‘è­‰ä¿¡ä»»åˆ—è¡¨$ echo &quot;deb [signed-by=/usr/share/keyrings/kubernetes-archive-keyring.gpg] https://apt.kubernetes.io/ kubernetes-xenial main&quot; | sudo tee /etc/apt/sources.list.d/kubernetes.listdeb [signed-by=/usr/share/keyrings/kubernetes-archive-keyring.gpg] https://apt.kubernetes.io/ kubernetes-xenial main# æ›´æ–°å¥—ä»¶ç®¡ç†$ sudo apt update# å®‰è£kubectl$ sudo apt install kubectl -y\n\næŸ¥çœ‹ç‰ˆæœ¬$ kubectl version --short --clientClient Version: v1.22.1\n\nå®‰è£minikubeç¾åœ¨é–‹å§‹å®‰è£ä¸»è§’\nå®‰è£# ä¸‹è¼‰å®‰è£åŒ…$ curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube_latest_amd64.deb# å®‰è£å¥—ä»¶$ sudo dpkg -i minikube_latest_amd64.debSelecting previously unselected package minikube.(Reading database ... 71806 files and directories currently installed.)Preparing to unpack minikube_latest_amd64.deb ...Unpacking minikube (1.22.0-0) ...Setting up minikube (1.22.0-0) ...\n\næŸ¥çœ‹ç‰ˆæœ¬$ minikube versionminikube version: v1.22.0commit: a03fbcf166e6f74ef224d4a63be4277d017bb62e\n\nå•Ÿå‹•$ minikube startğŸ˜„  minikube v1.22.0 on Ubuntu 20.04 (vbox/amd64)âœ¨  Automatically selected the docker driver. Other choices: ssh, noneğŸ‘  Starting control plane node minikube in cluster minikubeğŸšœ  Pulling base image ...ğŸ’¾  Downloading Kubernetes v1.21.2 preload ...    &gt; preloaded-images-k8s-v11-v1...: 502.14 MiB / 502.14 MiB  100.00% 7.08 MiB    &gt; gcr.io/k8s-minikube/kicbase...: 361.08 MiB / 361.09 MiB  100.00% 3.95 MiBğŸ”¥  Creating docker container (CPUs=2, Memory=2200MB) ...ğŸ³  Preparing Kubernetes v1.21.2 on Docker 20.10.7 ...    â–ª Generating certificates and keys ...    â–ª Booting up control plane ...    â–ª Configuring RBAC rules ...ğŸ”  Verifying Kubernetes components...    â–ª Using image gcr.io/k8s-minikube/storage-provisioner:v5ğŸŒŸ  Enabled addons: storage-provisioner, default-storageclassğŸ„  Done! kubectl is now configured to use &quot;minikube&quot; cluster and &quot;default&quot; namespace by default\n\nå•Ÿå‹•dashboardæ­£å¸¸çš„kubernetesçš„dashboardéœ€è¦å¦å¤–å®‰è£çš„ä½†æ˜¯minikubeå·²ç¶“è‡ªå¸¶dashboardå¥—ä»¶åªéœ€å•Ÿå‹•å°±è¡Œäº†\n$ minikube dashboardğŸ”Œ  Enabling dashboard ...    â–ª Using image kubernetesui/dashboard:v2.1.0    â–ª Using image kubernetesui/metrics-scraper:v1.0.4ğŸ¤”  Verifying dashboard health ...ğŸš€  Launching proxy ...ğŸ¤”  Verifying proxy health ...ğŸ‰  Opening http://127.0.0.1:33657/api/v1/namespaces/kubernetes-dashboard/services/http:kubernetes-dashboard:/proxy/ in your default browser...ğŸ‘‰  http://127.0.0.1:33657/api/v1/namespaces/kubernetes-dashboard/services/http:kubernetes-dashboard:/proxy/\n\né–‹å•Ÿproxyä¸€èˆ¬ä¾†èªªå•Ÿå‹•dashboardå°±æœƒè‡ªå‹•å¹«ä½ é–‹å•Ÿç€è¦½å™¨åˆ°dashboardçš„é é¢ä¸­äº†ä½†æ˜¯ç­†è€…çš„ç’°å¢ƒæ˜¯è£åœ¨virtualboxçš„ubuntu-serveråº•ä¸‹æ‰€ä»¥å°±éœ€è¦å¦å¤–æä¾›å¤–é€£çš„æ–¹å¼äº†\n$ kubectl proxy --address=&#x27;0.0.0.0&#x27; --port=8001 --accept-hosts=&#x27;^*$&#x27;Starting to serve on [::]:8001\n\né€™æ¨£å°±å¤§åŠŸå‘Šæˆå•¦!\n\n\nè£œå……å®‰è£éç¨‹è¨­å®šå¦‚æœå‡ºäº†ä»€éº¼å•é¡Œæƒ³è¦é‡ç½®æˆ‘å€‘å¯åˆªæ‰æ•´å€‹minikubeè¨­ç½®é‡ä¾†\n# åˆªé™¤minikubeç’°å¢ƒ$ minikube delete &amp;&amp; rm -rf ~/.minikube# é‡å•Ÿminikube$ minikube start","categories":["kubernetes"],"tags":["linux","ubuntu","docker","kubernetes","minikube"]},{"title":"Ubuntuå®‰è£Nexus","url":"/2021/09/25/nexus-install/","content":"å®‰è£JDKè«‹åƒè€ƒä¹‹å‰çš„æ–‡ç« \n\nä¸‹è¼‰nexuså®˜æ–¹ä¸‹è¼‰æˆ–è€…nexus-3.33.1-01-unix\n\n\nå»ºç«‹nexusä½¿ç”¨è€…å»ºç«‹nexuså°ˆç”¨çš„ç³»çµ±å¸³è™Ÿ\n$ useradd -M -d /opt/nexus -s /bin/bash -r nexus\nå…è¨±nexusç”¨æˆ¶å¯ä»¥ä½¿ç”¨ç„¡å¯†ç¢¼çš„sudoé‹è¡Œå‘½ä»¤\n$ echo &quot;nexus   ALL=(ALL)       NOPASSWD: ALL&quot; &gt; /etc/sudoers.d/nexus\n\nå®‰è£nexuså…ˆå»ºç«‹nexusç›®éŒ„\n$ mkdir /opt/nexus\nè§£é–‹nexusåˆ°å‰›å‰›å»ºç«‹å¥½çš„ç›®éŒ„åº•ä¸‹\n$ tar -zxvf nexus-3.33.1-01-unix.tar.gz -C /opt/nexus --strip-components=1\nä¿®æ”¹æ¬Šé™\n$ chown -R nexus: /opt/nexus\n\nä¿®æ”¹é…ç½®èª¿æ•´nexuså…§å­˜å¤§å°èª¿æ•´è‡ªèº«æ©Ÿå™¨åˆé©çš„å¤§å°,é€™é‚Šæ¸¬è©¦èª¿æ•´æˆ2G\né–‹å•Ÿ&#x2F;opt&#x2F;nexus&#x2F;bin&#x2F;nexus.vmoptions\n-Xms2048m-Xmx2048m-XX:MaxDirectMemorySize=2048m...\n\nèª¿æ•´nexusç›¸å°è·¯å¾‘å› ç‚ºå‰›å‰›è§£é–‹nexusçš„æ™‚å€™æŠŠsonatype-workç›®éŒ„çš„ä½ç½®ç§»ä¸Šäº†ä¸€å±¤æ‰€ä»¥é€™é‚Šç›¸å°è·¯å¾‘å°±éœ€è¦èª¿æ•´ä¸€ä¸‹\né–‹å•Ÿ&#x2F;opt&#x2F;nexus&#x2F;bin&#x2F;nexus.vmoptions\n...-XX:LogFile=./sonatype-work/nexus3/log/jvm.log...-Dkaraf.data=./sonatype-work/nexus3-Dkaraf.log=./sonatype-work/nexus3/log-Djava.io.tmpdir=./sonatype-work/nexus3/tmp\n\nä¿®æ”¹nexusé‹è¡Œå¸³è™Ÿä¿®æ”¹nexusé‹è¡Œæ™‚ä½¿ç”¨å¸³è™Ÿè«‹ä¿®æ”¹æˆå‰›å‰›å°ˆé–€å»ºç«‹çš„å¸³è™Ÿ\né–‹å•Ÿ&#x2F;opt&#x2F;nexus&#x2F;bin&#x2F;nexus.rc\nrun_as_user=&quot;nexus&quot;\n\nä¿®æ”¹nexuså°å¤–porté è¨­portæ˜¯8081å¦‚æœä¸éœ€è¦èª¿æ•´è«‹è·³éé€™ä¸€æ­¥å› ç‚ºæ¸¬è©¦ç’°å¢ƒçš„é—œä¿‚é€™é‚Šæ”¹æˆ9090\né–‹å•Ÿ&#x2F;opt&#x2F;nexus&#x2F;etc&#x2F;nexus-default.properties\n## DO NOT EDIT - CUSTOMIZATIONS BELONG IN $data-dir/etc/nexus.properties### Jetty sectionapplication-port=9090application-host=0.0.0.0\n\nå•Ÿå‹•nexuså•Ÿå‹•æœå‹™å•Ÿå‹•\n$ sudo -u nexus /opt/nexus/bin/nexus start\nç›£çœ‹logç›£çœ‹log\n$ tail -f /opt/nexus/sonatype-work/nexus3/log/nexus.log\n\nç¬¬ä¸€æ¬¡ç™»å…¥æœƒçœ‹åˆ°ä»¥ä¸‹ç•«é¢,é è¨­å¸³è™Ÿç‚ºadmin\n\n\nç²å–å¯†ç¢¼ç²å–ç¬¬ä¸€æ¬¡ç™»å…¥å¯†ç¢¼\n$ cat /opt/nexus/sonatype-work/nexus3/admin.password\n\nåˆå§‹è¨­å®š1.ä¿®æ”¹ç®¡ç†è€…å¯†ç¢¼2.æ ¹æ“šéœ€æ±‚èª¿æ•´,é€™é‚Šæˆ‘é¸æ“‡é—œé–‰åŒ¿åç”¨æˆ¶ç™»å…¥3.é—œé–‰å•é¡Œå›é¥‹\n\nç™»å…¥å¾Œåšå®Œç¬¬ä¸€æ¬¡è¨­å®šå¾Œæœå‹™å°±æ­£å¼è£å¥½å•¦!\n\n\nç³»çµ±æœå‹™å»ºç«‹è…³æœ¬å»ºç«‹&#x2F;etc&#x2F;systemd&#x2F;system&#x2F;nexus.service\n[Unit]Description=nexus serviceAfter=network.target[Service]Type=forkingLimitNOFILE=65536ExecStart=/opt/nexus/bin/nexus startExecStop=/opt/nexus/bin/nexus stopUser=nexusRestart=on-abort[Install]WantedBy=multi-user.target\n\né‡è¼‰systemd$ systemctl daemon-reload\n\nå•Ÿç”¨æœå‹™$ systemctl enable --now nexus.service\n\næŸ¥çœ‹æœå‹™ç‹€æ…‹$ systemctl status nexus.service\n\næœå‹™æ­£å¸¸é‹è¡Œ,é€™æ¨£æˆ‘å€‘ä»¥å¾Œå°±å¯ä»¥é€ésystemctlç®¡ç†æœå‹™äº†\nroot@pcionserver:/etc/systemd/system# root@pcionserver:/etc/systemd/system# systemctl status nexus.serviceâ— nexus.service - nexus service     Loaded: loaded (/etc/systemd/system/nexus.service; enabled; vendor preset: enabled)     Active: active (running) since Sat 2021-09-25 07:51:16 UTC; 6min ago    Process: 8292 ExecStart=/opt/nexus/bin/nexus start (code=exited, status=0/SUCCESS)   Main PID: 8486 (java)      Tasks: 80 (limit: 4616)     Memory: 1.3G     CGroup: /system.slice/nexus.service             â””â”€8486 /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java -server -Dinstall4j.jvmDir=/usr/lib/jvm/java-8-openjdk-amd64/jre -Dexe4j.moduleName=/opt/nexus/bin/nexus -XX:+UnlockDiag&gt;Sep 25 07:51:16 pcionserver systemd[1]: Starting nexus service...Sep 25 07:51:16 pcionserver nexus[8292]: Starting nexusSep 25 07:51:16 pcionserver systemd[1]: Started nexus service.","categories":["maven"],"tags":["linux","maven","nexus"]},{"title":"å®‰è£Nginx","url":"/2020/11/14/nginx-install/","content":"å®‰è£Nginx$ apt install nginx\n\nconfigè·¯å¾‘# æŸ¥è©¢configè·¯å¾‘$ nginx -t# ubuntué è¨­æœƒåœ¨/etc/nginxåº•ä¸‹\n\nåŸºæœ¬æŒ‡ä»¤# å•Ÿå‹•nginx$ systemctl start nginx# åœæ­¢ngnix$ systemctl stop nginx# é‡è¼‰ngnix$ systemctl reload nginx\n\n\n\né é¢æ¸¬è©¦ http://127.0.0.1\n\nä»¥ä¸‹å…§å®¹åå‘å¿ƒå¾—ç­†è¨˜\nè¨­å®šproxyserver &#123;\t# ç›£è½ 80 port    listen 80;    listen [::]:80;    # è¨­ç½®é€²ä¾†çš„domainnameæˆ–ip    server_name localhost;    # è¨­ç½®routing    location / &#123;    \t# è½‰ç™¼        proxy_pass http://localhost:9001;        # è½‰ç™¼requestçš„headerå…§å®¹        proxy_set_header X-Real-IP $remote_addr;        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;        proxy_set_header X-Forwarded-Proto $http_x_forwarded_proto;    &#125;&#125;\n\nè¨­å®šloadbalance# è¨­ç½®è¼ªå·¡ç¯€é»upstream servicemapping &#123;    server 127.0.0.1:9001 weight=3;    server 127.0.0.1:9002 weight=2;&#125;server &#123;\t# ç›£è½ 80 port    listen 80;    listen [::]:80;    # è¨­ç½®é€²ä¾†çš„domainnameæˆ–ip    server_name my.app.test;\t# è¨­ç½®routing    location / &#123;    \t# è½‰ç™¼        proxy_pass http://servicemapping;        # è½‰ç™¼requestçš„headerå…§å®¹        proxy_set_header X-Real-IP $remote_addr;        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;        proxy_set_header X-Forwarded-Proto $http_x_forwarded_proto;    &#125;&#125;\n\nå…©æ¬¡è«‹æ±‚çµæœ\n","categories":["nginx"],"tags":["linux","nginx"]},{"title":"Ubuntuå®‰è£PM2","url":"/2019/03/24/pm2-install/","content":"PM2æ˜¯ä¸€å¥—Nodeæ‡‰ç”¨çš„é€²ç¨‹ç®¡ç†å™¨ï¼Œç•¶ç¨‹å¼å‡ºç¾éŒ¯èª¤æˆ–è€…å…¶ä»–ç‹€æ³æ­»æ‰ä¹‹å¾Œï¼Œé€™æ™‚å€™PM2å°±å¯ä»¥å¹«ä½ çš„æ‡‰ç”¨è‡ªå‹•é‡å•Ÿï¼Œç•¶ç„¶å®ƒä¸æ­¢é€™äº›åŠŸèƒ½ï¼Œè©³ç´°å¯ä»¥çœ‹çœ‹å®˜ç¶²ä»‹ç´¹ï¼šPM2\n\n\næ¥ä¸‹ä¾†æˆ‘å€‘è¦ä¾†ä»‹ç´¹å¦‚ä½•åœ¨ububtuä¸Šå®‰è£å®ƒ\nå…ˆæ›´æ–°å¥—ä»¶ï¼š\n$ sudo apt update$ sudo apt upgrade\n\nå®‰è£NodeJSå·²ç¶“å®‰è£éçš„æœ‹å‹å¯ä»¥è·³éé€™ä¸€æ­¥\nå®‰è£…NodeJSï¼š\n$ sudo apt install nodejs\nç„¶å¾Œæˆ‘å€‘è¦å®‰è£nä¾†å¹«æˆ‘å€‘ç®¡ç†nodejsç‰ˆæœ¬ï¼š\n$ npm install -g n\n\nå®‰è£NPMå·²ç¶“å®‰è£éçš„æœ‹å‹å¯ä»¥è·³éé€™ä¸€æ­¥\nå®‰è£…NPMï¼š\n$ sudo apt install npm\nç„¶å¾Œæˆ‘å€‘è¦å®‰è£nä¾†å¹«æˆ‘å€‘ç®¡ç†nodejsç‰ˆæœ¬ï¼š\n$ npm install -g n\n\nå®‰è£PM2æ¥ä¸‹ä¾†è¦é–‹å§‹æ­£å¼å®‰è£PM2ï¼š\n$ npm install pm2 -g\nå®ŒæˆPM2å®‰è£æ­¥é©Ÿï¼š\n$ pm2 completion install\næŸ¥çœ‹ç›£æ§é …ç›®åˆ—è¡¨ï¼š\n$ pm2 ls\n\næŸ¥çœ‹ç›£æ§è©³ç´°å…§å®¹ï¼š\n$ pm2 monit\n","categories":["pm2"],"tags":["linux","ubuntu","pm2"]},{"title":"PM2ç›£æ§ç¨‹åº","url":"/2019/03/24/pm2-watch/","content":"æ¥ä¸‹ä¾†æˆ‘å€‘è¦ä»‹ç´¹å¦‚ä½•ç°¡å–®çš„ç›£æ§æˆ‘å€‘æ‡‰ç”¨\n\n\næ¸¬è©¦è…³æœ¬æˆ‘å€‘å¯«å€‹ç°¡å–®çš„è…³æœ¬\nnano test.sh#!/bin/bashecho test is startfor v in &#123;1..10&#125;do\techo this is a echo\tsleep 1doneecho test is end\n\nå»ºç«‹PM2é…ç½®pm2å…è¨±æˆ‘é€šéé…ç½®çš„æ–¹å¼ä¾†æ§åˆ¶æˆ‘å€‘æƒ³è¦ç›£æ§çš„æ–¹å¼ï¼Œæ‰€ä»¥æˆ‘å€‘å…ˆç”¢ç”Ÿä¸€å€‹åŸºæœ¬çš„ç¯„ä¾‹ï¼š\n$ pm2 init\npm2æœƒå¹«æˆ‘å€‘ç”¢ç”Ÿä¸€å€‹åç‚ºecosystem.config.jsçš„æª”æ¡ˆ\nç·¨è¼¯PM2é…ç½®æ¥ä¸‹ä¾†è¦ç·¨è¼¯é€™å€‹æª”æ¡ˆé…ç½®\nmodule.exports = &#123;  apps : [&#123;    name: &#x27;mytest&#x27;, // ä»»å‹™åç¨±    script: &#x27;test.sh&#x27;, // å•Ÿå‹•è…³æœ¬    // Options reference: https://pm2.io/doc/en/runtime/reference/ecosystem-file/    //args: &#x27;one two&#x27;,    instances: 1,    autorestart: true, // è‡ªå‹•é‡å•Ÿé–‹é—œ    max_restarts: 10, // æœ€å¤§é‡å•Ÿæ¬¡æ•¸    restart_delay: 30000, // é‡å•Ÿæ™‚é–“é–“éš”(æ¯«ç§’)    watch: false,    max_memory_restart: &#x27;1G&#x27;,    env: &#123;      NODE_ENV: &#x27;development&#x27;    &#125;,    env_production: &#123;      NODE_ENV: &#x27;production&#x27;    &#125;  &#125;],  deploy : &#123;    production : &#123;      user : &#x27;node&#x27;,      host : &#x27;127.0.0.1&#x27;,      ref  : &#x27;origin/master&#x27;,      repo : &#x27;git@github.com:repo.git&#x27;,      path : &#x27;/var/www/production&#x27;,      &#x27;post-deploy&#x27; : &#x27;npm install &amp;&amp; pm2 reload ecosystem.config.js --env production&#x27;    &#125;  &#125;&#125;;\n\næ“ä½œPM2ä»»å‹™å•Ÿå‹•ä»»å‹™ï¼š\n$ pm2 start ecosystem.config.js\n\nåœæ­¢ä»»å‹™ï¼š\n$ pm2 stop ecosystem.config.js\n\nè§€çœ‹ç›£æ§ï¼š\n$ pm2 monit\n\n\næ›´å¤šçš„ä»‹ç´¹è«‹ä¸Šå®˜ç¶²æŸ¥è©¢ï¼šPM2æ•™ç¨‹\n","categories":["pm2"],"tags":["linux","pm2"]},{"title":"ç¾åŒ– PowerShellï¼šOh My Posh å…¨æ”»ç•¥ (2025)","url":"/2025/09/18/powershell-improve-2025/","content":"æœ€è¿‘æŠŠå…§å»ºçš„ Windows PowerShell 5.1 ç›´æ¥å‡ç´šåˆ°è·¨å¹³å°çš„ PowerShell 7ï¼Œå•Ÿå‹•é€Ÿåº¦ã€äº’å‹•è£œå…¨èˆ‡å¤–è§€è‡ªè¨‚ä¸€æ¬¡å¤§é€²åŒ–ã€‚æ–¼æ˜¯æŠŠé€™æ¬¡å¾ã€Œå‡ç´š â†’ æ¬Šé™å·¥å…· (gsudo) â†’ Prompt ç¾åŒ– (Oh My Posh) â†’ æ–‡å­—&#x2F;å­—å‹ â†’ çµ‚ç«¯é¡è‰²ä¸»é¡Œã€çš„å®Œæ•´æµç¨‹æ•´ç†æˆç­†è¨˜ï¼Œä¹‹å¾Œé‡è£æˆ–æ›æ©Ÿä¹Ÿèƒ½å¿«é€Ÿè¤‡è£½ã€‚ \né€™ç¯‡ä½ å°‡æœƒç²å¾—ï¼š\n\nä¹¾æ·¨å¯é‡ç¾çš„ Profile åˆå§‹åŒ–æ­¥é©Ÿ\næå‡æ•ˆç‡çš„è£œå…¨èˆ‡æ¬Šé™æ“ä½œè¨­å®š\nä¸€å¥—æ¼‚äº®åˆè³‡è¨Šé‡è¶³å¤ çš„ Prompt ä¸»é¡Œ\nWindows Terminal é…è‰²èˆ‡å­—å‹å»ºè­°\n\nå…ˆä¾†çœ‹çœ‹å‡ç´šå‰ã€Œå°šæœªç¾åŒ–ã€çš„æ¨£å­ï¼Œç„¶å¾Œé–‹å§‹æ”¹é€ ï¼š\n\n\n\n\nPowerShell Profile æº–å‚™ä¹‹å¾Œçš„åŠŸèƒ½ï¼ˆè‡ªå‹•è£œå…¨ã€åˆ¥åã€æç¤ºä¸»é¡Œç­‰ï¼‰éƒ½æœƒå¯«é€²å€‹äºº Profileã€‚å…ˆç¢ºèªç›®å‰çš„ $PROFILE æ˜¯å¦å­˜åœ¨ï¼Œæ²’æœ‰å°±å»ºç«‹ã€‚\n# æŸ¥çœ‹ç›®å‰ä½¿ç”¨çš„ Profile è·¯å¾‘echo $PROFILE# æª¢æŸ¥æª”æ¡ˆæ˜¯å¦å­˜åœ¨ï¼ˆTrue = å·²å­˜åœ¨ï¼‰Test-Path $PROFILE# ç›´æ¥ç”¨è¨˜äº‹æœ¬ç·¨è¼¯notepad $PROFILE\n\nWindows PowerShell 5.1 ç›®éŒ„èˆŠç‰ˆï¼ˆå…§å»ºï¼‰ä½¿ç”¨çš„ç›®éŒ„åç¨±æ˜¯ WindowsPowerShellã€‚\n# æª¢æŸ¥èˆŠç‰ˆç›®éŒ„æ˜¯å¦å­˜åœ¨Test-Path &quot;C:\\Users\\&#123;ä½ çš„å¸³æˆ¶&#125;\\Documents\\WindowsPowerShell&quot;# å»ºç«‹ç›®éŒ„ï¼ˆè‹¥ä¸å­˜åœ¨ï¼‰New-Item -ItemType Directory -Path &quot;C:\\Users\\&#123;ä½ çš„å¸³æˆ¶&#125;\\Documents\\WindowsPowerShell&quot; -Force# å»ºç«‹ Profileï¼ˆç©ºæª”æ¡ˆï¼‰New-Item -ItemType File -Path $PROFILE -Force\n\nPowerShell 7 ç›®éŒ„PowerShell 7 ä¹‹å¾Œæ”¹ç”¨æ–°ç›®éŒ„ PowerShellï¼Œä¸è¦æ··ç”¨ã€‚\n# æª¢æŸ¥æ–°ç‰ˆç›®éŒ„æ˜¯å¦å­˜åœ¨Test-Path &quot;C:\\Users\\&#123;ä½ çš„å¸³æˆ¶&#125;\\Documents\\PowerShell&quot;# å»ºç«‹ç›®éŒ„New-Item -ItemType Directory -Path &quot;C:\\Users\\&#123;ä½ çš„å¸³æˆ¶&#125;\\Documents\\PowerShell&quot; -Force# å»ºç«‹ ProfileNew-Item -ItemType File -Path $PROFILE -Force\n\nå®‰è£ PowerShell 7ä½¿ç”¨ winget æœ€æ–¹ä¾¿ï¼š\n# å®‰è£winget install --id Microsoft.Powershell --source winget# æ›´æ–°winget upgrade --id Microsoft.Powershell\n\nå•Ÿç”¨æŒ‡ä»¤æ­·å² + AI é æ¸¬è£œå…¨å»ºè­°åœ¨ Profile ä¸­åŠ å…¥ PSReadLine è¨­å®šï¼š\n# ä½¿ç”¨æ­·å²ç´€éŒ„ (History) + å¤–æ›/æ“´å……ä¾†æº (Plugin) åŒæ™‚æä¾›é æ¸¬å»ºè­°ã€‚# å…¶ä»–å¯é¸å€¼ï¼šNone / History / Plugin / HistoryAndPluginSet-PSReadLineOption -PredictionSource HistoryAndPlugin# å°‡å¤šç­†å»ºè­°ä»¥æ¸…å–®é¢æ¿é¡¯ç¤ºæ–¼æ¸¸æ¨™ä¸‹æ–¹ï¼ˆListViewï¼‰ã€‚# è‹¥åå¥½è¡Œå…§ç°è‰²å­—é«”ï¼Œå¯æ”¹ç”¨ï¼šInlineViewSet-PSReadLineOption -PredictionViewStyle ListView\n\nè‹¥æƒ³ç«‹å³æ¸¬è©¦ï¼šæŠŠä»¥ä¸Šè²¼é€² notepad $PROFILE é–‹å•Ÿçš„æª”æ¡ˆæœ«ç«¯å¾Œå­˜æª”ï¼Œå†é–‹æ–°è¦–çª—ç”Ÿæ•ˆã€‚\ngsudoï¼šå¿«é€Ÿå–å¾—ç³»çµ±æ¬Šé™gsudo å¯è¦–ç‚º Windows ç‰ˆ sudoï¼Œä¸ç”¨æ¯æ¬¡å†æ‰‹å‹•å•Ÿå‹•ã€Œä»¥ç³»çµ±ç®¡ç†å“¡èº«åˆ†åŸ·è¡Œã€ã€‚\n# å®‰è£winget install gerardog.gsudo# æ›´æ–°winget upgrade gerardog.gsudo\n\nåœ¨ Profile ä¸­åŠ å…¥åˆ¥åï¼š\nSet-Alias sudo gsudo\n\nå¦‚æœåœ¨ Windows Terminal ä¸­æƒ³å»ºç«‹ä¸€å€‹è‡ªå‹•ææ¬Šå•Ÿå‹• PowerShell 7 çš„å‘½ä»¤ï¼Œå¯åœ¨è¨­å®šä¸­æŒ‡å®šï¼š\ngsudo.exe &quot;C:\\Program Files\\PowerShell\\7\\pwsh.exe&quot;\n\n\n\nOh My Poshï¼šPrompt ä¸»é¡Œç¾åŒ–å®‰è£ Nerd Font å­—å‹å…ˆåˆ° Nerd Fonts å®˜ç¶² ä¸‹è¼‰ä¸€æ¬¾å­—å‹ï¼ˆå»ºè­° FiraCode &#x2F; Meslo &#x2F; JetBrainsMonoï¼‰ï¼Œå®‰è£å¾Œåˆ° Windows Terminal çš„è©² Profile å…§å¥—ç”¨ï¼Œé¿å…ç¬¦è™Ÿäº‚ç¢¼ã€‚\nå®‰è£ Oh My Poshwinget install JanDeDobbeleer.OhMyPosh -s wingetwinget upgrade JanDeDobbeleer.OhMyPosh\n\nå•Ÿç”¨ä¸¦æŒ‡å®šä¸»é¡Œåœ¨ Profile å…§åŠ å…¥ï¼ˆå¯å…ˆç”¨ notepad $PROFILE é–‹å•Ÿï¼‰ï¼š\n# åˆå§‹åŒ–ï¼ˆé è¨­ä¸»é¡Œï¼‰oh-my-posh init pwsh | Invoke-Expression# æŒ‡å®š paradox ä¸»é¡Œï¼ˆå¯æ”¹æˆä»»æ„ .omp.jsonï¼‰oh-my-posh init pwsh --config &quot;$env:POSH_THEMES_PATH\\paradox.omp.json&quot; | Invoke-Expression\n\næŸ¥çœ‹æœ‰å“ªäº›å…§å»ºä¸»é¡Œï¼š\nGet-ChildItem $env:POSH_THEMES_PATH -Recurse -Filter &quot;*.omp.json&quot;\n\nä¿®æ”¹å¾Œé‡æ–°é–‹ä¸€å€‹æ–°çš„ PowerShell è¦–çª—å³å¯çœ‹åˆ°æ•ˆæœã€‚\nå®‰è£ Gitï¼ˆè‹¥å°šæœªå®‰è£ï¼‰winget install --id Git.Git -e --source wingetwinget upgrade Git.Git\n\nWindows Terminal ä¸»é¡Œé…è‰²ï¼ˆSchemesï¼‰å¯åˆ° Windows Terminal Themes æŒ‘é¸å–œæ­¡çš„è‰²ç¥¨ï¼Œå°‡ JSON ç‰‡æ®µè²¼é€²è¨­å®šæª”çš„ schemes é™£åˆ—ï¼Œå†æ–¼å°æ‡‰ Profile è¨­ &quot;colorScheme&quot; ç‚ºè©²åç¨±ã€‚\n\n\nä¾‹å¦‚ Espressoï¼š\n&#123;  &quot;background&quot;: &quot;#323232&quot;,  &quot;black&quot;: &quot;#353535&quot;,  &quot;blue&quot;: &quot;#6C99BB&quot;,  &quot;brightBlack&quot;: &quot;#535353&quot;,  &quot;brightBlue&quot;: &quot;#8AB7D9&quot;,  &quot;brightCyan&quot;: &quot;#DCF4FF&quot;,  &quot;brightGreen&quot;: &quot;#C2E075&quot;,  &quot;brightPurple&quot;: &quot;#EFB5F7&quot;,  &quot;brightRed&quot;: &quot;#F00C0C&quot;,  &quot;brightWhite&quot;: &quot;#FFFFFF&quot;,  &quot;brightYellow&quot;: &quot;#E1E48B&quot;,  &quot;cursorColor&quot;: &quot;#D6D6D6&quot;,  &quot;cyan&quot;: &quot;#BED6FF&quot;,  &quot;foreground&quot;: &quot;#FFFFFF&quot;,  &quot;green&quot;: &quot;#A5C261&quot;,  &quot;name&quot;: &quot;Espresso&quot;,  &quot;purple&quot;: &quot;#D197D9&quot;,  &quot;red&quot;: &quot;#D25252&quot;,  &quot;selectionBackground&quot;: &quot;#5B5B5B&quot;,  &quot;white&quot;: &quot;#EEEEEC&quot;,  &quot;yellow&quot;: &quot;#FFC66D&quot;&#125;\n\né–‹å•Ÿ JSON è¨­å®šï¼š\n\n\n\nå°‡ä¸Šè¿°ç‰‡æ®µåŠ å…¥ schemesã€‚\nåœ¨å°æ‡‰çš„ Profile ä¸­è¨­å®šï¼š&quot;colorScheme&quot;: &quot;Espresso&quot;ã€‚\n\nVS Code çµ‚ç«¯æ©Ÿè¨­å®šå¦‚æœä½ æœ‰åœ¨ä½¿ç”¨ VS Codeï¼Œè¨˜å¾—åŒæ­¥èª¿æ•´ç·¨è¼¯å™¨å…§å»ºçµ‚ç«¯æ©Ÿçš„å­—å‹è¨­å®šï¼Œå¦å‰‡ Oh My Posh çš„ç‰¹æ®Šç¬¦è™Ÿæœƒå‡ºç¾äº‚ç¢¼ã€‚\nè¨­å®šæ­¥é©Ÿ\né–‹å•Ÿ VS Code è¨­å®šï¼ˆCtrl + , æˆ– File &gt; Preferences &gt; Settingsï¼‰\næœå°‹ terminal.integrated.fontFamily\nå°‡å­—å‹è¨­å®šç‚ºä½ å‰›æ‰å®‰è£çš„ Nerd Fontï¼Œä¾‹å¦‚ï¼š&#x27;FiraCode Nerd Font&#x27;, &#x27;Meslo LG M DZ for Powerline&#x27;, Consolas, &#x27;Courier New&#x27;, monospace\n\nå»ºè­°è¨­å®šå€¼&#123;  &quot;terminal.integrated.fontFamily&quot;: &quot;&#x27;FiraCode Nerd Font&#x27;&quot;,  &quot;terminal.integrated.fontSize&quot;: 14,  &quot;terminal.integrated.cursorBlinking&quot;: true,  &quot;terminal.integrated.cursorStyle&quot;: &quot;line&quot;&#125;\n\né€™æ¨£è¨­å®šå¾Œï¼ŒVS Code å…§å»ºçµ‚ç«¯æ©Ÿå°±èƒ½æ­£ç¢ºé¡¯ç¤º Oh My Posh çš„æ‰€æœ‰åœ–ç¤ºå’Œç¬¦è™Ÿäº†ã€‚\n\n\næˆæœå±•ç¤º\n\nå¸Œæœ›é€™ç¯‡èƒ½å¹«åŠ©ä½ å¿«é€Ÿæ‰“é€ ä¸€å€‹å¥½çœ‹ã€å¥½è®€ã€å¥½ç”¨çš„çµ‚ç«¯ç’°å¢ƒã€‚å¦‚æœä½ æœ‰æ›´å–œæ­¡çš„ä¸»é¡Œæˆ–é¡å¤–æŠ€å·§ï¼Œä¹Ÿæ­¡è¿åˆ†äº«äº¤æµ ğŸ™Œ\n","categories":["windows"],"tags":["windows","powershell","terminal","vscode"]},{"title":"ç¾åŒ–PowerShell - oh-my-posh","url":"/2020/03/08/powershell-improve/","content":"\n\nå­å€¦windowsé è¨­çš„powershellä¸»é¡Œäº†å—?ç¾åœ¨é–‹å§‹ä¾†æ”¹é€ å®ƒå§!!!\n\n\nå®‰è£å¥—ä»¶é¦–å…ˆæ‰“é–‹powershellï¼š\n# å®‰è£posh-gitå¥—ä»¶Install-Module posh-git -Scope CurrentUser# å®‰è£oh-my-poshå¥—ä»¶Install-Module oh-my-posh -Scope CurrentUser\nåŸºæœ¬ä¸Šéƒ½è¼¸å…¥Yåˆ°åº•å°±å¯ä»¥å®‰è£å®Œæˆäº†!\nè¨­ç½®è¨­å®šæª”å»ºç«‹powershelå•Ÿå‹•è¨­å®šæª”\n# å–å¾—è¨­å®šæª”ä½ç½®$profile# å¾—åˆ°è¨­å®šæª”ä½ç½®~\\Documents\\WindowsPowerShell\\Microsoft.PowerShell_profile.ps1\næ‰“é–‹Microsoft.PowerShell_profile.ps1è¨­å®šæª”ï¼Œå¦‚æœæ²’æœ‰è«‹è‡ªè¡Œå»ºç«‹\n# ä½¿ç”¨UTF-8ç·¨ç¢¼chcp 65001# å¼•ç”¨posh-gitImport-Module posh-git# å¼•ç”¨oh-my-poshImport-Module oh-my-posh# è¨­ç½®Agnosterä¸»é¡ŒSet-Theme Agnoster\n\nå®‰è£powerlineå­—å‹ç”±æ–¼windowsé è¨­çš„å­—å‹ç„¡æ³•æ”¯æ´oh-my-poshæ‰€ä»¥æˆ‘å€‘éœ€è¦å¦å¤–å®‰è£é…åˆçš„å­—å‹æª”\npowerlineå­—å‹\n# cloneé …ç›®git clone https://github.com/powerline/fonts.git# åŸ·è¡Œinstall.ps1é€²è¡Œå®‰è£.\\install.ps1\n\nèª¿æ•´powershellå…§å®¹\n\n\nè«‹é¸æ“‡æœ‰powerlineçš„å­—å‹\n\n\né…ç½®é¡è‰²ä¸»é¡Œæœ€å¾Œæˆ‘å€‘è¦ç”¨scoopä¾†å®‰è£colortoolä¸»é¡Œå·¥å…·\n# ä¿è­‰å…è¨±è…³æœ¬åŸ·è¡Œset-executionpolicy remotesigned -scope currentuser# å®‰è£scoopiex (new-object net.webclient).downloadstring(&#x27;https://get.scoop.sh&#x27;)# å®‰è£colortoolscoop install colortool\næ¥è‘—æˆ‘å€‘å°±è¦ä¾†é…ç½®é¡è‰²ä¸»é¡Œ\n# å–å¾—é è¨­ä¸»é¡Œåˆ—è¡¨colortool -s# é è¨­ä¸»é¡Œ# campbell-legacy.ini# campbell.ini# cmd-legacy.ini# OneHalfDark.itermcolors# OneHalfLight.itermcolors# solarized_dark.itermcolors# solarized_light.itermcolors# è‡¨æ™‚æŸ¥çœ‹ä¸»é¡Œæ¨£å¼colortool &lt;ä¸»é¡Œåç¨±&gt;# è¨­ç½®é è¨­ä¸»é¡Œæ¨£å¼colortool -d &lt;ä¸»é¡Œåç¨±&gt;\n\né¸å®šä¸»é¡Œ\n# è¨­ç½®OneHalfDarkä¸»é¡Œcolortool OneHalfDark.itermcolors\n\n\n\né€™æ¨£æˆ‘å€‘å°±å¤§åŠŸå‘Šæˆæ‹‰!!\n","categories":["windows"],"tags":["windows","powershell","terminal"]},{"title":"Ubuntuå®‰è£RabbitMQ","url":"/2020/05/10/rabbitmq-install/","content":"å®‰è£erlangrabbitmqéœ€è¦ä¾é erlangé©…å‹•ï¼Œæ‰€ä»¥æˆ‘å€‘éœ€è¦å…ˆå®‰è£erlang\nä½¿ç”¨repositoryå®‰è£:\n$ wget https://packages.erlang-solutions.com/erlang-solutions_2.0_all.deb$ sudo dpkg -i erlang-solutions_2.0_all.deb$ sudo apt install esl-erlang\n\nå®‰è£rabbitmqgithubæ‰‹å‹•å®‰è£:\n$ wget https://github.com/rabbitmq/rabbitmq-server/releases/download/v3.8.3/rabbitmq-server_3.8.3-1_all.deb$ sudo dpkg -i rabbitmq-server_3.8.3-1_all.deb\n\n\n\nå¦‚æœå®‰è£éç¨‹æœ‰å•é¡Œå¯ä»¥è©¦è‘—aptæŒ‡ä»¤ä¿®å¾©\n$ sudo apt --fix-broken install\n\nä¿®æ”¹rabbitmqç®¡ç†æ’ä»¶å®‰è£å®Œrabbitmqä¹‹å¾Œ,æˆ‘å€‘æœƒéœ€è¦ä¸€å€‹å¯ä»¥ç®¡ç†çš„å·¥å…·,rabbitmqå¾ˆå¥½çš„æä¾›webçš„ç®¡ç†å·¥å…·\n$ rabbitmq-plugins enable rabbitmq_management\n\nå®‰è£å®Œç•¢å¾Œé‡å•Ÿæœå‹™æ¥è‘—åœ¨ç€è¦½å™¨è¼¸å…¥http://localhost:15672\n\n\nä¿®æ”¹rabbitmqè¨­ç½®å› ç‚ºrabbitmqé è¨­guestå¸³è™Ÿåªçµ¦æœ¬æ©Ÿç™»å…¥ï¼Œå¦‚æœéœ€è¦é–‹æ”¾å¤–éƒ¨ç™»å…¥å°±è¦ä¿®æ”¹è¨­ç½®\næ‰“é–‹&#x2F;etc&#x2F;rabbitmq&#x2F;rabbitmq.configï¼ŒåŠ å…¥ä»¥ä¸‹è¨­ç½®\n[\t&#123;\t\trabbit,\t\t[&#123;loopback_users, [&quot;guest&quot;]&#125;]\t&#125;].\n\né‡å•Ÿæœå‹™ä¹‹å¾Œæˆ‘å€‘å°±å¯ä»¥ç”¨gusetå¸³è™Ÿç™»å…¥äº†\n","categories":["linux"],"tags":["linux","ubuntu","rabbitmq"]},{"title":"TelegramBotç”³è«‹èˆ‡é–‹ç™¼","url":"/2019/11/09/telegrambot-install/","content":"telegrambotçš„ä½¿ç”¨èˆ‡é–‹ç™¼ç›¸è¼ƒæ–¼linebotä¾†èªªæ˜¯å¥½ä¸Šæ‰‹å¾ˆå¤šæ¥ä¸‹ä¾†å°±æ˜¯ä»‹ç´¹é–‹ç™¼èˆ‡ä½¿ç”¨æ–¹å¼\n\n\ntelegrambot ç”³è«‹åœ¨telegram search barä¸Šæœå°‹@BotFatherç„¶å¾Œå®Œæˆé™„åœ–çš„æµç¨‹\n\n\ntelegrambot APIä½¿ç”¨https://api.telegram.org/bot&#123;token&#125;/getUpdates# å–å¾—chatid&#123;    &quot;ok&quot;: true,    &quot;result&quot;: [        &#123;            &quot;update_id&quot;: 123456789,            &quot;message&quot;: &#123;                &quot;message_id&quot;: 99,                &quot;from&quot;: &#123;                    &quot;id&quot;: 123456789,                    &quot;is_bot&quot;: false,                    &quot;first_name&quot;: &quot;&quot;,                    &quot;last_name&quot;: &quot;&quot;,                    &quot;username&quot;: &quot;&quot;,                    &quot;language_code&quot;: &quot;&quot;                &#125;,                &quot;chat&quot;: &#123;                    &quot;id&quot;: -314847207,                    &quot;title&quot;: &quot;this is a title&quot;,                    &quot;type&quot;: &quot;group&quot;,                    &quot;all_members_are_administrators&quot;: true                &#125;,                &quot;date&quot;: 1573288754,                &quot;text&quot;: &quot;messsage&quot;            &#125;        &#125;    ]&#125;\n\nhttps://api.telegram.org/bot&#123;token&#125;/sendMessage?chat_id=&#123;channelid&#125;&amp;text=&#123;message&#125;# å˜—è©¦ç™¼é€è¨Šæ¯&#123;    &quot;ok&quot;: true,    &quot;result&quot;: &#123;        &quot;message_id&quot;: 99,        &quot;from&quot;: &#123;            &quot;id&quot;: 123456789,            &quot;is_bot&quot;: true,            &quot;first_name&quot;: &quot;&quot;,            &quot;username&quot;: &quot;&quot;        &#125;,        &quot;chat&quot;: &#123;            &quot;id&quot;: 123456789,            &quot;title&quot;: &quot;this is a title&quot;,            &quot;type&quot;: &quot;group&quot;,            &quot;all_members_are_administrators&quot;: true        &#125;,        &quot;date&quot;: 1573289062,        &quot;text&quot;: &quot;messsage&quot;    &#125;&#125;\n\næ›´å¤šAPIåƒè€ƒ Telegram Bot API\ntelegrambot JAVASDKä½¿ç”¨mavenå¼•ç”¨\n&lt;dependency&gt;  &lt;groupId&gt;org.telegram&lt;/groupId&gt;  &lt;artifactId&gt;telegrambots&lt;/artifactId&gt;  &lt;version&gt;4.4.0.1&lt;/version&gt;&lt;/dependency&gt;\n\nç¹¼æ‰¿TelegramLongPollingBot\n@Overridepublic String getBotUsername()&#123;\treturn &quot;userName&quot;;&#125;@Overridepublic String getBotToken()&#123;\treturn &quot;token&quot;;&#125;@Overridepublic void onUpdateReceived(Update update)&#123;\tif (update.hasMessage() &amp;&amp; update.getMessage().hasText())\t&#123;\t\tUser user = update.getMessage().getFrom();\t\tString rcvMessage = update.getMessage().getText();\t\tString source = String.format(&quot;æ”¶åˆ°ä¾†è‡ª[%s%s]çš„è¨Šæ¯å…§å®¹=%s&quot;, user.getFirstName(), user.getLastName(), rcvMessage);\t\tSendMessage message = new SendMessage().setChatId(update.getMessage().getChatId()).setText(source);\t\ttry\t\t&#123;\t\t\texecute(message);\t\t&#125;\t\tcatch (Exception e)\t\t&#123;\t\t\te.printStackTrace();\t\t&#125;\t&#125;&#125;\n\nBotClassä½¿ç”¨\npublic static void main(String[] args)&#123;\tApiContextInitializer.init();\tTelegramBotsApi botsApi = new TelegramBotsApi();\ttry\t&#123;\t\tbotsApi.registerBot(new Telegram());\t&#125;\tcatch (Exception e)\t&#123;\t\te.printStackTrace();\t&#125;&#125;\n\næœ€å¾Œå®Œæˆç¯„ä¾‹\n","categories":["telegram"],"tags":["telegram","bot"]},{"title":"Ubuntuå®‰è£MariaDB","url":"/2019/03/16/ubuntu-installmariadb/","content":"å®‰è£mariadbåœ¨ubuntuåº•ä¸‹å®‰è£mariadbå…¶å¯¦å¾ˆæ–¹ä¾¿ï¼Œåªè¦å¹¾å€‹æŒ‡ä»¤å°±å¯ä»¥å®Œæˆäº†ï¼š\nå…ˆæ›´æ–°å¥—ä»¶ï¼š\n$ sudo apt update$ sudo apt upgrade\n\nå®‰è£…MariaDBï¼š\n$ sudo apt install mariadb-server\n\nå•Ÿå‹•æœå‹™ï¼š\n$ sudo systemctl start mysql$ sudo systemctl enable mysql\n\næŸ¥çœ‹æœå‹™ï¼š\n$ sudo systemctl status mysql\n\n\n\nåˆå§‹åŒ–mariadb$ sudo mysql_secure_installation# æ˜¯å¦è¦è¨­ç½®rootæ¬Šé™å¯†ç¢¼- Set root password? [Y/n] y# æ˜¯å¦è¦ç§»é™¤åŒ¿åç™»å…¥- Remove anonymous users? [Y/n] y# æ˜¯å¦é—œé–‰é ç«¯ç™»å…¥- Disallow root login remotely? [Y/n] y# æ˜¯å¦ç§»é™¤testé è¨­åº«- Remove test database and access to it? [Y/n] y# æ˜¯å¦é‡æ–°è¼‰å…¥è³‡æ–™è¡¨æ¬Šé™- Reload privilege tables now? [Y/n] y\n\nå®Œæˆå¾Œæˆ‘å€‘å¯è©¦è‘—æœ¬æ©Ÿç™»å…¥æŸ¥çœ‹ï¼š\n$ sudo mysql -u root -p\n\nå»ºç«‹é ç«¯ä½¿ç”¨è€…æ¬Šé™åˆå§‹åŒ–dbä¹‹å¾Œæˆ‘å€‘é‚„éœ€è¦å»ºç«‹ä¸€çµ„å¸³è™Ÿï¼Œæä¾›ä½¿ç”¨è€…é ç«¯ç™»å…¥ä½¿ç”¨\nå»ºç«‹ä½¿ç”¨è€…èˆ‡æ¬Šé™ï¼š\n# å»ºç«‹ä½¿ç”¨è€…$ CREATE USER &#x27;my_account&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;my_password&#x27;;# å»ºç«‹ä½¿ç”¨è€…æ¬Šé™$ GRANT ALL PRIVILEGES ON *.* TO &#x27;my_account&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;my_password&#x27; WITH GRANT OPTION;# åˆ·æ–°è¨­ç½®$ FLUSH PRIVILEGES;\n\næŸ¥çœ‹çµæœï¼š\n# æŸ¥çœ‹ä½¿ç”¨è€…$ SELECT host,user,password FROM mysql.user;# æŸ¥çœ‹ä½¿ç”¨è€…æ¬Šé™$ SHOW GRANTS FOR &#x27;my_account&#x27;;\n\nå®Œæˆå¾Œæˆ‘å€‘å˜—è©¦é ç«¯ç™»å…¥æŸ¥çœ‹ï¼š\n$ mysql -h 192.168.0.100 -u &#x27;my_account&#x27; -p\n\nä¿®æ”¹mariadbè¨­ç½®å¦‚æœé‚„æ˜¯ä¸è¡Œå°±éœ€è¦å»ä¿®æ”¹mariadbçš„è¨­å®šæª”æ‰“é–‹&#x2F;etc&#x2F;mysql&#x2F;mariadb.conf.d&#x2F;50-server.cnfï¼Œæ‰¾åˆ°bind-addressä¸”å°‡ä»–è¨»è§£æ‰\n# Instead of skip-networking the default is now to listen only on# localhost which is more compatible and is not less secure.# bind-address  = 127.0.0.1\n\nä¹‹å¾Œå†é‡æ–°å•Ÿå‹•mariadbå°±å¯ä»¥äº†\n$ sudo systemctl restart mysql","categories":["linux"],"tags":["linux","ubuntu","mariadb"]},{"title":"å®‰è£Tomcat","url":"/2019/03/16/tomcat-install/","content":"å®‰è£Tomcatå…ˆä¸‹è¼‰mavenï¼š\n$ wget https://www-eu.apache.org/dist/tomcat/tomcat-9/v9.0.16/bin/apache-tomcat-9.0.16.tar.gz\nè§£é–‹åŒ…ï¼š\n$ tar xzvf apache-tomcat-9.0.16.tar.gz\nç§»å‹•åˆ°&#x2F;opt&#x2F;åº•ä¸‹ï¼š\n$ mv apache-tomcat-9.0.16 /opt\n\nè¨­ç½®Tomcatç’°å¢ƒè®Šæ•¸æ‰“é–‹&#x2F;etc&#x2F;profileé€™å€‹æª”æ¡ˆä¸¦ä¸”åœ¨æœ«å°¾åŠ å…¥ï¼š\nexport TOMCAT_HOME=/opt/apache-tomcat-9.0.16export PATH=$PATH:$TOMCAT_HOME/bin","categories":["tomcat"],"tags":["linux","tomcat"]},{"title":"Ubuntuå®‰è£Redis","url":"/2019/03/16/ubuntu-installredis/","content":"å®‰è£redisåœ¨ubuntuåº•ä¸‹å®‰è£redisè·Ÿå®‰è£mariadbä¸€æ¨£ï¼Œä¾é aptæŒ‡ä»¤å°±å¯ä»¥å®‰è£å®Œæˆï¼š\nå…ˆæ›´æ–°å¥—ä»¶ï¼š\n$ sudo apt update$ sudo apt upgrade\n\nå®‰è£…Redisï¼š\n$ sudo apt install redis-server\n\nå®‰è£å®Œæˆå¾Œredisæœƒè‡ªå‹•åŠ å…¥åˆ°æœå‹™ä¸­ï¼ŒæŸ¥çœ‹æœå‹™ï¼š\n$ sudo systemctl status redis\n\n\n\nä¿®æ”¹redisè¨­ç½®å¾Œæˆ‘å€‘è¦æä¾›çµ¦é ç«¯ä½¿ç”¨è€…ä½¿ç”¨å°±éœ€è¦å»ä¿®æ”¹è¨­å®šæª”ï¼Œæ‰“é–‹&#x2F;etc&#x2F;redis&#x2F;redis.confï¼Œæ‰¾åˆ°bindä¸”å°‡ä»–è¨»è§£æ‰\n# IF YOU ARE SURE YOU WANT YOUR INSTANCE TO LISTEN TO ALL THE INTERFACES# JUST COMMENT THE FOLLOWING LINE.# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~# bind 127.0.0.1 ::1\n\nä¹‹å¾Œå†é‡æ–°å•Ÿå‹•rediså°±å¯ä»¥äº†\n$ sudo systemctl restart redis","categories":["linux"],"tags":["linux","ubuntu","redis"]},{"title":"ä½¿ç”¨vscode+copilotå¿«é€Ÿå»ºç«‹å°ˆæ¡ˆ","url":"/2025/07/30/vscode-copilot-quick/","content":"å¾ Eclipse åˆ° VSCodeï¼šæˆ‘çš„ AI è¼”åŠ©é–‹ç™¼è½‰å‹ä¹‹è·¯å—¨å¤§å®¶å¥½ï¼ä»Šå¤©æƒ³è·Ÿå¤§å®¶åˆ†äº«ä¸€å€‹è®“æˆ‘æ—¢èˆˆå¥®åˆæœ‰é»ç·Šå¼µçš„æ±ºå®š â€”â€” æˆ‘è¦å¾ç”¨äº†å¥½å¹¾å¹´çš„ Eclipse è·³æ§½åˆ° VSCode äº†ï¼ğŸš€\nç‚ºä»€éº¼æ±ºå®šæ›ç·¨è¼¯å™¨ï¼Ÿè€å¯¦èªªï¼Œä½œç‚ºä¸€å€‹ Java é–‹ç™¼è€…ï¼ŒEclipse ä¸€ç›´æ˜¯æˆ‘çš„å¥½å¤¥ä¼´ã€‚ä½†æœ€è¿‘çœ‹åˆ°è¶Šä¾†è¶Šå¤šåŒäº‹åœ¨ç”¨ VSCodeï¼Œç‰¹åˆ¥æ˜¯æ­é… GitHub Copilot çš„é–‹ç™¼é«”é©—ï¼Œè®“æˆ‘é–‹å§‹å¥½å¥‡ï¼šã€Œæˆ‘æ˜¯ä¸æ˜¯éŒ¯éäº†ä»€éº¼ï¼Ÿã€\næ›´é‡è¦çš„æ˜¯ï¼Œç¾åœ¨ AI è¼”åŠ©é–‹ç™¼å·¥å…·ç™¼å±•å¾—é€™éº¼å¿«ï¼Œæˆ‘è¦ºå¾—æ˜¯æ™‚å€™è·Ÿä¸Šé€™å€‹æ½®æµäº†ã€‚ç•¢ç«Ÿï¼Œèª°ä¸æƒ³å¯« code å¯«å¾—æ›´å¿«ã€æ›´è°æ˜å‘¢ï¼ŸğŸ˜„\næº–å‚™å¥½äº†å—ï¼Ÿè®“æˆ‘å€‘ä¸€èµ·è¸ä¸Šé€™æ®µ AI è¼”åŠ©é–‹ç™¼çš„å†’éšªä¹‹æ—…å§ï¼ ğŸ‰\n\n\né€™ç¯‡æ–‡ç« æœƒèŠä»€éº¼ï¼Ÿé€™æ¬¡æˆ‘æƒ³åˆ†äº«çš„é‡é»æ˜¯ï¼šå¦‚ä½•ç”¨ VSCode + GitHub Copilot + è‡ªå®šç¾© Prompts ä¾†å¿«é€Ÿå»ºç«‹ Spring Boot å°ˆæ¡ˆã€‚\nå…·é«”ä¾†èªªï¼Œæˆ‘æœƒåˆ†äº«çµ¦å¤§å®¶ï¼š\n\nğŸ¯ ä½¿ç”¨ .github/prompts/*.prompt.md è‡ªå®šç¾©æç¤ºè©\nâš¡ å±•ç¤ºè®“ AI å¹«ä½ å¿«é€Ÿæ­å»ºå°ˆæ¡ˆæ¶æ§‹\nğŸ’¡ ä¸€äº›æˆ‘åœ¨è½‰æ›éç¨‹ä¸­å­¸åˆ°çš„å°æŠ€å·§\n\né€™æ¬¡çš„å¯¦æˆ°å…§å®¹æˆ‘éŒ„äº†ä¸€å€‹å®Œæ•´çš„æ“ä½œå½±ç‰‡ï¼Œå¾é›¶é–‹å§‹å»ºç«‹ä¸€å€‹ Spring Boot å°ˆæ¡ˆï¼š\nğŸ“º å¯¦æˆ°æ•™å­¸å½±ç‰‡ï¼šVSCode + AI å¿«é€Ÿå»ºç«‹ Spring Boot å°ˆæ¡ˆ\n\n  \n    \n    \n  \n\n\nå½±ç‰‡è£¡æˆ‘æœƒå±•ç¤ºï¼š\n\nVSCode ç’°å¢ƒçš„åŸºæœ¬è¨­å®š\nGitHub Copilot çš„ç¥å¥‡åŠŸèƒ½\nè‡ªå®šç¾© Prompt æ¨¡æ¿çš„è¨­è¨ˆæŠ€å·§\nå¯¦éš›å»ºç«‹ä¸€å€‹å¯é‹è¡Œçš„ Spring Boot æ‡‰ç”¨\n\nä½¿ç”¨é«”é©—çœŸå¯¦æ„Ÿæƒ³è€å¯¦èªªï¼Œå‰›é–‹å§‹ä½¿ç”¨ VSCode + GitHub Copilot çš„æ™‚å€™ï¼Œæˆ‘çœŸçš„è¢«éœ‡æ’¼åˆ°äº†ï¼ğŸ˜±\næµæš¢åº¦æ–¹é¢ï¼š\n\nğŸš€ å•Ÿå‹•é€Ÿåº¦ï¼šå¾é»æ“Šåˆ°å¯ä»¥é–‹å§‹å¯« codeï¼Œå¹¾ä¹æ˜¯ç§’é–‹ï¼è·Ÿ Eclipse é‚£ç¨®ã€Œå…ˆå»æ³¡æ¯å’–å•¡ã€çš„ç­‰å¾…å®Œå…¨ä¸åŒ\nâš¡ åæ‡‰é€Ÿåº¦ï¼šæ‰“å­—çš„æ™‚å€™æ²’æœ‰ä»»ä½•å»¶é²æ„Ÿï¼Œæª”æ¡ˆåˆ‡æ›ä¹Ÿæ˜¯ç¬é–“å®Œæˆ\nğŸ¯ è¨˜æ†¶é«”ä½¿ç”¨ï¼šæ˜é¡¯æ¯”å‚³çµ± IDE è¼•é‡å¾ˆå¤šï¼Œå¤šé–‹å¹¾å€‹å°ˆæ¡ˆä¹Ÿä¸æœƒè®“é›»è…¦å¡åˆ°çˆ†\n\nAI è¼”åŠ©çš„é©šè‰·ä¹‹è™•ï¼š\n\nğŸ§  ä»»å‹™è¦åŠƒèƒ½åŠ›ï¼šæœ€è®“æˆ‘éœ‡æ’¼çš„æ˜¯ Copilot èƒ½å¤ ç†è§£æ•´å€‹å°ˆæ¡ˆçš„æ¶æ§‹ï¼Œç•¶æˆ‘èªªã€Œå»ºç«‹ä¸€å€‹ Spring Boot å°ˆæ¡ˆã€æ™‚ï¼Œå®ƒä¸åªæ˜¯çµ¦æˆ‘ç‰‡æ®µç¨‹å¼ç¢¼ï¼Œè€Œæ˜¯èƒ½å»ºç«‹ä¸€å€‹å®Œæ•´å¯åŸ·è¡Œçš„å°ˆæ¡ˆ\nğŸ”¥ åŸ·è¡Œæ•ˆç‡ï¼šå¾ Controllerã€Serviceã€Repository åˆ°æ¸¬è©¦æª”æ¡ˆçš„å»ºç«‹ï¼Œæ•´å€‹æµç¨‹ä¸€æ°£å‘µæˆï¼Œå°±åƒæœ‰å€‹ç¶“é©—è±å¯Œçš„ Senior åœ¨æ—é‚Šå”åŠ©\nğŸ¯ ä¸Šä¸‹æ–‡ç†è§£ï¼šå®ƒæœƒè¨˜ä½æˆ‘ä¹‹å‰å¯«çš„ç¨‹å¼ç¢¼é¢¨æ ¼å’Œå°ˆæ¡ˆçµæ§‹ï¼Œæ–°å¢çš„ç¨‹å¼ç¢¼éƒ½èƒ½å®Œç¾èå…¥æ—¢æœ‰çš„æ¶æ§‹ä¸­\nğŸ’¡ æ™ºèƒ½è£œå…¨ï¼šä¸åªæ˜¯ç°¡å–®çš„èªæ³•è£œå…¨ï¼Œå®ƒæœƒæ ¹æ“šä¸Šä¸‹æ–‡çµ¦å‡ºå®Œæ•´çš„å‡½å¼å¯¦ä½œï¼Œç”šè‡³åŒ…å«éŒ¯èª¤è™•ç†\nğŸ“ æ–‡ä»¶ç”Ÿæˆï¼šé€£ READMEã€API æ–‡ä»¶ã€è¨»è§£éƒ½èƒ½è‡ªå‹•ç”Ÿæˆï¼Œè€Œä¸”å¯«å¾—æ¯”æˆ‘é‚„è©³ç´°ï¼ˆæœ‰é»å®³ç¾ ğŸ˜…ï¼‰\n\næœ€è®“æˆ‘é©šå˜†çš„æ˜¯ï¼šæ•´å€‹é–‹ç™¼æµç¨‹è®Šå¾—éå¸¸ã€Œè‡ªç„¶ã€ï¼Œå°±åƒåœ¨è·Ÿä¸€å€‹å¾ˆæ‡‚ä½ çš„å¤¥ä¼´å”ä½œã€‚ä»¥å‰å¯« code éœ€è¦é »ç¹æŸ¥æ–‡ä»¶ã€æƒ³èªæ³•ï¼Œç¾åœ¨å¾ˆå¤šæ™‚å€™ AI å°±ç›´æ¥çµ¦å‡ºäº†æˆ‘è¦çš„ç­”æ¡ˆã€‚\né€™ç¨®æ„Ÿè¦ºå°±åƒå¾ã€Œæ‰‹å‹•æª”ã€æ›åˆ°ã€Œè‡ªå‹•æª”ã€ä¸€æ¨£ â€”â€” ä½ é‚„æ˜¯åœ¨é–‹è»Šï¼Œä½†æ•´å€‹éç¨‹è®Šå¾—æ›´é †æš¢ã€æ›´å°ˆæ³¨åœ¨çœŸæ­£é‡è¦çš„é‚è¼¯æ€è€ƒä¸Šã€‚\n\næˆ‘æœƒä¸å®šæœŸåˆ†äº«æ›´å¤š VSCode + AI é–‹ç™¼çš„å¯¦æˆ°é«”é©—ï¼ ğŸ‰\n","categories":["vscodelife"],"tags":["java","vscode","github-copilot"]},{"title":"vscode+copiloté–‹ç™¼å¿ƒå¾—","url":"/2025/09/14/vscode-copilot-thoughts/","content":"å‰è¨€è·é›¢ä¸Šä¸€ç¯‡ ä½¿ç”¨ vscode+copilot å¿«é€Ÿå»ºç«‹å°ˆæ¡ˆ å·²ç¶“å¿«å…©å€‹æœˆã€‚é€™æ®µæ™‚é–“æˆ‘æŠŠä»¥å‰çš„å°ˆæ¡ˆæ‹¿ä¾†ç•¶ç·´æ‰‹é¡Œï¼ŒæŒçºŒç”¨ vscode æ­é… Copilot åšé‡æ§‹ï¼Œæœ€è¿‘ç®—æ˜¯åˆ°äº†ä¸€å€‹éšæ®µæ€§çš„é‡Œç¨‹ç¢‘ï¼Œä¹Ÿæ¯”è¼ƒæœ‰è³‡æ ¼æ•´ç†ä¸€ä¸‹å¿ƒå¾—èˆ‡é«”æ„Ÿã€‚\næˆæœé€Ÿè¦½å…ˆæ”¾çµæœï¼štinysocketã€‚ä¸‹é¢é€™å¼µæ˜¯ç›®å‰ README.md çš„æˆªåœ–ï¼š\n\n\n\n\næ–‡ä»¶æ’°å¯«é«”é©—è€å¯¦èªªï¼Œéå»æˆ‘éå¸¸ä¸æ“…é•·å¯«èªªæ˜æ–‡ä»¶â€”â€”å¸¸å¸¸å¡åœ¨æªè¾­æˆ–çµæ§‹ã€‚æ›ä¸Š vscode + Copilot ä¹‹å¾Œï¼Œæ•´é«”å¿ƒç†é˜»åŠ›æ˜é¡¯ä¸‹é™ã€‚æˆ‘åªéœ€è¦ä¸Ÿä¸€å¥ï¼šæ›¿å°ˆæ¡ˆé€²è¡Œå®Œæ•´çš„åˆ†æä¸¦ç”Ÿæˆé©åˆçš„æ–‡æª”ï¼Œå®ƒå°±æœƒé–‹å§‹ç”¢å‡ºå…§å®¹ã€‚é›–ç„¶ï¼š\n\nç”¢å‡ºçš„èªæ°£å¸¸å¸¸æœ‰ä¸€ç¨®ã€Œéåº¦ç†±æƒ…ã€æˆ–çµ±ä¸€çš„ AI é¢¨æ ¼ã€‚\nå¶çˆ¾æœƒå‡ºç¾ å¹»è¦ºï¼ˆè™›æ§‹ä¸å­˜åœ¨çš„æ¨¡çµ„ &#x2F; åƒæ•¸ &#x2F; æµç¨‹ï¼‰ã€‚\n\nä½†åœ¨ã€Œå¿«é€Ÿç”¢å‡ºè‰ç¨¿ã€é€™ä»¶äº‹ä¸Šï¼Œæ•ˆç‡æå‡éå¸¸æ˜é¡¯ã€‚ç¾åœ¨çš„æµç¨‹è®Šæˆï¼šAI å‡ºè‰ç¨¿ â†’ æˆ‘åšå¯¦éš›æ ¡é©—èˆ‡èªæ°£èª¿æ•´ â†’ å®Œæˆæœ€çµ‚ç‰ˆæœ¬ã€‚æ•´é«”æŠ•å…¥çš„å¿ƒåŠ›èˆ‡æ™‚é–“æˆæœ¬éƒ½ä¸‹é™ã€‚\né‡æ§‹èˆ‡æŠ€è¡“å‡ç´šé€™æ¬¡ tinysocket å¾éå»çš„ JDK 11 + Spring Boot 2ï¼Œä¸€æ¬¡è·³åˆ° JDK 21 + Spring Boot 3ã€‚åœ¨é‡æ§‹éç¨‹ä¸­æˆ‘é †æ‰‹èª¿æ•´äº†å¹¾å€‹é•·æœŸæƒ³æ”¹çš„é»ï¼š\n\nbuffer çš„å¯¦ä½œç­–ç•¥ï¼ˆè¨˜æ†¶é«”ä½¿ç”¨èˆ‡è¤‡ç”¨æ¨¡å‹ï¼‰\nprotocol çš„è¨»å†Šèˆ‡æ“´å……æ–¹å¼ï¼ˆæ¨¡çµ„åŒ–èˆ‡å¯æ’æ‹”ï¼‰\nserver-side &#x2F; client-side é‚è¼¯çš„è·è²¬åˆ‡åˆ†\n\næ•´é«”ä»£ç¢¼çµæ§‹ä¹¾æ·¨å¾ˆå¤šï¼Œé–‹ç™¼è¿­ä»£çš„ç¯€å¥ä¹Ÿæ›´é †ã€‚é›–ç„¶é‚„ä¸åˆ°ã€Œvibe codingã€é‚£ç¨®ä¸€æ°£å‘µæˆçš„æ²‰æµ¸æµæš¢ï¼Œä½† AI è¼”åŠ©é–‹ç™¼æ˜¯å¯¦å¯¦åœ¨åœ¨å¹«åŠ©æˆ‘ç”¢å‡ºæƒ³è¦çš„çµæœã€‚é€™ä¸€æ¬¡æˆ‘æ²’æœ‰èŠ±å¤ªå¤šæ™‚é–“é‘½ç ” copilot-instructions.md æˆ– spec.md çš„é€²éšç©æ³•â€”â€”ç´”ç²¹ä»¥ã€Œè‡ªç„¶äº’å‹•ã€çš„ä½¿ç”¨æ¨¡å¼ï¼Œå°±å·²ç¶“æœ‰ä¸éŒ¯çš„æ„Ÿå—ã€‚æ›´ç›´æ¥çš„æ„Ÿæƒ³ï¼švscode + Copilot çš„é«”é©—å®Œå…¨ç¢¾å£“ eclipse + Copilotã€‚å¦‚æœæœªä¾† Copilot é‚„æ˜¯ç„¡æ³•åœ¨ eclipse æ·±åº¦æ•´åˆï¼Œé‚£æˆ‘æœƒå»ºè­°ä¹¾è„†ç›´æ¥è½‰é™£ vscodeã€‚\nå‰ç«¯ Demoï¼ˆAI å”ä½œï¼‰æˆ‘ä¸æ“…é•·é–‹ç™¼å‰ç«¯ï¼Œä¹Ÿåªç•¥æ‡‚ä¸€é» JSã€‚ä¹‹å‰ç‚ºäº†å±•ç¤º tinysocket çš„ websocket ä½¿ç”¨æƒ…å¢ƒï¼Œå‹‰å¼·åˆ»éä¸€å€‹å¾ˆé™½æ˜¥çš„ demoã€‚é€™æ¬¡å‡ç´šæ™‚æˆ‘æŠŠé‚£å€‹é é¢ä¹Ÿä¸€èµ·ç¿»æ–°ã€‚éç¨‹å¾ˆç°¡å–®ï¼šæˆ‘æè¿°ç¾æœ‰å°ˆæ¡ˆçµæ§‹ã€æƒ³è¦çš„äº’å‹•èˆ‡ç‹€æ…‹ï¼ŒCopilot åœ¨å¹¾åˆ†é˜å…§å°±çµ¦äº†ä¸€å€‹ã€Œèƒ½è·‘ã€æœ‰åŸºæœ¬çµæ§‹èˆ‡æ¨£å¼ã€çš„ç‰ˆæœ¬ã€‚æˆ‘å¾Œé¢å†é‡å°ç´°ç¯€ï¼ˆæ’ç‰ˆ &#x2F; é‚è¼¯å¾®èª¿ &#x2F; éŒ¯èª¤è™•ç†ï¼‰åšä¿®æ­£ã€‚é›–ç„¶ä¸è‡³æ–¼åˆ°éœ‡æ’¼ï¼Œä½†åœ¨ç¬¬ä¸€æ¬¡ç”¢å‡ºçµæœçš„ç¬é–“ï¼Œå¯¦éš›çš„è¡æ“Šæ„Ÿé‚„æ˜¯æœ‰çš„ã€‚\nä»¥ä¸‹æ˜¯æœ€å¾Œçš„ demo æˆªåœ–ï¼š\n\n\nå–®å…ƒæ¸¬è©¦èˆ‡æœªä¾†å·¥ä½œæ¨¡å¼é€™æ¬¡æˆ‘æ²’æœ‰éå¸¸èªçœŸåœ°è£œé½Šæ‰€æœ‰å–®å…ƒæ¸¬è©¦ï¼Œä½†è©¦è‘—è®“ Copilot å¹«å¿™è¦åŠƒæ¸¬è©¦å ´æ™¯èˆ‡ç”Ÿç”¢æ¸¬è©¦éª¨æ¶ã€‚é«”æ„Ÿçµè«–æ˜¯ï¼šã€Œå–®å…ƒæ¸¬è©¦ 80% å¯ä»¥äº¤çµ¦ AI å…ˆèµ·é ­ã€ã€‚é€éè‡ªç„¶èªè¨€æè¿°ï¼šéœ€æ±‚ â†’ é‚Šç•Œæ¢ä»¶ â†’ ä¾‹å¤–æƒ…å¢ƒï¼ŒAI å°±èƒ½å¿«é€Ÿé‹ªå¥½ä¸€çµ„æ¸¬è©¦æª”ã€‚å¾ŒçºŒäººé¡å†å°ˆæ³¨åœ¨ï¼š\n\né‡æ¸…èªæ„æ˜¯å¦èˆ‡å¯¦éš›éœ€æ±‚ä¸€è‡´\nè£œå¼· edge cases\næ•´åˆ CI &#x2F; coverage é–€æª»\n\næœªä¾†çœŸçš„å¯èƒ½è®Šæˆï¼šæ¸¬è©¦å¾ã€æ‰‹å¯«ç”¢å‡ºã€è½‰ç‚ºã€å¯©ç¨¿é©—æ”¶ã€æ¨¡å¼ã€‚\nçµèªç°¡å–®ç¸½çµï¼šå·¥å…·èˆ‡å·¥ä½œæ–¹å¼çš„ç”Ÿæ…‹æ­£åœ¨å¿«é€Ÿè½‰è®Šã€‚AI ä¸æ˜¯ã€Œå–ä»£ã€ï¼Œè€Œæ˜¯æŠŠé‡æ§‹ &#x2F; èµ·ç¨¿ &#x2F; æ¨¡æ¿åŒ–å·¥ä½œæˆæœ¬å¾€ä¸‹å£“ï¼Œè®“æˆ‘å€‘æŠŠè…¦åŠ›ç•™çµ¦ç³»çµ±è¨­è¨ˆã€é—œéµæŠ½è±¡èˆ‡å“è³ªåˆ¤æ–·ã€‚æ¥ä¸‹ä¾†æˆ‘æœƒå†èŠ±äº›æ™‚é–“æ¢ç´¢æ›´é€²éšçš„ä¸Šä¸‹æ–‡é¤µé¤Šï¼ˆå¦‚å°ˆæ¡ˆè¦æ ¼ã€è§’è‰²åŒ–æŒ‡ä»¤ï¼‰ï¼Œä¹‹å¾Œå¦‚æœæœ‰æ–°çš„é«”é©—ï¼Œå†å¯«ä¸€ç¯‡çºŒé›†ã€‚ \næˆ‘å€‘ä¸‹æ¬¡è¦‹ã€‚\n","categories":["vscodelife"],"tags":["java","vscode","github-copilot"]},{"title":"Windows Terminalä¸»é¡Œé…ç½®","url":"/2020/03/09/windowsterminal-scheme/","content":"\n\n\n\næ‰“é–‹WindowsTerminalçš„Settingè¨­ç½®ä¸»é¡Œ\nDraculaä¸»é¡Œ\n&quot;profiles&quot;:[\t&#123;\t\t&quot;name&quot;: &quot;Windows PowerShell&quot;,\t\t&quot;commandline&quot;: &quot;powershell.exe&quot;,\t\t&quot;cursorColor&quot; : &quot;#657B83&quot;, // å…‰æ¨™é¡è‰²\t\t&quot;cursorShape&quot; : &quot;vintage&quot;, // å…‰æ¨™é¡å‹\t\t&quot;colorScheme&quot; : &quot;Dracula&quot;, // é…ç½®ä¸»é¡Œ\t\t&quot;fontFace&quot; : &quot;DejaVu Sans Mono for Powerline&quot;, // å­—å‹\t\t&quot;fontSize&quot; : 12, // å­—å‹å¤§å°\t\t&quot;hidden&quot;: false\t&#125;,\t&#123;\t\t&quot;name&quot;: &quot;cmd&quot;,\t\t&quot;commandline&quot;: &quot;cmd.exe&quot;,\t\t&quot;cursorColor&quot; : &quot;#657B83&quot;,\t\t&quot;cursorShape&quot; : &quot;vintage&quot;,\t\t&quot;colorScheme&quot; : &quot;Dracula&quot;,\t\t&quot;fontFace&quot; : &quot;DejaVu Sans Mono for Powerline&quot;,\t\t&quot;fontSize&quot; : 12,\t\t&quot;hidden&quot;: false\t&#125;],&quot;schemes&quot;:[\t&#123;\t\t&quot;name&quot; : &quot;Dracula&quot;,\t\t&quot;background&quot; : &quot;#282A36&quot;,\t\t&quot;black&quot; : &quot;#21222C&quot;,\t\t&quot;blue&quot; : &quot;#BD93F9&quot;,\t\t&quot;brightBlack&quot; : &quot;#6272A4&quot;,\t\t&quot;brightBlue&quot; : &quot;#D6ACFF&quot;,\t\t&quot;brightCyan&quot; : &quot;#A4FFFF&quot;,\t\t&quot;brightGreen&quot; : &quot;#69FF94&quot;,\t\t&quot;brightPurple&quot; : &quot;#FF92DF&quot;,\t\t&quot;brightRed&quot; : &quot;#FF6E6E&quot;,\t\t&quot;brightWhite&quot; : &quot;#FFFFFF&quot;,\t\t&quot;brightYellow&quot; : &quot;#FFFFA5&quot;,\t\t&quot;cyan&quot; : &quot;#8BE9FD&quot;,\t\t&quot;foreground&quot; : &quot;#F8F8F2&quot;,\t\t&quot;green&quot; : &quot;#50FA7B&quot;,\t\t&quot;purple&quot; : &quot;#FF79C6&quot;,\t\t&quot;red&quot; : &quot;#FF5555&quot;,\t\t&quot;white&quot; : &quot;#F8F8F2&quot;,\t\t&quot;yellow&quot; : &quot;#F1FA8C&quot;\t&#125;],","categories":["windows"],"tags":["windows","powershell","terminal"]}]